/* Copyright (C) 9208-9721 Quebec, Inc - All Rights Reserved
* Unauthorized copying of this file, via any medium is strictly prohibited
* Proprietary and confidential
* Written by Jason Rudland <jason.g.rudland@gmail.com>, September 2022
*/'use strict';const _0x57cadf=_0x3b0d;(function(_0x44a607,_0x1555a7){const _0x18d642=_0x3b0d,_0x44cf68=_0x44a607();while(!![]){try{const _0x2c4d4c=parseInt(_0x18d642(0xca))/0x1+parseInt(_0x18d642(0x1ae))/0x2+-parseInt(_0x18d642(0x197))/0x3+-parseInt(_0x18d642(0xd8))/0x4+parseInt(_0x18d642(0x101))/0x5*(-parseInt(_0x18d642(0x171))/0x6)+parseInt(_0x18d642(0x142))/0x7*(parseInt(_0x18d642(0x158))/0x8)+-parseInt(_0x18d642(0x216))/0x9*(-parseInt(_0x18d642(0x156))/0xa);if(_0x2c4d4c===_0x1555a7)break;else _0x44cf68['push'](_0x44cf68['shift']());}catch(_0x299118){_0x44cf68['push'](_0x44cf68['shift']());}}}(_0x1933,0x9f537));const loopback=require(_0x57cadf(0x1b1)),{getMinerSystemInfo,getRemotesPools,getMinerSettings,getMinerStatus,getMinerInfo,getMinerReboot,getMinerReset,getMinerType,getMinerTypeMap,createMinerInfo,updateMinerSettings,updateMinerNetworkSettings,retrieveMinerNetworkDiagnostics,updateMinerFirmware,updateEnableSSH,validateMinerConfig,extractAccountAndWorkerNumber,upsertMinerInfo,getKernelLogs,getPoolIDs,deriveApiVersion,completeMinerVersion}=require(_0x57cadf(0xc6)),{getPlugin}=require(_0x57cadf(0xf8)),{getDataCenterSettings}=require(_0x57cadf(0xcf)),_=require(_0x57cadf(0x18a)),{scanForMinerVersions,getScanCache,ipDesc}=require('./net-scan'),{upsertLease}=require('./dhcp-server'),{offlineMiners}=require(_0x57cadf(0x1e1)),config=require('../../common/config'),{registerProxy}=require(_0x57cadf(0x1c2)),{slackMessage}=require(_0x57cadf(0x1ce)),{socketSend}=require(_0x57cadf(0x135)),promiseLimit=require(_0x57cadf(0xcb)),{inspect}=require('util'),{getIPRange}=require(_0x57cadf(0x200)),{api}=require('slack'),{minerTypeMap}=config;let validMiners={},alertableMiners={},invalidMiners={},reportedDates={};const notifyTime=0x18/0x3*0x3c*0x3c*0x3e8,CONFIGURE_MODE_DETECT=0x1,CONFIGURE_MODE_PROVISION=0x2,CONFIGURE_MODE_REPOSITION=0x3,CONFIGURE_MODE_DISCOVERY=0x4,MIN_ACCEPTED_COUNT=0x1f4,MAX_REJECTED_RATE=0.04,MAX_CHIP_ERROR_RATE=0x3c,MIN_CHIP_TEMPERATURE=0x1e,MIN_VIABLE_FAN_SPEED=0x7d0,deploymentDebounceTime=0xf*0x3e8,MINER_OC_INTERVAL_MINUTES=0x25,MINER_BOOT_MAX_MINUTES=0x15,MINER_LOG_FAILING_MINUTES=MINER_BOOT_MAX_MINUTES-0x5,MINER_BOOT_CHECK_MINUTES=0x7,MINER_STATE_NORMAL=_0x57cadf(0x123),MINER_STATE_BOOTING=_0x57cadf(0x1a6),MINER_STATE_REBOOTING=_0x57cadf(0x109),MINER_STATE_DEGRADING=_0x57cadf(0xcd),MINER_STATE_STALLED=_0x57cadf(0x15e),MINER_STATE_CLOCKING='clocking',MINER_STATE_REJECTING=_0x57cadf(0x134),MINER_STATE_STRUGGLING=_0x57cadf(0xf3),MINER_STATE_FAILING=_0x57cadf(0x105),MINER_STATE_ERRORING=_0x57cadf(0x17c),failureMinCheckPercent=0x3c,struggleHighCheckPercent=0x55,CHART_TREND_HISTORY_COUNT=0x28,timeSlotPeriod=0x3;let dataCenterSettings=null,isBatchOperation=![];const SSH_PORT_STATE=global[_0x57cadf(0x214)],diagnostic=process[_0x57cadf(0x1fe)][_0x57cadf(0x1f4)]?JSON['parse'](process[_0x57cadf(0x1fe)][_0x57cadf(0x1f4)]):{'type':'ping','ipAddress':'8.8.8.8'};Math[_0x57cadf(0x143)]=_0x5c4371=>(_0x5c4371?.['length']?_0x5c4371:[0x0])[_0x57cadf(0x14b)]((_0x3f658f=0x0,_0x492f36=0x0)=>parseFloat(_0x492f36)+parseFloat(_0x3f658f))/(_0x5c4371?.[_0x57cadf(0x1f2)]||0x1);function statusObject(_0x3d31f9,_0x4005cf,_0x2f222c,_0x575782){const {ipAddress:_0x5d1805,macAddress:_0x48d09f}=_0x2f222c;return{'action':_0x3d31f9,'status':_0x4005cf,'ipAddress':_0x5d1805,'macAddress':_0x48d09f,'minerConfigOptions':_0x575782};}let network;async function setDataCenterSettings(_0x1d645b){const _0x2af434=_0x57cadf;dataCenterSettings=_0x1d645b,network={'netmask':_0x1d645b['dhcpSettings'][_0x2af434(0x18f)],'gateway':_0x1d645b[_0x2af434(0x208)][_0x2af434(0x113)],'dnsServer':_0x1d645b[_0x2af434(0x208)][_0x2af434(0x113)]};}async function provisionMiner({ipAddress:_0x42a4c8,minerConfigOptions:minerConfigOptions={},minerTyped:minerTyped={}}){const _0x1eaeac=_0x57cadf,_0x1ca508=await getMinerSystemInfo({'ipAddress':_0x42a4c8,'minerTyped':minerTyped})[_0x1eaeac(0x1d1)](_0x4fea49=>{const _0x599ff7=_0x1eaeac;let _0xf5cde7=_0x599ff7(0x1db)+_0x42a4c8+_0x599ff7(0x153);_0x4fea49[_0x599ff7(0x1b5)]?_0x4fea49[_0x599ff7(0x1b5)]===0x191?_0xf5cde7+='\x20Unauthorized.\x20Password\x20incorrect?':_0xf5cde7+=_0x599ff7(0x15a)+_0x4fea49[_0x599ff7(0x1b5)]:_0xf5cde7+=_0x4fea49[_0x599ff7(0x199)];sendMessage({'text':_0xf5cde7});throw _0x4fea49;});if(!_0x1ca508)throw new Error(_0x1eaeac(0x1a8)+_0x42a4c8);const {macAddress:_0x4f5a09}=_0x1ca508,{pools:pools=[]}=await getRemotesPools({'ipAddress':_0x42a4c8,'macAddress':_0x4f5a09},minerTyped)||{'pools':[{'user':''}]},_0x28ac49=pools[_0x1eaeac(0x104)](_0x2b003d=>_0x2b003d[_0x1eaeac(0x19b)]),{accountName:_0x5449cf,workerName:_0x131d50,workerTypeNumber:_0x5b0a91}=await extractAccountAndWorkerNumber({'poolWorkers':_0x28ac49})||{},_0x45fb32={'accountName':_0x5449cf,'workerName':_0x131d50,'workerTypeNumber':_0x5b0a91};let _0x1759ed=await getMinerInfo({'macAddress':_0x4f5a09,'accountName':_0x5449cf,'workerName':_0x131d50,'ipAddress':_0x42a4c8}),_0xa7893=_0x1eaeac(0x1f7)+_0x5449cf+','+_0x131d50+_0x1eaeac(0x112)+_0x42a4c8+','+_0x4f5a09+']\x20detected.';sendMessage({'text':_0xa7893}),socketSendMiners([_0x1ca508],_0x1eaeac(0x1a2));const _0x4dcf74=dataCenterSettings[_0x1eaeac(0x201)];return configureMiner({'minerSystemInfo':_0x1ca508,'workerProperties':_0x45fb32,'minerInfo':_0x1759ed,'minerConfigOptions':minerConfigOptions,'shouldConfigurePools':_0x4dcf74});}async function provisionUnresponsiveMiner({ipAddress:_0x23b8fb,macAddress:_0x1f5777,minerName:_0x22eb16}){const _0x400132=_0x57cadf,_0x283264={'macAddress':_0x1f5777,'ipAddress':_0x23b8fb,'minerType':_0x22eb16};return configureMiner({'minerSystemInfo':_0x283264})[_0x400132(0x1d1)](_0x5b73fa=>{const _0x3db52e=_0x400132;let _0x218b50=_0x3db52e(0x1d0)+_0x1f5777+_0x3db52e(0x153);sendMessage({'text':_0x218b50});throw _0x5b73fa;});}async function getDataCenterRacklist({ipAddress:_0x4f6be1,macAddress:_0x37471a,minerName:_0x499a63}){const _0x588f61=_0x57cadf,_0x4b5e5c=loopback[_0x588f61(0xe7)]('minerInfo');let _0x31bc5f={'where':{'placement.position':{'nin':[0x0,'',null,undefined,![]]}},'fields':{'placement':!![]},'order':[_0x588f61(0xdb),_0x588f61(0x184)]},_0x2b14f7=await _0x4b5e5c[_0x588f61(0x17b)](_0x31bc5f)[_0x588f61(0x104)](_0x51cce9=>{const {placement:_0x3e97de}=_0x51cce9,{hall:_0xe19ac,rack:_0x1e5398}=_0x3e97de||{};return{'hall':_0xe19ac,'rack':_0x1e5398};}),_0xe3f35b=_0x2b14f7['filter']((_0x9466fb,_0x4e4f4e,_0x8eafd7)=>_0x8eafd7['findIndex'](_0x322064=>[_0x588f61(0x1bb),_0x588f61(0x14f)]['every'](_0x540389=>_0x322064[_0x540389]===_0x9466fb[_0x540389]))===_0x4e4f4e);return _0xe3f35b=_['groupBy'](_0xe3f35b,_0x19070a=>_0x19070a?.[_0x588f61(0x1bb)]||'Not\x20assigned'),_0xe3f35b;}async function provisionMinersByType({ipAddresses:_0x298188,poolIDs:_0x4936d5,minerUpdates:_0x3b10a4,minerConfigOptions:minerConfigOptions={}}){const _0x44e389=_0x57cadf,_0x44efe8=loopback[_0x44e389(0xe7)]('minerInfo');let _0x48af9d={};isBatchOperation=!![];let _0x33b1a8=_0x3b10a4[_0x44e389(0x1ad)]||_0x3b10a4[_0x44e389(0x16d)]||_0x3b10a4[_0x44e389(0x209)]?promiseLimit(0x6):promiseLimit(0x64);_0x3b10a4[_0x44e389(0x1dc)]&&(_0x33b1a8=promiseLimit(0x1));_0x298188&&_0x298188['length']&&(_0x48af9d={'where':{'ipAddress':{'inq':_0x298188}}});async function _0x4b492d(_0x1d5bf4){const _0x34b089=_0x44e389,{minerType:_0x3c8e38,ipAddress:_0x478dc8}=_0x1d5bf4,_0x12a005=getMinerTypeMap(_0x1d5bf4),_0x1a633f=deriveApiVersion({'minerInfo':_0x1d5bf4,'minerTyped':_0x12a005});if(_0x478dc8===dataCenterSettings[_0x34b089(0x208)][_0x34b089(0x113)][0x0]||_0x478dc8===dataCenterSettings[_0x34b089(0x208)][_0x34b089(0xc3)])return statusObject('reserved',_0x34b089(0x163),_0x1d5bf4,minerConfigOptions);!_0x4936d5&&(_0x4936d5=await getPoolIDs(_0x1d5bf4));if(_0x3b10a4[_0x34b089(0x106)])return _0x1d5bf4[_0x34b089(0x106)](()=>statusObject(_0x34b089(0x1c1),_0x34b089(0x163),_0x1d5bf4,minerConfigOptions));if(_0x3b10a4[_0x34b089(0x14e)])return getMinerReboot(_0x1d5bf4,_0x12a005,_0x1a633f)[_0x34b089(0x1aa)](()=>statusObject('rebooted',_0x34b089(0x163),_0x1d5bf4,minerConfigOptions));if(_0x3b10a4[_0x34b089(0x202)])return getMinerReset(_0x1d5bf4,_0x12a005,_0x1a633f)[_0x34b089(0x1aa)](()=>statusObject(_0x34b089(0x202),'success',_0x1d5bf4,minerConfigOptions));if(_0x3b10a4['persistLogs']){let _0x1f8427='tmp/'+_0x1d5bf4[_0x34b089(0x127)]+_0x34b089(0xc4);return getKernelLogs({'minerInfo':_0x1d5bf4,'minerTyped':_0x12a005,'apiVersion':_0x1a633f,'maxSockets':0xa,'filepath':_0x1f8427})[_0x34b089(0x1aa)](()=>statusObject(_0x34b089(0x11f),_0x34b089(0x163),_0x1d5bf4,minerConfigOptions));}if(_0x3b10a4[_0x34b089(0x1ad)])return updateEnableSSH({'minerInfo':_0x1d5bf4,'minerTyped':_0x12a005,'minerInfo':_0x1d5bf4,'apiVersion':_0x1a633f})[_0x34b089(0x1aa)](_0x826182=>{const _0xa9cc1f=_0x34b089;return _0x1d5bf4[_0xa9cc1f(0xf6)]=_0x826182?_0x826182:![],upsertMinerInfo({'minerInfo':_0x1d5bf4})['then'](_0x529dda=>{const _0x4dfaff=_0xa9cc1f;return statusObject(_0x4dfaff(0x1ad),_0x1d5bf4[_0x4dfaff(0xf6)],_0x1d5bf4,minerConfigOptions);});});if(_0x3b10a4[_0x34b089(0x16d)])return updateMinerNetworkSettings({'minerInfo':_0x1d5bf4,'network':network,'minerTyped':_0x12a005,'apiVersion':_0x1a633f})[_0x34b089(0x1aa)](_0x44ee1d=>{const _0x2f19fa=_0x34b089;return statusObject('enableStaticIP',_0x44ee1d?_0x2f19fa(0x17f):_0x2f19fa(0x1bd),_0x1d5bf4,minerConfigOptions);});if(_0x3b10a4[_0x34b089(0x209)])return _0x1d5bf4['enableManagedClocking']=/\bon\b/i[_0x34b089(0x193)](_0x3b10a4['enableManagedClocking']),upsertMinerInfo({'minerInfo':_0x1d5bf4})[_0x34b089(0x1aa)](_0x15afa2=>{const _0x369b2d=_0x34b089;return statusObject(_0x369b2d(0x209),_0x15afa2?_0x369b2d(0x17f):_0x369b2d(0x1bd),_0x1d5bf4,minerConfigOptions);});if(_0x3b10a4[_0x34b089(0x1dc)]){let _0x335589;if(/overclock/i[_0x34b089(0x193)](_0x3b10a4[_0x34b089(0x1dc)])&&_0x12a005[_0x34b089(0x19c)])_0x335589=_0x12a005[_0x34b089(0x19c)];else{if(/lsf/i['test'](_0x3b10a4[_0x34b089(0x1dc)])&&_0x12a005[_0x34b089(0x15c)])_0x335589=_0x12a005['latestStableFirmware'];else{if(/\.(gz|swu)$/i[_0x34b089(0x193)](_0x3b10a4['updateFirmware'])&&_0x3b10a4[_0x34b089(0x1dc)])_0x335589=_0x3b10a4[_0x34b089(0x1dc)];else return statusObject('firmwareUpdate',_0x34b089(0x15d),_0x1d5bf4,minerConfigOptions);}}return updateMinerFirmware({'minerInfo':_0x1d5bf4,'minerTyped':_0x12a005,'firmwareFileName':_0x335589,'apiVersion':_0x1a633f})[_0x34b089(0x1aa)](async _0x3c86b2=>{const _0x19373b=_0x34b089;_0x1d5bf4[_0x19373b(0xf6)]=![],_0x1d5bf4[_0x19373b(0x185)]=null;_0x3c86b2===SSH_PORT_STATE['OPEN']&&(_0x1d5bf4[_0x19373b(0x1eb)]=_0x335589,_0x1d5bf4[_0x19373b(0xf7)]=_0x1a633f);const _0x1c6f03=await upsertMinerInfo({'minerInfo':_0x1d5bf4});if(_0x3c86b2!=SSH_PORT_STATE[_0x19373b(0x16c)])return statusObject(_0x19373b(0xe5),_0x19373b(0x1bd),_0x1d5bf4,minerConfigOptions);return statusObject(_0x19373b(0xe5),_0x19373b(0x163),_0x1d5bf4,minerConfigOptions);});}let _0x7abccf=await getMinerSystemInfo({'ipAddress':_0x478dc8,'minerTyped':_0x12a005,'apiVersion':_0x1a633f})[_0x34b089(0x1d1)](_0x2e910e=>{const _0x3ac975=_0x34b089;let _0x413dcb='[provision]\x20System\x20info\x20request\x20failed\x20during\x20provisionJob\x20for,\x20'+_0x478dc8+_0x3ac975(0x14c)+_0x1a633f;return console[_0x3ac975(0x173)](_0x413dcb,inspect(_0x2e910e,![],0x5,!![]),_0x12a005),console[_0x3ac975(0x1f6)](_0x413dcb),statusObject(_0x3ac975(0x131),_0x3ac975(0xd1),_0x1d5bf4,minerConfigOptions);});if(!_0x7abccf)return statusObject('abort','ignored',_0x1d5bf4,minerConfigOptions);const _0x4e585c=dataCenterSettings[_0x34b089(0x201)],_0x487bf7=!![],_0x1f1d64=_0x3b10a4[_0x34b089(0x1ba)];return configureMiner({'minerSystemInfo':_0x7abccf,'workerProperties':_0x1f1d64,'minerInfo':_0x1d5bf4,'minerConfigOptions':minerConfigOptions,'shouldConfigurePools':_0x4e585c,'isBulk':_0x487bf7,'poolIDs':_0x4936d5});};return _0x44efe8[_0x44e389(0x17b)](_0x48af9d)['then'](_0x22db13=>{const _0x45d1f8=_0x44e389,_0x3f4b30=_0x22db13[_0x45d1f8(0x104)](_0x31039c=>{return _0x33b1a8(()=>_0x4b492d(_0x31039c));}),_0x941376=Promise[_0x45d1f8(0x137)](_0x3f4b30);return isBatchOperation=![],_0x941376;});}async function configureMiner({minerSystemInfo:_0x37d41e,workerProperties:_0x12687d,minerInfo:_0x5e94f5,minerConfigOptions:_0x37bcab,shouldConfigurePools:_0x47b0d7,isBulk:_0xeba8c7,poolIDs:_0x346fd8}){const _0x165111=_0x57cadf;if(!_0x37d41e)return null;let {minerType:_0x1af3e7,modelType:_0x3c497b,apiVersion:_0x17744f,macAddress:_0x45b330,ipAddress:_0x11d5bf}=_0x37d41e;!_0x3c497b&&_0x5e94f5&&(_0x3c497b=_0x5e94f5[_0x165111(0xd7)]||_0x5e94f5['minerType']);const _0x21c8b0=getMinerTypeMap({'modelType':_0x3c497b});if(!_0x21c8b0)return console[_0x165111(0x1f6)](_0x165111(0x16b)+_0x3c497b,_0x37d41e),statusObject(_0x165111(0x131),_0x165111(0xd1),_0x37d41e,_0x37bcab);const {name:_0xff4729,minerConfigOptions:_0x2cc826}=_0x21c8b0;!Object[_0x165111(0x159)](_0x37bcab||{})[_0x165111(0x1f2)]&&_0x2cc826&&(_0x37bcab=_0x2cc826);const _0x8b1554=_0x47b0d7,_0x153cd5=await getDataCenterSettings(_0xff4729,!_0x5e94f5),_0x257fd6=!_0x5e94f5;if(_0x257fd6){let {minerIndex:minerIndex=0x0,placement:_0x468447,accountName:_0x59302b,workerName:_0x4f0b10,workerTypeNumber:_0x661020,configureMode:_0x3fad61,equipment:equipment={}}=_0x153cd5;const _0x511f9d=_0x3fad61===CONFIGURE_MODE_DETECT&&!_0xeba8c7&&!(_0x346fd8&&_0x346fd8['length']);_0xeba8c7?(_0x468447={},minerIndex=0x0,_0x59302b=_0x37d41e[_0x165111(0x16a)]||'',_0x5e94f5={'macAddress':_0x45b330,'ipAddress':_0x11d5bf,'apiVersion':_0x17744f,'modelType':_0x3c497b,'minerType':_0x1af3e7,..._0x12687d}):_0x5e94f5={'macAddress':_0x45b330,'ipAddress':_0x11d5bf,'apiVersion':_0x17744f,'modelType':_0x3c497b,'minerType':_0x1af3e7,'workerName':_0x4f0b10,'workerTypeNumber':_0x661020,'accountName':_0x59302b,...equipment};_0x5e94f5=await createMinerInfo({'minerInfo':_0x5e94f5,'placement':_0x468447,'minerIndex':minerIndex,'accountName':_0x59302b,'minerTyped':_0x21c8b0});let _0x4bf6f3=null;if(_0x47b0d7){const {poolsAreDifferent:_0x13d920,poolsConfig:_0x4f6a84,workerName:_0x3dc339}=await validateMinerConfig({'minerInfo':_0x5e94f5,'apiVersion':_0x17744f,'dataCenterSettings':dataCenterSettings,'minerConfigOptions':_0x37bcab,'poolIDs':_0x346fd8,'isBulk':_0xeba8c7}),{pools:_0x3478d8}=_0x4f6a84;_0x3dc339?(_0x5e94f5[_0x165111(0x127)]=_0x3dc339,_0x17744f=_0x17744f||deriveApiVersion({'minerInfo':_0x5e94f5,'minerTyped':_0x21c8b0}),registerProxy({'workerName':_0x5e94f5[_0x165111(0x127)],'accountName':_0x59302b,'macAddress':_0x45b330,'ipAddress':_0x11d5bf,'minerTyped':_0x21c8b0,'apiVersion':_0x17744f})):console[_0x165111(0x1f6)](_0x165111(0x12f),_0x5e94f5);const {rack:rack=0x0,shelf:shelf=0x0,position:position=0x0,hall:hall=''}=_0x5e94f5['placement']||{};let _0x38fef6='Update\x20requested\x20for\x20new\x20miner\x20['+_0x11d5bf+',\x20'+_0x45b330+_0x165111(0x17e)+hall+'.'+rack+'.'+shelf+'.'+position+_0x165111(0xd0)+_0x3478d8[0x0]['username'];console[_0x165111(0xe3)](_0x38fef6),sendMessage({'text':_0x165111(0x125)+_0x38fef6}),socketSendMiners([_0x5e94f5],'setting');if(_0x13d920){_0x5e94f5['poolIDs']=_0x346fd8,_0x37bcab[_0x165111(0x1eb)]=_0x5e94f5['firmwareFileName'];const _0xf16404=await updateMinerSettings({'minerInfo':_0x5e94f5,'minerTyped':_0x21c8b0,'pools':_0x3478d8,'minerConfigOptions':_0x37bcab,'apiVersion':_0x17744f});_0x38fef6='Configured\x20'+_0x38fef6,console[_0x165111(0xe3)]('Miner\x20pools\x20set.',_0x11d5bf,_0xf16404);}else _0x38fef6=_0x165111(0x114)+_0x38fef6,console[_0x165111(0xe3)](_0x165111(0x1d8),_0x11d5bf);_0x5e94f5['lastAccess']=new Date(),sendMessage({'text':_0x38fef6}),socketSendMiners([_0x5e94f5],'configured');}else _0x12687d&&_0x12687d[_0x165111(0x127)]&&(_0x5e94f5[_0x165111(0x127)]=_0x12687d['workerName'],_0x5e94f5[_0x165111(0x161)]=_0x12687d['workerTypeNumber']),console['log']('Skipping\x20miner\x20pool\x20configuration\x20for\x20['+_0x5e94f5[_0x165111(0x16a)]+'.'+_0x5e94f5[_0x165111(0x127)]+_0x165111(0x13a));return upsertMinerInfo({'minerInfo':_0x5e94f5,'configureMode':_0x3fad61})[_0x165111(0x1aa)](()=>{const _0x25b3ca=_0x165111;return statusObject(_0x25b3ca(0xf1),_0x25b3ca(0x163),_0x37d41e,_0x37bcab);});}const _0x160337=_0x5e94f5[_0x165111(0x1a4)];if(!_0xeba8c7&&_0x160337&&_0x160337>Date[_0x165111(0x108)]()-deploymentDebounceTime){const {rack:rack=0x0,shelf:shelf=0x0,position:position=0x0,hall:hall=''}=_0x5e94f5[_0x165111(0x1c5)]||{};let _0x3d6b78=_0x165111(0xfc)+_0x5e94f5[_0x165111(0x20e)]+',\x20'+_0x45b330+_0x165111(0x17e)+hall+'.'+rack+'.'+shelf+'.'+position+_0x165111(0x218)+_0x5e94f5[_0x165111(0x16a)]+'.'+_0x5e94f5[_0x165111(0x127)];return console[_0x165111(0xe3)](_0x3d6b78),sendMessage({'text':_0x3d6b78}),socketSendMiners([_0x5e94f5],_0x165111(0x140)),statusObject(_0x165111(0x1f9),'debounce',_0x37d41e,_0x37bcab);}else{let _0x7e1b1a=_0x165111(0x1a5)+_0x5e94f5['accountName']+'.'+_0x5e94f5['workerName']+',\x20'+_0x5e94f5[_0x165111(0x20e)]+',\x20'+_0x5e94f5['macAddress'];console[_0x165111(0xe3)](_0x7e1b1a),sendMessage({'text':_0x7e1b1a});}_0x5e94f5[_0x165111(0x1a4)]=new Date();let {placement:_0x2c1d1f,workerTypeNumber:_0x2f4bdf,accountName:_0xd9cda3,configureMode:_0x1e91c4,equipment:equipment={}}=_0x153cd5,_0x1916f2=_0x1e91c4===CONFIGURE_MODE_PROVISION||_0x346fd8&&_0x346fd8[_0x165111(0x1f2)],_0x4c7b54=!_0xeba8c7&&_0x1e91c4===CONFIGURE_MODE_REPOSITION,_0x4ced6b=!_0xeba8c7&&_0x1e91c4===CONFIGURE_MODE_PROVISION;if(_0x4c7b54||_0x4ced6b){_0x5e94f5[_0x165111(0x1c5)]={..._0x2c1d1f},_0x5e94f5=Object[_0x165111(0x14a)](_0x5e94f5,equipment);if(_0x4c7b54){let {workerTypeNumber:_0x44dedd,workerName:_0x5a67f8,accountName:_0x17976b}=_0x12687d||{};_0x5e94f5['workerTypeNumber']=_0x44dedd||_0x5e94f5['workerTypeNumber'],_0x5e94f5['accountName']=_0x17976b||_0x5e94f5[_0x165111(0x16a)],_0x5e94f5[_0x165111(0x127)]=_0x5a67f8||_0x5e94f5['workerName'];}else _0x4ced6b&&_0xd9cda3&&parseInt(_0x2f4bdf)>0x0&&(_0x5e94f5[_0x165111(0x161)]=_0x2f4bdf,_0x5e94f5[_0x165111(0x16a)]=_0xd9cda3);if(!_0x1916f2){const {rack:rack=0x0,shelf:shelf=0x0,position:position=0x0,hall:hall=''}=_0x5e94f5[_0x165111(0x1c5)]||{};let _0x14e8cd='Rack\x20position\x20update\x20['+_0x5e94f5[_0x165111(0x20e)]+',\x20'+_0x45b330+_0x165111(0x17e)+hall+'.'+rack+'.'+shelf+'.'+position;console[_0x165111(0xe3)](_0x14e8cd),sendMessage({'text':_0x14e8cd}),socketSendMiners([_0x5e94f5],'positioned');}}if(_0xeba8c7&&_0x12687d){let {workerTypeNumber:_0x135968,workerName:_0x2b043a,deployedOn:_0x5a0290,accountName:_0x38b827,placement:_0x1814e9}=_0x12687d;if(_0x5e94f5[_0x165111(0x126)]!==_0x21c8b0['model']){const {model:_0x2666eb,code:_0x20fac1,name:_0x135f79}=_0x21c8b0,_0x4e3339={'model':_0x2666eb,'code':_0x20fac1,'name':_0x135f79,'minerType':_0x1af3e7,'modelType':_0x3c497b,'apiVersion':_0x17744f};_0x5e94f5=Object[_0x165111(0x14a)](_0x5e94f5,_0x4e3339);}_0x11d5bf&&_0x5e94f5['ipAddress']!==_0x11d5bf&&(console[_0x165111(0x173)]('Updating\x20ipAddress\x20for\x20'+_0x5e94f5[_0x165111(0x127)]+_0x165111(0x20b)+_0x5e94f5['ipAddress']+'\x20to\x20'+_0x11d5bf),_0x5e94f5[_0x165111(0x20e)]=_0x11d5bf);!_0x5e94f5[_0x165111(0x1eb)]&&_0x37d41e[_0x165111(0x1eb)]&&(console[_0x165111(0x173)]('Overwriting\x20firmwareFileName\x20for\x20'+_0x5e94f5[_0x165111(0x127)]+'\x20from\x20'+_0x5e94f5[_0x165111(0x1eb)]+_0x165111(0x1ab)+_0x37d41e['firmwareFileName']),_0x5e94f5[_0x165111(0x1eb)]=_0x37d41e[_0x165111(0x1eb)]);_0x1916f2&&_0x5a0290&&(console[_0x165111(0x173)](_0x165111(0x1fc)+_0x5e94f5['workerName']+_0x165111(0x1ab)+_0x5a0290+_0x165111(0x182)),_0x5e94f5[_0x165111(0x177)]=_0x5a0290);_0x38b827&&_0x5e94f5[_0x165111(0x16a)]!==_0x38b827&&(console[_0x165111(0x173)]('Overwriting\x20accountName\x20for\x20'+_0x5e94f5[_0x165111(0x127)]+'\x20from\x20'+_0x5e94f5[_0x165111(0x16a)]+_0x165111(0x1ab)+_0x38b827),_0x5e94f5[_0x165111(0x16a)]=_0x38b827);if(_0x2b043a)_0x5e94f5[_0x165111(0x127)]!=_0x2b043a&&(_0x5e94f5[_0x165111(0xf9)][_0x165111(0xde)]=_0x2b043a,console[_0x165111(0x173)]('Overwriting\x20workerName\x20for\x20'+_0x5e94f5[_0x165111(0x16a)]+'.'+_0x5e94f5[_0x165111(0x127)]+_0x165111(0x178)+_0x5e94f5['accountName']+'.'+_0x37d41e[_0x165111(0x127)])),_0x5e94f5[_0x165111(0x161)]=_0x135968||(_0x2b043a[_0x165111(0xec)](/\d+$/)||[0x0])[0x0];else _0x135968&&(_0x5e94f5[_0x165111(0x161)]=_0x135968);_0x5e94f5['placement']=_0x1814e9;}if(!_0x1916f2){let _0x4a6ef5=_0x4c7b54?_0x165111(0x1af):_0x165111(0x1e6),_0x56d7f6='';if(!_0x5e94f5)_0x56d7f6=_0x4a6ef5+_0x165111(0x1bc)+_0x11d5bf+',\x20'+_0x45b330+'].\x20Provisioning\x20required.';else{const {rack:rack=0x0,shelf:shelf=0x0,position:position=0x0,hall:hall=''}=_0x5e94f5['placement']||{};_0x56d7f6=_0x4a6ef5+_0x165111(0x1bc)+_0x11d5bf+',\x20'+_0x45b330+_0x165111(0x141)+_0x5e94f5['workerName']+_0x165111(0xd2)+hall+'.'+rack+'.'+shelf+'.'+position;}return await upsertMinerInfo({'minerInfo':_0x5e94f5,'configureMode':_0x1e91c4}),sendMessage({'text':_0x56d7f6}),console['log'](_0x56d7f6),socketSendMiners([_0x5e94f5],_0x165111(0x13f)),console[_0x165111(0xe3)](_0x165111(0x150)+_0x5e94f5[_0x165111(0x16a)]+'.'+_0x5e94f5['workerName'],_0x11d5bf,_0x45b330),{'action':_0x4a6ef5['toLowerCase'](),'status':_0x165111(0x163),'ipAddress':_0x11d5bf,'macAddress':_0x45b330};}_0x11d5bf=_0x5e94f5[_0x165111(0x20e)],_0x45b330=_0x5e94f5[_0x165111(0x154)];if(_0x8b1554){const {poolsAreDifferent:_0x378315,remotesPools:_0x58e0f7,poolsConfig:poolsConfig={},workerName:_0x542214}=await validateMinerConfig({'minerInfo':_0x5e94f5,'apiVersion':_0x17744f,'dataCenterSettings':dataCenterSettings,'minerConfigOptions':_0x37bcab,'poolIDs':_0x346fd8,'isBulk':_0xeba8c7}),{pools:_0x46c7e6}=poolsConfig;_0x542214?(_0x5e94f5[_0x165111(0x127)]=_0x542214,_0x17744f=_0x17744f||deriveApiVersion({'minerInfo':_0x5e94f5,'minerTyped':_0x21c8b0}),registerProxy({'workerName':_0x5e94f5[_0x165111(0x127)],'accountName':_0xd9cda3,'macAddress':_0x45b330,'ipAddress':_0x11d5bf,'minerTyped':_0x21c8b0,'apiVersion':_0x17744f})):console[_0x165111(0x1f6)](_0x165111(0x12f),_0x5e94f5);if(!_0x58e0f7){let _0x1a07c3='Pool\x20info\x20not\x20available\x20in\x20minerInfo\x20collection\x20for\x20\x20'+_0xd9cda3+'.'+_0x5e94f5[_0x165111(0x127)]+'\x20['+_0x11d5bf+',\x20'+_0x45b330+']';console[_0x165111(0x173)](_0x1a07c3),console['warn'](_0x1a07c3),socketSend(_0x1a07c3);}if(_0x47b0d7){const {rack:rack=0x0,shelf:shelf=0x0,position:position=0x0,hall:hall=''}=_0x5e94f5['placement']||{};let _0x3dc3b1='edit\x20miner\x20['+_0x11d5bf+',\x20'+_0x45b330+'],\x20cab:\x20'+hall+'.'+rack+'.'+shelf+'.'+position+_0x165111(0xd0)+_0x46c7e6[0x0][_0x165111(0x102)];console[_0x165111(0xe3)](_0x165111(0xc9)+_0x3dc3b1),socketSendMiners([_0x5e94f5],_0x165111(0x138)),_0x5e94f5[_0x165111(0x1b6)]=_0x346fd8;if(_0x378315){sendMessage({'text':'Settings\x20update\x20requested\x20for\x20'+_0x3dc3b1}),_0x37bcab[_0x165111(0x1eb)]=_0x5e94f5[_0x165111(0x1eb)];const _0x36a5c3=await updateMinerSettings({'minerInfo':_0x5e94f5,'minerTyped':_0x21c8b0,'pools':_0x46c7e6,'minerConfigOptions':_0x37bcab,'apiVersion':_0x17744f}),{message:message=''}=_0x36a5c3||{};if(/error/i[_0x165111(0x193)](message))return console['log']('Miner\x20pools\x20overwrite\x20failed\x20for\x20'+_0x5e94f5[_0x165111(0x16a)]+'.'+_0x542214,_0x11d5bf,_0x45b330,message),{'action':_0x165111(0x1f9),'status':_0x165111(0x1bd),'ipAddress':_0x11d5bf,'macAddress':_0x45b330,'updatePools':_0x36a5c3};const {frequency:_0x818469,volts:_0x14eb3f}=_0x37bcab;_0x818469&&(_0x5e94f5[_0x165111(0x119)]={'frequency':_0x818469,'volts':_0x14eb3f}),_0x3dc3b1=_0x165111(0x211)+_0x3dc3b1,console['log'](_0x165111(0x183)+_0x5e94f5[_0x165111(0x16a)]+'.'+_0x542214,_0x11d5bf,_0x45b330);}else _0x3dc3b1='Configuration\x20not\x20required\x20'+_0x3dc3b1,console['log'](_0x165111(0x217)+_0x5e94f5[_0x165111(0x16a)]+'.'+_0x542214,_0x11d5bf,_0x45b330);sendMessage({'text':_0x3dc3b1});}else text='Skipped\x20miner\x20['+_0x5e94f5[_0x165111(0x16a)]+'.'+_0x5e94f5[_0x165111(0x127)]+_0x165111(0xe0),_0x11d5bf,_0x45b330,sendMessage({'text':text});return socketSendMiners([_0x5e94f5],_0x165111(0x13f)),upsertMinerInfo({'minerInfo':_0x5e94f5,'configureMode':_0x1e91c4})[_0x165111(0x1aa)](()=>{const _0x42eee8=_0x165111;return statusObject(_0x42eee8(0x1f9),'success',_0x37d41e,_0x37bcab);});}else console[_0x165111(0xe3)](_0x165111(0x172)+_0x5e94f5[_0x165111(0x16a)]+'.'+_0x5e94f5[_0x165111(0x127)]+']\x20update\x20configuration.',_0x11d5bf,_0x45b330);return upsertMinerInfo({'minerInfo':_0x5e94f5,'configureMode':_0x1e91c4})[_0x165111(0x1aa)](()=>{const _0x2d2a44=_0x165111;return statusObject(_0x2d2a44(0x1de),_0x2d2a44(0x163),_0x37d41e,_0x37bcab);});}async function discoverMiners(_0xdbbc,_0x65bfeb,_0x12f00e=!dataCenterSettings[_0x57cadf(0x1ff)]){const _0x500d94=_0x57cadf;async function _0x2da568(_0x23ae85){const _0x235a74=_0x3b0d;let _0x16d776=completeMinerVersion(_0x23ae85);const {ipAddress:_0x2f18e8,minerType:_0x407039,macAddress:_0x51e73d,apiVersion:_0x5944da}=_0x16d776;_0x5944da&&_0x5944da===_0x407039&&console['error'](_0x235a74(0x1f0),_0x23ae85);const _0x3f8201=getMinerTypeMap(_0x16d776);if(!_0x3f8201){let _0x45bd2c=_0x235a74(0x1a7)+_0x2f18e8+',\x20'+_0x51e73d+_0x235a74(0x175)+_0x407039+']\x20not\x20found\x20in\x20the\x20configuration';return console[_0x235a74(0xe3)](_0x45bd2c,_0x16d776),sendMessage(_0x45bd2c);}_0x2506a0[_0x235a74(0x10f)]++,upsertLease(_0x51e73d,_0x2f18e8);const {pools:pools=[]}=await getRemotesPools(_0x16d776,_0x3f8201,_0x5944da),_0x5c79c3=pools[_0x235a74(0x104)](_0x240c49=>_0x240c49[_0x235a74(0x19b)]),{name:_0x2bc61f}=_0x3f8201;let _0x1c317c=await extractAccountAndWorkerNumber({'poolWorkers':_0x5c79c3});_0x2506a0['settingsInfo']++;!_0x1c317c&&(console['warn'](_0x235a74(0x18e)+_0x2f18e8+'\x20at\x20'+_0x51e73d),_0x1c317c={'accountName':'unknown','workerName':_0x235a74(0x1fa),'workerTypeNumber':0x1});const {accountName:_0x1a154e,workerName:_0x572562,workerTypeNumber:_0x1f0a4b}=_0x1c317c;console[_0x235a74(0xe3)](_0x235a74(0x155)+_0x572562+'\x20for\x20account\x20'+_0x1a154e+_0x235a74(0x195)+_0x2f18e8+'\x20]\x20at\x20'+_0x51e73d);const _0x22158b={'workerTypeNumber':_0x1f0a4b,'workerName':_0x572562,'accountName':_0x1a154e};!_0x16d776['firmwareFileName']&&_0x16d776[_0x235a74(0x1c7)]!==_0x16d776['modelType']&&(_0x16d776[_0x235a74(0x1eb)]=_0x235a74(0xf5));const {enablePoolConfiguration:_0x4cbea6,enableUpdatePoolOnDiscovery:_0x3441e5}=dataCenterSettings,_0xb93206=_0x4cbea6&&_0x3441e5,_0x3532ce=!![];let _0x252373=await getMinerInfo({'macAddress':_0x51e73d,'accountName':_0x1a154e,'workerName':_0x572562,'ipAddress':_0x2f18e8});if(_0x252373&&!_0x252373?.[_0x235a74(0x1c5)]?.[_0x235a74(0x14f)]){const _0x52a7e7=_0x44002d(_0x252373,dataCenterSettings);_0x22158b[_0x235a74(0x1c5)]=_0x52a7e7;}let _0x3d899b=await configureMiner({'minerSystemInfo':_0x16d776,'workerProperties':_0x22158b,'minerInfo':_0x252373,'minerConfigOptions':null,'shouldConfigurePools':_0xb93206,'isBulk':_0x3532ce})[_0x235a74(0x1d1)](_0xf8eb31=>{const _0x51bf0f=_0x235a74;let _0x184171='';return _0xf8eb31['options']&&_0xf8eb31[_0x51bf0f(0xce)][_0x51bf0f(0x15b)]&&(_0x184171+=';\x20'+_0xf8eb31['options'][_0x51bf0f(0x15b)]),!/ETIMEDOUT/[_0x51bf0f(0x193)](_0xf8eb31['message'])?(_0x184171=_0x51bf0f(0x19d)+_0xf8eb31[_0x51bf0f(0x199)]+_0x184171,console[_0x51bf0f(0xd1)](_0x184171,_0x16d776,_0xf8eb31)):(_0x184171=_0x51bf0f(0x136)+_0x184171,console[_0x51bf0f(0x1f6)](_0x184171,_0xf8eb31[_0x51bf0f(0x1d3)])),null;});!_0x3d899b&&(_0x3d899b={'action':_0x235a74(0xf0),'status':_0x235a74(0x1bd)});!_0x2506a0['configure'][_0x3d899b[_0x235a74(0x17d)]]&&(_0x2506a0['configure'][_0x3d899b[_0x235a74(0x17d)]]={});const _0x4fbe4c=_0x2506a0[_0x235a74(0xf0)][_0x3d899b[_0x235a74(0x17d)]];!_0x4fbe4c[_0x3d899b[_0x235a74(0x1e4)]]&&(_0x4fbe4c[_0x3d899b[_0x235a74(0x1e4)]]={'count':0x0,'ipAddresses':[],'miners':[]});const _0x1cf67d=_0x4fbe4c[_0x3d899b[_0x235a74(0x1e4)]];return _0x1cf67d[_0x235a74(0xfe)]++,_0x1cf67d['ipAddresses'][_0x235a74(0x117)](_0x16d776[_0x235a74(0x20e)]),_0x1cf67d[_0x235a74(0x1e3)]['push']({'ipAddress':_0x16d776['ipAddress'],'macAddress':_0x16d776[_0x235a74(0x154)]}),_0x16d776;}const {getWorkerNumber:_0x5dc4e5,getPlacement:_0x44002d}=getPlugin(_0x500d94(0x1c4)),_0x2506a0={'count':0x0,'sysInfo':0x0,'settingsInfo':0x0,'configure':{},'attempted':0x0,'startTime':Date[_0x500d94(0x108)]()};let _0x168195=promiseLimit(0xa);return dataCenterSettings[_0x500d94(0xf4)]=CONFIGURE_MODE_DISCOVERY,dataCenterSettings['save'](),console[_0x500d94(0xe3)]('Discover\x20miners\x20initiated!\x20Scanning\x20network\x20using\x20'+(dataCenterSettings['useArpTable']?_0x500d94(0x20d):'\x27tcp\x20detection\x27.')),scanForMinerVersions(_0xdbbc||dataCenterSettings['dhcpSettings'],_0x65bfeb,_0x12f00e)[_0x500d94(0x1d1)](_0x51fb14=>{const _0x299b8c=_0x500d94;console[_0x299b8c(0xd1)](_0x299b8c(0x1b0),_0x51fb14);throw _0x51fb14;})[_0x500d94(0x1aa)](_0x5a6d35=>{const _0x4a8ad1=_0x500d94,{stats:_0x30aa86,minerVersions:_0x2b3526}=_0x5a6d35;return _0x2506a0[_0x4a8ad1(0x1a1)]=_0x30aa86,_0x2506a0[_0x4a8ad1(0xfe)]=_0x2b3526[_0x4a8ad1(0x1f2)],console[_0x4a8ad1(0xe3)](_0x4a8ad1(0x1cb),_0x2506a0,_0xdbbc),_0x2506a0['discoverStartTime']=Date[_0x4a8ad1(0x108)](),Promise[_0x4a8ad1(0x137)](_0x2b3526[_0x4a8ad1(0x104)](_0x8c4812=>{return _0x168195(()=>_0x2da568(_0x8c4812));}));})['then'](_0x5f4fa7=>{const _0x42426e=_0x500d94;return dataCenterSettings['configureMode']=CONFIGURE_MODE_DETECT,dataCenterSettings[_0x42426e(0x176)](),_0x2506a0['endTime']=Date[_0x42426e(0x108)](),_0x2506a0['scan']={'timespan':_0x2506a0[_0x42426e(0x166)]-_0x2506a0['startTime'],'count':_0x2506a0['count']+_0x2506a0['scanStats']['failed'],'rate':Math[_0x42426e(0x181)]((_0x2506a0[_0x42426e(0xfe)]+_0x2506a0[_0x42426e(0x1a1)][_0x42426e(0x1bd)])/((_0x2506a0['discoverStartTime']-_0x2506a0[_0x42426e(0x128)])/0x2710))/0xa+_0x42426e(0x164)},_0x2506a0['upsert']={'timespan':_0x2506a0[_0x42426e(0xdd)]-_0x2506a0[_0x42426e(0x166)],'count':_0x2506a0[_0x42426e(0xfe)],'rate':Math[_0x42426e(0x181)](_0x2506a0['count']/((_0x2506a0[_0x42426e(0xdd)]-_0x2506a0[_0x42426e(0x166)])/0x2710))/0xa+_0x42426e(0x164)},console[_0x42426e(0xe3)](_0x42426e(0xc5),inspect(_0x2506a0,![],0x5,!![])),{'stats':_0x2506a0,'minerVersions':_0x5f4fa7};})[_0x500d94(0x1d1)](_0x2a5b3f=>{const _0x4fb730=_0x500d94;dataCenterSettings[_0x4fb730(0xf4)]=CONFIGURE_MODE_DETECT,dataCenterSettings[_0x4fb730(0x176)](),console[_0x4fb730(0xd1)]('Discover\x20error',inspect(_0x2a5b3f,![],0x5,!![]));throw _0x2a5b3f;});}let availableFreqs={};function _0x3b0d(_0x5ebea8,_0x2d8d49){const _0x193330=_0x1933();return _0x3b0d=function(_0x3b0d64,_0x2b43ba){_0x3b0d64=_0x3b0d64-0xc2;let _0x4b1768=_0x193330[_0x3b0d64];return _0x4b1768;},_0x3b0d(_0x5ebea8,_0x2d8d49);}function getOptimumClockSettings(_0x297f94,_0xbb07a3,_0x1610af,_0x3cf60e){const _0x13208d=_0x57cadf;let _0xf23976=0x0,{scales:_0x151d32,softwareVersions:_0x2bb6c6}=_0x1610af[_0x13208d(0xd5)]||{},{clockFrequencyCap:_0x56a04f}=_0x297f94,_0x41cb16=_0x151d32&&_0x2bb6c6&&_0x2bb6c6[_0x13208d(0x14d)](_0x297f94['softwareVersion']),_0x326e4d={'frequency':0x0,'volts':0x0,'hashRateBump':0x0};if(!_0x41cb16)return _0x326e4d;const {frequencies:_0x5a6b0f,voltages:_0x1fa00c,hashRateBumps:_0x44104f}=_0x151d32;!availableFreqs[_0x1610af['model']]&&(availableFreqs[_0x1610af[_0x13208d(0x126)]]={},_[_0x13208d(0x104)](_0x5a6b0f,(_0x512360,_0x418c57)=>{availableFreqs[_0x1610af['model']][_0x512360]={'index':_0x418c57,'frequency':_0x512360};}));const _0x213178=availableFreqs[_0x1610af['model']],_0x2b2624=parseInt(_0xbb07a3[_0x13208d(0x132)]);console[_0x13208d(0x173)]('Adjust\x20clock\x20factors\x20for\x20'+_0x297f94[_0x13208d(0x127)]+_0x13208d(0x144)+_0x2b2624+_0x13208d(0x12e)+_0x56a04f+_0x13208d(0x16e)+_0x3cf60e);let _0x552527=(_0x213178[_0x2b2624]||{})[_0x13208d(0x1bf)];!_0x552527&&(_0x552527=_0x5a6b0f[_0x13208d(0xd6)](_0x57e60d=>_0x57e60d>=_0x2b2624),!_0x552527&&(_0x552527=parseInt(_0x5a6b0f[_0x13208d(0x1f2)]/0x2,0xa)));const _0x72cb67=_0x3cf60e*0x1;let _0x53dbec=_0x552527+_0x72cb67;if(_0x53dbec<0x0)_0x53dbec=0x0;else _0x53dbec>=_0x5a6b0f[_0x13208d(0x1f2)]&&(_0x53dbec=_0x5a6b0f[_0x13208d(0x1f2)]-0x1);_0xf23976=_0x5a6b0f[_0x53dbec];if(_0x56a04f&&parseInt(_0xf23976)>=_0x56a04f)return _0x326e4d;return{'frequency':_0xf23976,'volts':_0x1fa00c[_0x53dbec],'hashRateBump':!_0x44104f?0x0:_0x44104f[_0x53dbec]};}function intAdder(_0x126476,_0x284c53){return parseInt(_0x126476||0x0)+parseInt(_0x284c53||0x0);};function trackTrends(_0x38a359,_0x2aaa5d=new Date(),_0x13d727){const _0x47bf59=_0x57cadf;(!_0x38a359['trends']||_0x38a359['trends'][_0x47bf59(0x196)])&&(_0x38a359[_0x47bf59(0x1d2)]={'lastEvent':{},'fine':[],'minutes':[],'hourly':[],'daily':[],'monthly':[],'yearly':[]});!_0x13d727&&(_0x13d727=Date['parse'](new Date())[_0x47bf59(0x215)]());const {hashRate:hashRate=0x0,accepted:accepted=0x0,rejected:rejected=0x0,elapsed:elapsed=0x0,sharesPerMinute:sharesPerMinute=0x0,hardwareErrors:hardwareErrors=[0x0],frequency:_0x192b18,volts:_0x365d00,temperatures:temperatures=[0x0],consumption:consumption=0x0}=_0x38a359['condition'];var _0x4ddbd4=isNaN(elapsed)||elapsed<0x1?0x1:elapsed;const _0x3197fc=(!hardwareErrors['reduce']?hardwareErrors||0x0:hardwareErrors[_0x47bf59(0x14b)](intAdder,0x0))/_0x4ddbd4,_0x15fb13={'elapsed':elapsed,'hashRate':parseInt(hashRate),'accepted':accepted,'rejected':rejected,'shares':parseInt(sharesPerMinute),'frequency':parseInt(_0x192b18),'volts':parseInt(_0x365d00),'tempAvg':parseInt(Math['avg'](temperatures)),'tempHot':Math[_0x47bf59(0x10b)](...temperatures),'power':consumption,'x':Date[_0x47bf59(0x168)](_0x2aaa5d),'syncId':_0x13d727,'errorRate':_0x3197fc},{trends:_0x1d2bcc,updated:_0x407068}=updateTrendTracking(_0x38a359[_0x47bf59(0x1d2)],_0x2aaa5d,_0x15fb13,_0x38a359,[_0x47bf59(0x132),_0x47bf59(0x169),'elapsed',_0x47bf59(0xea),_0x47bf59(0x10c)]);return _0x1d2bcc;}function rollupTrendPoints(_0x23d204,_0x5e56f1,_0x3a8720,_0x4d9fe6,_0x322229){const _0x5734fc=_0x57cadf;let _0x5db03d={};const _0x47c41f={'fine':{'count':0x1,'millis':timeSlotPeriod*0x3c*0x3e8,'sliceSize':CHART_TREND_HISTORY_COUNT},'minutes':{'count':0x3c/timeSlotPeriod,'millis':0x3c*0x3c*0x3e8,'sliceSize':CHART_TREND_HISTORY_COUNT},'hourly':{'count':0x18,'millis':0x18*0x3c*0x3c*0x3e8,'sliceSize':CHART_TREND_HISTORY_COUNT},'daily':{'count':0x1e,'millis':0x1e*0x18*0x3c*0x3c*0x3e8,'sliceSize':CHART_TREND_HISTORY_COUNT},'monthly':{'count':0xc,'millis':0x16d*0x18*0x3c*0x3c*0x3e8,'sliceSize':CHART_TREND_HISTORY_COUNT}},{count:_0x3140d7,millis:_0x47f734,sliceSize:_0x176869}=_0x47c41f[_0x3a8720],_0x2052b2=Object[_0x5734fc(0x159)](_0x23d204[0x0]),_0x257fa9=_0x23d204[_0x5734fc(0x191)](-_0x3140d7);if(_0x257fa9[_0x5734fc(0x1f2)]==0x1)_0x5db03d={..._0x257fa9[0x0]};else{_0x2052b2[_0x5734fc(0x1d7)](_0x1f7b63=>{const _0x21fa50=_0x5734fc,_0x1fc9a6=_0x4d9fe6['indexOf'](_0x1f7b63)!=-0x1;_0x1fc9a6?_0x5db03d[_0x1f7b63]=_0x257fa9['reduce']((_0x19e4dc,_0x499666)=>Math[_0x21fa50(0x10b)](_0x19e4dc,_0x499666[_0x1f7b63]),0x0):_0x5db03d[_0x1f7b63]=(_0x257fa9['reduce']((_0x257d72=0x0,_0x4569d1)=>_0x257d72+(_0x4569d1[_0x1f7b63]||0x0),0x0)/_0x257fa9[_0x21fa50(0x1f2)])['toFixed'](0x3),_0x5db03d[_0x1f7b63]>0x64&&(_0x5db03d[_0x1f7b63]=parseInt(_0x5db03d[_0x1f7b63]));});const _0x311619=_0x257fa9[_0x5734fc(0x191)](-0x1)[0x0]['x'];_0x5db03d['x']=_0x311619-_0x311619%_0x47f734;}const _0x573387=_0x5db03d['x'];if(!_0x5e56f1[_0x5734fc(0x1f2)]){const _0xba7a4f={..._0x5db03d};_0x5e56f1['push'](_0xba7a4f);}else while(_0x5e56f1[_0x5e56f1['length']-0x1]['x']<_0x573387){const _0x464a6b={..._0x5db03d},_0x1eb98f=_0x5e56f1[_0x5e56f1[_0x5734fc(0x1f2)]-0x1]['x'];_0x464a6b['x']=_0x1eb98f-_0x1eb98f%_0x47f734+_0x47f734,_0x5e56f1[_0x5734fc(0x117)](_0x464a6b);}return console[_0x5734fc(0x173)](_0x322229,_0x5734fc(0x18b),_0x257fa9,_0x5db03d),_0x5e56f1[_0x5734fc(0x1f2)]>_0x176869&&_0x5e56f1['splice'](0x0,_0x5e56f1[_0x5734fc(0x1f2)]-_0x176869),_0x23d204[_0x5734fc(0x1f2)]>_0x176869&&_0x23d204[_0x5734fc(0x12c)](0x0,_0x23d204['length']-_0x176869),_0x257fa9;}function updateTrendTracking(_0x191e8b,_0x438ce9,_0x265489={},_0xa434fc,_0x492648){const _0xa5d4a4=_0x57cadf,_0x590c3d=_0x438ce9[_0xa5d4a4(0x1cf)](),_0x19e71f=_0x438ce9[_0xa5d4a4(0xe1)](),_0x5f38fc=_0x438ce9[_0xa5d4a4(0x167)](),_0x1642a9=_0x438ce9[_0xa5d4a4(0x133)](),_0x3772fa=_0x438ce9[_0xa5d4a4(0xdf)](),_0x4a6505={};let {fine:fine=[],hourly:hourly=[],minutes:minutes=[],daily:daily=[],monthly:monthly=[],yearly:yearly=[]}=_0x191e8b;const {minute:_0x57813e,hour:_0x1fed66,day:_0xc98da5,month:_0x28fd2d,year:_0x181695}=_0x191e8b[_0xa5d4a4(0x203)],_0x2d6562=_0x57813e!==_0x3772fa&&fine[_0xa5d4a4(0x1f2)],_0x3cdf05=_0x1fed66!==_0x1642a9&&minutes[_0xa5d4a4(0x1f2)],_0x5d5b8f=_0xc98da5!==_0x5f38fc&&hourly[_0xa5d4a4(0x1f2)],_0xc307b3=_0x28fd2d!==_0x19e71f&&daily[_0xa5d4a4(0x1f2)],_0x50639f=_0x181695!==_0x590c3d&&monthly[_0xa5d4a4(0x1f2)];return _0x191e8b[_0xa5d4a4(0x203)]={'minute':_0x3772fa,'hour':_0x1642a9,'day':_0x5f38fc,'month':_0x19e71f,'year':_0x590c3d},_0x50639f&&(rollupTrendPoints(monthly,yearly,_0xa5d4a4(0x204),_0x492648,_0xa434fc),_0x4a6505[_0xa5d4a4(0x204)]=_0x4a6505['yearly']=!![]),_0xc307b3&&(rollupTrendPoints(daily,monthly,'daily',_0x492648,_0xa434fc),_0x4a6505['daily']=_0x4a6505['monthly']=!![]),_0x5d5b8f&&(rollupTrendPoints(hourly,daily,'hourly',_0x492648,_0xa434fc),_0x4a6505[_0xa5d4a4(0x103)]=_0x4a6505[_0xa5d4a4(0x115)]=!![]),_0x3cdf05&&(rollupTrendPoints(minutes,hourly,_0xa5d4a4(0x139),_0x492648,_0xa434fc),_0x4a6505[_0xa5d4a4(0x139)]=_0x4a6505['hourly']=!![]),_0x191e8b[_0xa5d4a4(0x16f)][_0xa5d4a4(0x117)](_0x265489),_0x2d6562&&rollupTrendPoints(fine,minutes,_0xa5d4a4(0x16f),_0x492648,_0xa434fc),{'trends':_0x191e8b,'updated':_0x4a6505};}let kilowattsConsumed=0x0,minerCheckCompleted=!![];const SITE_STATE_NORMAL=0x1,SITE_STATE_OUTAGE=0x2,SITE_STATE_UNKNOWN=0x3,getTempStateName=function(_0x3fae69,_0xb1c399){const _0x49f630=_0x57cadf;_0xb1c399=_0xb1c399||{'hot':0x5a,'warm':0x50,'mild':0x46};if(_0x3fae69>=_0xb1c399[_0x49f630(0x19a)])return _0x49f630(0x19a);else{if(_0x3fae69>=_0xb1c399[_0x49f630(0x145)])return _0x49f630(0x145);else{if(_0x3fae69>=_0xb1c399[_0x49f630(0xcc)])return _0x49f630(0xcc);else{if(_0x3fae69==0x0)return _0x49f630(0x19f);}}}return _0x49f630(0x160);};async function syncMinerStatusJob(_0x39077b,_0x11747a,_0x5cf0c0=![]){const _0x1244f0=_0x57cadf;let {ipAddress:_0x32d554,workerName:_0x50fc26,accountName:_0x1081e1,macAddress:_0x212a2f,placement:_0x31e6c8}=_0x39077b,_0x13fad3=getMinerTypeMap(_0x39077b),_0x5abc31=deriveApiVersion({'minerInfo':_0x39077b,'minerTyped':_0x13fad3});const {name:_0x1fea1e,code:_0x5b617c,version:_0x55fc7a,model:_0x34a7c8,brand:_0x5dfb0e}=_0x13fad3;Object[_0x1244f0(0x14a)](_0x39077b,{'name':_0x1fea1e,'code':_0x5b617c,'version':_0x55fc7a,'model':_0x34a7c8,'brand':_0x5dfb0e});if(isBatchOperation||!_0x32d554)return!![];let _0x2cce56=await getMinerSystemInfo({'ipAddress':_0x32d554,'minerTyped':_0x13fad3,'apiVersion':_0x5abc31,'maxSockets':0x32})[_0x1244f0(0x1d1)](_0x3e301d=>{const _0x249bc9=_0x1244f0;let _0x124426=_0x249bc9(0x213)+_0x50fc26+',\x20'+_0x32d554+_0x249bc9(0x14c)+_0x5abc31;console[_0x249bc9(0x173)](_0x124426,inspect(_0x3e301d,![],0x5,!![]),_0x13fad3),console[_0x249bc9(0x1f6)](_0x124426);});console[_0x1244f0(0x173)](_0x1244f0(0x12a),inspect(_0x2cce56));_0x2cce56&&(!_0x2cce56[_0x1244f0(0x1c7)]&&(console[_0x1244f0(0x1f6)]('getMinerSystemInfo\x20returned\x20undefined\x20minerType',_0x2cce56),delete _0x2cce56[_0x1244f0(0x1c7)],delete _0x2cce56[_0x1244f0(0xd7)]),_0x39077b=Object[_0x1244f0(0x14a)](_0x39077b,_0x2cce56));let _0x82dc=null,_0x9db9c=null,_0x2bc607=null;_0x5cf0c0&&(_0x82dc=await getMinerStatus({'ipAddress':_0x32d554,'minerTyped':_0x13fad3,'apiVersion':_0x5abc31,'maxSockets':0xa})[_0x1244f0(0x1d1)](_0x25e3a3=>{const _0x468eca=_0x1244f0;if(!/ETIMEDOUT/[_0x468eca(0x193)](_0x25e3a3[_0x468eca(0x199)])){let _0x4ab92c=_0x468eca(0x13b)+_0x50fc26+',\x20'+_0x32d554+_0x468eca(0x14c)+_0x5abc31;console[_0x468eca(0x173)](_0x4ab92c,inspect(_0x25e3a3,![],0x5,!![]),_0x13fad3),console[_0x468eca(0x1f6)](_0x4ab92c);}return null;}),console[_0x1244f0(0x173)](_0x1244f0(0xc8),inspect(_0x82dc)),_0x9db9c=await getKernelLogs({'minerInfo':_0x39077b,'minerTyped':_0x13fad3,'apiVersion':_0x5abc31,'maxSockets':0xa})[_0x1244f0(0x1d1)](_0x23c97a=>{const _0x8d4581=_0x1244f0;if(!/ETIMEDOUT/[_0x8d4581(0x193)](_0x23c97a[_0x8d4581(0x199)])){let _0x3d5184='Kernel\x20log\x20request\x20failed\x20during\x20scan\x20for\x20'+_0x50fc26+',\x20'+_0x32d554+_0x8d4581(0x14c)+_0x5abc31;console['debug'](_0x3d5184,inspect(_0x23c97a,![],0x5,!![]),_0x13fad3),console['warn'](_0x3d5184);}return null;}),console[_0x1244f0(0x173)](_0x1244f0(0x179),inspect(_0x9db9c)),dataCenterSettings['enableNetworkLatencyCheck']&&(_0x2bc607=await retrieveMinerNetworkDiagnostics({'minerInfo':_0x39077b,'diagnostic':diagnostic,'minerTyped':_0x13fad3,'apiVersion':_0x5abc31})[_0x1244f0(0x1d1)](_0x385f1f=>{const _0x322975=_0x1244f0;if(!/(404|EHOSTUNREACH|ENOTFOUND)/[_0x322975(0x193)](_0x385f1f['message'])){let _0x45cfea=_0x322975(0xd3)+_0x39077b[_0x322975(0x127)]+',\x20'+_0x32d554+_0x322975(0x14c)+_0x5abc31;console['debug'](_0x45cfea,inspect(_0x385f1f,![],0x5,!![]),_0x13fad3),console[_0x322975(0x1f6)](_0x45cfea);}return null;}),console[_0x1244f0(0x173)](_0x1244f0(0x1ed),inspect(_0x2bc607))));const {pools:_0x4deccf,cardStatus:_0x43b723,workerTypeNumber:_0x3f9771,timestamp:_0x43794a,..._0x3e88cf}=_0x82dc||{'workerName':_0x39077b[_0x1244f0(0x127)]};console[_0x1244f0(0x173)]({'logType':_0x1244f0(0x1d4)},_0x1244f0(0x205)+_0x50fc26+',\x20\x20'+_0x32d554+_0x1244f0(0x1d5)+!!_0x82dc+_0x1244f0(0x180)+!!_0x9db9c+'),\x20minerSystemInfo('+!!_0x2cce56+'),\x20minerInfo('+!!_0x39077b+'),\x20minerDiagnostic('+!!_0x2bc607+')'),registerProxy({'workerName':_0x50fc26,'accountName':_0x1081e1,'macAddress':_0x212a2f,'ipAddress':_0x32d554,'minerTyped':_0x13fad3,'apiVersion':_0x5abc31});const _0x4e1eb2=new Date(),_0x2c5ff8=Date['parse'](_0x4e1eb2);if(!_0x82dc){invalidMiners[_0x212a2f]={'accountName':_0x1081e1,'workerName':_0x50fc26,'ipAddress':_0x32d554,'macAddress':_0x212a2f,'placement':_0x31e6c8},invalidMiners[_0x212a2f][_0x1244f0(0x1e4)]='inactive',deadMiners[_0x212a2f]=invalidMiners[_0x212a2f];if(!_0x39077b[_0x1244f0(0xf9)])_0x39077b[_0x1244f0(0xf9)]={'hashRate':0x0,'hashRateAvg':0x0,'accountName':'','poolName':'','temperatures':[0x0],'frequency':0x0,'pools':[]};else!_0x39077b[_0x1244f0(0xf9)][_0x1244f0(0x148)]&&(_0x39077b[_0x1244f0(0xf9)]['hashRate']=0x0,_0x39077b[_0x1244f0(0xf9)][_0x1244f0(0x188)]=0x0,_0x39077b[_0x1244f0(0xf9)][_0x1244f0(0x148)]=_0x4e1eb2);return trackTrends(_0x39077b,_0x4e1eb2,_0x11747a),{'upsertedMiner':await upsertMinerInfo({'minerInfo':_0x39077b}),'state':invalidMiners[_0x212a2f][_0x1244f0(0x1e4)]};}_0x82dc[_0x1244f0(0x12d)]=_0x4e1eb2,_0x82dc[_0x1244f0(0xd4)]=_0x2bc607||{};let {cardFailureChains:_0x8193f5,temperatures:_0x35d693,intakeSpeed:_0x28bfe4,exhaustSpeed:_0x302774,..._0x538570}=_0x82dc;delete _0x538570[_0x1244f0(0x1be)];const {condition:_0x466e03,conditionPrime:_0x578b36}=_0x39077b;!_0x578b36&&(_0x39077b[_0x1244f0(0x185)]=_0x538570);_0x39077b[_0x1244f0(0x17a)]=_0x9db9c||{};if(!_0x466e03||!_0x466e03[_0x1244f0(0x121)])return _0x39077b['condition']=_0x82dc,{'upsertedMiner':await upsertMinerInfo({'minerInfo':_0x39077b}),'state':'initial'};trackTrends(_0x39077b,_0x4e1eb2,_0x11747a);const {poolsAreDifferent:_0x3c5846,remotesPools:_0x2c92d4,poolsConfig:_0x1935e5,workerName:_0x359b90}=await validateMinerConfig({'minerInfo':_0x39077b,'apiVersion':_0x5abc31,'dataCenterSettings':dataCenterSettings,'isBulk':!![]});if(_0x3c5846){if(_0x39077b[_0x1244f0(0x1b6)]){const {poolIDs:_0x420ea6}=_0x39077b;console[_0x1244f0(0x173)]('Sync\x20miner\x20configuration\x20for\x20'+_0x50fc26+_0x1244f0(0x1f5)+_0x32d554,_0x2c92d4,_0x1935e5);}else{let {url:url='n/a',user:user='n/a'}=_0x2c92d4['pools'][0x0]||{},{stratum:stratum=_0x1244f0(0x1fa),username:username=_0x1244f0(0x1fa)}=_0x1935e5[_0x1244f0(0x121)][0x0]||{};url=url[_0x1244f0(0x21a)](/.*:\/\//,''),stratum=stratum['replace'](/.*:\/\//,''),url==stratum&&user==username?console[_0x1244f0(0x173)](_0x1244f0(0x1b8)+_0x50fc26+_0x1244f0(0x1f5)+_0x32d554+'.\x20no\x20poolIDs\x20saved.',_0x359b90,_0x2c92d4,_0x1935e5):console[_0x1244f0(0x173)](_0x1244f0(0x1b4)+_0x50fc26+',\x20\x20'+_0x32d554+'.\x20no\x20poolIDs\x20saved.\x20'+user+_0x1244f0(0x100)+url+_0x1244f0(0xee)+username+'\x20@\x20'+stratum);}}const _0x158d4f=!isNaN(_0x82dc[_0x1244f0(0xeb)])?parseInt(_0x82dc[_0x1244f0(0xeb)]):0x0,_0x28a84f=_0x82dc[_0x1244f0(0x188)]||0x0,_0x1a8ba1=_0x82dc['hashRate'],_0x48fef6=_0x39077b[_0x1244f0(0xf9)][_0x1244f0(0x124)]||0x0,_0x590ce2=_0x39077b[_0x1244f0(0xf9)][_0x1244f0(0x10a)];let _0x20a487=parseInt(_0x39077b[_0x1244f0(0x185)][_0x1244f0(0x188)]||0x0);const _0xce0d01=_0x39077b[_0x1244f0(0x110)]?parseInt(_0x39077b['conditionUltimate'][_0x1244f0(0x188)]):'-',{intakeFanName:intakeFanName=_0x1244f0(0x1d9),exhaustFanName:exhaustFanName='fan1',minFanSpeed:_0x21ec2e,tempBoundaries:_0x28692d}=_0x13fad3;_0x28bfe4=parseInt(_0x82dc[_0x1244f0(0xef)]||'0',0xa),_0x302774=parseInt(_0x82dc[_0x1244f0(0x1c0)]||'0',0xa);const _0x1266df=Math[_0x1244f0(0x20f)](_0x1a8ba1/(_0x20a487||_0x1a8ba1||0x1)*0x32)*0x2,_0x36e882=Math[_0x1244f0(0x20f)](_0x1a8ba1/(_0x39077b[_0x1244f0(0x12b)]||_0x1a8ba1||0x1)*0x64),_0x1ddebd=parseInt(_0x158d4f/0x6)/0xa,_0x18b281=_0x1ddebd>MINER_BOOT_CHECK_MINUTES,_0x73e246=_0x39077b['rebootTimes']?_0x39077b[_0x1244f0(0x1ea)]['slice'](-0x1)[0x0]:{},_0x219e19=_0x73e246[_0x1244f0(0x12d)]||_0x39077b[_0x1244f0(0x146)]||_0x4e1eb2,_0x812cf=parseInt((_0x2c5ff8-Date[_0x1244f0(0x168)](_0x219e19))/(0x3c*0x3e8)),_0x125713=_0x812cf>MINER_BOOT_MAX_MINUTES,_0x1f6dcd=_0x812cf>MINER_LOG_FAILING_MINUTES,_0x11c045=!_0x18b281&&_0x1ddebd>0x0;let _0x4a16a9=!_0x18b281&&_0x48fef6<0x1&&_0x1a8ba1<0x1&&!_0x302774&&!_0x28bfe4,_0x2ecd3d=![],_0x2cce58=![],_0xb4298=![];_0x125713&&!_0x11c045&&(_0x4a16a9?(_0x2ecd3d=!![],_0x4a16a9=![]):_0x2ecd3d=parseInt(_0x1a8ba1)==parseInt(_0x48fef6)&&_0x82dc[_0x1244f0(0x10a)]==_0x590ce2||_0x1266df==Infinity,_0x2cce58=_0x36e882<struggleHighCheckPercent&&_0x1266df<struggleHighCheckPercent,_0xb4298=_0x1266df<failureMinCheckPercent);let _0x5a1123=![];if(_0x2ecd3d&&_0x39077b[_0x1244f0(0x146)]&&_0x39077b[_0x1244f0(0x1eb)]){const _0x1bfbd5=_0x39077b[_0x1244f0(0x146)],_0x23e653=0x2*0x3c*0x3c*0x3e8,_0x4d8bbb=Math[_0x1244f0(0xe9)](_0x23e653/dataCenterSettings[_0x1244f0(0x165)]),_0x5c0e0f=parseInt((_0x2c5ff8-Date['parse'](_0x1bfbd5))/dataCenterSettings[_0x1244f0(0x165)]);_0x5a1123=_0x5c0e0f%_0x4d8bbb==0x0;}var _0x31ba39=![];if(_0x82dc[_0x1244f0(0x107)]){let _0x4be20d=(_0x82dc[_0x1244f0(0x107)]||0x0)/(_0x82dc['accepted']||0x1);_0x31ba39=_0x4be20d>MAX_REJECTED_RATE;}let _0xae03fd=(_0x82dc[_0x1244f0(0x10d)]||[0x0])[_0x1244f0(0x14b)](intAdder,0x0),_0x3fbc33=parseInt(_0xae03fd/((_0x82dc[_0x1244f0(0xeb)]||0x1)/0x3c)),_0x70deb7=!_0x13fad3['overclock']?![]:_0x3fbc33>(_0x13fad3[_0x1244f0(0xd5)][_0x1244f0(0x20c)]||MAX_CHIP_ERROR_RATE),_0x595c7c=![],_0x324234=![];if(Array['isArray'](_0x82dc['temperatures'])&&_0x82dc[_0x1244f0(0x18c)][0x0]){let _0xe7d7df=Math[_0x1244f0(0x10b)](..._0x82dc[_0x1244f0(0x18c)]||[0x0]);const _0x372ede=getTempStateName(_0xe7d7df,_0x28692d);_0x595c7c=/^hot$/i[_0x1244f0(0x193)](_0x372ede),_0x324234=/^(mild|cool)$/i[_0x1244f0(0x193)](_0x372ede),_0x82dc[_0x1244f0(0x1ca)]=_0x372ede;}wattsConsumedTally+=isNaN(_0x82dc[_0x1244f0(0x1e8)])?0x0:parseFloat(_0x82dc[_0x1244f0(0x1e8)],0xa);if(_0x82dc[_0x1244f0(0x1c8)]&&_0x82dc[_0x1244f0(0x1c8)][_0x1244f0(0x1f2)]){}if(!_0x2ecd3d&&_0x28bfe4<(_0x21ec2e||MIN_VIABLE_FAN_SPEED)){}if(!_0x2ecd3d&&_0x302774<(_0x21ec2e||MIN_VIABLE_FAN_SPEED)){}_0x39077b[_0x1244f0(0xf9)]=_0x82dc;_0x82dc['accountName']&&(_0x39077b[_0x1244f0(0x16a)]=_0x82dc[_0x1244f0(0x16a)]);_0x82dc[_0x1244f0(0x127)]&&(_0x39077b[_0x1244f0(0x127)]=_0x82dc['workerName']);_0x82dc['workerTypeNumber']&&(_0x39077b[_0x1244f0(0x161)]=_0x82dc[_0x1244f0(0x161)]);if(currentSiteState===SITE_STATE_UNKNOWN){elapsedTally+=_0x158d4f,++minersScannedCount;if(elapsedTally/minersScannedCount>dataCenterSettings[_0x1244f0(0x165)]/0x1f4)currentSiteState=SITE_STATE_NORMAL;else minersScannedCount>minerCount*0.2&&(initiatePowerRampUp=!![],currentSiteState=SITE_STATE_OUTAGE);}!_0x125713&&(_0x20a487=_0x20a487*0.8);if(_0x1a8ba1>_0x20a487||isNaN(_0x48fef6)){const {cardStatus:_0x3ecf02,cardFailureChains:_0x240fd1,temperatures:_0x5e7920,intakeSpeed:_0x2579e5,exhaustSpeed:_0x37dfe9,..._0x4e2335}=_0x82dc;_0x39077b[_0x1244f0(0x185)]=_0x4e2335;const {pools:_0x527958,..._0x2d4d84}=_0x4e2335;if(!_0x39077b['conditionUltimate'])_0x39077b[_0x1244f0(0x110)]=_0x2d4d84;else _0x1a8ba1>(_0x39077b[_0x1244f0(0x110)]['hashRate']||_0x39077b['conditionUltimate'][_0x1244f0(0x188)]||0x0)&&(_0x39077b[_0x1244f0(0x110)]=_0x2d4d84);}const _0xc35de3={'accountName':_0x1081e1,'workerName':_0x50fc26,'ipAddress':_0x32d554,'macAddress':_0x212a2f,'placement':_0x31e6c8};_0x1266df<0x5&&(deadMiners[_0x212a2f]=_0xc35de3);let _0x19eb69='',_0x100d5e=![],_0x1f0722=![];if(_0x4a16a9)_0x19eb69=MINER_STATE_BOOTING;else{if(_0x125713){if(_0x2ecd3d)_0x19eb69=MINER_STATE_STALLED;else{if(_0x2cce58)_0x19eb69=MINER_STATE_STRUGGLING;else{if(_0xb4298)_0x19eb69=MINER_STATE_FAILING;else{if(_0x31ba39)_0x19eb69=MINER_STATE_REJECTING;else _0x70deb7&&(_0x19eb69=MINER_STATE_ERRORING);}}}_0x100d5e=_0x2cce58||_0xb4298||_0x2ecd3d,_0x1f0722=!!_0x19eb69;}else!_0x100d5e?_0x19eb69=MINER_STATE_NORMAL:_0x19eb69=MINER_STATE_DEGRADING;}_0x19eb69&&(_0x39077b[_0x1244f0(0x1f1)]=_0x19eb69);let _0x32a1bc=_0x324234&&hasAvailablePower&&_0x1ddebd>MINER_OC_INTERVAL_MINUTES;const _0x256569=!!(_0x13fad3[_0x1244f0(0xd5)]&&_0x39077b[_0x1244f0(0x209)]&&(initiatePowerRampUp||_0x70deb7||_0x595c7c||_0x32a1bc));console[_0x1244f0(0x173)](_0x1244f0(0x149)+_0x19eb69+']\x20'+_0x50fc26+',\x20'+_0x32d554+_0x1244f0(0x13e)+_0x1266df+_0x1244f0(0x1cd)+_0x36e882+_0x1244f0(0x207)+hasAvailablePower+_0x1244f0(0xfd)+_0x1f0722+_0x1244f0(0x186)+_0x256569+',\x20isReUpload='+_0x5a1123+_0x1244f0(0x1cc)+_0x324234+_0x1244f0(0xe8)+_0x595c7c+',\x20initiatePowerRampUp='+initiatePowerRampUp+_0x1244f0(0x1a3)+_0x70deb7+_0x1244f0(0x1d6)+_0x18b281+_0x1244f0(0x152)+_0x125713+_0x1244f0(0xed)+_0x1f6dcd+_0x1244f0(0x116)+_0x2ecd3d+',\x20isStruggling='+_0x2cce58+',\x20isOverRejecting='+_0x31ba39+_0x1244f0(0x151)+_0xb4298+_0x1244f0(0x1e9)+_0x1ddebd+_0x1244f0(0x1dd)+_0x812cf+_0x1244f0(0x11b)+_0x39077b['offlineTimestamp']+_0x1244f0(0x1da)+_0x39077b[_0x1244f0(0x146)]);const _0x4b7567=_0x1081e1+'.'+_0x50fc26+'\x20['+_0x32d554+',\x20'+_0x212a2f+_0x1244f0(0x157)+_0x19eb69+_0x1244f0(0x206)+_0x1ddebd+_0x1244f0(0x129)+_0x812cf+_0x1244f0(0x1e0)+_0x28bfe4+',\x20'+_0x302774+_0x1244f0(0x187)+parseInt(_0x1a8ba1)+',\x20'+_0x20a487+',\x20'+_0xce0d01+_0x1244f0(0x1a0)+_0x1266df+_0x1244f0(0xe4)+_0x36e882+'%';validMiners[_0x212a2f]={'logText':_0x4b7567,'accountName':_0x1081e1,'workerName':_0x50fc26,'ipAddress':_0x32d554,'macAddress':_0x212a2f,'placement':_0x31e6c8};if(_0x256569){delete alertableMiners[_0x212a2f];_0x70deb7&&(_0x32a1bc=![]);const _0x4c6a59=initiatePowerRampUp?-0x9:_0x32a1bc?0x1:-0x1,_0x187d67=getOptimumClockSettings(_0x39077b,_0x82dc,_0x13fad3,_0x4c6a59),{condition:_0x3dc911,conditionPrime:_0x3c98ab,clockSettings:_0x46f7c4}=_0x39077b,_0x567333=_0x3dc911['pools']&&_0x3dc911[_0x1244f0(0x121)][_0x1244f0(0x1f2)]?_0x3dc911[_0x1244f0(0x121)]:_0x3c98ab[_0x1244f0(0x121)],_0x31fbc2=_0x46f7c4||{},_0x178a11=_0x187d67[_0x1244f0(0x132)]&&_0x567333&&_0x567333[_0x1244f0(0x1f2)];_0x187d67[_0x1244f0(0x132)]?console['debug'](_0x1244f0(0xc2)+_0x50fc26+',\x20'+_0x32d554+_0x1244f0(0xff)+hasAvailablePower+',\x20since\x20'+_0x1ddebd+_0x1244f0(0x122)+_0x187d67['frequency']+','+_0x187d67[_0x1244f0(0x169)]+_0x1244f0(0x1fb)+_0x31fbc2[_0x1244f0(0x132)]+','+_0x31fbc2['volts']+'v'):console[_0x1244f0(0x173)](_0x1244f0(0x1fd)+_0x50fc26+',\x20'+_0x32d554+_0x1244f0(0xff)+hasAvailablePower+_0x1244f0(0x1ac)+_0x1ddebd+_0x1244f0(0x18d)+_0x31fbc2[_0x1244f0(0x132)]+','+_0x31fbc2[_0x1244f0(0x169)]+'v');if(_0x178a11&&(_0x31fbc2[_0x1244f0(0x132)]!==_0x187d67[_0x1244f0(0x132)]||_0x31fbc2[_0x1244f0(0x169)]!==_0x187d67[_0x1244f0(0x169)])){const _0x2da656=_0x187d67,_0x4ff5c6=_['map'](_0x567333,(_0x405358,_0x3cde1d)=>{const _0x3aec94=_0x1244f0;return{'index':_0x3cde1d+0x1,'stratum':_0x405358[_0x3aec94(0x1ee)],'username':_0x405358[_0x3aec94(0x19b)],'password':'x'};});return updateMinerSettings({'minerInfo':_0x39077b,'minerTyped':_0x13fad3,'pools':_0x4ff5c6,'minerConfigOptions':_0x2da656,'apiVersion':_0x5abc31})[_0x1244f0(0x1aa)](async _0x2c1149=>{const _0x130412=_0x1244f0;if(/\bok\b/i[_0x130412(0x193)](_0x2c1149)){_0x39077b[_0x130412(0x1f1)]=MINER_STATE_CLOCKING,console[_0x130412(0xe3)](_0x130412(0xfa)+_0x50fc26+',\x20'+_0x39077b['ipAddress']+_0x130412(0x1e7)+(_0x187d67[_0x130412(0x132)]>_0x31fbc2['frequency']?'up':_0x130412(0x1e5))+_0x130412(0x1ab)+_0x187d67[_0x130412(0x132)]+_0x130412(0x189)+_0x187d67[_0x130412(0x169)]+_0x130412(0x19e)+(_0x31fbc2[_0x130412(0x132)]||0x0)+_0x130412(0x189)+(_0x31fbc2[_0x130412(0x169)]||0x0)+_0x130412(0x190)),_0x39077b[_0x130412(0x119)]={..._0x2da656},_0x39077b[_0x130412(0x185)]=null;const _0x9e42bb=!_0x39077b[_0x130412(0x10e)]||parseInt(_0x39077b[_0x130412(0x10e)])>_0x187d67[_0x130412(0x132)];(_0x70deb7||_0x2cce58)&&_0x9e42bb&&(console[_0x130412(0xe3)](_0x130412(0x219)+_0x50fc26+_0x130412(0xfb)+_0x39077b[_0x130412(0x10e)]+_0x130412(0x1c6)+_0x187d67[_0x130412(0x132)]),_0x39077b['clockFrequencyCap']=_0x187d67[_0x130412(0x132)]);}else console[_0x130412(0xe3)](_0x130412(0x11d)+_0x50fc26+',\x20'+_0x39077b[_0x130412(0x20e)]+_0x130412(0xda)+_0x187d67[_0x130412(0x132)]+_0x130412(0xd9)+_0x187d67['volts']);return{'upsertedMiner':await upsertMinerInfo({'minerInfo':_0x39077b}),'state':_0x19eb69};});}}else{if(_0x5a1123){const {firmwareFileName:_0x23865d}=_0x39077b;if(!/updater/[_0x1244f0(0x193)](_0x23865d))return console[_0x1244f0(0xe3)](_0x1244f0(0x1f3)+_0x4b7567),updateMinerFirmware({'minerInfo':_0x39077b,'minerTyped':_0x13fad3,'firmwareFileName':_0x23865d,'apiVersion':_0x5abc31});else console[_0x1244f0(0xe3)]('Not\x20uploading\x20OC\x20firmware\x20'+_0x4b7567);}else{if(_0x1f0722){if(_0x39077b['runtimeState']===MINER_STATE_REBOOTING)console[_0x1244f0(0xe3)](_0x1244f0(0xe2)+_0x4b7567),_0x39077b[_0x1244f0(0x1f1)]=MINER_STATE_BOOTING;else{if(_0x100d5e){alertableMiners[_0x212a2f]=_0xc35de3,_0x39077b[_0x1244f0(0x1f1)]=MINER_STATE_REBOOTING;!_0x39077b[_0x1244f0(0x1ea)]&&(_0x39077b[_0x1244f0(0x1ea)]=[]);_0x39077b[_0x1244f0(0x1ea)]['length']>0x14&&_0x39077b['rebootTimes'][_0x1244f0(0x1f8)]();_0x39077b[_0x1244f0(0x185)]=null,_0x39077b[_0x1244f0(0x1ea)][_0x1244f0(0x117)]({'reason':_0x19eb69,'timestamp':_0x4e1eb2,'percentOfPrime':_0x1266df,'liveHashRate':_0x1a8ba1,'liveHashRateAvg':_0x28a84f}),console[_0x1244f0(0xe3)]('Rebooting\x20'+_0x4b7567);const _0x5a0159=upsertMinerInfo({'minerInfo':_0x39077b})[_0x1244f0(0x1aa)](()=>getMinerReboot(_0x39077b,_0x13fad3,_0x5abc31));return{'upsertedMiner':_0x5a0159,'state':_0x39077b[_0x1244f0(0x1f1)]};}else console[_0x1244f0(0x173)](_0x1244f0(0xf2)+_0x4b7567),console['log'](_0x1244f0(0xf2)+_0x1081e1+'.'+_0x50fc26+'\x20['+_0x32d554+',\x20'+_0x212a2f+_0x1244f0(0x157)+_0x19eb69);}}else{if(_0x19eb69&&_0x39077b['runtimeState']!==MINER_STATE_NORMAL)alertableMiners[_0x212a2f]=_0xc35de3,alertableMiners[_0x212a2f][_0x1244f0(0x1e4)]=_0x19eb69,_0x1f6dcd&&(console[_0x1244f0(0xe3)](_0x1244f0(0x192)+_0x4b7567),console[_0x1244f0(0x173)](_0x1244f0(0x13c)+_0x19eb69+_0x1244f0(0x1b7)+inspect(_0x3e88cf)));else return _0x39077b[_0x1244f0(0x146)]=_0x4e1eb2,delete alertableMiners[_0x212a2f],{'upsertedMiner':await upsertMinerInfo({'minerInfo':_0x39077b}),'state':_0x19eb69};}}}return{'upsertedMiner':await upsertMinerInfo({'minerInfo':_0x39077b}),'state':_0x19eb69};}let hasAvailablePower=0x0,wattsConsumedTally=0x0,elapsedTally=0x0,minersScannedCount=0x0,initiatePowerRampUp=![],currentSiteState=SITE_STATE_NORMAL,minerCount=0x0,deadMiners={};async function compareMinerStatus(_0x3498f9,_0x32fd45,_0x4193b9){const _0x37b741=_0x57cadf,_0x46fc03=loopback['getModel'](_0x37b741(0x1c3)),{availableKilowatts:availableKilowatts=0x0,powerRampUpDisabled:powerRampUpDisabled=![],configureMode:_0x195ae0}=dataCenterSettings;!kilowattsConsumed&&(kilowattsConsumed=availableKilowatts);hasAvailablePower=!availableKilowatts||availableKilowatts>kilowattsConsumed,wattsConsumedTally=0x0,elapsedTally=0x0,minersScannedCount=0x0,initiatePowerRampUp=![],currentSiteState=powerRampUpDisabled?SITE_STATE_NORMAL:SITE_STATE_UNKNOWN,deadMiners={};let _0x146645=Date[_0x37b741(0x108)](),_0x1da692={};if(_0x3498f9){const {range:_0x2021ef}=_0x3498f9,_0x1bfce3=getIPRange(_0x2021ef[0x0],_0x2021ef[0x1]);_0x1da692={'where':{'ipAddress':{'inq':_0x1bfce3}}};}const _0x24693e=await _0x46fc03[_0x37b741(0x17b)](_0x1da692),_0x3c3d39=_0x24693e[_0x37b741(0x104)](_0x3d912d=>_0x3d912d[_0x37b741(0x20e)]),_0x29f2cf=await getScanCache(_0x3498f9||dataCenterSettings[_0x37b741(0x208)],_0x32fd45,_0x4193b9,_0x3c3d39);if(_0x195ae0===CONFIGURE_MODE_PROVISION){console[_0x37b741(0xe3)](_0x37b741(0x1ec)+(_0x195ae0==CONFIGURE_MODE_DISCOVERY?_0x37b741(0x198):_0x37b741(0x174))+'.');return;}if(!minerCheckCompleted){console['log']('Miner\x20status\x20check\x20skipped\x20one\x20time\x20to\x20avoid\x20multiple\x20concurrent\x20scans.'),minerCheckCompleted=!![];return;}minerCheckCompleted=![],minerCount=_0x24693e[_0x37b741(0x1f2)];const _0x5cc531=Date['parse'](new Date())[_0x37b741(0x215)]();console['log'](_0x37b741(0x130)+minerCount+_0x37b741(0x194)+kilowattsConsumed[_0x37b741(0xdc)]()+_0x37b741(0xe6)+availableKilowatts[_0x37b741(0xdc)]()+_0x37b741(0x11e));const _0x2e1685={'skipped':[],'live':[]},_0x58257b=0x64;while(_0x24693e[_0x37b741(0x1f2)]){await Promise['all'](_0x24693e['splice'](0x0,_0x58257b)[_0x37b741(0x104)](async _0x2e61a3=>{const _0x513d85=_0x37b741;let {ipAddress:_0x1c71e7}=_0x2e61a3;const _0x4f7cf0=!_0x1c71e7||!!_0x29f2cf[_0x1c71e7],{upsertedMiner:_0x4bf6e2,state:_0x23e27f}=await syncMinerStatusJob(_0x2e61a3,_0x5cc531,_0x4f7cf0);console[_0x513d85(0x173)]('SyncState\x20of\x20'+_0x23e27f+'\x20for\x20miner\x20'+(_0x4bf6e2?.['ipAddress']||_0x1c71e7)),_0x4bf6e2?(!_0x2e1685[_0x23e27f]&&(_0x2e1685[_0x23e27f]=[]),_0x2e1685[_0x23e27f||_0x513d85(0x120)][_0x513d85(0x117)](_0x4bf6e2?.['ipAddress'])):_0x2e1685[_0x513d85(0x15f)][_0x513d85(0x117)](_0x1c71e7);})),console[_0x37b741(0x173)](_0x37b741(0x1e2)+_0x58257b+'.\x20'+_0x24693e[_0x37b741(0x1f2)]+_0x37b741(0x13d));};Object[_0x37b741(0x159)](_0x2e1685)[_0x37b741(0x1d7)](_0x16a8e8=>{_0x2e1685[_0x16a8e8]['sort'](ipDesc);});if(!_0x2e1685)return;const _0x36a09e=function(_0x5c67b0){const _0x143b74=_0x37b741;reportedDates[_0x5c67b0[_0x143b74(0x154)]]&&reportedDates[_0x5c67b0[_0x143b74(0x154)]]<Date['now']()-notifyTime&&(reportedDates[_0x5c67b0['macAddress']]=null);if(!reportedDates[_0x5c67b0[_0x143b74(0x154)]])return!![];};let _0x49b6ae=_['sortBy'](_[_0x37b741(0x1a9)](invalidMiners,_0x36a09e),[_0x37b741(0x16a),_0x37b741(0x127)]),_0x5e8d98=_[_0x37b741(0x1df)](_[_0x37b741(0x1a9)](alertableMiners,_0x36a09e),[_0x37b741(0x16a),_0x37b741(0x127)]),_0x2a792b=_['sortBy'](_[_0x37b741(0x1a9)](deadMiners,_0x36a09e),(_0x3b931b={})=>{const _0x213ca0=_0x37b741,{hall:_0x3fac00,rack:_0x3ccb43,shelf:_0x9fe703,position:_0x3dd217}=_0x3b931b[_0x213ca0(0x1c5)]||{};return[_0x3fac00,_0x3ccb43,_0x9fe703,_0x3dd217];}),_0x1f24d2='';const _0x4d515b=(_0x883057,_0x117d75)=>{const _0x5c8ea5=_0x37b741;_0x117d75&&(_0x883057[_0x5c8ea5(0xf9)]={});const {accountName:_0x154565,workerName:_0x48236c,ipAddress:_0x189569,macAddress:_0x168d32}=_0x883057;reportedDates[_0x168d32]=Date[_0x5c8ea5(0x108)]();const {hall:_0x5bfb61,rack:_0x2d9649,shelf:_0x54c9ad,position:_0x248348}=_0x883057[_0x5c8ea5(0x1c5)]||{};return _0x154565+'.'+_0x48236c+'\x20at\x20'+_0x5bfb61+'.'+_0x2d9649+'.'+_0x54c9ad+'.'+_0x248348+'\x09\x20('+_0x189569+')';};_0x49b6ae['length']&&(_0x1f24d2+='\x0a['+dataCenterSettings[_0x37b741(0xc7)]+']\x20'+_0x49b6ae[_0x37b741(0x1f2)]+_0x37b741(0x212)+dataCenterSettings[_0x37b741(0x1b9)]+'.\x0a',_0x1f24d2+=_[_0x37b741(0x104)](_0x49b6ae,_0xb87081=>_0x4d515b(_0xb87081,!![]))[_0x37b741(0x147)]('\x0a'));_0x5e8d98['length']&&(_0x1f24d2+='\x0a['+dataCenterSettings[_0x37b741(0xc7)]+']\x20'+_0x5e8d98['length']+_0x37b741(0x11a)+dataCenterSettings[_0x37b741(0x1b9)]+'.\x0a',_0x1f24d2+=_[_0x37b741(0x104)](_0x5e8d98,_0x102c2d=>_0x4d515b(_0x102c2d))[_0x37b741(0x147)]('\x0a'));if(_0x2a792b['length']>minerCount*(dataCenterSettings[_0x37b741(0x162)]||0x2)/0x64){let _0x462037=dataCenterSettings[_0x37b741(0x1b9)]+'.\x20'+_0x2a792b[_0x37b741(0x1f2)]+_0x37b741(0x1b2);_0x1f24d2=_[_0x37b741(0x14b)](_0x2a792b,(_0x592d3b,_0x324bd5={})=>{const _0x5a8ae1=_0x37b741,{hall:hall='',rack:rack='',shelf:shelf='',position:position=''}=_0x324bd5[_0x5a8ae1(0x1c5)]||{};var _0x5dd494=hall+'.'+rack+'.'+shelf+'.'+position;return _0x5dd494[_0x5a8ae1(0x1f2)]<=0x4&&(_0x5dd494='Not\x20assigned.'),_0x592d3b+(_0x5dd494+'\x09'+_0x324bd5[_0x5a8ae1(0x127)]+'\x0d');},'\x0d'),await offlineMiners({'subject':_0x462037,'text':_0x1f24d2})[_0x37b741(0x1d1)](_0x289ea8=>{const _0x14cad0=_0x37b741;console[_0x14cad0(0xd1)](_0x14cad0(0x1c9),_0x289ea8);})[_0x37b741(0x1aa)](_0xe1cc47=>{const _0x43079c=_0x37b741;console[_0x43079c(0xe3)](_0x43079c(0x170),_0xe1cc47);},_0x1e3b80=>{console['error'](_0x1e3b80);});}let _0x2faf25=parseInt(Math['round']((Date['now']()-_0x146645)/0x64))/0xa;kilowattsConsumed=parseInt(wattsConsumedTally/0x3e8);const _0x862c4e='Miner\x20status\x20check\x20completed\x20for\x20'+minerCount+_0x37b741(0x1b3)+_0x2faf25+_0x37b741(0x118)+kilowattsConsumed[_0x37b741(0xdc)]()+_0x37b741(0xe6)+availableKilowatts['toLocaleString']()+_0x37b741(0x11e);return console[_0x37b741(0xe3)](_0x862c4e),slackMessage({'text':_0x1f24d2}),socketSendMiners(_0x2e1685),minerCheckCompleted=!![],{'message':_0x862c4e,'minerInfoUpserts':_0x2e1685,'invalids':_0x49b6ae,'alertables':_0x5e8d98,'deadones':_0x2a792b,'validMiners':validMiners,'text':_0x1f24d2};}function socketSendMiners(_0x549c3d,_0x3aa7a1){const _0x1a229b=_0x57cadf;let _0x184a11=_[_0x1a229b(0x104)](_0x549c3d,(_0x3bc5d3={})=>{const _0x4035e1=_0x1a229b;if(!_0x3bc5d3||!_0x3bc5d3[_0x4035e1(0x11c)])return{};const {name:_0x1ff14e,minerType:_0x3e0638,ipAddress:_0xaba19b,macAddress:_0x398340,placement:_0x1dd807,accountName:_0x57f277,workerName:_0x2bd0bf,condition:_0x10a07d,conditionPrime:_0x9e25fb,deployments:_0xe93ca6,systemLogicVersion:_0x196432,serialNumber:_0x2fafcd,psuSerialNumber:_0xd870cb,psuModel:_0x173cd2,networkSwitchRef:_0x5de8dd,breakerPanelId:_0x1dc457,powerBarId:_0x4704c1,powerPhase:_0x8317fe,transformerLow:_0x4254fa,transformerMed:_0x1d886e}=_0x3bc5d3;let _0x3d43b8={'name':_0x1ff14e,'minerType':_0x3e0638,'ipAddress':_0xaba19b,'macAddress':_0x398340,'placement':_0x1dd807,'accountName':_0x57f277,'workerName':_0x2bd0bf,'condition':_0x10a07d,'conditionPrime':_0x9e25fb,'deployments':_0xe93ca6,'systemLogicVersion':_0x196432,'serialNumber':_0x2fafcd,'psuSerialNumber':_0xd870cb,'psuModel':_0x173cd2,'networkSwitchRef':_0x5de8dd,'breakerPanelId':_0x1dc457,'powerBarId':_0x4704c1,'powerPhase':_0x8317fe,'transformerLow':_0x4254fa,'transformerMed':_0x1d886e};return _0x3bc5d3['minerType']&&minerTypeMap[_0x3e0638]&&(_0x3d43b8[_0x4035e1(0x111)]=minerTypeMap[_0x3e0638]),_0x3d43b8[_0x4035e1(0x20a)]=_0x3aa7a1||'',_0x3d43b8;}),_0x562f28=_0x1a229b(0x1ef)+JSON['stringify'](_0x184a11)+'}';socketSend({'text':_0x562f28});}function sendMessage({text:_0x42605b,accessToken:_0x4948bf},_0xe1250d){if(!_0x42605b)return;_0xe1250d&&slackMessage({'text':_0x42605b}),socketSend({'text':_0x42605b,'accessToken':_0x4948bf});}module[_0x57cadf(0x210)]={'provisionMiner':provisionMiner,'provisionMinersByType':provisionMinersByType,'provisionUnresponsiveMiner':provisionUnresponsiveMiner,'getDataCenterRacklist':getDataCenterRacklist,'discoverMiners':discoverMiners,'compareMinerStatus':compareMinerStatus,'setDataCenterSettings':setDataCenterSettings,'syncMinerStatusJob':syncMinerStatusJob,'socketSendMiners':socketSendMiners};function _0x1933(){const _0xfc5a9d=['],\x20hashrates:[','hashRateAvg','M,\x20','lodash','Trend\x20archiving','temperatures','\x20minutes,\x20staying\x20at\x20:','Unable\x20to\x20extract\x20pools\x20for\x20unregistered\x20miner\x20system\x20info\x20for\x20','netmask','(m)v','slice','Failing\x20miner\x20','test','\x20miners.\x20Power\x20consumed\x20','\x20[\x20','historical','3699696XBvsRo','discovery','message','hot','user','clockingFirmware','discoverMiners\x20error:','(m)v\x20from:\x20','dead','],\x20at:','scanStats','discovered',',\x20isErroring=','lastAccess','Candidate\x20for\x20miner\x20pools\x20update\x20for\x20','booting','Unknown\x20miner\x20type\x20at\x20[','Unable\x20to\x20get\x20miner\x20system\x20info\x20from:\x20','filter','then','\x20to\x20',',\x20since\x20','enableSSH','1112412nReNHK','Settings\x20update\x20requested\x20for\x20repositioning','Scan\x20for\x20miners\x20failed','loopback','\x20offline!','\x20miners\x20in\x20','Unable\x20to\x20sync\x20incorrect\x20configuration\x20for\x20','statusCode','poolIDs','\x20miner\x20state\x20:','Unable\x20to\x20sync\x20configuration\x20for\x20','locationName','workerProperties','hall','\x20miner\x20[','failed','cardStatus','index','exhaustSpeed','destroyed','./miner-proxy','minerInfo','miner-utils','placement',',\x20to:\x20','minerType','cardFailureChains','Unable\x20to\x20send\x20email:','temperatureState','Discover\x20started','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20,\x20isRunningCool=',',\x20hashRatePeriodPercent:\x20','./slack-messaging','getFullYear','Create\x20unresponsive\x20miner\x20at\x20[','catch','trends','stack','trace',',\x20liveMinerState\x20(','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20,\x20hasInitialized=','forEach','Miner\x20pools\x20NOT\x20set.','fan1',',\x20lastEffectiveHashingTime=','Broadcast\x20activity\x20by\x20miner\x20at\x20[','updateFirmware','m,\x20bootElapsedMinutes=','none','sortBy','m.\x20\x20fans:[','./email','Batch\x20sync\x20size\x20is\x20','miners','status','down','Detected','\x20clock\x20','consumption','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20,\x20initElapsedMinutes=','rebootTimes','firmwareFileName','Miner\x20status\x20check\x20skipped\x20during\x20','Miner\x20diagnostic','url','{\x22minerInfos\x22:','Invalid\x20minerType!','runtimeState','length','Uploading\x20firmware\x20','NETWORK_DIAGNOSTIC',',\x20\x20','warn','Broadcast\x20by\x20miner\x20','shift','update','n/a','v\x20from\x20:','Setting\x20deployedOn\x20for\x20','Adjust\x20clock:\x20Keep\x20state\x20for\x20miner\x20','env','useArpTable','get-ip-range','enablePoolConfiguration','reset','lastEvent','monthly','Scan\x20results\x20received\x20for\x20',',\x20live:\x20','%\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20hasAvailablePower=','dhcpSettings','enableManagedClocking','provisionStatus','\x20from\x20','maxChipErrorRate','\x27arp-scan\x27.','ipAddress','round','exports','Configured\x20','\x20miners\x20not\x20found\x20at\x20','System\x20info\x20request\x20failed\x20during\x20scan\x20for\x20','SSH_PORT_STATE','toString','4831803rjKNIw','Miner\x20pools\x20NOT\x20overwritten\x20for\x20','\x20for\x20','Adjusting\x20the\x20clocking\x20cap\x20for\x20','replace','Adjust\x20clock:\x20Update\x20state\x20for\x20miner\x20','broadcast','.log','Discover\x20statistics','../../common/utilities/miner-settings','locationID','Miner\x20status','Settings\x20update\x20requested\x20for\x20','508258aHkSwC','promise-limit','mild','degrading','options','../../common/utilities/data-center',',\x20for\x20','error',',\x20cab:\x20','Retrieve\x20network\x20diagnostic\x20failed\x20for\x20','diagnostic','overclock','findIndex','modelType','2535936votDsW',',\x20volts:','\x20clock\x20to\x20frequency:\x20','placement.hall\x20DESC','toLocaleString','endTime','oldWorkerName','getMinutes',']\x20pool\x20update.\x20(Check\x20config!)','getMonth','Rebooted\x20','log','%,\x20period:','firmwareUpdate','\x20/\x20','getModel',',\x20isOverHeating=','ceil','tempAvg','elapsed','match',',\x20shouldLogFailingMiners=','\x20<>\x20','intakeSpeed','configure','create','Not\x20rebooting\x20','struggling','configureMode','temp_Antminer_updater','sshEnabled','apiVersion','../../common/utilities/plugins','condition','Adjusted\x20miner\x20','\x20from:\x20','Debounced\x20miner\x20pools\x20update\x20\x20[',',\x20tryRebooting=','count',',\x20power\x20available:\x20','\x20@\x20','4800bdoYtC','username','hourly','map','failing','destroy','rejected','now','rebooting','accepted','max','tempHot','hardwareErrors','clockFrequencyCap','sysInfo','conditionUltimate','minerTypeMap','\x20at\x20[','router','Configured\x20Update\x20not\x20required\x20','daily','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20,\x20isStalled=','push','\x20seconds.\x20Consuming\x20','clockSettings','\x20miners\x20are\x20failing\x20at\x20','m,\x20offlineTimestamp=','name','Adjust\x20failure\x20for\x20miner\x20','\x20kw','persistedLog','live','pools','\x20minutes,\x20to\x20','hashing','hashRate','Settings\x20','model','workerName','startTime','m,\x20on:\x20','Miner\x20system\x20info','hashRatePeriodicAverage','splice','timestamp',',\x20cap:\x20','Unable\x20to\x20determine\x20workerName\x20during\x20new\x20miner\x20pool\x20update','Miner\x20status\x20check\x20started\x20for\x20','abort','frequency','getHours','rejecting','./ws-server','discoverMiners\x20request\x20timed\x20out:','all','setting','minutes','],\x20during\x20discovery.\x20(Edit\x20config\x20to\x20force\x20override!)','Miner\x20status\x20request\x20failed\x20during\x20scan\x20for\x20','Failing\x20miner,\x20','\x20left\x20to\x20sync',':,\x20hashRatePercent:\x20','configured','positioned',']\x20name\x20','8939bJRCNF','avg',',\x20frequency:\x20','warm','lastEffectiveHashingTime','join','offlineTimestamp','Miner\x20state[','assign','reduce','.\x20apiVersion:','includes','reboot','rack','Miner\x20pools\x20update\x20ignored\x20for\x20',',\x20isFailing=',',\x20shouldBeHashingByNow=',']\x20failed.','macAddress','Discovered\x20miner\x20','20sSBRfH',']\x20in\x20','7208sKvrzL','keys','\x20Status\x20code:\x20','uri','latestStableFirmware','ignored','stalled','skipped','cool','workerTypeNumber','inactiveAlarmPercentage','success','\x20miners/sec','networkScanInterval','discoverStartTime','getDay','parse','volts','accountName','Configuring\x20aborted\x20due\x20to\x20unknown\x20minerType:','OPEN','enableStaticIP',',\x20step:\x20','fine','Email\x20sent:','4806UjUvNs','Skipped\x20miner\x20[','debug','provisioning','].\x20Miner\x20type\x20[','save','deployedOn','\x20from\x20\x20to\x20','Miner\x20log\x20states','logStates','find','erroring','action','],\x20cab:\x20','enabled','),\x20logStates(','floor','\x20to\x20trigger\x20add\x20to\x20deployments\x20list','Miner\x20pools\x20overwritten\x20for\x20','placement.rack\x20ASC','conditionPrime',',\x20shouldAdjustClock='];_0x1933=function(){return _0xfc5a9d;};return _0x1933();}