/* Copyright (C) 9208-9721 Quebec, Inc - All Rights Reserved
* Unauthorized copying of this file, via any medium is strictly prohibited
* Proprietary and confidential
* Written by Jason Rudland <jason.g.rudland@gmail.com>, September 2022
*/'use strict';const _0x5ae9fe=_0x1fb5;(function(_0x2d8010,_0x11ff1f){const _0x19b1c9=_0x1fb5,_0x1725d3=_0x2d8010();while(!![]){try{const _0x13383b=parseInt(_0x19b1c9(0x31a))/0x1*(-parseInt(_0x19b1c9(0x225))/0x2)+parseInt(_0x19b1c9(0x30b))/0x3*(-parseInt(_0x19b1c9(0x210))/0x4)+-parseInt(_0x19b1c9(0x29c))/0x5+-parseInt(_0x19b1c9(0x30e))/0x6*(parseInt(_0x19b1c9(0x257))/0x7)+-parseInt(_0x19b1c9(0x2e1))/0x8*(parseInt(_0x19b1c9(0x32a))/0x9)+-parseInt(_0x19b1c9(0x1f6))/0xa+parseInt(_0x19b1c9(0x273))/0xb*(parseInt(_0x19b1c9(0x2ca))/0xc);if(_0x13383b===_0x11ff1f)break;else _0x1725d3['push'](_0x1725d3['shift']());}catch(_0x35d68a){_0x1725d3['push'](_0x1725d3['shift']());}}}(_0x26fd,0xf0459));function _0x1fb5(_0xe32639,_0x1ee5ea){const _0x26fdd3=_0x26fd();return _0x1fb5=function(_0x1fb50c,_0x3f1c31){_0x1fb50c=_0x1fb50c-0x1ea;let _0x144d3a=_0x26fdd3[_0x1fb50c];return _0x144d3a;},_0x1fb5(_0xe32639,_0x1ee5ea);}const loopback=require('loopback'),{getMinerSystemInfo,getRemotesPools,getMinerSettings,getMinerStatus,getMinerInfo,getMinerReboot,getMinerReset,getMinerType,getMinerTypeMap,createMinerInfo,updateMinerSettings,updateMinerNetworkSettings,retrieveMinerNetworkDiagnostics,updateMinerFirmware,updateEnableSSH,validateMinerConfig,extractAccountAndWorkerNumber,upsertMinerInfo,getKernelLogs,getPoolIDs,deriveApiVersion,completeMinerVersion}=require('../../common/utilities/miner-settings'),{getPlugin}=require(_0x5ae9fe(0x228)),{getDataCenterSettings}=require(_0x5ae9fe(0x245)),_=require(_0x5ae9fe(0x21b)),{scanForMinerVersions,getScanCache,ipDesc}=require('./net-scan'),{upsertLease}=require('./dhcp-server'),{offlineMiners}=require('./email'),config=require('../../common/config'),{registerProxy}=require(_0x5ae9fe(0x2cd)),{slackMessage}=require('./slack-messaging'),{socketSend}=require(_0x5ae9fe(0x281)),promiseLimit=require(_0x5ae9fe(0x2c8)),{inspect}=require(_0x5ae9fe(0x25d)),{getIPRange}=require('get-ip-range'),{api}=require(_0x5ae9fe(0x229)),{minerTypeMap}=config;let validMiners={},alertableMiners={},invalidMiners={},reportedDates={};const notifyTime=0x18/0x3*0x3c*0x3c*0x3e8,CONFIGURE_MODE_DETECT=0x1,CONFIGURE_MODE_PROVISION=0x2,CONFIGURE_MODE_REPOSITION=0x3,CONFIGURE_MODE_DISCOVERY=0x4,MIN_ACCEPTED_COUNT=0x1f4,MAX_REJECTED_RATE=0.04,MAX_CHIP_ERROR_RATE=0x3c,MIN_CHIP_TEMPERATURE=0x1e,MIN_VIABLE_FAN_SPEED=0x7d0,deploymentDebounceTime=0xf*0x3e8,MINER_OC_INTERVAL_MINUTES=0x25,MINER_BOOT_MAX_MINUTES=0x15,MINER_LOG_FAILING_MINUTES=MINER_BOOT_MAX_MINUTES-0x5,MINER_BOOT_CHECK_MINUTES=0x7,MINER_STATE_NORMAL=_0x5ae9fe(0x2b6),MINER_STATE_BOOTING=_0x5ae9fe(0x2ac),MINER_STATE_REBOOTING=_0x5ae9fe(0x263),MINER_STATE_DEGRADING=_0x5ae9fe(0x204),MINER_STATE_STALLED='stalled',MINER_STATE_CLOCKING=_0x5ae9fe(0x2cf),MINER_STATE_REJECTING='rejecting',MINER_STATE_STRUGGLING='struggling',MINER_STATE_FAILING='failing',MINER_STATE_ERRORING=_0x5ae9fe(0x2f0),failureMinCheckPercent=0x3c,struggleHighCheckPercent=0x55,CHART_TREND_HISTORY_COUNT=0x28,timeSlotPeriod=0x3;let dataCenterSettings=null,isBatchOperation=![];const SSH_PORT_STATE=global[_0x5ae9fe(0x267)],diagnostic=process[_0x5ae9fe(0x1fe)][_0x5ae9fe(0x231)]?JSON[_0x5ae9fe(0x262)](process['env'][_0x5ae9fe(0x231)]):{'type':_0x5ae9fe(0x280),'ipAddress':_0x5ae9fe(0x33c)};Math[_0x5ae9fe(0x28b)]=_0x1c819b=>(_0x1c819b?.['length']?_0x1c819b:[0x0])[_0x5ae9fe(0x250)]((_0x538f4f=0x0,_0x34aed1=0x0)=>parseFloat(_0x34aed1)+parseFloat(_0x538f4f))/(_0x1c819b?.[_0x5ae9fe(0x306)]||0x1);function statusObject(_0x59c722,_0x3c94c6,_0x5cc7e0,_0x4ffa8c){const {ipAddress:_0xab3b94,macAddress:_0x3bdce4}=_0x5cc7e0;return{'action':_0x59c722,'status':_0x3c94c6,'ipAddress':_0xab3b94,'macAddress':_0x3bdce4,'minerConfigOptions':_0x4ffa8c};}let network;async function setDataCenterSettings(_0x44137b){const _0x12cc2c=_0x5ae9fe;dataCenterSettings=_0x44137b,network={'netmask':_0x44137b[_0x12cc2c(0x221)][_0x12cc2c(0x302)],'gateway':_0x44137b[_0x12cc2c(0x221)]['router'],'dnsServer':_0x44137b[_0x12cc2c(0x221)][_0x12cc2c(0x338)]};}async function provisionMiner({ipAddress:_0x3403b1,minerConfigOptions:minerConfigOptions={},minerTyped:minerTyped={}}){const _0x4e07db=_0x5ae9fe,_0x16a6bd=await getMinerSystemInfo({'ipAddress':_0x3403b1,'minerTyped':minerTyped})[_0x4e07db(0x251)](_0x425713=>{const _0x2a5731=_0x4e07db;let _0x5150e0=_0x2a5731(0x27c)+_0x3403b1+_0x2a5731(0x223);_0x425713[_0x2a5731(0x2de)]?_0x425713[_0x2a5731(0x2de)]===0x191?_0x5150e0+='\x20Unauthorized.\x20Password\x20incorrect?':_0x5150e0+=_0x2a5731(0x2e3)+_0x425713[_0x2a5731(0x2de)]:_0x5150e0+=_0x425713[_0x2a5731(0x284)];sendMessage({'text':_0x5150e0});throw _0x425713;});if(!_0x16a6bd)throw new Error(_0x4e07db(0x253)+_0x3403b1);const {macAddress:_0x722147}=_0x16a6bd,{pools:pools=[]}=await getRemotesPools({'ipAddress':_0x3403b1,'macAddress':_0x722147},minerTyped)||{'pools':[{'user':''}]},_0x1f6acc=pools[_0x4e07db(0x1eb)](_0x4be19f=>_0x4be19f['user']),{accountName:_0x538f22,workerName:_0x50272a,workerTypeNumber:_0x54edb}=await extractAccountAndWorkerNumber({'poolWorkers':_0x1f6acc})||{},_0x277cbe={'accountName':_0x538f22,'workerName':_0x50272a,'workerTypeNumber':_0x54edb};let _0x20f35c=await getMinerInfo({'macAddress':_0x722147,'accountName':_0x538f22,'workerName':_0x50272a,'ipAddress':_0x3403b1}),_0x4751ba='Broadcast\x20by\x20miner\x20'+_0x538f22+','+_0x50272a+'\x20at\x20['+_0x3403b1+','+_0x722147+_0x4e07db(0x22f);sendMessage({'text':_0x4751ba}),socketSendMiners([_0x16a6bd],_0x4e07db(0x2b4));const _0x5b2ee9=dataCenterSettings['enablePoolConfiguration'];return configureMiner({'minerSystemInfo':_0x16a6bd,'workerProperties':_0x277cbe,'minerInfo':_0x20f35c,'minerConfigOptions':minerConfigOptions,'shouldConfigurePools':_0x5b2ee9});}async function provisionUnresponsiveMiner({ipAddress:_0x5d61e6,macAddress:_0x4629e7,minerName:_0x3eda1b}){const _0x287dac=_0x5ae9fe,_0x420dbc={'macAddress':_0x4629e7,'ipAddress':_0x5d61e6,'minerType':_0x3eda1b};return configureMiner({'minerSystemInfo':_0x420dbc})[_0x287dac(0x251)](_0x46021c=>{const _0x3c94b8=_0x287dac;let _0x4bba47=_0x3c94b8(0x218)+_0x4629e7+_0x3c94b8(0x223);sendMessage({'text':_0x4bba47});throw _0x46021c;});}async function getDataCenterRacklist({ipAddress:_0x5c4ff5,macAddress:_0x4472de,minerName:_0x6ba0b6}){const _0x10e199=_0x5ae9fe,_0x5c2c92=loopback[_0x10e199(0x2cb)]('minerInfo');let _0x52f8c1={'where':{'placement.position':{'nin':[0x0,'',null,undefined,![]]}},'fields':{'placement':!![]},'order':[_0x10e199(0x2b2),'placement.rack\x20ASC']},_0x716908=await _0x5c2c92[_0x10e199(0x2f7)](_0x52f8c1)[_0x10e199(0x1eb)](_0x35a6cc=>{const {placement:_0x43b708}=_0x35a6cc,{hall:_0x4e904d,rack:_0x788447}=_0x43b708||{};return{'hall':_0x4e904d,'rack':_0x788447};}),_0x2a2da2=_0x716908[_0x10e199(0x264)]((_0x5ce938,_0x48bb1b,_0x22d7a8)=>_0x22d7a8['findIndex'](_0x584104=>[_0x10e199(0x200),_0x10e199(0x224)][_0x10e199(0x298)](_0x31e842=>_0x584104[_0x31e842]===_0x5ce938[_0x31e842]))===_0x48bb1b);return _0x2a2da2=_[_0x10e199(0x2e4)](_0x2a2da2,_0x2f4be0=>_0x2f4be0?.['hall']||_0x10e199(0x22c)),_0x2a2da2;}async function provisionMinersByType({ipAddresses:_0x477c32,poolIDs:_0x4cdbd6,minerUpdates:_0x18fb72,minerConfigOptions:minerConfigOptions={}}){const _0x4a2eb4=_0x5ae9fe,_0xcfd75d=loopback[_0x4a2eb4(0x2cb)](_0x4a2eb4(0x1fd));let _0x819ed6={};isBatchOperation=!![];let _0x3c8d15=_0x18fb72['enableSSH']||_0x18fb72[_0x4a2eb4(0x33e)]||_0x18fb72['enableManagedClocking']?promiseLimit(0x6):promiseLimit(0x64);_0x18fb72[_0x4a2eb4(0x22d)]&&(_0x3c8d15=promiseLimit(0x1));_0x477c32&&_0x477c32[_0x4a2eb4(0x306)]&&(_0x819ed6={'where':{'ipAddress':{'inq':_0x477c32}}});async function _0x5958cb(_0x2ff3c2){const _0x3d702e=_0x4a2eb4,{minerType:_0x206744,ipAddress:_0x32a155}=_0x2ff3c2,_0x17dee8=getMinerTypeMap(_0x2ff3c2),_0x5c651e=deriveApiVersion({'minerInfo':_0x2ff3c2,'minerTyped':_0x17dee8});if(_0x32a155===dataCenterSettings[_0x3d702e(0x221)][_0x3d702e(0x338)][0x0]||_0x32a155===dataCenterSettings['dhcpSettings'][_0x3d702e(0x2be)])return statusObject('reserved',_0x3d702e(0x31f),_0x2ff3c2,minerConfigOptions);!_0x4cdbd6&&(_0x4cdbd6=await getPoolIDs(_0x2ff3c2));if(_0x18fb72[_0x3d702e(0x2af)])return _0x2ff3c2['destroy'](()=>statusObject('destroyed',_0x3d702e(0x31f),_0x2ff3c2,minerConfigOptions));if(_0x18fb72[_0x3d702e(0x2b8)])return getMinerReboot(_0x2ff3c2,_0x17dee8,_0x5c651e)[_0x3d702e(0x317)](()=>statusObject(_0x3d702e(0x328),_0x3d702e(0x31f),_0x2ff3c2,minerConfigOptions));if(_0x18fb72[_0x3d702e(0x33d)])return getMinerReset(_0x2ff3c2,_0x17dee8,_0x5c651e)[_0x3d702e(0x317)](()=>statusObject(_0x3d702e(0x33d),_0x3d702e(0x31f),_0x2ff3c2,minerConfigOptions));if(_0x18fb72['persistLogs']){let _0x4799ca=_0x3d702e(0x22e)+_0x2ff3c2[_0x3d702e(0x311)]+_0x3d702e(0x236);return getKernelLogs({'minerInfo':_0x2ff3c2,'minerTyped':_0x17dee8,'apiVersion':_0x5c651e,'maxSockets':0xa,'filepath':_0x4799ca})['then'](()=>statusObject(_0x3d702e(0x31b),_0x3d702e(0x31f),_0x2ff3c2,minerConfigOptions));}if(_0x18fb72[_0x3d702e(0x301)])return updateEnableSSH({'minerInfo':_0x2ff3c2,'minerTyped':_0x17dee8,'minerInfo':_0x2ff3c2,'apiVersion':_0x5c651e})[_0x3d702e(0x317)](_0x2e175f=>{const _0x53f8b5=_0x3d702e;return _0x2ff3c2[_0x53f8b5(0x313)]=_0x2e175f?_0x2e175f:![],upsertMinerInfo({'minerInfo':_0x2ff3c2})[_0x53f8b5(0x317)](_0x268698=>{const _0x339d1c=_0x53f8b5;return statusObject(_0x339d1c(0x301),_0x2ff3c2['sshEnabled'],_0x2ff3c2,minerConfigOptions);});});if(_0x18fb72['enableStaticIP'])return updateMinerNetworkSettings({'minerInfo':_0x2ff3c2,'network':network,'minerTyped':_0x17dee8,'apiVersion':_0x5c651e})[_0x3d702e(0x317)](_0x3f98a6=>{const _0x1d0402=_0x3d702e;return statusObject(_0x1d0402(0x33e),_0x3f98a6?_0x1d0402(0x201):_0x1d0402(0x2ec),_0x2ff3c2,minerConfigOptions);});if(_0x18fb72[_0x3d702e(0x2aa)])return _0x2ff3c2[_0x3d702e(0x2aa)]=/\bon\b/i[_0x3d702e(0x247)](_0x18fb72['enableManagedClocking']),upsertMinerInfo({'minerInfo':_0x2ff3c2})[_0x3d702e(0x317)](_0x5e6fb1=>{const _0x140137=_0x3d702e;return statusObject(_0x140137(0x2aa),_0x5e6fb1?_0x140137(0x201):_0x140137(0x2ec),_0x2ff3c2,minerConfigOptions);});if(_0x18fb72[_0x3d702e(0x22d)]){let _0x3466cc;if(/overclock/i[_0x3d702e(0x247)](_0x18fb72[_0x3d702e(0x22d)])&&_0x17dee8[_0x3d702e(0x24b)])_0x3466cc=_0x17dee8[_0x3d702e(0x24b)];else{if(/lsf/i['test'](_0x18fb72['updateFirmware'])&&_0x17dee8[_0x3d702e(0x2bf)])_0x3466cc=_0x17dee8[_0x3d702e(0x2bf)];else{if(/\.(gz|swu)$/i['test'](_0x18fb72[_0x3d702e(0x22d)])&&_0x18fb72['updateFirmware'])_0x3466cc=_0x18fb72[_0x3d702e(0x22d)];else return statusObject(_0x3d702e(0x295),_0x3d702e(0x23f),_0x2ff3c2,minerConfigOptions);}}return updateMinerFirmware({'minerInfo':_0x2ff3c2,'minerTyped':_0x17dee8,'firmwareFileName':_0x3466cc,'apiVersion':_0x5c651e})['then'](async _0x413e2d=>{const _0x4798af=_0x3d702e;_0x2ff3c2[_0x4798af(0x313)]=![],_0x2ff3c2[_0x4798af(0x307)]=null;_0x413e2d===SSH_PORT_STATE['OPEN']&&(_0x2ff3c2[_0x4798af(0x2ef)]=_0x3466cc,_0x2ff3c2[_0x4798af(0x325)]=_0x5c651e);const _0x190b5c=await upsertMinerInfo({'minerInfo':_0x2ff3c2});if(_0x413e2d!=SSH_PORT_STATE['OPEN'])return statusObject('firmwareUpdate',_0x4798af(0x2ec),_0x2ff3c2,minerConfigOptions);return statusObject(_0x4798af(0x295),'success',_0x2ff3c2,minerConfigOptions);});}let _0x2d9dc1=await getMinerSystemInfo({'ipAddress':_0x32a155,'minerTyped':_0x17dee8,'apiVersion':_0x5c651e})['catch'](_0x4ec956=>{const _0x42d5ba=_0x3d702e;let _0x4fedf6=_0x42d5ba(0x327)+_0x32a155+'.\x20apiVersion:'+_0x5c651e;return console[_0x42d5ba(0x288)](_0x4fedf6,inspect(_0x4ec956,![],0x5,!![]),_0x17dee8),console['warn'](_0x4fedf6),statusObject(_0x42d5ba(0x324),_0x42d5ba(0x29a),_0x2ff3c2,minerConfigOptions);});if(!_0x2d9dc1)return statusObject(_0x3d702e(0x324),_0x3d702e(0x23f),_0x2ff3c2,minerConfigOptions);const _0x2dc65f=dataCenterSettings[_0x3d702e(0x23e)],_0x437c9f=!![],_0x349ac7=_0x18fb72[_0x3d702e(0x2a8)];return configureMiner({'minerSystemInfo':_0x2d9dc1,'workerProperties':_0x349ac7,'minerInfo':_0x2ff3c2,'minerConfigOptions':minerConfigOptions,'shouldConfigurePools':_0x2dc65f,'isBulk':_0x437c9f,'poolIDs':_0x4cdbd6});};return _0xcfd75d[_0x4a2eb4(0x2f7)](_0x819ed6)[_0x4a2eb4(0x317)](_0x3733ec=>{const _0x36936d=_0x4a2eb4,_0x57ce03=_0x3733ec[_0x36936d(0x1eb)](_0xbb8b36=>{return _0x3c8d15(()=>_0x5958cb(_0xbb8b36));}),_0x218f5d=Promise[_0x36936d(0x287)](_0x57ce03);return isBatchOperation=![],_0x218f5d;});}async function configureMiner({minerSystemInfo:_0x532992,workerProperties:_0x6ad353,minerInfo:_0x15787c,minerConfigOptions:_0x2b929e,shouldConfigurePools:_0x1a6ef8,isBulk:_0x1d53cb,poolIDs:_0x4bcd76}){const _0x4a5fdd=_0x5ae9fe;if(!_0x532992)return null;let {minerType:_0x3bae33,modelType:_0x15ca16,apiVersion:_0x4e7b97,macAddress:_0x51f114,ipAddress:_0x46629f}=_0x532992;!_0x15ca16&&_0x15787c&&(_0x15ca16=_0x15787c[_0x4a5fdd(0x2ff)]||_0x15787c[_0x4a5fdd(0x337)]);const _0x582d72=getMinerTypeMap({'modelType':_0x15ca16});if(!_0x582d72)return console[_0x4a5fdd(0x26f)](_0x4a5fdd(0x2b3)+_0x15ca16,_0x532992),statusObject(_0x4a5fdd(0x324),_0x4a5fdd(0x29a),_0x532992,_0x2b929e);const {name:_0x2d702d,minerConfigOptions:_0x1cbac9}=_0x582d72;!Object[_0x4a5fdd(0x2a9)](_0x2b929e||{})[_0x4a5fdd(0x306)]&&_0x1cbac9&&(_0x2b929e=_0x1cbac9);const _0x11f5c7=_0x1a6ef8,_0x4ef633=await getDataCenterSettings(_0x2d702d,!_0x15787c),_0x53a994=!_0x15787c;if(_0x53a994){let {minerIndex:minerIndex=0x0,placement:_0x4c6da1,accountName:_0x3d7413,workerName:_0x26be24,workerTypeNumber:_0xe0714c,configureMode:_0x303a0b,equipment:equipment={}}=_0x4ef633;const _0x5ea084=_0x303a0b===CONFIGURE_MODE_DETECT&&!_0x1d53cb&&!(_0x4bcd76&&_0x4bcd76[_0x4a5fdd(0x306)]);_0x1d53cb?(_0x4c6da1={},minerIndex=0x0,_0x3d7413=_0x532992['accountName']||'',_0x15787c={'macAddress':_0x51f114,'ipAddress':_0x46629f,'apiVersion':_0x4e7b97,'modelType':_0x15ca16,'minerType':_0x3bae33,..._0x6ad353}):_0x15787c={'macAddress':_0x51f114,'ipAddress':_0x46629f,'apiVersion':_0x4e7b97,'modelType':_0x15ca16,'minerType':_0x3bae33,'workerName':_0x26be24,'workerTypeNumber':_0xe0714c,'accountName':_0x3d7413,...equipment};_0x15787c=await createMinerInfo({'minerInfo':_0x15787c,'placement':_0x4c6da1,'minerIndex':minerIndex,'accountName':_0x3d7413,'minerTyped':_0x582d72});let _0x2b07f0=null;if(_0x1a6ef8){const {poolsAreDifferent:_0x4fa490,poolsConfig:_0xc2865,workerName:_0x4b6734}=await validateMinerConfig({'minerInfo':_0x15787c,'apiVersion':_0x4e7b97,'dataCenterSettings':dataCenterSettings,'minerConfigOptions':_0x2b929e,'poolIDs':_0x4bcd76,'isBulk':_0x1d53cb}),{pools:_0x2a0269}=_0xc2865;_0x4b6734?(_0x15787c[_0x4a5fdd(0x311)]=_0x4b6734,_0x4e7b97=_0x4e7b97||deriveApiVersion({'minerInfo':_0x15787c,'minerTyped':_0x582d72}),registerProxy({'workerName':_0x15787c['workerName'],'accountName':_0x3d7413,'macAddress':_0x51f114,'ipAddress':_0x46629f,'minerTyped':_0x582d72,'apiVersion':_0x4e7b97})):console[_0x4a5fdd(0x26f)](_0x4a5fdd(0x296),_0x15787c);const {rack:rack=0x0,shelf:shelf=0x0,position:position=0x0,hall:hall=''}=_0x15787c[_0x4a5fdd(0x278)]||{};let _0x6c8a5c=_0x4a5fdd(0x23b)+_0x46629f+',\x20'+_0x51f114+_0x4a5fdd(0x30a)+hall+'.'+rack+'.'+shelf+'.'+position+_0x4a5fdd(0x222)+_0x2a0269[0x0][_0x4a5fdd(0x2d0)];console['log'](_0x6c8a5c),sendMessage({'text':'Settings\x20'+_0x6c8a5c}),socketSendMiners([_0x15787c],_0x4a5fdd(0x32d));if(_0x4fa490){_0x15787c[_0x4a5fdd(0x322)]=_0x4bcd76,_0x2b929e[_0x4a5fdd(0x2ef)]=_0x15787c[_0x4a5fdd(0x2ef)];const _0x107b26=await updateMinerSettings({'minerInfo':_0x15787c,'minerTyped':_0x582d72,'pools':_0x2a0269,'minerConfigOptions':_0x2b929e,'apiVersion':_0x4e7b97});_0x6c8a5c=_0x4a5fdd(0x30f)+_0x6c8a5c,console['log']('Miner\x20pools\x20set.',_0x46629f,_0x107b26);}else _0x6c8a5c=_0x4a5fdd(0x242)+_0x6c8a5c,console[_0x4a5fdd(0x2bd)](_0x4a5fdd(0x207),_0x46629f);_0x15787c[_0x4a5fdd(0x2ba)]=new Date(),sendMessage({'text':_0x6c8a5c}),socketSendMiners([_0x15787c],_0x4a5fdd(0x2eb));}else _0x6ad353&&_0x6ad353['workerName']&&(_0x15787c[_0x4a5fdd(0x311)]=_0x6ad353[_0x4a5fdd(0x311)],_0x15787c[_0x4a5fdd(0x21f)]=_0x6ad353[_0x4a5fdd(0x21f)]),console[_0x4a5fdd(0x2bd)](_0x4a5fdd(0x25f)+_0x15787c['accountName']+'.'+_0x15787c[_0x4a5fdd(0x311)]+_0x4a5fdd(0x2dc));return upsertMinerInfo({'minerInfo':_0x15787c,'configureMode':_0x303a0b})[_0x4a5fdd(0x317)](()=>{const _0x2ecd8c=_0x4a5fdd;return statusObject('create',_0x2ecd8c(0x31f),_0x532992,_0x2b929e);});}const _0x549c4b=_0x15787c['lastAccess'];if(!_0x1d53cb&&_0x549c4b&&_0x549c4b>Date[_0x4a5fdd(0x29e)]()-deploymentDebounceTime){const {rack:rack=0x0,shelf:shelf=0x0,position:position=0x0,hall:hall=''}=_0x15787c[_0x4a5fdd(0x278)]||{};let _0x44f468=_0x4a5fdd(0x28f)+_0x15787c[_0x4a5fdd(0x2f1)]+',\x20'+_0x51f114+_0x4a5fdd(0x30a)+hall+'.'+rack+'.'+shelf+'.'+position+'\x20for\x20'+_0x15787c['accountName']+'.'+_0x15787c[_0x4a5fdd(0x311)];return console['log'](_0x44f468),sendMessage({'text':_0x44f468}),socketSendMiners([_0x15787c],'positioned'),statusObject(_0x4a5fdd(0x213),'debounce',_0x532992,_0x2b929e);}else{let _0x1c7fe5='Candidate\x20for\x20miner\x20pools\x20update\x20for\x20'+_0x15787c['accountName']+'.'+_0x15787c[_0x4a5fdd(0x311)]+',\x20'+_0x15787c['ipAddress']+',\x20'+_0x15787c[_0x4a5fdd(0x269)];console[_0x4a5fdd(0x2bd)](_0x1c7fe5),sendMessage({'text':_0x1c7fe5});}_0x15787c[_0x4a5fdd(0x2ba)]=new Date();let {placement:_0x331f8c,workerTypeNumber:_0x4a6660,accountName:_0x55bbb5,configureMode:_0x58c63b,equipment:equipment={}}=_0x4ef633,_0x49d81d=_0x58c63b===CONFIGURE_MODE_PROVISION||_0x4bcd76&&_0x4bcd76['length'],_0xe1e38d=!_0x1d53cb&&_0x58c63b===CONFIGURE_MODE_REPOSITION,_0x4d8ccf=!_0x1d53cb&&_0x58c63b===CONFIGURE_MODE_PROVISION;if(_0xe1e38d||_0x4d8ccf){_0x15787c['placement']={..._0x331f8c},_0x15787c=Object[_0x4a5fdd(0x30d)](_0x15787c,equipment);if(_0xe1e38d){let {workerTypeNumber:_0x48f080,workerName:_0x12a9e4,accountName:_0x249275}=_0x6ad353||{};_0x15787c[_0x4a5fdd(0x21f)]=_0x48f080||_0x15787c['workerTypeNumber'],_0x15787c[_0x4a5fdd(0x203)]=_0x249275||_0x15787c['accountName'],_0x15787c[_0x4a5fdd(0x311)]=_0x12a9e4||_0x15787c[_0x4a5fdd(0x311)];}else _0x4d8ccf&&_0x55bbb5&&parseInt(_0x4a6660)>0x0&&(_0x15787c[_0x4a5fdd(0x21f)]=_0x4a6660,_0x15787c[_0x4a5fdd(0x203)]=_0x55bbb5);if(!_0x49d81d){const {rack:rack=0x0,shelf:shelf=0x0,position:position=0x0,hall:hall=''}=_0x15787c['placement']||{};let _0x3fb728=_0x4a5fdd(0x205)+_0x15787c[_0x4a5fdd(0x2f1)]+',\x20'+_0x51f114+_0x4a5fdd(0x30a)+hall+'.'+rack+'.'+shelf+'.'+position;console[_0x4a5fdd(0x2bd)](_0x3fb728),sendMessage({'text':_0x3fb728}),socketSendMiners([_0x15787c],'positioned');}}if(_0x1d53cb&&_0x6ad353){let {workerTypeNumber:_0x1713ef,workerName:_0x27dc92,deployedOn:_0x59f3d3,accountName:_0x53726d,placement:_0x1d1ce9}=_0x6ad353;if(_0x15787c[_0x4a5fdd(0x2c3)]!==_0x582d72[_0x4a5fdd(0x2c3)]){const {model:_0x35a812,code:_0x364d0d,name:_0xb283d8}=_0x582d72,_0x436cda={'model':_0x35a812,'code':_0x364d0d,'name':_0xb283d8,'minerType':_0x3bae33,'modelType':_0x15ca16,'apiVersion':_0x4e7b97};_0x15787c=Object[_0x4a5fdd(0x30d)](_0x15787c,_0x436cda);}_0x46629f&&_0x15787c[_0x4a5fdd(0x2f1)]!==_0x46629f&&(console[_0x4a5fdd(0x288)](_0x4a5fdd(0x2f6)+_0x15787c[_0x4a5fdd(0x311)]+'\x20from\x20'+_0x15787c[_0x4a5fdd(0x2f1)]+_0x4a5fdd(0x2b9)+_0x46629f),_0x15787c['ipAddress']=_0x46629f);!_0x15787c['firmwareFileName']&&_0x532992['firmwareFileName']&&(console[_0x4a5fdd(0x288)](_0x4a5fdd(0x28c)+_0x15787c[_0x4a5fdd(0x311)]+'\x20from\x20'+_0x15787c[_0x4a5fdd(0x2ef)]+_0x4a5fdd(0x2b9)+_0x532992[_0x4a5fdd(0x2ef)]),_0x15787c[_0x4a5fdd(0x2ef)]=_0x532992[_0x4a5fdd(0x2ef)]);_0x49d81d&&_0x59f3d3&&(console[_0x4a5fdd(0x288)](_0x4a5fdd(0x283)+_0x15787c['workerName']+'\x20to\x20'+_0x59f3d3+'\x20to\x20trigger\x20add\x20to\x20deployments\x20list'),_0x15787c[_0x4a5fdd(0x2a3)]=_0x59f3d3);_0x53726d&&_0x15787c[_0x4a5fdd(0x203)]!==_0x53726d&&(console[_0x4a5fdd(0x288)]('Overwriting\x20accountName\x20for\x20'+_0x15787c[_0x4a5fdd(0x311)]+_0x4a5fdd(0x335)+_0x15787c['accountName']+_0x4a5fdd(0x2b9)+_0x53726d),_0x15787c['accountName']=_0x53726d);if(_0x27dc92)_0x15787c[_0x4a5fdd(0x311)]!=_0x27dc92&&(_0x15787c[_0x4a5fdd(0x2b0)][_0x4a5fdd(0x20b)]=_0x27dc92,console['debug'](_0x4a5fdd(0x303)+_0x15787c['accountName']+'.'+_0x15787c[_0x4a5fdd(0x311)]+_0x4a5fdd(0x1f8)+_0x15787c[_0x4a5fdd(0x203)]+'.'+_0x532992[_0x4a5fdd(0x311)])),_0x15787c['workerTypeNumber']=_0x1713ef||(_0x27dc92['match'](/\d+$/)||[0x0])[0x0];else _0x1713ef&&(_0x15787c[_0x4a5fdd(0x21f)]=_0x1713ef);_0x15787c[_0x4a5fdd(0x278)]=_0x1d1ce9;}if(!_0x49d81d){let _0x3e32e0=_0xe1e38d?'Settings\x20update\x20requested\x20for\x20repositioning':_0x4a5fdd(0x1f7),_0x475b92='';if(!_0x15787c)_0x475b92=_0x3e32e0+_0x4a5fdd(0x2d9)+_0x46629f+',\x20'+_0x51f114+'].\x20Provisioning\x20required.';else{const {rack:rack=0x0,shelf:shelf=0x0,position:position=0x0,hall:hall=''}=_0x15787c['placement']||{};_0x475b92=_0x3e32e0+'\x20miner\x20['+_0x46629f+',\x20'+_0x51f114+_0x4a5fdd(0x208)+_0x15787c['workerName']+_0x4a5fdd(0x276)+hall+'.'+rack+'.'+shelf+'.'+position;}return await upsertMinerInfo({'minerInfo':_0x15787c,'configureMode':_0x58c63b}),sendMessage({'text':_0x475b92}),console['log'](_0x475b92),socketSendMiners([_0x15787c],_0x4a5fdd(0x2eb)),console[_0x4a5fdd(0x2bd)](_0x4a5fdd(0x2a5)+_0x15787c[_0x4a5fdd(0x203)]+'.'+_0x15787c[_0x4a5fdd(0x311)],_0x46629f,_0x51f114),{'action':_0x3e32e0[_0x4a5fdd(0x226)](),'status':_0x4a5fdd(0x31f),'ipAddress':_0x46629f,'macAddress':_0x51f114};}_0x46629f=_0x15787c[_0x4a5fdd(0x2f1)],_0x51f114=_0x15787c['macAddress'];if(_0x11f5c7){const {poolsAreDifferent:_0x30900e,remotesPools:_0x358f74,poolsConfig:poolsConfig={},workerName:_0xc1baae}=await validateMinerConfig({'minerInfo':_0x15787c,'apiVersion':_0x4e7b97,'dataCenterSettings':dataCenterSettings,'minerConfigOptions':_0x2b929e,'poolIDs':_0x4bcd76,'isBulk':_0x1d53cb}),{pools:_0x15e0f3}=poolsConfig;_0xc1baae?(_0x15787c[_0x4a5fdd(0x311)]=_0xc1baae,_0x4e7b97=_0x4e7b97||deriveApiVersion({'minerInfo':_0x15787c,'minerTyped':_0x582d72}),registerProxy({'workerName':_0x15787c[_0x4a5fdd(0x311)],'accountName':_0x55bbb5,'macAddress':_0x51f114,'ipAddress':_0x46629f,'minerTyped':_0x582d72,'apiVersion':_0x4e7b97})):console[_0x4a5fdd(0x26f)]('Unable\x20to\x20determine\x20workerName\x20during\x20new\x20miner\x20pool\x20update',_0x15787c);if(!_0x358f74){let _0x43f3a7='Pool\x20info\x20not\x20available\x20in\x20minerInfo\x20collection\x20for\x20\x20'+_0x55bbb5+'.'+_0x15787c['workerName']+'\x20['+_0x46629f+',\x20'+_0x51f114+']';console[_0x4a5fdd(0x288)](_0x43f3a7),console[_0x4a5fdd(0x26f)](_0x43f3a7),socketSend(_0x43f3a7);}if(_0x1a6ef8){const {rack:rack=0x0,shelf:shelf=0x0,position:position=0x0,hall:hall=''}=_0x15787c['placement']||{};let _0x76263c=_0x4a5fdd(0x304)+_0x46629f+',\x20'+_0x51f114+_0x4a5fdd(0x30a)+hall+'.'+rack+'.'+shelf+'.'+position+_0x4a5fdd(0x222)+_0x15e0f3[0x0]['username'];console[_0x4a5fdd(0x2bd)](_0x4a5fdd(0x316)+_0x76263c),socketSendMiners([_0x15787c],_0x4a5fdd(0x32d)),_0x15787c['poolIDs']=_0x4bcd76;if(_0x30900e){sendMessage({'text':'Settings\x20update\x20requested\x20for\x20'+_0x76263c}),_0x2b929e[_0x4a5fdd(0x2ef)]=_0x15787c[_0x4a5fdd(0x2ef)];const _0x143237=await updateMinerSettings({'minerInfo':_0x15787c,'minerTyped':_0x582d72,'pools':_0x15e0f3,'minerConfigOptions':_0x2b929e,'apiVersion':_0x4e7b97}),{message:message=''}=_0x143237||{};if(/error/i[_0x4a5fdd(0x247)](message))return console[_0x4a5fdd(0x2bd)](_0x4a5fdd(0x32b)+_0x15787c[_0x4a5fdd(0x203)]+'.'+_0xc1baae,_0x46629f,_0x51f114,message),{'action':_0x4a5fdd(0x213),'status':_0x4a5fdd(0x2ec),'ipAddress':_0x46629f,'macAddress':_0x51f114,'updatePools':_0x143237};const {frequency:_0x24e25b,volts:_0x20e2f4}=_0x2b929e;_0x24e25b&&(_0x15787c[_0x4a5fdd(0x265)]={'frequency':_0x24e25b,'volts':_0x20e2f4}),_0x76263c=_0x4a5fdd(0x30f)+_0x76263c,console[_0x4a5fdd(0x2bd)](_0x4a5fdd(0x31e)+_0x15787c[_0x4a5fdd(0x203)]+'.'+_0xc1baae,_0x46629f,_0x51f114);}else _0x76263c=_0x4a5fdd(0x31d)+_0x76263c,console['log'](_0x4a5fdd(0x2f3)+_0x15787c[_0x4a5fdd(0x203)]+'.'+_0xc1baae,_0x46629f,_0x51f114);sendMessage({'text':_0x76263c});}else text=_0x4a5fdd(0x2c0)+_0x15787c['accountName']+'.'+_0x15787c[_0x4a5fdd(0x311)]+_0x4a5fdd(0x24d),_0x46629f,_0x51f114,sendMessage({'text':text});return socketSendMiners([_0x15787c],_0x4a5fdd(0x2eb)),upsertMinerInfo({'minerInfo':_0x15787c,'configureMode':_0x58c63b})[_0x4a5fdd(0x317)](()=>{const _0x15f905=_0x4a5fdd;return statusObject('update',_0x15f905(0x31f),_0x532992,_0x2b929e);});}else console[_0x4a5fdd(0x2bd)](_0x4a5fdd(0x2c0)+_0x15787c[_0x4a5fdd(0x203)]+'.'+_0x15787c[_0x4a5fdd(0x311)]+_0x4a5fdd(0x26b),_0x46629f,_0x51f114);return upsertMinerInfo({'minerInfo':_0x15787c,'configureMode':_0x58c63b})[_0x4a5fdd(0x317)](()=>{const _0x8bb758=_0x4a5fdd;return statusObject(_0x8bb758(0x1fc),_0x8bb758(0x31f),_0x532992,_0x2b929e);});}async function discoverMiners(_0x5b22e7,_0x4124e4,_0x46751d=!dataCenterSettings['useArpTable']){const _0x3bf04a=_0x5ae9fe;async function _0x30e0a3(_0x585007){const _0x1f07fe=_0x1fb5;let _0x6cb1eb=completeMinerVersion(_0x585007);const {ipAddress:_0x48d48f,minerType:_0x8ea176,macAddress:_0x42e963,apiVersion:_0x70aef7}=_0x6cb1eb;_0x70aef7&&_0x70aef7===_0x8ea176&&console[_0x1f07fe(0x29a)]('Invalid\x20minerType!',_0x585007);const _0x3dff12=getMinerTypeMap(_0x6cb1eb);if(!_0x3dff12){let _0xea9041=_0x1f07fe(0x27a)+_0x48d48f+',\x20'+_0x42e963+'].\x20Miner\x20type\x20['+_0x8ea176+']\x20not\x20found\x20in\x20the\x20configuration';return console['log'](_0xea9041,_0x6cb1eb),sendMessage(_0xea9041);}_0x507e68['sysInfo']++,upsertLease(_0x42e963,_0x48d48f);const {pools:pools=[]}=await getRemotesPools(_0x6cb1eb,_0x3dff12,_0x70aef7),_0xf1ab8a=pools[_0x1f07fe(0x1eb)](_0x4bbdcd=>_0x4bbdcd[_0x1f07fe(0x318)]),{name:_0x41a773}=_0x3dff12;let _0x5940a9=await extractAccountAndWorkerNumber({'poolWorkers':_0xf1ab8a});_0x507e68[_0x1f07fe(0x2f9)]++;!_0x5940a9&&(console['warn'](_0x1f07fe(0x2c9)+_0x48d48f+_0x1f07fe(0x255)+_0x42e963),_0x5940a9={'accountName':_0x1f07fe(0x290),'workerName':_0x1f07fe(0x20d),'workerTypeNumber':0x1});const {accountName:_0x4fb0ea,workerName:_0x4bb2a9,workerTypeNumber:_0x56a64f}=_0x5940a9;console[_0x1f07fe(0x2bd)](_0x1f07fe(0x206)+_0x4bb2a9+_0x1f07fe(0x32c)+_0x4fb0ea+_0x1f07fe(0x25c)+_0x48d48f+_0x1f07fe(0x26e)+_0x42e963);const _0x8494a5={'workerTypeNumber':_0x56a64f,'workerName':_0x4bb2a9,'accountName':_0x4fb0ea};!_0x6cb1eb[_0x1f07fe(0x2ef)]&&_0x6cb1eb[_0x1f07fe(0x337)]!==_0x6cb1eb[_0x1f07fe(0x2ff)]&&(_0x6cb1eb[_0x1f07fe(0x2ef)]=_0x1f07fe(0x29d));const {enablePoolConfiguration:_0x3ba92d,enableUpdatePoolOnDiscovery:_0x30f37f}=dataCenterSettings,_0x4339ef=_0x3ba92d&&_0x30f37f,_0x2dd305=!![];let _0x4e85cf=await getMinerInfo({'macAddress':_0x42e963,'accountName':_0x4fb0ea,'workerName':_0x4bb2a9,'ipAddress':_0x48d48f});if(_0x4e85cf&&!_0x4e85cf?.[_0x1f07fe(0x278)]?.[_0x1f07fe(0x224)]){const _0x32236a=_0x14bbf3(_0x4e85cf,dataCenterSettings);_0x8494a5[_0x1f07fe(0x278)]=_0x32236a;}let _0x23160b=await configureMiner({'minerSystemInfo':_0x6cb1eb,'workerProperties':_0x8494a5,'minerInfo':_0x4e85cf,'minerConfigOptions':null,'shouldConfigurePools':_0x4339ef,'isBulk':_0x2dd305})[_0x1f07fe(0x251)](_0x4fde75=>{const _0x37ca8c=_0x1f07fe;let _0x57bca0='';return _0x4fde75[_0x37ca8c(0x261)]&&_0x4fde75[_0x37ca8c(0x261)][_0x37ca8c(0x289)]&&(_0x57bca0+=';\x20'+_0x4fde75[_0x37ca8c(0x261)][_0x37ca8c(0x289)]),!/ETIMEDOUT/[_0x37ca8c(0x247)](_0x4fde75[_0x37ca8c(0x284)])?(_0x57bca0=_0x37ca8c(0x282)+_0x4fde75[_0x37ca8c(0x284)]+_0x57bca0,console['error'](_0x57bca0,_0x6cb1eb,_0x4fde75)):(_0x57bca0=_0x37ca8c(0x321)+_0x57bca0,console[_0x37ca8c(0x26f)](_0x57bca0,_0x4fde75['stack'])),null;});!_0x23160b&&(_0x23160b={'action':_0x1f07fe(0x24c),'status':_0x1f07fe(0x2ec)});!_0x507e68[_0x1f07fe(0x24c)][_0x23160b[_0x1f07fe(0x2fb)]]&&(_0x507e68[_0x1f07fe(0x24c)][_0x23160b[_0x1f07fe(0x2fb)]]={});const _0x468a74=_0x507e68[_0x1f07fe(0x24c)][_0x23160b[_0x1f07fe(0x2fb)]];!_0x468a74[_0x23160b[_0x1f07fe(0x308)]]&&(_0x468a74[_0x23160b[_0x1f07fe(0x308)]]={'count':0x0,'ipAddresses':[],'miners':[]});const _0x42d17f=_0x468a74[_0x23160b[_0x1f07fe(0x308)]];return _0x42d17f['count']++,_0x42d17f['ipAddresses'][_0x1f07fe(0x240)](_0x6cb1eb[_0x1f07fe(0x2f1)]),_0x42d17f[_0x1f07fe(0x2c2)]['push']({'ipAddress':_0x6cb1eb['ipAddress'],'macAddress':_0x6cb1eb[_0x1f07fe(0x269)]}),_0x6cb1eb;}const {getWorkerNumber:_0x1507aa,getPlacement:_0x14bbf3}=getPlugin(_0x3bf04a(0x26d)),_0x507e68={'count':0x0,'sysInfo':0x0,'settingsInfo':0x0,'configure':{},'attempted':0x0,'startTime':Date['now']()};let _0x30a729=promiseLimit(0xa);return dataCenterSettings[_0x3bf04a(0x2c5)]=CONFIGURE_MODE_DISCOVERY,dataCenterSettings[_0x3bf04a(0x266)](),console[_0x3bf04a(0x2bd)](_0x3bf04a(0x237)+(dataCenterSettings[_0x3bf04a(0x1fa)]?_0x3bf04a(0x2cc):_0x3bf04a(0x29b))),scanForMinerVersions(_0x5b22e7||dataCenterSettings[_0x3bf04a(0x221)],_0x4124e4,_0x46751d)[_0x3bf04a(0x251)](_0xb33523=>{const _0x50e098=_0x3bf04a;console['error'](_0x50e098(0x2d3),_0xb33523);throw _0xb33523;})[_0x3bf04a(0x317)](_0x201293=>{const _0x55540d=_0x3bf04a,{stats:_0x494a52,minerVersions:_0x4a0d3d}=_0x201293;return _0x507e68['scanStats']=_0x494a52,_0x507e68['count']=_0x4a0d3d[_0x55540d(0x306)],console['log']('Discover\x20started',_0x507e68,_0x5b22e7),_0x507e68[_0x55540d(0x2d1)]=Date[_0x55540d(0x29e)](),Promise[_0x55540d(0x287)](_0x4a0d3d[_0x55540d(0x1eb)](_0x2c05fa=>{return _0x30a729(()=>_0x30e0a3(_0x2c05fa));}));})[_0x3bf04a(0x317)](_0x58cbe5=>{const _0x3f7a0d=_0x3bf04a;return dataCenterSettings['configureMode']=CONFIGURE_MODE_DETECT,dataCenterSettings['save'](),_0x507e68[_0x3f7a0d(0x2f8)]=Date[_0x3f7a0d(0x29e)](),_0x507e68[_0x3f7a0d(0x274)]={'timespan':_0x507e68[_0x3f7a0d(0x2d1)]-_0x507e68['startTime'],'count':_0x507e68[_0x3f7a0d(0x246)]+_0x507e68[_0x3f7a0d(0x330)][_0x3f7a0d(0x2ec)],'rate':Math[_0x3f7a0d(0x1f4)]((_0x507e68[_0x3f7a0d(0x246)]+_0x507e68[_0x3f7a0d(0x330)]['failed'])/((_0x507e68[_0x3f7a0d(0x2d1)]-_0x507e68['startTime'])/0x2710))/0xa+_0x3f7a0d(0x254)},_0x507e68[_0x3f7a0d(0x21a)]={'timespan':_0x507e68['endTime']-_0x507e68[_0x3f7a0d(0x2d1)],'count':_0x507e68[_0x3f7a0d(0x246)],'rate':Math[_0x3f7a0d(0x1f4)](_0x507e68[_0x3f7a0d(0x246)]/((_0x507e68[_0x3f7a0d(0x2f8)]-_0x507e68[_0x3f7a0d(0x2d1)])/0x2710))/0xa+_0x3f7a0d(0x254)},console[_0x3f7a0d(0x2bd)](_0x3f7a0d(0x2df),inspect(_0x507e68,![],0x5,!![])),{'stats':_0x507e68,'minerVersions':_0x58cbe5};})[_0x3bf04a(0x251)](_0x5a4dd3=>{const _0x32f7f8=_0x3bf04a;dataCenterSettings[_0x32f7f8(0x2c5)]=CONFIGURE_MODE_DETECT,dataCenterSettings[_0x32f7f8(0x266)](),console[_0x32f7f8(0x29a)](_0x32f7f8(0x22a),inspect(_0x5a4dd3,![],0x5,!![]));throw _0x5a4dd3;});}let availableFreqs={};function getOptimumClockSettings(_0x65c0a2,_0x499ebe,_0x1ef2ae,_0x2ae186){const _0x19f623=_0x5ae9fe;let _0x42f16f=0x0,{scales:_0x55bdb7,softwareVersions:_0x9d730f}=_0x1ef2ae['overclock']||{},{clockFrequencyCap:_0x1364f8}=_0x65c0a2,_0x179be7=_0x55bdb7&&_0x9d730f&&_0x9d730f[_0x19f623(0x28d)](_0x65c0a2[_0x19f623(0x23d)]),_0x5b86d0={'frequency':0x0,'volts':0x0,'hashRateBump':0x0};if(!_0x179be7)return _0x5b86d0;const {frequencies:_0x1e101d,voltages:_0x69fe83,hashRateBumps:_0xb2750e}=_0x55bdb7;!availableFreqs[_0x1ef2ae['model']]&&(availableFreqs[_0x1ef2ae[_0x19f623(0x2c3)]]={},_['map'](_0x1e101d,(_0x4f7afa,_0x140287)=>{const _0x2a387e=_0x19f623;availableFreqs[_0x1ef2ae[_0x2a387e(0x2c3)]][_0x4f7afa]={'index':_0x140287,'frequency':_0x4f7afa};}));const _0x15e376=availableFreqs[_0x1ef2ae[_0x19f623(0x2c3)]],_0x4ef6bf=parseInt(_0x499ebe[_0x19f623(0x315)]);console['debug'](_0x19f623(0x21d)+_0x65c0a2[_0x19f623(0x311)]+',\x20frequency:\x20'+_0x4ef6bf+_0x19f623(0x2e2)+_0x1364f8+',\x20step:\x20'+_0x2ae186);let _0x486faa=(_0x15e376[_0x4ef6bf]||{})[_0x19f623(0x1f9)];!_0x486faa&&(_0x486faa=_0x1e101d[_0x19f623(0x305)](_0xe8cd33=>_0xe8cd33>=_0x4ef6bf),!_0x486faa&&(_0x486faa=parseInt(_0x1e101d[_0x19f623(0x306)]/0x2,0xa)));const _0x7f5afa=_0x2ae186*0x1;let _0x16b9fa=_0x486faa+_0x7f5afa;if(_0x16b9fa<0x0)_0x16b9fa=0x0;else _0x16b9fa>=_0x1e101d[_0x19f623(0x306)]&&(_0x16b9fa=_0x1e101d['length']-0x1);_0x42f16f=_0x1e101d[_0x16b9fa];if(_0x1364f8&&parseInt(_0x42f16f)>=_0x1364f8)return _0x5b86d0;return{'frequency':_0x42f16f,'volts':_0x69fe83[_0x16b9fa],'hashRateBump':!_0xb2750e?0x0:_0xb2750e[_0x16b9fa]};}function intAdder(_0x646b5,_0x253e71){return parseInt(_0x646b5||0x0)+parseInt(_0x253e71||0x0);};function trackTrends(_0x13b72f,_0x3f119b=new Date(),_0x2ff406){const _0x3cb81b=_0x5ae9fe;(!_0x13b72f[_0x3cb81b(0x268)]||_0x13b72f[_0x3cb81b(0x268)][_0x3cb81b(0x2a0)])&&(_0x13b72f['trends']={'lastEvent':{},'fine':[],'minutes':[],'hourly':[],'daily':[],'monthly':[],'yearly':[]});!_0x2ff406&&(_0x2ff406=Date[_0x3cb81b(0x262)](new Date())[_0x3cb81b(0x292)]());const {hashRate:hashRate=0x0,accepted:accepted=0x0,rejected:rejected=0x0,elapsed:elapsed=0x0,sharesPerMinute:sharesPerMinute=0x0,hardwareErrors:hardwareErrors=[0x0],frequency:_0x555367,volts:_0x114553,temperatures:temperatures=[0x0],consumption:consumption=0x0}=_0x13b72f['condition'];var _0x130204=isNaN(elapsed)||elapsed<0x1?0x1:elapsed;const _0x5d9b98=(!hardwareErrors[_0x3cb81b(0x250)]?hardwareErrors||0x0:hardwareErrors[_0x3cb81b(0x250)](intAdder,0x0))/_0x130204,_0x493d5c={'elapsed':elapsed,'hashRate':parseInt(hashRate),'accepted':accepted,'rejected':rejected,'shares':parseInt(sharesPerMinute),'frequency':parseInt(_0x555367),'volts':parseInt(_0x114553),'tempAvg':parseInt(Math[_0x3cb81b(0x28b)](temperatures)),'tempHot':Math['max'](...temperatures),'power':consumption,'x':Date[_0x3cb81b(0x262)](_0x3f119b),'syncId':_0x2ff406,'errorRate':_0x5d9b98},{trends:_0xa72929,updated:_0x457373}=updateTrendTracking(_0x13b72f[_0x3cb81b(0x268)],_0x3f119b,_0x493d5c,_0x13b72f,['frequency','volts','elapsed',_0x3cb81b(0x24a),_0x3cb81b(0x2a7)]);return _0xa72929;}function rollupTrendPoints(_0x10f582,_0x8e0454,_0xbfe82e,_0x22dff3,_0x226e7a){const _0x11dc90=_0x5ae9fe;let _0x58af28={};const _0x21bbe0={'fine':{'count':0x1,'millis':timeSlotPeriod*0x3c*0x3e8,'sliceSize':CHART_TREND_HISTORY_COUNT},'minutes':{'count':0x3c/timeSlotPeriod,'millis':0x3c*0x3c*0x3e8,'sliceSize':CHART_TREND_HISTORY_COUNT},'hourly':{'count':0x18,'millis':0x18*0x3c*0x3c*0x3e8,'sliceSize':CHART_TREND_HISTORY_COUNT},'daily':{'count':0x1e,'millis':0x1e*0x18*0x3c*0x3c*0x3e8,'sliceSize':CHART_TREND_HISTORY_COUNT},'monthly':{'count':0xc,'millis':0x16d*0x18*0x3c*0x3c*0x3e8,'sliceSize':CHART_TREND_HISTORY_COUNT}},{count:_0x4eb7d5,millis:_0x1e0633,sliceSize:_0x263413}=_0x21bbe0[_0xbfe82e],_0x5517b5=Object[_0x11dc90(0x2a9)](_0x10f582[0x0]),_0x49c21e=_0x10f582[_0x11dc90(0x27b)](-_0x4eb7d5);if(_0x49c21e[_0x11dc90(0x306)]==0x1)_0x58af28={..._0x49c21e[0x0]};else{_0x5517b5[_0x11dc90(0x32f)](_0x1b13f1=>{const _0x1582cc=_0x11dc90,_0x2fa15c=_0x22dff3[_0x1582cc(0x243)](_0x1b13f1)!=-0x1;_0x2fa15c?_0x58af28[_0x1b13f1]=_0x49c21e[_0x1582cc(0x250)]((_0x163ee4,_0x5f1714)=>Math[_0x1582cc(0x2fa)](_0x163ee4,_0x5f1714[_0x1b13f1]),0x0):_0x58af28[_0x1b13f1]=(_0x49c21e['reduce']((_0xd5ccf9=0x0,_0x5ec399)=>_0xd5ccf9+(_0x5ec399[_0x1b13f1]||0x0),0x0)/_0x49c21e[_0x1582cc(0x306)])[_0x1582cc(0x1f1)](0x3),_0x58af28[_0x1b13f1]>0x64&&(_0x58af28[_0x1b13f1]=parseInt(_0x58af28[_0x1b13f1]));});const _0x1b9087=_0x49c21e[_0x11dc90(0x27b)](-0x1)[0x0]['x'];_0x58af28['x']=_0x1b9087-_0x1b9087%_0x1e0633;}const _0x26489f=_0x58af28['x'];if(!_0x8e0454[_0x11dc90(0x306)]){const _0x7f7b33={..._0x58af28};_0x8e0454[_0x11dc90(0x240)](_0x7f7b33);}else while(_0x8e0454[_0x8e0454[_0x11dc90(0x306)]-0x1]['x']<_0x26489f){const _0x207366={..._0x58af28},_0x50691c=_0x8e0454[_0x8e0454[_0x11dc90(0x306)]-0x1]['x'];_0x207366['x']=_0x50691c-_0x50691c%_0x1e0633+_0x1e0633,_0x8e0454['push'](_0x207366);}return console['debug'](_0x226e7a,_0x11dc90(0x2e6),_0x49c21e,_0x58af28),_0x8e0454[_0x11dc90(0x306)]>_0x263413&&_0x8e0454[_0x11dc90(0x2ee)](0x0,_0x8e0454[_0x11dc90(0x306)]-_0x263413),_0x10f582[_0x11dc90(0x306)]>_0x263413&&_0x10f582[_0x11dc90(0x2ee)](0x0,_0x10f582[_0x11dc90(0x306)]-_0x263413),_0x49c21e;}function updateTrendTracking(_0x12a92d,_0x91e524,_0x1892f2={},_0x51c7bf,_0x49b238){const _0x2f3f41=_0x5ae9fe,_0x2cbbf9=_0x91e524[_0x2f3f41(0x1f5)](),_0x47c4a8=_0x91e524[_0x2f3f41(0x2a6)](),_0x441791=_0x91e524[_0x2f3f41(0x1ed)](),_0x50b6b5=_0x91e524[_0x2f3f41(0x227)](),_0x4c0ec8=_0x91e524[_0x2f3f41(0x31c)](),_0x177bb1={};let {fine:fine=[],hourly:hourly=[],minutes:minutes=[],daily:daily=[],monthly:monthly=[],yearly:yearly=[]}=_0x12a92d;const {minute:_0x378799,hour:_0x57a874,day:_0xfad2e1,month:_0x85d4ac,year:_0x1b3017}=_0x12a92d['lastEvent'],_0x1ae89a=_0x378799!==_0x4c0ec8&&fine['length'],_0x5916ef=_0x57a874!==_0x50b6b5&&minutes[_0x2f3f41(0x306)],_0x3a5797=_0xfad2e1!==_0x441791&&hourly[_0x2f3f41(0x306)],_0x3a6ed2=_0x85d4ac!==_0x47c4a8&&daily[_0x2f3f41(0x306)],_0x59db98=_0x1b3017!==_0x2cbbf9&&monthly[_0x2f3f41(0x306)];return _0x12a92d[_0x2f3f41(0x33b)]={'minute':_0x4c0ec8,'hour':_0x50b6b5,'day':_0x441791,'month':_0x47c4a8,'year':_0x2cbbf9},_0x59db98&&(rollupTrendPoints(monthly,yearly,_0x2f3f41(0x238),_0x49b238,_0x51c7bf),_0x177bb1[_0x2f3f41(0x238)]=_0x177bb1[_0x2f3f41(0x275)]=!![]),_0x3a6ed2&&(rollupTrendPoints(daily,monthly,_0x2f3f41(0x25a),_0x49b238,_0x51c7bf),_0x177bb1[_0x2f3f41(0x25a)]=_0x177bb1[_0x2f3f41(0x238)]=!![]),_0x3a5797&&(rollupTrendPoints(hourly,daily,_0x2f3f41(0x2d7),_0x49b238,_0x51c7bf),_0x177bb1[_0x2f3f41(0x2d7)]=_0x177bb1['daily']=!![]),_0x5916ef&&(rollupTrendPoints(minutes,hourly,_0x2f3f41(0x27e),_0x49b238,_0x51c7bf),_0x177bb1[_0x2f3f41(0x27e)]=_0x177bb1[_0x2f3f41(0x2d7)]=!![]),_0x12a92d[_0x2f3f41(0x2e0)][_0x2f3f41(0x240)](_0x1892f2),_0x1ae89a&&rollupTrendPoints(fine,minutes,_0x2f3f41(0x2e0),_0x49b238,_0x51c7bf),{'trends':_0x12a92d,'updated':_0x177bb1};}let kilowattsConsumed=0x0,minerCheckCompleted=!![];const SITE_STATE_NORMAL=0x1,SITE_STATE_OUTAGE=0x2,SITE_STATE_UNKNOWN=0x3,getTempStateName=function(_0x396691,_0x67dbc4){const _0x459194=_0x5ae9fe;_0x67dbc4=_0x67dbc4||{'hot':0x5a,'warm':0x50,'mild':0x46};if(_0x396691>=_0x67dbc4[_0x459194(0x1f0)])return _0x459194(0x1f0);else{if(_0x396691>=_0x67dbc4[_0x459194(0x2f2)])return _0x459194(0x2f2);else{if(_0x396691>=_0x67dbc4['mild'])return _0x459194(0x329);else{if(_0x396691==0x0)return _0x459194(0x2a1);}}}return'cool';};async function syncMinerStatusJob(_0x543adb,_0x28431b,_0x146189=![]){const _0x5cf4b9=_0x5ae9fe;let {ipAddress:_0x28f5d2,workerName:_0x42fcd1,accountName:_0x53fb2a,macAddress:_0x5243aa,placement:_0x77d1f3}=_0x543adb,_0x590d0c=getMinerTypeMap(_0x543adb),_0x2a1491=deriveApiVersion({'minerInfo':_0x543adb,'minerTyped':_0x590d0c});const {name:_0x33f0fb,code:_0x58d6d4,version:_0x492595,model:_0x3fcf25,brand:_0x2f5a1d}=_0x590d0c;Object[_0x5cf4b9(0x30d)](_0x543adb,{'name':_0x33f0fb,'code':_0x58d6d4,'version':_0x492595,'model':_0x3fcf25,'brand':_0x2f5a1d});if(isBatchOperation||!_0x28f5d2)return!![];let _0x4fc7c9=await getMinerSystemInfo({'ipAddress':_0x28f5d2,'minerTyped':_0x590d0c,'apiVersion':_0x2a1491,'maxSockets':0x32})[_0x5cf4b9(0x251)](_0x40153e=>{const _0x3aa4ac=_0x5cf4b9;let _0x2444c9='System\x20info\x20request\x20failed\x20during\x20scan\x20for\x20'+_0x42fcd1+',\x20'+_0x28f5d2+_0x3aa4ac(0x1f3)+_0x2a1491;console[_0x3aa4ac(0x288)](_0x2444c9,inspect(_0x40153e,![],0x5,!![]),_0x590d0c),console[_0x3aa4ac(0x26f)](_0x2444c9);});console['debug']('Miner\x20system\x20info',inspect(_0x4fc7c9));_0x4fc7c9&&(!_0x4fc7c9[_0x5cf4b9(0x337)]&&(console[_0x5cf4b9(0x26f)](_0x5cf4b9(0x2db),_0x4fc7c9),delete _0x4fc7c9[_0x5cf4b9(0x337)],delete _0x4fc7c9[_0x5cf4b9(0x2ff)]),_0x543adb=Object[_0x5cf4b9(0x30d)](_0x543adb,_0x4fc7c9));let _0x44de97=null,_0x5e2a73=null,_0x454fee=null;_0x146189&&(_0x44de97=await getMinerStatus({'ipAddress':_0x28f5d2,'minerTyped':_0x590d0c,'apiVersion':_0x2a1491,'maxSockets':0xa})['catch'](_0x5da701=>{const _0x1e903a=_0x5cf4b9;if(!/ETIMEDOUT/[_0x1e903a(0x247)](_0x5da701[_0x1e903a(0x284)])){let _0x1c01c8=_0x1e903a(0x211)+_0x42fcd1+',\x20'+_0x28f5d2+_0x1e903a(0x1f3)+_0x2a1491;console[_0x1e903a(0x288)](_0x1c01c8,inspect(_0x5da701,![],0x5,!![]),_0x590d0c),console['warn'](_0x1c01c8);}return null;}),console[_0x5cf4b9(0x288)]('Miner\x20status',inspect(_0x44de97)),_0x5e2a73=await getKernelLogs({'minerInfo':_0x543adb,'minerTyped':_0x590d0c,'apiVersion':_0x2a1491,'maxSockets':0xa})[_0x5cf4b9(0x251)](_0x10432c=>{const _0x55e2e6=_0x5cf4b9;if(!/ETIMEDOUT/[_0x55e2e6(0x247)](_0x10432c['message'])){let _0x1e76cf=_0x55e2e6(0x234)+_0x42fcd1+',\x20'+_0x28f5d2+_0x55e2e6(0x1f3)+_0x2a1491;console[_0x55e2e6(0x288)](_0x1e76cf,inspect(_0x10432c,![],0x5,!![]),_0x590d0c),console[_0x55e2e6(0x26f)](_0x1e76cf);}return null;}),console[_0x5cf4b9(0x288)]('Miner\x20log\x20states',inspect(_0x5e2a73)),dataCenterSettings[_0x5cf4b9(0x314)]&&(_0x454fee=await retrieveMinerNetworkDiagnostics({'minerInfo':_0x543adb,'diagnostic':diagnostic,'minerTyped':_0x590d0c,'apiVersion':_0x2a1491})[_0x5cf4b9(0x251)](_0xd7a7ce=>{const _0x1f9c0d=_0x5cf4b9;if(!/(404|EHOSTUNREACH|ENOTFOUND)/[_0x1f9c0d(0x247)](_0xd7a7ce[_0x1f9c0d(0x284)])){let _0x46c095=_0x1f9c0d(0x320)+_0x543adb[_0x1f9c0d(0x311)]+',\x20'+_0x28f5d2+_0x1f9c0d(0x1f3)+_0x2a1491;console['debug'](_0x46c095,inspect(_0xd7a7ce,![],0x5,!![]),_0x590d0c),console['warn'](_0x46c095);}return null;}),console['debug'](_0x5cf4b9(0x272),inspect(_0x454fee))));const {pools:_0x1767a1,cardStatus:_0x5a13d3,workerTypeNumber:_0x16c64f,timestamp:_0x3ee0b0,..._0x58c35b}=_0x44de97||{'workerName':_0x543adb[_0x5cf4b9(0x311)]};console[_0x5cf4b9(0x288)]({'logType':'trace'},_0x5cf4b9(0x2b7)+_0x42fcd1+_0x5cf4b9(0x2a4)+_0x28f5d2+',\x20liveMinerState\x20('+!!_0x44de97+'),\x20logStates('+!!_0x5e2a73+_0x5cf4b9(0x2c1)+!!_0x4fc7c9+_0x5cf4b9(0x1ea)+!!_0x543adb+'),\x20minerDiagnostic('+!!_0x454fee+')'),registerProxy({'workerName':_0x42fcd1,'accountName':_0x53fb2a,'macAddress':_0x5243aa,'ipAddress':_0x28f5d2,'minerTyped':_0x590d0c,'apiVersion':_0x2a1491});const _0x282cee=new Date(),_0x136991=Date[_0x5cf4b9(0x262)](_0x282cee);if(!_0x44de97){invalidMiners[_0x5243aa]={'accountName':_0x53fb2a,'workerName':_0x42fcd1,'ipAddress':_0x28f5d2,'macAddress':_0x5243aa,'placement':_0x77d1f3},invalidMiners[_0x5243aa]['status']=_0x5cf4b9(0x28a),deadMiners[_0x5243aa]=invalidMiners[_0x5243aa];if(!_0x543adb[_0x5cf4b9(0x2b0)])_0x543adb[_0x5cf4b9(0x2b0)]={'hashRate':0x0,'hashRateAvg':0x0,'accountName':'','poolName':'','temperatures':[0x0],'frequency':0x0,'pools':[]};else!_0x543adb[_0x5cf4b9(0x2b0)][_0x5cf4b9(0x2ad)]&&(_0x543adb[_0x5cf4b9(0x2b0)][_0x5cf4b9(0x2da)]=0x0,_0x543adb[_0x5cf4b9(0x2b0)][_0x5cf4b9(0x2e7)]=0x0,_0x543adb[_0x5cf4b9(0x2b0)][_0x5cf4b9(0x2ad)]=_0x282cee);return trackTrends(_0x543adb,_0x282cee,_0x28431b),{'upsertedMiner':await upsertMinerInfo({'minerInfo':_0x543adb}),'state':invalidMiners[_0x5243aa]['status']};}_0x44de97[_0x5cf4b9(0x2e9)]=_0x282cee,_0x44de97['diagnostic']=_0x454fee||{};let {cardFailureChains:_0x42092a,temperatures:_0x1d3b15,intakeSpeed:_0x5c7fa5,exhaustSpeed:_0x2e53a2,..._0xacf934}=_0x44de97;delete _0xacf934[_0x5cf4b9(0x1ee)];const {condition:_0x2a166a,conditionPrime:_0x812653}=_0x543adb;!_0x812653&&(_0x543adb[_0x5cf4b9(0x307)]=_0xacf934);_0x543adb[_0x5cf4b9(0x2f4)]=_0x5e2a73||{};if(!_0x2a166a||!_0x2a166a[_0x5cf4b9(0x2ce)])return _0x543adb[_0x5cf4b9(0x2b0)]=_0x44de97,{'upsertedMiner':await upsertMinerInfo({'minerInfo':_0x543adb}),'state':_0x5cf4b9(0x2ab)};trackTrends(_0x543adb,_0x282cee,_0x28431b);const {poolsAreDifferent:_0x525ecf,remotesPools:_0x469d47,poolsConfig:_0x1326d4,workerName:_0x5f4570}=await validateMinerConfig({'minerInfo':_0x543adb,'apiVersion':_0x2a1491,'dataCenterSettings':dataCenterSettings,'isBulk':!![]});if(_0x525ecf){if(_0x543adb[_0x5cf4b9(0x322)]){const {poolIDs:_0x2fdde2}=_0x543adb;console['debug'](_0x5cf4b9(0x2fd)+_0x42fcd1+_0x5cf4b9(0x2a4)+_0x28f5d2,_0x469d47,_0x1326d4);}else{let {url:url=_0x5cf4b9(0x20d),user:user=_0x5cf4b9(0x20d)}=_0x469d47['pools'][0x0]||{},{stratum:stratum=_0x5cf4b9(0x20d),username:username=_0x5cf4b9(0x20d)}=_0x1326d4[_0x5cf4b9(0x2ce)][0x0]||{};url=url[_0x5cf4b9(0x260)](/.*:\/\//,''),stratum=stratum[_0x5cf4b9(0x260)](/.*:\/\//,''),url==stratum&&user==username?console[_0x5cf4b9(0x288)](_0x5cf4b9(0x230)+_0x42fcd1+_0x5cf4b9(0x2a4)+_0x28f5d2+'.\x20no\x20poolIDs\x20saved.',_0x5f4570,_0x469d47,_0x1326d4):console['debug']('Unable\x20to\x20sync\x20incorrect\x20configuration\x20for\x20'+_0x42fcd1+_0x5cf4b9(0x2a4)+_0x28f5d2+_0x5cf4b9(0x24f)+user+_0x5cf4b9(0x293)+url+_0x5cf4b9(0x26a)+username+_0x5cf4b9(0x293)+stratum);}}const _0x2d79e4=!isNaN(_0x44de97[_0x5cf4b9(0x21c)])?parseInt(_0x44de97[_0x5cf4b9(0x21c)]):0x0,_0xbfe8c=_0x44de97[_0x5cf4b9(0x2e7)]||0x0,_0x9195dc=_0x44de97[_0x5cf4b9(0x2da)],_0xa5980b=_0x543adb[_0x5cf4b9(0x2b0)][_0x5cf4b9(0x2da)]||0x0,_0x3556e5=_0x543adb[_0x5cf4b9(0x2b0)][_0x5cf4b9(0x2f5)];let _0x4adc4e=parseInt(_0x543adb['conditionPrime']['hashRateAvg']||0x0);const _0x45473c=_0x543adb[_0x5cf4b9(0x216)]?parseInt(_0x543adb[_0x5cf4b9(0x216)][_0x5cf4b9(0x2e7)]):'-',{intakeFanName:intakeFanName=_0x5cf4b9(0x212),exhaustFanName:exhaustFanName='fan1',minFanSpeed:_0x1a8703,tempBoundaries:_0x5a6d63}=_0x590d0c;_0x5c7fa5=parseInt(_0x44de97['intakeSpeed']||'0',0xa),_0x2e53a2=parseInt(_0x44de97[_0x5cf4b9(0x20a)]||'0',0xa);const _0x4648f3=Math[_0x5cf4b9(0x279)](_0x9195dc/(_0x4adc4e||_0x9195dc||0x1)*0x32)*0x2,_0x483189=Math[_0x5cf4b9(0x279)](_0x9195dc/(_0x543adb[_0x5cf4b9(0x215)]||_0x9195dc||0x1)*0x64),_0x5e0377=parseInt(_0x2d79e4/0x6)/0xa,_0x51f130=_0x5e0377>MINER_BOOT_CHECK_MINUTES,_0x2d9875=_0x543adb[_0x5cf4b9(0x232)]?_0x543adb[_0x5cf4b9(0x232)][_0x5cf4b9(0x27b)](-0x1)[0x0]:{},_0x12c6fe=_0x2d9875[_0x5cf4b9(0x2e9)]||_0x543adb[_0x5cf4b9(0x2c7)]||_0x282cee,_0x3cd9e7=parseInt((_0x136991-Date['parse'](_0x12c6fe))/(0x3c*0x3e8)),_0x43d619=_0x3cd9e7>MINER_BOOT_MAX_MINUTES,_0x204d65=_0x3cd9e7>MINER_LOG_FAILING_MINUTES,_0xf2fa5d=!_0x51f130&&_0x5e0377>0x0;let _0x397a86=!_0x51f130&&_0xa5980b<0x1&&_0x9195dc<0x1&&!_0x2e53a2&&!_0x5c7fa5,_0x1a9ffb=![],_0x568677=![],_0x587b4b=![];_0x43d619&&!_0xf2fa5d&&(_0x397a86?(_0x1a9ffb=!![],_0x397a86=![]):_0x1a9ffb=parseInt(_0x9195dc)==parseInt(_0xa5980b)&&_0x44de97[_0x5cf4b9(0x2f5)]==_0x3556e5||_0x4648f3==Infinity,_0x568677=_0x483189<struggleHighCheckPercent&&_0x4648f3<struggleHighCheckPercent,_0x587b4b=_0x4648f3<failureMinCheckPercent);let _0x305be3=![];if(_0x1a9ffb&&_0x543adb[_0x5cf4b9(0x2c7)]&&_0x543adb[_0x5cf4b9(0x2ef)]){const _0x45762b=_0x543adb['lastEffectiveHashingTime'],_0x4dda41=0x2*0x3c*0x3c*0x3e8,_0x2c9467=Math[_0x5cf4b9(0x233)](_0x4dda41/dataCenterSettings[_0x5cf4b9(0x22b)]),_0x2c39dc=parseInt((_0x136991-Date[_0x5cf4b9(0x262)](_0x45762b))/dataCenterSettings[_0x5cf4b9(0x22b)]);_0x305be3=_0x2c39dc%_0x2c9467==0x0;}var _0x457803=![];if(_0x44de97['rejected']){let _0x34ed92=(_0x44de97[_0x5cf4b9(0x332)]||0x0)/(_0x44de97['accepted']||0x1);_0x457803=_0x34ed92>MAX_REJECTED_RATE;}let _0x1e099d=(_0x44de97[_0x5cf4b9(0x2ea)]||[0x0])[_0x5cf4b9(0x250)](intAdder,0x0),_0x471bb5=parseInt(_0x1e099d/((_0x44de97[_0x5cf4b9(0x21c)]||0x1)/0x3c)),_0x3b52a4=!_0x590d0c[_0x5cf4b9(0x1fb)]?![]:_0x471bb5>(_0x590d0c[_0x5cf4b9(0x1fb)][_0x5cf4b9(0x1f2)]||MAX_CHIP_ERROR_RATE),_0x13ad9d=![],_0x29669c=![];if(Array[_0x5cf4b9(0x2d2)](_0x44de97[_0x5cf4b9(0x2a2)])&&_0x44de97[_0x5cf4b9(0x2a2)][0x0]){let _0x3ea5bc=Math[_0x5cf4b9(0x2fa)](..._0x44de97['temperatures']||[0x0]);const _0x27171f=getTempStateName(_0x3ea5bc,_0x5a6d63);_0x13ad9d=/^hot$/i[_0x5cf4b9(0x247)](_0x27171f),_0x29669c=/^(mild|cool)$/i[_0x5cf4b9(0x247)](_0x27171f),_0x44de97[_0x5cf4b9(0x2d4)]=_0x27171f;}wattsConsumedTally+=isNaN(_0x44de97[_0x5cf4b9(0x285)])?0x0:parseFloat(_0x44de97[_0x5cf4b9(0x285)],0xa);if(_0x44de97['cardFailureChains']&&_0x44de97[_0x5cf4b9(0x219)][_0x5cf4b9(0x306)]){}if(!_0x1a9ffb&&_0x5c7fa5<(_0x1a8703||MIN_VIABLE_FAN_SPEED)){}if(!_0x1a9ffb&&_0x2e53a2<(_0x1a8703||MIN_VIABLE_FAN_SPEED)){}_0x543adb[_0x5cf4b9(0x2b0)]=_0x44de97;_0x44de97[_0x5cf4b9(0x203)]&&(_0x543adb[_0x5cf4b9(0x203)]=_0x44de97[_0x5cf4b9(0x203)]);_0x44de97[_0x5cf4b9(0x311)]&&(_0x543adb[_0x5cf4b9(0x311)]=_0x44de97[_0x5cf4b9(0x311)]);_0x44de97['workerTypeNumber']&&(_0x543adb['workerTypeNumber']=_0x44de97[_0x5cf4b9(0x21f)]);if(currentSiteState===SITE_STATE_UNKNOWN){elapsedTally+=_0x2d79e4,++minersScannedCount;if(elapsedTally/minersScannedCount>dataCenterSettings[_0x5cf4b9(0x22b)]/0x1f4)currentSiteState=SITE_STATE_NORMAL;else minersScannedCount>minerCount*0.2&&(initiatePowerRampUp=!![],currentSiteState=SITE_STATE_OUTAGE);}!_0x43d619&&(_0x4adc4e=_0x4adc4e*0.8);if(_0x9195dc>_0x4adc4e||isNaN(_0xa5980b)){const {cardStatus:_0x3ad6ac,cardFailureChains:_0x7d39da,temperatures:_0x4192b4,intakeSpeed:_0x488d48,exhaustSpeed:_0x198901,..._0x4e2432}=_0x44de97;_0x543adb[_0x5cf4b9(0x307)]=_0x4e2432;const {pools:_0x4431da,..._0x12b6f7}=_0x4e2432;if(!_0x543adb['conditionUltimate'])_0x543adb[_0x5cf4b9(0x216)]=_0x12b6f7;else _0x9195dc>(_0x543adb[_0x5cf4b9(0x216)][_0x5cf4b9(0x2da)]||_0x543adb[_0x5cf4b9(0x216)][_0x5cf4b9(0x2e7)]||0x0)&&(_0x543adb['conditionUltimate']=_0x12b6f7);}const _0x55629b={'accountName':_0x53fb2a,'workerName':_0x42fcd1,'ipAddress':_0x28f5d2,'macAddress':_0x5243aa,'placement':_0x77d1f3};_0x4648f3<0x5&&(deadMiners[_0x5243aa]=_0x55629b);let _0x38d0fe='',_0x3bba9c=![],_0x41b11e=![];if(_0x397a86)_0x38d0fe=MINER_STATE_BOOTING;else{if(_0x43d619){if(_0x1a9ffb)_0x38d0fe=MINER_STATE_STALLED;else{if(_0x568677)_0x38d0fe=MINER_STATE_STRUGGLING;else{if(_0x587b4b)_0x38d0fe=MINER_STATE_FAILING;else{if(_0x457803)_0x38d0fe=MINER_STATE_REJECTING;else _0x3b52a4&&(_0x38d0fe=MINER_STATE_ERRORING);}}}_0x3bba9c=_0x568677||_0x587b4b||_0x1a9ffb,_0x41b11e=!!_0x38d0fe;}else!_0x3bba9c?_0x38d0fe=MINER_STATE_NORMAL:_0x38d0fe=MINER_STATE_DEGRADING;}_0x38d0fe&&(_0x543adb['runtimeState']=_0x38d0fe);let _0x25f8a7=_0x29669c&&hasAvailablePower&&_0x5e0377>MINER_OC_INTERVAL_MINUTES;const _0xb7cea6=!!(_0x590d0c[_0x5cf4b9(0x1fb)]&&_0x543adb[_0x5cf4b9(0x2aa)]&&(initiatePowerRampUp||_0x3b52a4||_0x13ad9d||_0x25f8a7));console[_0x5cf4b9(0x288)](_0x5cf4b9(0x23a)+_0x38d0fe+']\x20'+_0x42fcd1+',\x20'+_0x28f5d2+_0x5cf4b9(0x25e)+_0x4648f3+',\x20hashRatePeriodPercent:\x20'+_0x483189+'%\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20hasAvailablePower='+hasAvailablePower+_0x5cf4b9(0x248)+_0x41b11e+_0x5cf4b9(0x2ae)+_0xb7cea6+_0x5cf4b9(0x20e)+_0x305be3+_0x5cf4b9(0x333)+_0x29669c+',\x20isOverHeating='+_0x13ad9d+_0x5cf4b9(0x241)+initiatePowerRampUp+',\x20isErroring='+_0x3b52a4+_0x5cf4b9(0x2d8)+_0x51f130+_0x5cf4b9(0x2b5)+_0x43d619+_0x5cf4b9(0x249)+_0x204d65+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20,\x20isStalled='+_0x1a9ffb+_0x5cf4b9(0x214)+_0x568677+_0x5cf4b9(0x252)+_0x457803+_0x5cf4b9(0x29f)+_0x587b4b+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20,\x20initElapsedMinutes='+_0x5e0377+_0x5cf4b9(0x291)+_0x3cd9e7+'m,\x20offlineTimestamp='+_0x543adb['offlineTimestamp']+_0x5cf4b9(0x244)+_0x543adb['lastEffectiveHashingTime']);const _0x29e459=_0x53fb2a+'.'+_0x42fcd1+'\x20['+_0x28f5d2+',\x20'+_0x5243aa+_0x5cf4b9(0x27d)+_0x38d0fe+',\x20live:\x20'+_0x5e0377+_0x5cf4b9(0x28e)+_0x3cd9e7+_0x5cf4b9(0x286)+_0x5c7fa5+',\x20'+_0x2e53a2+_0x5cf4b9(0x2c4)+parseInt(_0x9195dc)+',\x20'+_0x4adc4e+',\x20'+_0x45473c+_0x5cf4b9(0x23c)+_0x4648f3+_0x5cf4b9(0x2e8)+_0x483189+'%';validMiners[_0x5243aa]={'logText':_0x29e459,'accountName':_0x53fb2a,'workerName':_0x42fcd1,'ipAddress':_0x28f5d2,'macAddress':_0x5243aa,'placement':_0x77d1f3};if(_0xb7cea6){delete alertableMiners[_0x5243aa];_0x3b52a4&&(_0x25f8a7=![]);const _0x4ac25a=initiatePowerRampUp?-0x9:_0x25f8a7?0x1:-0x1,_0x377caa=getOptimumClockSettings(_0x543adb,_0x44de97,_0x590d0c,_0x4ac25a),{condition:_0x1bc5f6,conditionPrime:_0x47b738,clockSettings:_0x3b9588}=_0x543adb,_0x2a89f8=_0x1bc5f6[_0x5cf4b9(0x2ce)]&&_0x1bc5f6[_0x5cf4b9(0x2ce)][_0x5cf4b9(0x306)]?_0x1bc5f6['pools']:_0x47b738[_0x5cf4b9(0x2ce)],_0x49305a=_0x3b9588||{},_0x45eedc=_0x377caa[_0x5cf4b9(0x315)]&&_0x2a89f8&&_0x2a89f8[_0x5cf4b9(0x306)];_0x377caa[_0x5cf4b9(0x315)]?console['debug'](_0x5cf4b9(0x294)+_0x42fcd1+',\x20'+_0x28f5d2+_0x5cf4b9(0x339)+hasAvailablePower+',\x20since\x20'+_0x5e0377+_0x5cf4b9(0x20f)+_0x377caa['frequency']+','+_0x377caa[_0x5cf4b9(0x277)]+_0x5cf4b9(0x202)+_0x49305a['frequency']+','+_0x49305a[_0x5cf4b9(0x277)]+'v'):console[_0x5cf4b9(0x288)](_0x5cf4b9(0x220)+_0x42fcd1+',\x20'+_0x28f5d2+_0x5cf4b9(0x339)+hasAvailablePower+_0x5cf4b9(0x326)+_0x5e0377+_0x5cf4b9(0x270)+_0x49305a['frequency']+','+_0x49305a[_0x5cf4b9(0x277)]+'v');if(_0x45eedc&&(_0x49305a['frequency']!==_0x377caa[_0x5cf4b9(0x315)]||_0x49305a[_0x5cf4b9(0x277)]!==_0x377caa[_0x5cf4b9(0x277)])){const _0x5d8a1b=_0x377caa,_0x31728c=_[_0x5cf4b9(0x1eb)](_0x2a89f8,(_0x450f11,_0x51e923)=>{const _0x28a6b9=_0x5cf4b9;return{'index':_0x51e923+0x1,'stratum':_0x450f11[_0x28a6b9(0x309)],'username':_0x450f11[_0x28a6b9(0x318)],'password':'x'};});return updateMinerSettings({'minerInfo':_0x543adb,'minerTyped':_0x590d0c,'pools':_0x31728c,'minerConfigOptions':_0x5d8a1b,'apiVersion':_0x2a1491})[_0x5cf4b9(0x317)](async _0x25c7d6=>{const _0xc3b48=_0x5cf4b9;if(/\bok\b/i[_0xc3b48(0x247)](_0x25c7d6)){_0x543adb[_0xc3b48(0x259)]=MINER_STATE_CLOCKING,console[_0xc3b48(0x2bd)](_0xc3b48(0x21e)+_0x42fcd1+',\x20'+_0x543adb[_0xc3b48(0x2f1)]+'\x20clock\x20'+(_0x377caa[_0xc3b48(0x315)]>_0x49305a[_0xc3b48(0x315)]?'up':_0xc3b48(0x239))+_0xc3b48(0x2b9)+_0x377caa['frequency']+_0xc3b48(0x1ef)+_0x377caa[_0xc3b48(0x277)]+_0xc3b48(0x2d6)+(_0x49305a[_0xc3b48(0x315)]||0x0)+_0xc3b48(0x1ef)+(_0x49305a[_0xc3b48(0x277)]||0x0)+_0xc3b48(0x2c6)),_0x543adb[_0xc3b48(0x265)]={..._0x5d8a1b},_0x543adb[_0xc3b48(0x307)]=null;const _0x19a4dc=!_0x543adb[_0xc3b48(0x217)]||parseInt(_0x543adb['clockFrequencyCap'])>_0x377caa[_0xc3b48(0x315)];(_0x3b52a4||_0x568677)&&_0x19a4dc&&(console[_0xc3b48(0x2bd)]('Adjusting\x20the\x20clocking\x20cap\x20for\x20'+_0x42fcd1+_0xc3b48(0x2dd)+_0x543adb['clockFrequencyCap']+',\x20to:\x20'+_0x377caa[_0xc3b48(0x315)]),_0x543adb['clockFrequencyCap']=_0x377caa[_0xc3b48(0x315)]);}else console[_0xc3b48(0x2bd)]('Adjust\x20failure\x20for\x20miner\x20'+_0x42fcd1+',\x20'+_0x543adb[_0xc3b48(0x2f1)]+'\x20clock\x20to\x20frequency:\x20'+_0x377caa['frequency']+_0xc3b48(0x299)+_0x377caa[_0xc3b48(0x277)]);return{'upsertedMiner':await upsertMinerInfo({'minerInfo':_0x543adb}),'state':_0x38d0fe};});}}else{if(_0x305be3){const {firmwareFileName:_0x1bdd27}=_0x543adb;if(!/updater/[_0x5cf4b9(0x247)](_0x1bdd27))return console[_0x5cf4b9(0x2bd)](_0x5cf4b9(0x25b)+_0x29e459),updateMinerFirmware({'minerInfo':_0x543adb,'minerTyped':_0x590d0c,'firmwareFileName':_0x1bdd27,'apiVersion':_0x2a1491});else console[_0x5cf4b9(0x2bd)](_0x5cf4b9(0x271)+_0x29e459);}else{if(_0x41b11e){if(_0x543adb[_0x5cf4b9(0x259)]===MINER_STATE_REBOOTING)console[_0x5cf4b9(0x2bd)]('Rebooted\x20'+_0x29e459),_0x543adb[_0x5cf4b9(0x259)]=MINER_STATE_BOOTING;else{if(_0x3bba9c){alertableMiners[_0x5243aa]=_0x55629b,_0x543adb[_0x5cf4b9(0x259)]=MINER_STATE_REBOOTING;!_0x543adb[_0x5cf4b9(0x232)]&&(_0x543adb['rebootTimes']=[]);_0x543adb['rebootTimes'][_0x5cf4b9(0x306)]>0x14&&_0x543adb[_0x5cf4b9(0x232)][_0x5cf4b9(0x2fe)]();_0x543adb[_0x5cf4b9(0x307)]=null,_0x543adb[_0x5cf4b9(0x232)][_0x5cf4b9(0x240)]({'reason':_0x38d0fe,'timestamp':_0x282cee,'percentOfPrime':_0x4648f3,'liveHashRate':_0x9195dc,'liveHashRateAvg':_0xbfe8c}),console[_0x5cf4b9(0x2bd)]('Rebooting\x20'+_0x29e459);const _0x144b61=upsertMinerInfo({'minerInfo':_0x543adb})[_0x5cf4b9(0x317)](()=>getMinerReboot(_0x543adb,_0x590d0c,_0x2a1491));return{'upsertedMiner':_0x144b61,'state':_0x543adb[_0x5cf4b9(0x259)]};}else console[_0x5cf4b9(0x288)](_0x5cf4b9(0x336)+_0x29e459),console[_0x5cf4b9(0x2bd)]('Not\x20rebooting\x20'+_0x53fb2a+'.'+_0x42fcd1+'\x20['+_0x28f5d2+',\x20'+_0x5243aa+_0x5cf4b9(0x27d)+_0x38d0fe);}}else{if(_0x38d0fe&&_0x543adb[_0x5cf4b9(0x259)]!==MINER_STATE_NORMAL)alertableMiners[_0x5243aa]=_0x55629b,alertableMiners[_0x5243aa][_0x5cf4b9(0x308)]=_0x38d0fe,_0x204d65&&(console[_0x5cf4b9(0x2bd)]('Failing\x20miner\x20'+_0x29e459),console[_0x5cf4b9(0x288)](_0x5cf4b9(0x2d5)+_0x38d0fe+_0x5cf4b9(0x235)+inspect(_0x58c35b)));else return _0x543adb[_0x5cf4b9(0x2c7)]=_0x282cee,delete alertableMiners[_0x5243aa],{'upsertedMiner':await upsertMinerInfo({'minerInfo':_0x543adb}),'state':_0x38d0fe};}}}return{'upsertedMiner':await upsertMinerInfo({'minerInfo':_0x543adb}),'state':_0x38d0fe};}let hasAvailablePower=0x0,wattsConsumedTally=0x0,elapsedTally=0x0,minersScannedCount=0x0,initiatePowerRampUp=![],currentSiteState=SITE_STATE_NORMAL,minerCount=0x0,deadMiners={};async function compareMinerStatus(_0x138188,_0x393efa,_0x2f90dd){const _0x1184ce=_0x5ae9fe,_0xc6f477=loopback[_0x1184ce(0x2cb)](_0x1184ce(0x1fd)),{availableKilowatts:availableKilowatts=0x0,powerRampUpDisabled:powerRampUpDisabled=![],configureMode:_0x223880}=dataCenterSettings;!kilowattsConsumed&&(kilowattsConsumed=availableKilowatts);hasAvailablePower=!availableKilowatts||availableKilowatts>kilowattsConsumed,wattsConsumedTally=0x0,elapsedTally=0x0,minersScannedCount=0x0,initiatePowerRampUp=![],currentSiteState=powerRampUpDisabled?SITE_STATE_NORMAL:SITE_STATE_UNKNOWN,deadMiners={};let _0x1a5322=Date[_0x1184ce(0x29e)](),_0x3fcb5c={};if(_0x138188){const {range:_0x43fbbb}=_0x138188,_0x3cd1ae=getIPRange(_0x43fbbb[0x0],_0x43fbbb[0x1]);_0x3fcb5c={'where':{'ipAddress':{'inq':_0x3cd1ae}}};}const _0x582e7b=await _0xc6f477[_0x1184ce(0x2f7)](_0x3fcb5c),_0x156933=_0x582e7b[_0x1184ce(0x1eb)](_0x112beb=>_0x112beb['ipAddress']),_0x2b0031=await getScanCache(_0x138188||dataCenterSettings['dhcpSettings'],_0x393efa,_0x2f90dd,_0x156933);if(_0x223880===CONFIGURE_MODE_PROVISION){console[_0x1184ce(0x2bd)](_0x1184ce(0x297)+(_0x223880==CONFIGURE_MODE_DISCOVERY?_0x1184ce(0x27f):_0x1184ce(0x2fc))+'.');return;}if(!minerCheckCompleted){console[_0x1184ce(0x2bd)](_0x1184ce(0x20c)),minerCheckCompleted=!![];return;}minerCheckCompleted=![],minerCount=_0x582e7b['length'];const _0x517675=Date['parse'](new Date())[_0x1184ce(0x292)]();console[_0x1184ce(0x2bd)](_0x1184ce(0x1ff)+minerCount+_0x1184ce(0x2bc)+kilowattsConsumed[_0x1184ce(0x26c)]()+_0x1184ce(0x258)+availableKilowatts[_0x1184ce(0x26c)]()+_0x1184ce(0x331));const _0x684bb4={'skipped':[],'live':[]},_0x287316=0x64;while(_0x582e7b[_0x1184ce(0x306)]){await Promise['all'](_0x582e7b[_0x1184ce(0x2ee)](0x0,_0x287316)[_0x1184ce(0x1eb)](async _0x22fd20=>{const _0x536cb0=_0x1184ce;let {ipAddress:_0x3a03cf}=_0x22fd20;const _0x15da1e=!_0x3a03cf||!!_0x2b0031[_0x3a03cf],{upsertedMiner:_0x4fbaba,state:_0x552074}=await syncMinerStatusJob(_0x22fd20,_0x517675,_0x15da1e);console[_0x536cb0(0x288)](_0x536cb0(0x32e)+_0x552074+_0x536cb0(0x319)+(_0x4fbaba?.[_0x536cb0(0x2f1)]||_0x3a03cf)),_0x4fbaba?(!_0x684bb4[_0x552074]&&(_0x684bb4[_0x552074]=[]),_0x684bb4[_0x552074||_0x536cb0(0x310)][_0x536cb0(0x240)](_0x4fbaba?.[_0x536cb0(0x2f1)])):_0x684bb4[_0x536cb0(0x323)][_0x536cb0(0x240)](_0x3a03cf);})),console[_0x1184ce(0x288)](_0x1184ce(0x2ed)+_0x287316+'.\x20'+_0x582e7b[_0x1184ce(0x306)]+_0x1184ce(0x30c));};Object['keys'](_0x684bb4)[_0x1184ce(0x32f)](_0x3bad0d=>{_0x684bb4[_0x3bad0d]['sort'](ipDesc);});if(!_0x684bb4)return;const _0x500c27=function(_0xea37ab){const _0x14d4d1=_0x1184ce;reportedDates[_0xea37ab[_0x14d4d1(0x269)]]&&reportedDates[_0xea37ab[_0x14d4d1(0x269)]]<Date['now']()-notifyTime&&(reportedDates[_0xea37ab['macAddress']]=null);if(!reportedDates[_0xea37ab[_0x14d4d1(0x269)]])return!![];};let _0x3fbb63=_[_0x1184ce(0x300)](_[_0x1184ce(0x264)](invalidMiners,_0x500c27),['accountName',_0x1184ce(0x311)]),_0x12ff48=_['sortBy'](_[_0x1184ce(0x264)](alertableMiners,_0x500c27),['accountName',_0x1184ce(0x311)]),_0x5e33ce=_[_0x1184ce(0x300)](_[_0x1184ce(0x264)](deadMiners,_0x500c27),(_0xb5a61e={})=>{const _0x2d5964=_0x1184ce,{hall:_0x3b2769,rack:_0x487b80,shelf:_0x391454,position:_0x3839ab}=_0xb5a61e[_0x2d5964(0x278)]||{};return[_0x3b2769,_0x487b80,_0x391454,_0x3839ab];}),_0x573d0e='';const _0x22cdf0=(_0x382ac8,_0x13fcaf)=>{const _0x34d306=_0x1184ce;_0x13fcaf&&(_0x382ac8[_0x34d306(0x2b0)]={});const {accountName:_0x438c04,workerName:_0x413fd6,ipAddress:_0x574c05,macAddress:_0xcaa241}=_0x382ac8;reportedDates[_0xcaa241]=Date[_0x34d306(0x29e)]();const {hall:_0x3f9109,rack:_0x24d5a1,shelf:_0x5c5013,position:_0x5bccb2}=_0x382ac8[_0x34d306(0x278)]||{};return _0x438c04+'.'+_0x413fd6+_0x34d306(0x255)+_0x3f9109+'.'+_0x24d5a1+'.'+_0x5c5013+'.'+_0x5bccb2+'\x09\x20('+_0x574c05+')';};_0x3fbb63[_0x1184ce(0x306)]&&(_0x573d0e+='\x0a['+dataCenterSettings['locationID']+']\x20'+_0x3fbb63[_0x1184ce(0x306)]+'\x20miners\x20not\x20found\x20at\x20'+dataCenterSettings[_0x1184ce(0x312)]+'.\x0a',_0x573d0e+=_[_0x1184ce(0x1eb)](_0x3fbb63,_0x111d1d=>_0x22cdf0(_0x111d1d,!![]))['join']('\x0a'));_0x12ff48[_0x1184ce(0x306)]&&(_0x573d0e+='\x0a['+dataCenterSettings[_0x1184ce(0x334)]+']\x20'+_0x12ff48[_0x1184ce(0x306)]+_0x1184ce(0x24e)+dataCenterSettings[_0x1184ce(0x312)]+'.\x0a',_0x573d0e+=_[_0x1184ce(0x1eb)](_0x12ff48,_0x19ab07=>_0x22cdf0(_0x19ab07))[_0x1184ce(0x33a)]('\x0a'));if(_0x5e33ce['length']>minerCount*(dataCenterSettings[_0x1184ce(0x209)]||0x2)/0x64){let _0x4e00cb=dataCenterSettings[_0x1184ce(0x312)]+'.\x20'+_0x5e33ce[_0x1184ce(0x306)]+'\x20offline!';_0x573d0e=_[_0x1184ce(0x250)](_0x5e33ce,(_0x2132ed,_0x19a55c={})=>{const _0x31223d=_0x1184ce,{hall:hall='',rack:rack='',shelf:shelf='',position:position=''}=_0x19a55c[_0x31223d(0x278)]||{};var _0x389146=hall+'.'+rack+'.'+shelf+'.'+position;return _0x389146[_0x31223d(0x306)]<=0x4&&(_0x389146=_0x31223d(0x1ec)),_0x2132ed+(_0x389146+'\x09'+_0x19a55c['workerName']+'\x0d');},'\x0d'),await offlineMiners({'subject':_0x4e00cb,'text':_0x573d0e})[_0x1184ce(0x251)](_0x9b8776=>{const _0x11903b=_0x1184ce;console[_0x11903b(0x29a)](_0x11903b(0x2b1),_0x9b8776);})['then'](_0x4cd629=>{const _0x47240d=_0x1184ce;console[_0x47240d(0x2bd)]('Email\x20sent:',_0x4cd629);},_0x566bed=>{const _0x19871e=_0x1184ce;console[_0x19871e(0x29a)](_0x566bed);});}let _0x47deab=parseInt(Math['round']((Date[_0x1184ce(0x29e)]()-_0x1a5322)/0x64))/0xa;kilowattsConsumed=parseInt(wattsConsumedTally/0x3e8);const _0x45db68=_0x1184ce(0x2bb)+minerCount+'\x20miners\x20in\x20'+_0x47deab+_0x1184ce(0x2e5)+kilowattsConsumed[_0x1184ce(0x26c)]()+_0x1184ce(0x258)+availableKilowatts['toLocaleString']()+'\x20kw';return console[_0x1184ce(0x2bd)](_0x45db68),slackMessage({'text':_0x573d0e}),socketSendMiners(_0x684bb4),minerCheckCompleted=!![],{'message':_0x45db68,'minerInfoUpserts':_0x684bb4,'invalids':_0x3fbb63,'alertables':_0x12ff48,'deadones':_0x5e33ce,'validMiners':validMiners,'text':_0x573d0e};}function socketSendMiners(_0x30165d,_0x10be33){const _0x4f62cc=_0x5ae9fe;let _0x1aff0f=_[_0x4f62cc(0x1eb)](_0x30165d,(_0x5766b7={})=>{const _0x9ff384=_0x4f62cc;if(!_0x5766b7||!_0x5766b7[_0x9ff384(0x256)])return{};const {name:_0x23575f,minerType:_0xba1ebf,ipAddress:_0x213758,macAddress:_0x70f0d4,placement:_0x53d0f6,accountName:_0x3db9a3,workerName:_0x486448,condition:_0x4bed40,conditionPrime:_0x5e4aa,deployments:_0x49a98b,systemLogicVersion:_0x147eec,serialNumber:_0x2d190,psuSerialNumber:_0x2ac035,psuModel:_0x4d246a,networkSwitchRef:_0x445d1,breakerPanelId:_0x75273a,powerBarId:_0x7b2ec7,powerPhase:_0x21e651,transformerLow:_0x23e7f2,transformerMed:_0x3a26ed}=_0x5766b7;let _0x4dd32f={'name':_0x23575f,'minerType':_0xba1ebf,'ipAddress':_0x213758,'macAddress':_0x70f0d4,'placement':_0x53d0f6,'accountName':_0x3db9a3,'workerName':_0x486448,'condition':_0x4bed40,'conditionPrime':_0x5e4aa,'deployments':_0x49a98b,'systemLogicVersion':_0x147eec,'serialNumber':_0x2d190,'psuSerialNumber':_0x2ac035,'psuModel':_0x4d246a,'networkSwitchRef':_0x445d1,'breakerPanelId':_0x75273a,'powerBarId':_0x7b2ec7,'powerPhase':_0x21e651,'transformerLow':_0x23e7f2,'transformerMed':_0x3a26ed};return _0x5766b7['minerType']&&minerTypeMap[_0xba1ebf]&&(_0x4dd32f['minerTypeMap']=minerTypeMap[_0xba1ebf]),_0x4dd32f['provisionStatus']=_0x10be33||'',_0x4dd32f;}),_0x45f837='{\x22minerInfos\x22:'+JSON['stringify'](_0x1aff0f)+'}';socketSend({'text':_0x45f837});}function sendMessage({text:_0x4f8889,accessToken:_0x2b23b1},_0x1b2434){if(!_0x4f8889)return;_0x1b2434&&slackMessage({'text':_0x4f8889}),socketSend({'text':_0x4f8889,'accessToken':_0x2b23b1});}module['exports']={'provisionMiner':provisionMiner,'provisionMinersByType':provisionMinersByType,'provisionUnresponsiveMiner':provisionUnresponsiveMiner,'getDataCenterRacklist':getDataCenterRacklist,'discoverMiners':discoverMiners,'compareMinerStatus':compareMinerStatus,'setDataCenterSettings':setDataCenterSettings,'syncMinerStatusJob':syncMinerStatusJob,'socketSendMiners':socketSendMiners};function _0x26fd(){const _0x500a94=['ipAddress','warm','Miner\x20pools\x20NOT\x20overwritten\x20for\x20','logStates','accepted','Updating\x20ipAddress\x20for\x20','find','endTime','settingsInfo','max','action','provisioning','Sync\x20miner\x20configuration\x20for\x20','shift','modelType','sortBy','enableSSH','netmask','Overwriting\x20workerName\x20for\x20','edit\x20miner\x20[','findIndex','length','conditionPrime','status','url','],\x20cab:\x20','87bkRTVg','\x20left\x20to\x20sync','assign','6ZXgEel','Configured\x20','live','workerName','locationName','sshEnabled','enableNetworkLatencyCheck','frequency','Settings\x20update\x20requested\x20for\x20','then','user','\x20for\x20miner\x20','202016BjXzNJ','persistedLog','getMinutes','Configuration\x20not\x20required\x20','Miner\x20pools\x20overwritten\x20for\x20','success','Retrieve\x20network\x20diagnostic\x20failed\x20for\x20','discoverMiners\x20request\x20timed\x20out:','poolIDs','skipped','abort','apiVersion',',\x20since\x20','[provision]\x20System\x20info\x20request\x20failed\x20during\x20provisionJob\x20for,\x20','rebooted','mild','5166JBcQvV','Miner\x20pools\x20overwrite\x20failed\x20for\x20','\x20for\x20account\x20','setting','SyncState\x20of\x20','forEach','scanStats','\x20kw','rejected','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20,\x20isRunningCool=','locationID','\x20from\x20','Not\x20rebooting\x20','minerType','router',',\x20power\x20available:\x20','join','lastEvent','8.8.8.8','reset','enableStaticIP','),\x20minerInfo(','map','Not\x20assigned.','getDay','cardStatus','M,\x20','hot','toFixed','maxChipErrorRate','.\x20apiVersion:','floor','getFullYear','2070XQOISp','Detected','\x20from\x20\x20to\x20','index','useArpTable','overclock','none','minerInfo','env','Miner\x20status\x20check\x20started\x20for\x20','hall','enabled','v\x20from\x20:','accountName','degrading','Rack\x20position\x20update\x20[','Discovered\x20miner\x20','Miner\x20pools\x20NOT\x20set.',']\x20name\x20','inactiveAlarmPercentage','exhaustSpeed','oldWorkerName','Miner\x20status\x20check\x20skipped\x20one\x20time\x20to\x20avoid\x20multiple\x20concurrent\x20scans.','n/a',',\x20isReUpload=','\x20minutes,\x20to\x20','45124AcvtFB','Miner\x20status\x20request\x20failed\x20during\x20scan\x20for\x20','fan1','update',',\x20isStruggling=','hashRatePeriodicAverage','conditionUltimate','clockFrequencyCap','Create\x20unresponsive\x20miner\x20at\x20[','cardFailureChains','upsert','lodash','elapsed','Adjust\x20clock\x20factors\x20for\x20','Adjusted\x20miner\x20','workerTypeNumber','Adjust\x20clock:\x20Keep\x20state\x20for\x20miner\x20','dhcpSettings',',\x20for\x20',']\x20failed.','rack','8QNDtat','toLowerCase','getHours','../../common/utilities/plugins','slack','Discover\x20error','networkScanInterval','Not\x20assigned','updateFirmware','tmp/',']\x20detected.','Unable\x20to\x20sync\x20configuration\x20for\x20','NETWORK_DIAGNOSTIC','rebootTimes','ceil','Kernel\x20log\x20request\x20failed\x20during\x20scan\x20for\x20','\x20miner\x20state\x20:','.log','Discover\x20miners\x20initiated!\x20Scanning\x20network\x20using\x20','monthly','down','Miner\x20state[','Update\x20requested\x20for\x20new\x20miner\x20[','],\x20at:','softwareVersion','enablePoolConfiguration','ignored','push',',\x20initiatePowerRampUp=','Configured\x20Update\x20not\x20required\x20','indexOf',',\x20lastEffectiveHashingTime=','../../common/utilities/data-center','count','test',',\x20tryRebooting=',',\x20shouldLogFailingMiners=','tempAvg','clockingFirmware','configure',']\x20pool\x20update.\x20(Check\x20config!)','\x20miners\x20are\x20failing\x20at\x20','.\x20no\x20poolIDs\x20saved.\x20','reduce','catch',',\x20isOverRejecting=','Unable\x20to\x20get\x20miner\x20system\x20info\x20from:\x20','\x20miners/sec','\x20at\x20','name','3148558twPcHU','\x20/\x20','runtimeState','daily','Uploading\x20firmware\x20','\x20[\x20','util',':,\x20hashRatePercent:\x20','Skipping\x20miner\x20pool\x20configuration\x20for\x20[','replace','options','parse','rebooting','filter','clockSettings','save','SSH_PORT_STATE','trends','macAddress','\x20<>\x20',']\x20update\x20configuration.','toLocaleString','miner-utils','\x20]\x20at\x20','warn','\x20minutes,\x20staying\x20at\x20:','Not\x20uploading\x20OC\x20firmware\x20','Miner\x20diagnostic','65758UBwgQf','scan','yearly',',\x20cab:\x20','volts','placement','round','Unknown\x20miner\x20type\x20at\x20[','slice','Broadcast\x20activity\x20by\x20miner\x20at\x20[',']\x20in\x20','minutes','discovery','ping','./ws-server','discoverMiners\x20error:','Setting\x20deployedOn\x20for\x20','message','consumption','m.\x20\x20fans:[','all','debug','uri','inactive','avg','Overwriting\x20firmwareFileName\x20for\x20','includes','m,\x20on:\x20','Debounced\x20miner\x20pools\x20update\x20\x20[','unknown','m,\x20bootElapsedMinutes=','toString','\x20@\x20','Adjust\x20clock:\x20Update\x20state\x20for\x20miner\x20','firmwareUpdate','Unable\x20to\x20determine\x20workerName\x20during\x20new\x20miner\x20pool\x20update','Miner\x20status\x20check\x20skipped\x20during\x20','every',',\x20volts:','error','\x27tcp\x20detection\x27.','1871015srEuYc','temp_Antminer_updater','now',',\x20isFailing=','historical','dead','temperatures','deployedOn',',\x20\x20','Miner\x20pools\x20update\x20ignored\x20for\x20','getMonth','tempHot','workerProperties','keys','enableManagedClocking','initial','booting','offlineTimestamp',',\x20shouldAdjustClock=','destroy','condition','Unable\x20to\x20send\x20email:','placement.hall\x20DESC','Configuring\x20aborted\x20due\x20to\x20unknown\x20minerType:','discovered',',\x20shouldBeHashingByNow=','hashing','Scan\x20results\x20received\x20for\x20','reboot','\x20to\x20','lastAccess','Miner\x20status\x20check\x20completed\x20for\x20','\x20miners.\x20Power\x20consumed\x20','log','broadcast','latestStableFirmware','Skipped\x20miner\x20[','),\x20minerSystemInfo(','miners','model','],\x20hashrates:[','configureMode','(m)v','lastEffectiveHashingTime','promise-limit','Unable\x20to\x20extract\x20pools\x20for\x20unregistered\x20miner\x20system\x20info\x20for\x20','9816MOFESN','getModel','\x27arp-scan\x27.','./miner-proxy','pools','clocking','username','discoverStartTime','isArray','Scan\x20for\x20miners\x20failed','temperatureState','Failing\x20miner,\x20','(m)v\x20from:\x20','hourly','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20,\x20hasInitialized=','\x20miner\x20[','hashRate','getMinerSystemInfo\x20returned\x20undefined\x20minerType','],\x20during\x20discovery.\x20(Edit\x20config\x20to\x20force\x20override!)','\x20from:\x20','statusCode','Discover\x20statistics','fine','27128GLIkRp',',\x20cap:\x20','\x20Status\x20code:\x20','groupBy','\x20seconds.\x20Consuming\x20','Trend\x20archiving','hashRateAvg','%,\x20period:','timestamp','hardwareErrors','configured','failed','Batch\x20sync\x20size\x20is\x20','splice','firmwareFileName','erroring'];_0x26fd=function(){return _0x500a94;};return _0x26fd();}