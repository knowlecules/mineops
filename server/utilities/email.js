/* Copyright (C) 9208-9721 Quebec, Inc - All Rights Reserved
* Unauthorized copying of this file, via any medium is strictly prohibited
* Proprietary and confidential
* Written by Jason Rudland <jason.g.rudland@gmail.com>, September 2022
*/'use strict';const _0x2bf12c=_0x23b7;(function(_0x4bcd74,_0x20badb){const _0x5306a8=_0x23b7,_0xc81a6=_0x4bcd74();while(!![]){try{const _0x4cff6d=-parseInt(_0x5306a8(0x190))/0x1+parseInt(_0x5306a8(0x1a9))/0x2*(parseInt(_0x5306a8(0x195))/0x3)+parseInt(_0x5306a8(0x1a0))/0x4*(-parseInt(_0x5306a8(0x19c))/0x5)+parseInt(_0x5306a8(0x19a))/0x6*(-parseInt(_0x5306a8(0x194))/0x7)+parseInt(_0x5306a8(0x19e))/0x8*(-parseInt(_0x5306a8(0x1a2))/0x9)+-parseInt(_0x5306a8(0x198))/0xa+parseInt(_0x5306a8(0x19f))/0xb;if(_0x4cff6d===_0x20badb)break;else _0xc81a6['push'](_0xc81a6['shift']());}catch(_0x2f4fbe){_0xc81a6['push'](_0xc81a6['shift']());}}}(_0x2cda,0xd5f33));function _0x2cda(){const _0x5a5652=['subject','noreply@mineops.com','createTransport','replace','2667074XFZbuY','smtpTransport','forEach','1246204mwBLfQ','env','parse','Please\x20verify\x20and\x20rectify\x20offline\x20status\x20of\x20the\x20following\x20miners:\x0d%INJECT%','22316OZlLVk','3FkNjQo','%INJECT%','html','12108190xXxKqN','offlineMiners','2886YBZDFs','sendMail','290975iLbSFt','text','11014328WfxTMv','73214834tttaqR','120QStLdw','exports','9tjuWnf','MineOps\x20alert:\x20Excessive\x20offline\x20miners\x20at\x20%INJECT%','MineOps\x20has\x20sent\x20you\x20an\x20email'];_0x2cda=function(){return _0x5a5652;};return _0x2cda();}const _=require('lodash'),nodemailer=require('nodemailer'),smtpTransport=JSON[_0x2bf12c(0x192)](process[_0x2bf12c(0x191)][_0x2bf12c(0x1aa)]||{});function _0x23b7(_0x32d24e,_0xece792){const _0x2cdae2=_0x2cda();return _0x23b7=function(_0x23b78a,_0x4ea190){_0x23b78a=_0x23b78a-0x190;let _0x391527=_0x2cdae2[_0x23b78a];return _0x391527;},_0x23b7(_0x32d24e,_0xece792);}let transport=nodemailer[_0x2bf12c(0x1a7)](smtpTransport),baseMailOptions={'from':_0x2bf12c(0x1a6),'to':''},mailOptions={'default':{'subject':_0x2bf12c(0x1a4),'text':'Hello\x20world\x20âœ”'},'offlineMiners':{'subject':_0x2bf12c(0x1a3),'text':_0x2bf12c(0x193)}};function init(_0x40f02b){const _0x51f896=_0x2bf12c;baseMailOptions=_0x40f02b,_[_0x51f896(0x1ab)](mailOptions,(_0x533fea,_0x4ac246)=>{mailOptions[_0x4ac246]={..._0x533fea,...baseMailOptions};});}function sendEmail(_0x12bd84){return new Promise(function(_0x467890,_0x2bdcc2){const _0x6ce4cf=_0x23b7;transport[_0x6ce4cf(0x19b)](_0x12bd84,function(_0xc5be9c,_0x10e711){_0xc5be9c?_0x2bdcc2(_0xc5be9c):_0x467890(_0x10e711);});});}function replaceTokens({mailOptions:_0x410088,subject:subject='',text:text='',html:html=''}){const _0x1fd9b5=_0x2bf12c;return _0x410088[_0x1fd9b5(0x1a5)]=_0x410088[_0x1fd9b5(0x1a5)][_0x1fd9b5(0x1a8)](_0x1fd9b5(0x196),subject),_0x410088[_0x1fd9b5(0x19d)]&&(_0x410088[_0x1fd9b5(0x19d)]=_0x410088['text'][_0x1fd9b5(0x1a8)]('%INJECT%',text)),_0x410088[_0x1fd9b5(0x197)]&&(_0x410088['html']=_0x410088[_0x1fd9b5(0x197)]['replace']('%INJECT%',html)),_0x410088;}async function offlineMiners({subject:_0x10198,text:_0xcc36d4}){const _0x192df6=_0x2bf12c;var _0x5e5206=replaceTokens({'mailOptions':mailOptions[_0x192df6(0x199)],'subject':_0x10198,'text':_0xcc36d4});return sendEmail(_0x5e5206);}module[_0x2bf12c(0x1a1)]={'offlineMiners':offlineMiners,'sendEmail':sendEmail,'init':init};