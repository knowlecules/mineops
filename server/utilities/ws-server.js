/* Copyright (C) 9208-9721 Quebec, Inc - All Rights Reserved
* Unauthorized copying of this file, via any medium is strictly prohibited
* Proprietary and confidential
* Written by Jason Rudland <jason.g.rudland@gmail.com>, September 2022
*/'use strict';const _0x568ee5=_0x139d;function _0x139d(_0x1b1962,_0x58c2b6){const _0x59b2fe=_0x59b2();return _0x139d=function(_0x139dc6,_0x218881){_0x139dc6=_0x139dc6-0x1b3;let _0x17ef24=_0x59b2fe[_0x139dc6];return _0x17ef24;},_0x139d(_0x1b1962,_0x58c2b6);}(function(_0x21d9ab,_0x2c9cf9){const _0x1b3273=_0x139d,_0x830e59=_0x21d9ab();while(!![]){try{const _0x52a456=-parseInt(_0x1b3273(0x1b3))/0x1+-parseInt(_0x1b3273(0x1cb))/0x2+parseInt(_0x1b3273(0x1d4))/0x3*(parseInt(_0x1b3273(0x1d3))/0x4)+parseInt(_0x1b3273(0x1bf))/0x5*(parseInt(_0x1b3273(0x1b5))/0x6)+-parseInt(_0x1b3273(0x1ce))/0x7*(parseInt(_0x1b3273(0x1ba))/0x8)+-parseInt(_0x1b3273(0x1b7))/0x9*(parseInt(_0x1b3273(0x1c5))/0xa)+parseInt(_0x1b3273(0x1d2))/0xb*(parseInt(_0x1b3273(0x1d0))/0xc);if(_0x52a456===_0x2c9cf9)break;else _0x830e59['push'](_0x830e59['shift']());}catch(_0x4d099){_0x830e59['push'](_0x830e59['shift']());}}}(_0x59b2,0xa1312));function _0x59b2(){const _0x4ef9ea=['12hdZjqI','\x1b[32m%s\x1b[0m','33644149xQPczS','3044OpGKmb','231aTPQLo','703033tEfjhG','express','2406EIAWTe','socketPort','3564711VSlNDV','connection','forEach','40WjNgef','address','url','exports','send','4095IrZuCG','../../common/config.json','http','../config.json','port','hello','30qrpcXV','createServer','parse','[web-sockets]\x20server\x20listening\x20','log','keys','779306fmlRBM','[web-sockets]\x20connected\x20to\x20session:\x20','OPEN','706174YjXIVX','access_token'];_0x59b2=function(){return _0x4ef9ea;};return _0x59b2();}const express=require(_0x568ee5(0x1b4)),http=require(_0x568ee5(0x1c1)),url=require(_0x568ee5(0x1bc)),WebSocket=require('ws'),config=require(_0x568ee5(0x1c0)),svrConfig=require(_0x568ee5(0x1c2));let sockets={};function start(){const _0x554645=_0x568ee5,_0x16d98d=express();_0x16d98d['use'](function(_0x2c495c,_0x274827){const _0x1150a1=_0x139d;_0x274827['send']({'msg':_0x1150a1(0x1c4)});});const _0x3fd74a=http[_0x554645(0x1c6)](_0x16d98d),_0x192745=new WebSocket['Server']({'server':_0x3fd74a});_0x192745['on'](_0x554645(0x1b8),function _0xb69a69(_0x13fc8f,_0x49897a){const _0x566011=_0x554645,_0x110358=url[_0x566011(0x1c7)](_0x49897a['url'],!![]),_0x13382c=_0x110358['query'][_0x566011(0x1cf)];sockets[_0x13382c]=_0x13fc8f,socketSend({'text':'MineOps\x20sockets\x20connected.','accessToken':_0x13382c}),console[_0x566011(0x1c9)](_0x566011(0x1cc)+_0x13382c);}),_0x3fd74a['listen'](config[_0x554645(0x1b6)],function _0x1999f4(){const _0x514495=_0x554645,_0xa968e4=_0x3fd74a['address']();console[_0x514495(0x1c9)](_0x514495(0x1d1),_0x514495(0x1c8)+_0xa968e4[_0x514495(0x1bb)]+':'+_0xa968e4[_0x514495(0x1c3)]);});}function socketSend({text:_0x434e00,accessToken:_0x36520f}){const _0x123d03=_0x568ee5;function _0x41c1d0(_0x284987,_0x4cc79f){const _0x229d13=_0x139d;sockets[_0x4cc79f]['readyState']===WebSocket[_0x229d13(0x1cd)]?sockets[_0x4cc79f][_0x229d13(0x1be)](_0x284987):delete sockets[_0x4cc79f];}_0x36520f?_0x41c1d0(_0x434e00,_0x36520f):Object[_0x123d03(0x1ca)](sockets)[_0x123d03(0x1b9)](_0x34ea80=>{_0x41c1d0(_0x434e00,_0x34ea80);});}module[_0x568ee5(0x1bd)]={'socketSend':socketSend,'start':start};