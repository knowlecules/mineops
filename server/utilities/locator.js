/* Copyright (C) 9208-9721 Quebec, Inc - All Rights Reserved
* Unauthorized copying of this file, via any medium is strictly prohibited
* Proprietary and confidential
* Written by Jason Rudland <jason.g.rudland@gmail.com>, September 2022
*/'use strict';const _0x1008a3=_0x2d27;(function(_0x31d009,_0x437763){const _0x201ebd=_0x2d27,_0x188916=_0x31d009();while(!![]){try{const _0x2f3a5b=parseInt(_0x201ebd(0x20f))/0x1+-parseInt(_0x201ebd(0x1ff))/0x2*(parseInt(_0x201ebd(0x203))/0x3)+parseInt(_0x201ebd(0x1f8))/0x4+parseInt(_0x201ebd(0x202))/0x5+parseInt(_0x201ebd(0x20b))/0x6*(parseInt(_0x201ebd(0x1ed))/0x7)+parseInt(_0x201ebd(0x1e1))/0x8*(-parseInt(_0x201ebd(0x201))/0x9)+-parseInt(_0x201ebd(0x1eb))/0xa;if(_0x2f3a5b===_0x437763)break;else _0x188916['push'](_0x188916['shift']());}catch(_0x196cfb){_0x188916['push'](_0x188916['shift']());}}}(_0x5b30,0x25d4b));function _0x5b30(){const _0x1ae684=['639528NPrzby','Innosilicon','Whatsminer','exit','write','0.0.0','close','98066isdsgV','Antminer','9MyEqcR','200075dHKyMw','6dryamE','\x20seconds\x20and\x20to\x20clear?\x20','\x20from\x20','forEach','replace','string_decoder','error','.\x20debounceTime:\x20','306486ONwwSw','udp4','address','Locator\x20server\x20error:\x0a','68991TqeksJ','[locator]\x20Locator\x20service\x20configured\x20to\x20debounce\x20within\x20','exports','[locator]\x20service\x20unavailable.\x20Exits\x20when\x20network\x20scan\x20is\x20enabled.','./provision-miner','then','\x1b[31m%s\x1b[0m','dgram','1007672bMVefD','\x1b[32m%s\x1b[0m','Locator\x20server\x20debounced:\x20','./net-interfaces','now','./ws-server','stack','[locator]\x20Network\x20interface\x20not\x20found.\x20Verify\x20the\x20dhcpSettings\x20in\x20the\x20dataCenterSettings.\x20The\x20server\x20ip\x20must\x20fall\x20within\x20the\x20dhcp\x20range!','broadcast','Locator\x20server\x20ignoring\x20IP\x20not\x20in\x20dhcp\x20settings\x20range:\x20\x20','942320HOnsUA','log','28KPoZhg','utf8','\x20having\x20MAC:\x20','listening','match','test','brand','port','createSocket','[locator]\x20UDP\x20server\x20listening\x20','./arpscan'];_0x5b30=function(){return _0x1ae684;};return _0x5b30();}const dgram=require(_0x1008a3(0x216)),{StringDecoder}=require(_0x1008a3(0x208)),{getLocalInterface}=require(_0x1008a3(0x1e4)),{provisionMiner}=require(_0x1008a3(0x213)),{socketSend}=require(_0x1008a3(0x1e6)),{ipInSubnet}=require(_0x1008a3(0x1f7)),locatorPorts=[0x379b,0x22b8];let debounceTime=0xf*0x3e8,priorLocate={},server=null;function configPriorLocate(_0x3dce01,_0x2665f3){const _0x2f0e96=_0x1008a3;debounceTime=_0x3dce01*0x3e8,console['log'](_0x2f0e96(0x1e2),_0x2f0e96(0x210)+_0x3dce01+_0x2f0e96(0x204)+_0x2665f3),_0x2665f3&&(priorLocate={});}function _0x2d27(_0x1f9fb3,_0x5c2de8){const _0x5b30cb=_0x5b30();return _0x2d27=function(_0x2d270a,_0x5e5740){_0x2d270a=_0x2d270a-0x1e1;let _0x451d78=_0x5b30cb[_0x2d270a];return _0x451d78;},_0x2d27(_0x1f9fb3,_0x5c2de8);}let isIpInSubnet=_0x11116f=>/(\d+\.){3}\d+/[_0x1008a3(0x1f2)](_0x11116f);function createIpInSubnetHandler(_0x472c5d){const {range:_0x254e6f,netmask:_0x14532d,router:_0x5d2001,broadcast:_0x17bd7c}=_0x472c5d;isIpInSubnet=ipInSubnet(_0x254e6f,_0x14532d,_0x5d2001,_0x17bd7c);}function start(_0x400af8,_0x5f1e1b){const _0x36ff6a=_0x1008a3;let _0xc42bb0=_0x400af8['router'][0x0];_0xc42bb0=/^10\./['test'](_0xc42bb0)?_0xc42bb0['replace'](/\d+\.\d+\.\d+$/,_0x36ff6a(0x1fd)):_0xc42bb0[_0x36ff6a(0x207)](/\d+\.\d+$/,'0.0');const _0x139cbc=getLocalInterface(_0xc42bb0,_0x400af8[_0x36ff6a(0x1e9)]);!_0x139cbc&&(console[_0x36ff6a(0x1ec)]('\x1b[31m%s\x1b[0m',_0x36ff6a(0x1e8),_0x400af8),console[_0x36ff6a(0x1ec)](_0x36ff6a(0x215),_0x36ff6a(0x212)),_0x5f1e1b&&process[_0x36ff6a(0x1fb)](0x0));createIpInSubnetHandler(_0x400af8);if(!_0x139cbc)return;const _0x1fa7f5=new StringDecoder(_0x36ff6a(0x1ee));locatorPorts[_0x36ff6a(0x206)](_0x2c7298);function _0x2c7298(_0x34dcb0){const _0x16bca8=_0x36ff6a,_0x179706=dgram[_0x16bca8(0x1f5)](_0x16bca8(0x20c));_0x179706['on'](_0x16bca8(0x209),_0x338165=>{const _0x3515d1=_0x16bca8;console[_0x3515d1(0x1ec)](_0x3515d1(0x20e)+_0x338165[_0x3515d1(0x1e7)]),_0x179706[_0x3515d1(0x1fe)]();}),_0x179706['on']('message',(_0x25c240,_0x17dfe5)=>{const _0x39a27f=_0x16bca8,_0x260507=_0x1fa7f5[_0x39a27f(0x1fc)](_0x25c240),_0x491c46=_0x17dfe5[_0x39a27f(0x20d)],_0x28cf2b=(_0x260507[_0x39a27f(0x1f1)](/\b((?:[0-9a-f]{2}[:-]){5}(?:[0-9a-f]{2}))(?:\b|$)/i)||[])[0x1],_0x1ce22d=_0x28cf2b||_0x491c46,_0x30d58c=priorLocate[_0x1ce22d];if(!_0x30d58c||_0x30d58c<Date[_0x39a27f(0x1e5)]()-debounceTime){priorLocate[_0x1ce22d]=Date[_0x39a27f(0x1e5)]();const _0x7347b8='Locator\x20server\x20received:\x20'+_0x260507+'\x20from\x20'+_0x491c46+':'+_0x17dfe5['port']+_0x39a27f(0x1ef)+_0x28cf2b+'.';console[_0x39a27f(0x1ec)](_0x7347b8),socketSend({'text':_0x7347b8});let _0x252185={'brand':_0x39a27f(0x200)};if(/MAC:/[_0x39a27f(0x1f2)](_0x260507))_0x252185[_0x39a27f(0x1f3)]=_0x39a27f(0x1fa);else _0x17dfe5[_0x39a27f(0x1f4)]!==0x379c&&(_0x252185[_0x39a27f(0x1f3)]=_0x39a27f(0x1f9));if(isIpInSubnet(_0x491c46))provisionMiner({'ipAddress':_0x491c46,'minerTyped':_0x252185})[_0x39a27f(0x214)](_0x3ea8be=>{const _0x5a2d89=_0x39a27f;console[_0x5a2d89(0x1ec)](_0x3ea8be);});else{const _0x33d99e=_0x39a27f(0x1ea)+_0x491c46;console[_0x39a27f(0x1ec)](_0x33d99e),socketSend({'text':_0x33d99e});}}else{if(isIpInSubnet(_0x491c46)){const _0x1d0c86=_0x39a27f(0x1e3)+_0x260507+_0x39a27f(0x205)+_0x491c46+':'+_0x17dfe5[_0x39a27f(0x1f4)]+_0x39a27f(0x1ef)+_0x28cf2b+_0x39a27f(0x20a)+debounceTime;console['log'](_0x1d0c86);}}}),_0x179706['on'](_0x16bca8(0x1f0),()=>{const _0x52350f=_0x16bca8,_0x376ed3=_0x179706[_0x52350f(0x20d)]();console[_0x52350f(0x1ec)]('\x1b[32m%s\x1b[0m',_0x52350f(0x1f6)+_0x376ed3[_0x52350f(0x20d)]+':'+_0x376ed3['port']);}),_0x179706['bind'](_0x34dcb0);}}module[_0x1008a3(0x211)]={'start':start,'configPriorLocate':configPriorLocate};