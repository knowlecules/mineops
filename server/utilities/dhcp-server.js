/* Copyright (C) 9208-9721 Quebec, Inc - All Rights Reserved
* Unauthorized copying of this file, via any medium is strictly prohibited
* Proprietary and confidential
* Written by Jason Rudland <jason.g.rudland@gmail.com>, September 2022
*/'use strict';const _0x3377a4=_0x1d33;(function(_0x2713f8,_0x31775e){const _0x11241b=_0x1d33,_0x3900cb=_0x2713f8();while(!![]){try{const _0x1751c1=parseInt(_0x11241b(0x186))/0x1*(-parseInt(_0x11241b(0x19d))/0x2)+parseInt(_0x11241b(0x19a))/0x3*(parseInt(_0x11241b(0x18f))/0x4)+-parseInt(_0x11241b(0x192))/0x5*(-parseInt(_0x11241b(0x1a1))/0x6)+-parseInt(_0x11241b(0x183))/0x7*(parseInt(_0x11241b(0x195))/0x8)+-parseInt(_0x11241b(0x194))/0x9+parseInt(_0x11241b(0x199))/0xa*(parseInt(_0x11241b(0x1a0))/0xb)+-parseInt(_0x11241b(0x188))/0xc;if(_0x1751c1===_0x31775e)break;else _0x3900cb['push'](_0x3900cb['shift']());}catch(_0x1e0ff1){_0x3900cb['push'](_0x3900cb['shift']());}}}(_0x1f92,0xc2389));function _0x1d33(_0x47dd7c,_0x4fd103){const _0x1f92d7=_0x1f92();return _0x1d33=function(_0x1d3331,_0x3bd422){_0x1d3331=_0x1d3331-0x183;let _0x5e9909=_0x1f92d7[_0x1d3331];return _0x5e9909;},_0x1d33(_0x47dd7c,_0x4fd103);}const dhcpd=require(_0x3377a4(0x185)),iprange=require(_0x3377a4(0x19c)),request=require(_0x3377a4(0x187)),iface=require('./net-interfaces');let server=null,ips={};function start(_0x29e5ca,_0x53a61a){const _0x21131d=_0x3377a4;if(!_0x53a61a)return console[_0x21131d(0x19e)](_0x21131d(0x19b),_0x21131d(0x18e));const _0x1c6798=iface['getLocalInterface'](_0x29e5ca['range'][0x0],_0x29e5ca[_0x21131d(0x18a)][0x1]);if(!_0x1c6798){console['log']('\x1b[31m%s\x1b[0m','[dhcpd]\x20Network\x20interface\x20not\x20found.\x20Verify\x20the\x20dhcpSettings\x20in\x20the\x20dataCenterSettings.\x20The\x20server\x20ip\x20must\x20fall\x20within\x20the\x20dhcp\x20range!',_0x29e5ca),console[_0x21131d(0x19e)](_0x21131d(0x19b),'[dhcpd]\x20service\x20disabled!');return;}return _0x29e5ca[_0x21131d(0x18b)]=_0x1c6798[_0x21131d(0x1a2)],_0x29e5ca['router']=_0x29e5ca[_0x21131d(0x193)]||_0x1c6798['address']['replace'](/\.\d+$/,'.1'),_0x29e5ca[_0x21131d(0x19f)]=_0x29e5ca['broadcast']||_0x29e5ca['range'][0x1]['replace'](/\.\d+$/,_0x21131d(0x189)),server=dhcpd['createServer'](_0x29e5ca),server['on']('message',function(_0x3b102f){}),server['on'](_0x21131d(0x184),function(_0x5a230a){const _0x594e59=_0x21131d;console[_0x594e59(0x19e)](_0x594e59(0x190)),console[_0x594e59(0x19e)](_0x5a230a);}),server['on'](_0x21131d(0x18c),function(_0x56b7f9,_0x5bb5a0){console['log'](_0x56b7f9,_0x5bb5a0);}),server['on'](_0x21131d(0x196),function(_0x467034){const _0x59d6e3=_0x21131d;var _0x56f9a6=_0x467034['address']();console[_0x59d6e3(0x19e)](_0x59d6e3(0x191),_0x59d6e3(0x18d)+_0x56f9a6[_0x59d6e3(0x1a2)]+':'+_0x56f9a6[_0x59d6e3(0x197)]);}),server['on'](_0x21131d(0x198),function(){}),server['listen'](),process['on']('SIGINT',()=>{const _0x834a54=_0x21131d;server[_0x834a54(0x198)]();}),server;}function upsertLease(_0x2a4eac,_0x4c229d){if(!server)return;server['allocateIP']({'ipAddress':_0x4c229d,'mac':_0x2a4eac});}module['exports']={'start':start,'upsertLease':upsertLease};function _0x1f92(){const _0x1beea2=['BOUND:','\x1b[32m%s\x1b[0m','635RAbwQR','router','616095igRDmu','16aWjoLG','listening','port','close','60cZvdqD','570jhlgTX','\x1b[31m%s\x1b[0m','iprange','2wFetjr','log','broadcast','2404677PpXkzD','65274LuJPSL','address','2147999fWwzJZ','bound','dhcp','473165HFcZmr','request','9485784ifOwEl','.255','range','server','error','[dhcpd]\x20UDP\x20server\x20listening\x20to:\x20','[dhcp]\x20service\x20disabled!','1012sflYkU'];_0x1f92=function(){return _0x1beea2;};return _0x1f92();}