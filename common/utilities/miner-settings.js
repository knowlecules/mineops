/* Copyright (C) 9208-9721 Quebec, Inc - All Rights Reserved
* Unauthorized copying of this file, via any medium is strictly prohibited
* Proprietary and confidential
* Written by Jason Rudland <jason.g.rudland@gmail.com>, September 2022
*/'use strict';const _0x1d0a09=_0x57f1;(function(_0x468c0e,_0x418a3f){const _0x2660cf=_0x57f1,_0x561f68=_0x468c0e();while(!![]){try{const _0x5296c5=parseInt(_0x2660cf(0x2dc))/0x1*(parseInt(_0x2660cf(0x2c1))/0x2)+parseInt(_0x2660cf(0x31c))/0x3+parseInt(_0x2660cf(0x2d2))/0x4+-parseInt(_0x2660cf(0x1d1))/0x5*(parseInt(_0x2660cf(0x28c))/0x6)+parseInt(_0x2660cf(0x2f9))/0x7+parseInt(_0x2660cf(0x2c2))/0x8*(-parseInt(_0x2660cf(0x1f1))/0x9)+-parseInt(_0x2660cf(0x1b7))/0xa;if(_0x5296c5===_0x418a3f)break;else _0x561f68['push'](_0x561f68['shift']());}catch(_0x367d9){_0x561f68['push'](_0x561f68['shift']());}}}(_0x2f20,0x9247f));const loopback=require(_0x1d0a09(0x2b3)),{sendCommand,getVersionInfo}=require(_0x1d0a09(0x264)),{isGeneratedMacAddress,ipToMacAddress}=require(_0x1d0a09(0x211)),{getJSON,getHTML,filePost,formPost,postJSON}=require(_0x1d0a09(0x1fa)),config=require('../config'),_=require('lodash'),{minerTypeMap,minerApis}=config;for(let minerApi in minerApis){minerApis[minerApi[_0x1d0a09(0x217)]()]=minerApis[minerApi];}const {getTokenValueMapper,replaceTokensWithValues}=require(_0x1d0a09(0x200)),fs=require('fs'),path=require(_0x1d0a09(0x2ec)),SSH=require(_0x1d0a09(0x1b3)),{inspect,promisify}=require(_0x1d0a09(0x1d8)),writeFile=promisify(fs[_0x1d0a09(0x1fc)]),portScanner=require(_0x1d0a09(0x21a)),{api}=require(_0x1d0a09(0x1f0)),SSH_PORT_STATE=global[_0x1d0a09(0x2f3)],softwareVersions=global[_0x1d0a09(0x1a7)],MAX_POOLS=0x3,CONSUMPTION_DEFAULT=0x8ae,CONFIGURE_MODE_PROVISION=0x2;let minerVersionsLookup={},uniqWorker={'names':{},'addrs':{},'highestIndex':0x1};const reKnownFirmwareUpdateErrors=/(Cannot\s+Find\s+Signature|Incorrect\s+firmware|Cannot\s+Downgrade|Installer\s+Not\s+Sign(a?tur)ed?)/i;init();function init(){generateMinerVersionLookup();}const average=_0x4fd46d=>(_0x4fd46d?.[_0x1d0a09(0x306)]?_0x4fd46d:[0x0])[_0x1d0a09(0x243)]((_0x1877fa=0x0,_0x465f4a=0x0)=>parseFloat(_0x465f4a)+parseFloat(_0x1877fa))/(_0x4fd46d?.[_0x1d0a09(0x306)]||0x1);function escapeRegex(_0x11c505){const _0xf620a4=_0x1d0a09;return _0x11c505[_0xf620a4(0x2df)](/[.*+?^${}()|[\]\\]/g,_0xf620a4(0x1d3));}function generateMinerVersionLookup(){const _0x4f1ce0=_0x1d0a09;if(Object[_0x4f1ce0(0x1cd)](minerVersionsLookup)['length'])return;Object[_0x4f1ce0(0x1cd)](minerTypeMap)[_0x4f1ce0(0x29b)](_0x19b013=>{const _0x4e3d35=_0x4f1ce0,{firmwareLookup:_0x28cc1c,brand:_0x148915,apiVersion:_0x1320e3,modelType:_0x1e3003}=minerTypeMap[_0x19b013];_0x28cc1c&&_0x28cc1c['keys'][_0x4e3d35(0x29b)](_0x3e4945=>{const _0x51783e=_0x4e3d35;let _0x1d94eb={..._0x28cc1c[_0x51783e(0x328)]};_0x1d94eb[_0x51783e(0x2fe)]=_0x1e3003||_0x19b013,_0x1d94eb[_0x51783e(0x235)]=_0x19b013,_0x1d94eb[_0x51783e(0x22c)]=_0x148915,_0x1d94eb[_0x51783e(0x262)]=_0x1320e3||_0x148915,minerVersionsLookup[_0x3e4945]=_0x1d94eb,minerVersionsLookup[_0x3e4945+_0x19b013]=_0x1d94eb;});});}function buildTemplatedRequestBody(_0x4ed20e=[],_0x22fc4e=[],_0x1ea296,_0x6c4aef,_0xdf739c=_0x1d0a09(0x1c2)){const _0x3b7111=_0x1d0a09,_0x487b57=_0x1ea296[_0x3b7111(0x236)][_0x3b7111(0x19f)](/([^\/]+)$/)[0x1]+_0x3b7111(0x2b0),_0xcd75ac=minerApis[(_0xdf739c||'')[_0x3b7111(0x217)]()]['qualifier'],_0x459cfc=(_0x6c4aef[_0x3b7111(0x286)]||'')+(_0xcd75ac||'')+_0x487b57,_0x3efde9=getTemplateLiteral(_0x459cfc,_0x487b57),_0x4ab0aa=new Function(..._0x4ed20e,_0x3b7111(0x25a)+_0x3efde9+'`'),_0x60964b=_0x4ab0aa(..._0x22fc4e),_0x215691=_0x60964b[_0x3b7111(0x2df)](/\n+/g,'');return _0x215691;}function buildSetMinerSettingsRequestBody({pools:pools=null,minerConfigOptions:minerConfigOptions={},html:html='',uri:_0x56a82a,minerTyped:_0x3adf80,apiVersion:_0x41fc99}={}){const _0x430ecb=_0x1d0a09;if(!pools?.[0x0])throw new Error('Specify\x20at\x20least\x20one\x20pool.');pools[_0x430ecb(0x275)]({},{});const _0x283b26=minerConfigOptions;return buildTemplatedRequestBody([_0x430ecb(0x2ed),'config',_0x430ecb(0x1d2)],[pools,_0x283b26,html],_0x56a82a,_0x3adf80,_0x41fc99);}function buildSetNetworkSettingsRequestBody({network:network=null,minerInfo:minerInfo={},uri:_0x53e1a6,minerTyped:_0x312bb4,apiVersion:_0x4046f2}={}){const _0x267d25=_0x1d0a09;return buildTemplatedRequestBody([_0x267d25(0x2b6),_0x267d25(0x2a9)],[network,minerInfo],_0x53e1a6,_0x312bb4,_0x4046f2);}function buildNetworkDiagnosticRequestBody({diagnostic:diagnostic={},uri:_0x2a3578,minerTyped:_0x52e5fd,apiVersion:_0x3a0390}={}){const _0x4f1556=_0x1d0a09;return buildTemplatedRequestBody([_0x4f1556(0x225)],[diagnostic],_0x2a3578,_0x52e5fd,_0x3a0390);}function buildStateSyncRequestBody({html:_0xb617b5,uri:_0xbf56ef,minerTyped:_0x3f7922,apiVersion:_0x486cc1}={}){const _0x5a0c62=_0x1d0a09;return buildTemplatedRequestBody([_0x5a0c62(0x1d2)],[_0xb617b5],_0xbf56ef,_0x3f7922,_0x486cc1);}function _0x2f20(){const _0x2dd748=['stratum','chain_acs','8356782WKHtnr','{\x22where\x22:\x20{},\x20\x22aggregate\x22:[\x0a\x20\x20\x20\x20{\x20\x22$unwind\x22:\x20\x22$trends.priorHours\x22},\x0a\x20\x20\x20\x20{\x20\x22$group\x22:\x20{\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x22_id\x22:\x20{\x22$concat\x22\x20:\x20[{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22$dateToString\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22format\x22:\x20\x22%Y-%m-%dT%H\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22date\x22:\x20{\x22$add\x22:\x20[\x22\x22,\x20\x22$trends.priorHours.x\x22]}\x20}},\x22_\x22]},\x0a\x20\x20\x20\x20\x20\x20\x22ts\x22:\x20{\x22$first\x22:\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x22$dateToString\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22format\x22:\x20\x22%Y-%m-%dT%H\x22,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22date\x22:\x20{\x22$add\x22:\x20[\x22\x22,\x20\x22$trends.priorHours.x\x22]}}}},\x0a\x20\x20\x20\x20\x20\x20\x22hashRateAll\x22:\x20{\x20\x22$sum\x22:\x20\x22$trends.priorHours.hashRate\x22},\x0a\x20\x20\x20\x20\x20\x20\x22temperatureAvg\x22:\x20{\x20\x22$avg\x22:\x20\x22$trends.priorHours.tempAvg\x22},\x0a\x20\x20\x20\x20\x20\x20\x22consumptionAll\x22:\x20{\x20\x22$sum\x22:\x20\x22$trends.priorHours.power\x22},\x0a\x20\x20\x20\x20\x20\x20\x22accountName\x22\x20:\x20{\x22$first\x22:\x20\x22$accountName\x22},\x0a\x20\x20\x20\x20\x20\x20\x22minerType\x22\x20:\x20{\x22$first\x22:\x20\x22$minerType\x22},\x0a\x20\x20\x20\x20\x20\x20\x22count\x22:\x20{\x20\x22$sum\x22:\x201\x20}\x0a\x20\x20\x20\x20}},\x0a\x20\x20\x20\x20{\x20\x22$sort\x22:\x20{\x20\x22_id\x22:\x201\x20}\x20}\x20','SSH\x20enabled\x20for\x20','group','Whatsminer','modelType','setNetworkSettings','username','Miner\x20type\x20is\x20a\x20required\x20property\x20for\x20getMinerReboot\x20method.','bmminer_version','text/plain','Content-Disposition:\x20form-data;\x20name=\x22datafile\x22;\x20filename=\x22','highestIndex','length','map','getMinerSystemInfo','Miner\x20system\x20info\x20request\x20','parseMinerSystemInfo.\x20Unknown\x20apiVersion:','indexOf','Miner\x20apiVersion\x20cannot\x20be\x20null.','join','Discarded','commands','Content-Type:application/','$first','hardware','Miner\x20create\x20failed\x20for\x20','fan6','User','Miner\x20type\x20is\x20a\x20required\x20property\x20for\x20getMinerReset\x20method.','getworks','DEAD','Not\x20possible\x20using\x20pool\x20data\x20in\x20minerInfo\x20nor\x20cgminer\x20pools\x20command!','hashRateAvg','where','2906568poAMNv','\x5cb(','dev_temp','POOL','Parsing\x20miner\x20status\x20summary','stringify','Bearer\x20','Miner\x20pools\x20by\x20API\x20','Template\x20not\x20found:\x20','minerInfo\x20is\x20not\x20available!\x20Run\x20discovery\x20routine.','$minerType','cardIDs','versionData','./files/templates/','ant_hwv','chain_acn','voltage','pool','parseMinerStatus.\x20Unknown\x20apiVersion:','STATS','poolsReset','sshPassword','Antminer_antpool','values','.\x20MinerTyped:','switchpool','GHS\x205s','stats','getMinerSettings','%Y-%m-%dT%H:00','Content-Type','body','preAuth','find','tempNamesRE','getRemotePools\x20requires\x20apiVersion.\x20Version\x20command\x20probably\x20failed.\x20Try\x20&brand=???\x20in\x20the\x20querystring','Rejected','getRemotesPools\x20failed!!!','chain_vol','match','API\x20version\x20lookup\x20failed!\x20Model\x20type\x20has\x20no\x20configuration:','hwtype','Utility','fan5','readFileSync','ethaddr','getMinerStatus\x20requires\x20apiVersion.\x20Version\x20command\x20probably\x20failed.\x20Try\x20&brand=???\x20in\x20the\x20querystring','softwareVersions','Firmware\x20update\x20unlock\x20failed.\x20Attempting\x20to\x20disable\x20signature\x20check\x20for\x20','Parsing\x20miner\x20status\x20result','Reboot\x20','Authorization','response','knowlecules','$1,','[miner-settings]\x20Unable\x20to\x20update\x20pools\x20for,\x20','Miner\x20reset:','diagnosticResponse','setMinerSettings','simple-ssh','elapsed','config','StuMiner','16944530BHGCYK','=(\x5cd+),','Miner\x20type\x20is\x20a\x20required\x20property\x20for\x20getMinerKill\x20method.','estimate','sed\x20-ir\x20\x27s/!\x5cs-f\x5csrunme.sh.sig/1\x20-eq\x200/g;\x20s/\x5c$res\x5cs-eq\x5cs1/1\x20-eq\x200/g\x27\x20/www/pages/cgi-bin/','_id','AvalonMiner11','jwt','Not\x20assigned','assign','Green','Antminer','NOT','zzz_AvalonMiner','ghs5s','log','devdetails','reTests','bmminer\x20','rebootMiner','firmwareFolderPath','upsert','keys','system_filesystem_version','ipAddress','Whatsminer\x20parsing\x20miner\x20status\x20result','964795jYTiar','html','\x5c$&','$concat','keyBy','model','%Y-%m-%dT%H:%M','util','platform_v','.\x20cgminer\x20\x22pools\x22\x20command\x20not\x20supported\x20nor\x20URI\x20in\x20config.','warn','matches','uniq','minerTypeMap','summary','\x5cW(\x5cw+)','fan1','upgrade_clear.cgi','from','system_logic_version','Unable\x20to\x20update\x20minerInfo','accountName','freq','Device\x20Elapsed','chain','history','start','ipaddress','fan8','Purple','concat','slack','22761WBDqVn','.\x20Will\x20attempt\x20to\x20find\x20alternate:\x20','Firmware\x20unlock\x20re-attempting\x20to\x20disable\x20signature\x20check\x20for\x20','During\x20edit,\x20cannot\x20extract\x20placement[','position',')\x5cb','Not\x20reading\x20logs!\x20minerInfo\x20is\x20not\x20available.','mac','remotePools','./fetch','Antminer_updater','writeFile','Whatsminer_CG','minerSystemInfo','cgminer\x20','./templating','dev_freq','[createRequestOptions]\x20Login\x20attempt\x20failed\x20\x20for,\x20','$accountName','devs','then','Unparseable\x20card\x20data','RPC\x20\x22pools\x22\x20command\x20failed\x20for\x20','binary','No\x20pool\x20templates\x20found\x20for\x20algorithm:','end','restart','Firmware\x20update\x20failed\x20for\x20','StrongU\x20parsing\x20miner\x20status\x20result','isArray','minertype','insecure','../../server/utilities/arpscan','Unknown\x20model','deleteById','updateAll','CLOSED','user','toLowerCase','UNSAFE_EDITS','MHS\x20av','portscanner','ghsav','addpool','hardwareErrors','routes','remotesPools','Update\x20miner\x20settings\x20','reMatches','multipart/form-data;\x20boundary=',',\x20\x20','OPEN','diagnostic','firmwareContentType','wallet','.syncId','Innosilicon','00000','Antminer_X19','brand','bitmain-freq','uri','http','GET','build_date','\x20for\x20','sshUser','FAILED','minerType','url','$add','test','DEVS','restartPool','rm\x20-rf\x20/tmp/mem;','updater','deployments','date','temp2','volts','=(\x5cd+)[,\x5c.]','exec','reduce','parse','AvalonMiner','ZigMiner','\x22],\x22netmask\x22:\x22255.255.242.0\x22,\x22scanThrottleCount\x22:20}&mode=discoverhttp','debug','minerInfo\x20is\x20not\x20available!\x20Run\x20discovery\x20routine.\x20\x0a\x20/scan?settings={\x22range\x22:[\x22','Unknown','findOne','Unable\x20to\x20remove\x20firware\x20upload\x20lock:','\x20persisting\x20to\x20',']\x20responded\x20with:','fan3','Kernel\x20logs\x20unavailable.','type','=([^,]+),','\x22,\x22','\x20command\x20failed\x20for\x20','getNetworkDiagnostics','Kernel\x20logs\x20requests\x20',']\x20apiversion\x20\x22','$dateToString','add','return\x20`','resetMiner','$group','info','cardChipCount','trim','=0,','method','apiVersion','headers','../../server/utilities/cgminer-api','.\x20apiVersion:','macAddress','remove','%Y-%m-%dT%H:%M:%S','groupBy','statusCode','getMinerStatus','MinerInfo\x20lookup','stack','digestOptions','password','message','Creating\x20miner\x20','condition','workerName','Miner\x20IP\x20address\x20cannot\x20be\x20null.','push','freqNamesRE','foundblocks','deployedOn','temp_out_chip_','placement','Removing\x20signature\x20check\x20failed\x20in\x20','Updating\x20deployment\x20info\x20for\x20miner\x20\x20','application/x-www-form-urlencoded','Signature\x20check\x20removed\x20in\x20','Kernel\x20log\x20generic\x20errors','substr','daily','Update\x20enable\x20SSH\x20for\x20updater\x20','[getMinerSystemInfo]\x20ignoring\x20cgminer\x20version\x20command\x20error\x20for:\x20','createRequestOptions','filter','firmwareUpdatePrefix','temp','g19','HARDWARE','split','Cookie','18RszroJ','Kill\x20','Trend\x20clause','initial','ipv4','Unable\x20to\x20set\x20pools.\x20Not\x20possible\x20without\x20minerInfo!\x20Run\x20discover\x20first.\x20\x0a\x20MinerInfo\x20is\x20not\x20available!\x20Run\x20discovery\x20routine.\x20\x0a\x20/scan?settings={\x22range\x22:[\x22','exports','Killed\x20firmware\x20to\x20allow\x20upgrade\x20','activePools','http://','$trends.','getModel','trace','antpool','POOLS','forEach','API\x20version\x20lookup\x20failed!\x20Key\x20not\x20found:','location','name','max','getKernelLogs','resolve','fan2','placement.hall\x20DESC','Fan\x20duty','latest','system_kernel_version','chain_consumption','exit\x20on\x20code','minerInfo','checkPortStatus','timeout',']\x20to\x20','\x0a\x20Message:','hourly','Kill\x20firmware\x20failed\x20(trying\x20upgrade\x20anyway)\x20','.txt','aggregate','fan4','loopback','soc','auth','network','Accepted','Dragonmint','Missing\x20configuration\x20data\x20for\x20[','frequency','FsMiner','toString','accepted','form','0.0','priority','2XEplkl','2424SdfUPp','octet-stream','pools_details','Getworks','bitmain-voltage','cgminer_version','Dragonming','parseMinerSettings.\x20Unknown\x20apiVersion:','Miner\x20status\x20requests\x20','hwver','edit','version','logErrors','walletID','Cannot\x20upsert\x20minerInfo:\x20validation\x20issues,','SSH\x20enabling\x20error','3223740wdlVPl','hashRate','powerEfficiency','stratum+tcp://','fine','addrs','Retrieve\x20miner\x20network\x20diagnostics\x20','utf8','://','errno','670167FNuTGu','bind','URL','replace','locationID','minerStatus','format','docType','colorize','random','Post\x20scanning\x20failed:','catch','create','\x22:\x22','versionInfo','NOT\x20PROVIDED!','path','pools','getMinerLogin','fansNamesRE',']\x20responsed\x20with:\x20','Reset\x20','\x5cw*)(?:\x5cW|$)','SSH_PORT_STATE','error','Temperature','minerFirmwareUpdate'];_0x2f20=function(){return _0x2dd748;};return _0x2f20();}function validateMinerUpsert({minerInfo:_0x25dae0}){const _0x2feb15=_0x1d0a09,{workerName:_0x34aa51,macAddress:_0x2fdcf4,ipAddress:_0x306cf2,condition:_0x582247}=_0x25dae0,{pools:pools=[]}=_0x582247,_0x599891=pools[_0x2feb15(0x307)](_0xd9d4ec=>_0xd9d4ec[_0x2feb15(0x216)])['join'](','),_0x3077c6=new RegExp(_0x34aa51,'i');if(!_0x599891||_0x3077c6['test'](_0x599891))return![];return![];}async function trendsAggregate({accountName:_0x49d168,minerType:_0x55229b,period:period=_0x1d0a09(0x2d6),ipAddresses:_0x305d5b,isStacked:_0x4abaa6}){const _0x5aa909=_0x1d0a09,_0x13fbbe=loopback['getModel'](_0x5aa909(0x2a9)),_0x56229d=0x28;function _0x2a0046(_0x270974,_0xa6ddd,_0x148a71){const _0x30eeac=_0x5aa909,_0x346c23=JSON[_0x30eeac(0x244)](_0x50a209[_0x30eeac(0x2df)](/priorHours/ig,_0x270974)),_0x55515c=_0x346c23[_0x30eeac(0x2b1)][0x1][_0x30eeac(0x25c)];return _0x55515c['ts'][_0x30eeac(0x311)][_0x30eeac(0x258)][_0x30eeac(0x2e2)]=_0xa6ddd,_0x55515c['ts'][_0x30eeac(0x311)][_0x30eeac(0x258)][_0x30eeac(0x23e)][_0x30eeac(0x237)][0x0]=new Date(0x0),_0x148a71?_0x55515c[_0x30eeac(0x1bc)][_0x30eeac(0x1d4)]=[_0x30eeac(0x296)+_0x270974+_0x30eeac(0x228),'_']:(_0x55515c[_0x30eeac(0x1bc)]['$concat'][0x0][_0x30eeac(0x258)][_0x30eeac(0x2e2)]=_0xa6ddd,_0x55515c[_0x30eeac(0x1bc)][_0x30eeac(0x1d4)][0x0]['$dateToString'][_0x30eeac(0x23e)]['$add'][0x0]=new Date(0x0)),_0x346c23;}let _0xb94739='';!_0x4abaa6&&(_0xb94739=',\x20{\x20\x22$limit\x22:\x20'+_0x56229d+'\x20}');let _0x50a209=_0x5aa909(0x2fa)+_0xb94739+']}',_0x29dd46;if(/^fine/i[_0x5aa909(0x238)](period))_0x29dd46=_0x2a0046(_0x5aa909(0x2d6),_0x5aa909(0x268),!![]);else{if(/^minut/i['test'](period))_0x29dd46=_0x2a0046('minutes',_0x5aa909(0x1d7),!![]);else{if(/^hour/i[_0x5aa909(0x238)](period))_0x29dd46=_0x2a0046(_0x5aa909(0x2ae),_0x5aa909(0x195));else/^da[iy]/i[_0x5aa909(0x238)](period)&&(_0x29dd46=_0x2a0046(_0x5aa909(0x281),'%Y-%m-%d'));}}let _0x3abc3f;if(_0x305d5b&&_0x305d5b[_0x5aa909(0x306)])_0x3abc3f={'ipAddress':{'inq':_0x305d5b[_0x5aa909(0x28a)](/\s*,\s*/)}};else{if(_0x49d168){_0x3abc3f={'accountName':_0x49d168};if(_0x55229b)_0x3abc3f[_0x5aa909(0x235)]=_0x55229b;else _0x4abaa6&&_0x29dd46[_0x5aa909(0x2b1)][0x1][_0x5aa909(0x25c)][_0x5aa909(0x1bc)][_0x5aa909(0x1d4)][_0x5aa909(0x275)](_0x5aa909(0x326));}else _0x55229b&&(_0x3abc3f={'minerType':_0x55229b},_0x4abaa6&&_0x29dd46[_0x5aa909(0x2b1)][0x1][_0x5aa909(0x25c)][_0x5aa909(0x1bc)][_0x5aa909(0x1d4)][_0x5aa909(0x275)](_0x5aa909(0x203)));}_0x3abc3f&&(_0x29dd46[_0x5aa909(0x31b)]=_0x3abc3f);console[_0x5aa909(0x1c6)](_0x5aa909(0x28e),inspect(_0x29dd46,![],0x5,!![]));const _0x46be0a=await _0x13fbbe[_0x5aa909(0x2b1)](_0x29dd46,{'build':![]});return _0x46be0a;}async function upsertMinerInfo({minerInfo:_0x5aefad,configureMode:configureMode=0x0}){const _0x5d4344=_0x1d0a09,_0x304052=loopback[_0x5d4344(0x297)](_0x5d4344(0x2a9)),_0x572085={'timestamp':_0x5aefad[_0x5d4344(0x278)]?new Date(_0x5aefad[_0x5d4344(0x278)]):new Date(),'accountName':_0x5aefad[_0x5d4344(0x1e6)]},_0x49bf36=validateMinerUpsert({'minerInfo':_0x5aefad});if(_0x49bf36)return console[_0x5d4344(0x1db)](_0x5d4344(0x2d0),_0x49bf36,JSON[_0x5d4344(0x321)](_0x5aefad)['substr'](0x0,0x64)),_0x5aefad;if(!_0x5aefad['deployments'])_0x572085[_0x5d4344(0x1ba)]=!![],_0x5aefad['deployments']={'initial':_0x572085,'latest':_0x572085,'history':[_0x572085]};else{if(_0x5aefad[_0x5d4344(0x23d)][_0x5d4344(0x2a5)]['accountName']!==_0x572085['accountName'])_0x5aefad[_0x5d4344(0x23d)]['latest']=_0x572085,_0x5aefad[_0x5d4344(0x23d)][_0x5d4344(0x1ea)][_0x5d4344(0x275)](_0x572085);else _0x5aefad['deployedOn']&&(_0x5aefad[_0x5d4344(0x23d)][_0x5d4344(0x28f)]=_0x572085,_0x5aefad['deployments'][_0x5d4344(0x2a5)]=_0x572085,_0x5aefad[_0x5d4344(0x23d)]['history'][_0x5d4344(0x275)](_0x572085));}delete _0x5aefad[_0x5d4344(0x278)];const {placement:placement={}}=_0x5aefad;return placement[_0x5d4344(0x1f5)]&&configureMode===CONFIGURE_MODE_PROVISION&&await _0x304052[_0x5d4344(0x214)]({'placement':placement},{'placement':null}),console[_0x5d4344(0x248)]({'logType':_0x5d4344(0x1cc)},_0x5d4344(0x27c)+_0x5aefad[_0x5d4344(0x273)]+',\x20\x20'+_0x5aefad[_0x5d4344(0x1cf)]),_0x5aefad=await _0x304052[_0x5d4344(0x1cc)](_0x5aefad)[_0x5d4344(0x2e7)](_0x3ae436=>{const _0x12f4dd=_0x5d4344;console['error'](_0x12f4dd(0x1e5),_0x5aefad,_0x3ae436);}),_0x5aefad;}function _0x57f1(_0x3f8a0e,_0x23cabb){const _0x2f20b6=_0x2f20();return _0x57f1=function(_0x57f11f,_0x1fa940){_0x57f11f=_0x57f11f-0x193;let _0x3b1b89=_0x2f20b6[_0x57f11f];return _0x3b1b89;},_0x57f1(_0x3f8a0e,_0x23cabb);}async function getMinerLayoutFields(_0x3afd88={}){const _0x360703=_0x1d0a09,_0xba5c29=loopback[_0x360703(0x297)](_0x360703(0x2a9));let _0x5098c7={'fields':{'accountName':!![],'workerName':!![],'workerTypeNumber':!![],'placement':!![],'model':!![],'modelType':!![],'minerType':!![],'runtimeState':!![],'condition':!![],'conditionPrime':!![],'intakeSpeed':!![],'exhaustSpeed':!![],'logStates':!![],'ipAddress':!![],'macAddress':!![],'serialNumber':!![],'psuSerialNumber':!![],'psuModel':!![],'breakerPanelId':!![],'powerBarId':!![],'powerPhase':!![],'transformerLow':!![],'transformerMed':!![],'networkSwitchRef':!![]},'order':[_0x360703(0x2a3),'placement.rack\x20ASC','placement.shelf\x20ASC','placement.position\x20ASC']};_0x5098c7={..._0x5098c7,..._0x3afd88};let _0x216e37=await _0xba5c29[_0x360703(0x199)](_0x5098c7),_0x6eeaac=_[_0x360703(0x269)](_0x216e37,_0x2d02ba=>_0x2d02ba?.[_0x360703(0x27a)]?.['hall']||_0x360703(0x1bf));return _0x6eeaac;}async function updateMinerInfo({record:_0x51ed50,keyField:_0x44a3fa,keyFieldName:_0x2de58e}){const _0xa8f609=_0x1d0a09,_0x2a705d=loopback['getModel'](_0xa8f609(0x2a9)),_0x1e27b8=_0x51ed50[_0x2de58e],_0x21cbf1={'where':{}};let {placement:placement='',minerType:_0x30c3c0,ipAddress:_0x11b9d7,macAddress:_0x11fe08,serialNumber:_0x3c96bd,psuSerialNumber:_0x4612f3,psuModel:_0x20cf9e,networkSwitchRef:_0x1f6160,breakerPanelId:_0x4a65a1,powerBarId:_0x25ded2,powerPhase:_0x28b631,transformerLow:_0x6dee3c,transformerMed:_0x4904b9}=_0x51ed50;!placement&&(placement=JSON[_0xa8f609(0x321)](_0x51ed50)[_0xa8f609(0x19f)](/placement":"?([^,'"]*)"?(,|$)/)[0x1]);if(placement['length']>0x4){const _0x48ef2d=placement['match'](/^(?:(.+)\.)?([^\.]+)\.(\d+)\.(\d+)(\.true|false)?$/);if(!_0x48ef2d&&_0x48ef2d['length'])return console[_0xa8f609(0x1db)](_0xa8f609(0x1f4)+placement+'].\x20Should\x20be\x203\x20or\x204\x20parts\x20delimited\x20by\x20period.\x20eg\x20\x22DataHall_1.Rack3.4.5.\x20Use\x20codes\x20to\x20help\x20rendering.\x20eg\x20\x22DH1.3.4.5'),_0x486d94;const _0x3646cc=parseInt(_0x48ef2d[0x3],0xa),_0x2b45f9=parseInt(_0x48ef2d[0x4],0xa),_0x2dc81a=/^\d+$/[_0xa8f609(0x238)](_0x48ef2d[0x2])?parseInt(_0x48ef2d[0x2],0xa):_0x48ef2d[0x2],_0x26e260=_0x48ef2d[0x5]||![];placement={'hall':_0x48ef2d[0x1]||'','rack':_0x2dc81a,'shelf':_0x3646cc,'position':_0x2b45f9,'upright':_0x26e260};}const _0x53277c={'placement':placement,'minerType':_0x30c3c0,'ipAddress':_0x11b9d7,'macAddress':_0x11fe08,'serialNumber':_0x3c96bd,'psuSerialNumber':_0x4612f3,'psuModel':_0x20cf9e,'networkSwitchRef':_0x1f6160,'breakerPanelId':_0x4a65a1,'powerBarId':_0x25ded2,'powerPhase':_0x28b631,'transformerLow':_0x6dee3c,'transformerMed':_0x4904b9};_0x21cbf1[_0xa8f609(0x31b)][_0x44a3fa]=new RegExp(escapeRegex(_0x1e27b8),'i');let _0x486d94=await _0x2a705d[_0xa8f609(0x24b)](_0x21cbf1);!process['env'][_0xa8f609(0x218)]&&delete _0x53277c[_0x44a3fa];const _0x40626c=validateMinerUpsert({'minerInfo':_0x486d94});if(_0x40626c)return console[_0xa8f609(0x1db)]('Cannot\x20edit\x20minerInfo:\x20validation\x20issues,',_0x40626c,JSON[_0xa8f609(0x321)](_0x486d94)[_0xa8f609(0x280)](0x0,0x64)),_0x486d94;return console['debug']({'logType':_0xa8f609(0x2cc)},'Editing\x20info\x20for\x20miner\x20\x20'+_0x486d94[_0xa8f609(0x273)]+_0xa8f609(0x223)+_0x486d94[_0xa8f609(0x1cf)]),_0x486d94=Object[_0xa8f609(0x1c0)](_0x486d94,_0x53277c),_0x486d94=await _0x2a705d['upsert'](_0x486d94)[_0xa8f609(0x2e7)](_0x261f10=>{console['error']('Unable\x20to\x20edit\x20minerInfo\x20fields',_0x486d94,_0x261f10);}),_0x486d94;}async function createMinerInfo({minerInfo:_0x4c629c,placement:_0x3bb759,minerIndex:_0x236333,accountName:_0x151934,minerTyped:_0x317ffa}){const _0x16a738=_0x1d0a09,_0x3d013e=loopback['getModel'](_0x16a738(0x2a9)),{name:_0xaa9d4a,code:_0x1caf29}=_0x317ffa,{ipAddress:_0x5753d4,workerName:_0x3e18da}=_0x4c629c,_0x50a952={'timestamp':new Date(),'accountName':_0x151934},_0x3835c9={'minerIndex':_0x236333,'code':_0x1caf29,'name':_0xaa9d4a,..._0x4c629c,'placement':_0x3bb759};return _0x151934&&(_0x4c629c[_0x16a738(0x1e6)]=_0x151934),!_0x3835c9[_0x16a738(0x266)]&&(_0x3835c9[_0x16a738(0x266)]=ipToMacAddress(_0x5753d4)),_0x151934&&(_0x3835c9[_0x16a738(0x23d)]={'initial':_0x50a952,'latest':_0x50a952,'history':[_0x50a952]}),console[_0x16a738(0x248)]({'logType':'create'},_0x16a738(0x271)+_0x3e18da+',\x20\x20'+_0x5753d4),_0x3d013e[_0x16a738(0x2e8)]([_0x3835c9])[_0x16a738(0x205)](_0x1b8128=>{return _0x1b8128?_0x1b8128[0x0]:null;})[_0x16a738(0x2e7)](_0x5cacaf=>{const _0x46b14c=_0x16a738;console[_0x46b14c(0x298)](_0x46b14c(0x313)+_0x3e18da+_0x46b14c(0x223)+_0x5753d4);throw _0x5cacaf;});}let reWorker=null;const indexPad=_0x1d0a09(0x22a);function getUniqueWorkerName(_0x30466c,_0x410e84){const _0xf6951b=_0x1d0a09;!reWorker&&(reWorker=new RegExp(_0xf6951b(0x1e0)+_0x410e84[_0xf6951b(0x2e0)]+'(0\x5cd{'+indexPad[_0xf6951b(0x306)]+'})(?:\x5cW|$)','i'));const {workerName:_0x30edbf,macAddress:_0x219aa3}=_0x30466c;let _0x481952=uniqWorker['addrs'][_0x30edbf],_0x3a0f8d=reWorker[_0xf6951b(0x238)](_0x30edbf);return(!_0x3a0f8d||_0x481952!==_0x219aa3)&&(_0x30edbf=(indexPad+ ++uniqWorker[_0xf6951b(0x305)])['slice'](indexPad[_0xf6951b(0x306)])),uniqWorker[_0xf6951b(0x2d7)][_0x30edbf]=_0x219aa3,_0x30edbf;}async function getMinerInfo({macAddress:_0xf34839,accountName:_0x26d130,workerName:_0x5d4a55,ipAddress:_0x4d980c}){const _0x2234c1=_0x1d0a09;let _0x24c3a1;if(_0xf34839)_0x4d980c&&isGeneratedMacAddress(_0xf34839)?_0x24c3a1={'or':[{'ipAddress':_0x4d980c},{'macAddress':_0xf34839}]}:_0x24c3a1={'macAddress':_0xf34839};else{if(_0x4d980c)_0x24c3a1={'ipAddress':_0x4d980c};else{if(_0x26d130&&_0x5d4a55)_0x24c3a1={'accountName':{'like':new RegExp('^'+_0x26d130+'$','i')},'workerName':{'like':new RegExp(_0x5d4a55,'i')}};else return null;}}const _0xff1d3c=loopback[_0x2234c1(0x297)](_0x2234c1(0x2a9));return console['debug'](arguments[0x0],_0x2234c1(0x26c),_0xf34839,_0x26d130,_0x5d4a55,_0x24c3a1),_0xff1d3c[_0x2234c1(0x199)]({'where':_0x24c3a1})[_0x2234c1(0x205)](async _0x3763a3=>{const _0x141151=_0x2234c1;if(_0x3763a3[_0x141151(0x306)]===0x1)return _0x3763a3[0x0];if(_0x3763a3['length']>0x1)return await mergeMinerInfos(_0x3763a3,{'macAddress':_0xf34839,'accountName':_0x26d130,'workerName':_0x5d4a55,'ipAddress':_0x4d980c});if(_0xf34839&&_0x4d980c&&_0x26d130&&_0x5d4a55)return _0x24c3a1={'ipAddress':_0x4d980c,'accountName':{'like':new RegExp('^'+_0x26d130+'$','i')},'workerName':{'like':new RegExp('^'+_0x5d4a55+'$','i')}},_0xff1d3c[_0x141151(0x199)]({'where':_0x24c3a1})[_0x141151(0x205)](async _0x4a9480=>{const _0x34fbfa=_0x141151;if(_0x4a9480[_0x34fbfa(0x306)]>0x1)return await mergeMinerInfos(_0x4a9480,{'accountName':_0x26d130,'workerName':_0x5d4a55,'ipAddress':_0x4d980c});return _0x4a9480[0x0]||null;});});}async function mergeMinerInfos(_0xec515a,{macAddress:_0x2066fb,accountName:_0x2234db,workerName:_0x1f9160,ipAddress:_0x187550}){const _0x222e86=_0x1d0a09,_0x4c7566=loopback[_0x222e86(0x297)]('minerInfo');let _0x10afce,_0x37caa8=[];return _0xec515a['forEach'](_0x33188a=>{const _0x1a0a6c=_0x222e86;!_0x10afce&&_0x2066fb&&_0x2066fb[_0x1a0a6c(0x217)]()==_0x33188a['macAddress'][_0x1a0a6c(0x217)]()?_0x10afce=_0x33188a:_0x37caa8['push'](_0x33188a);}),!_0x10afce&&(_0x10afce=_0x37caa8['shift']()),_0x37caa8['forEach'](_0x386bb2=>{const _0x4d61ff=_0x222e86;_0x4c7566[_0x4d61ff(0x213)](_0x386bb2['id']);}),_0x10afce;}function getApiUrl(_0x139b0f=null,_0x200ad3,_0x41ab2f){const _0x238486=_0x1d0a09;if(_0x139b0f===null)throw new Error(_0x238486(0x274));if(!_0x200ad3)throw new Error(_0x238486(0x30c));const _0x67664a=minerApis[(_0x200ad3||'')['toLowerCase']()];if(!_0x67664a)throw new Error(_0x238486(0x2b9)+_0x139b0f+_0x238486(0x257)+_0x200ad3+'\x22.\x20NB.\x20Is\x20case-sensitive!');var {routes:_0x333978,protocol:protocol=_0x238486(0x22f)}=_0x67664a;if(!_0x333978[_0x41ab2f])return null;var _0x2c23ed={..._0x333978[_0x41ab2f]};if(!_0x2c23ed['url'])return _0x2c23ed;return _0x2c23ed[_0x238486(0x236)]=protocol+_0x238486(0x2da)+_0x139b0f+_0x2c23ed[_0x238486(0x236)],_0x2c23ed;}async function createRequestOptions({uri:_0x282287,minerTyped:_0x57d8ea,apiVersion:_0x6d916f,maxSockets:_0x5254e2,timeout:_0x5bdc86,headers:headers={},body:_0x2989dc,form:_0x569ede,followRedirect:followRedirect=![]}){const _0x295a3d=_0x1d0a09,_0x20c5ca=(_0x6d916f||'')[_0x295a3d(0x217)](),_0x1924d5=minerApis[_0x20c5ca],_0x34ad4e=_0x1924d5[_0x295a3d(0x21e)][_0x295a3d(0x2ee)],{user:_0x46b0ff,password:_0x2a47ff}=_0x1924d5;let _0x1670df={'uri':_0x282287[_0x295a3d(0x236)][_0x295a3d(0x2df)]('<%=randnum%>',Math[_0x295a3d(0x2e5)]()[_0x295a3d(0x2bc)]()[_0x295a3d(0x280)](0x8)),'method':_0x282287[_0x295a3d(0x261)],'rejectUnauthorized':![],'headers':Object[_0x295a3d(0x1cd)](headers)['length']?headers:{..._0x282287['headers']}||{}};if(_0x282287[_0x295a3d(0x210)]||_0x282287[_0x295a3d(0x198)])_0x1670df[_0x295a3d(0x2b5)]={'user':_0x46b0ff,'pass':_0x2a47ff,'sendImmediately':!_0x282287[_0x295a3d(0x198)],'digestOptions':_0x282287[_0x295a3d(0x26e)]||{'basic':![]}},headers&&(_0x1670df['headers']=headers);else{if(_0x34ad4e){let _0x72c3de='';if(!(_0x1670df[_0x295a3d(0x263)][_0x295a3d(0x28b)]||_0x1670df[_0x295a3d(0x263)][_0x295a3d(0x1ab)])){const _0x35d127={'form':_0x34ad4e[_0x295a3d(0x2be)],'method':_0x34ad4e['method'],'headers':_0x34ad4e[_0x295a3d(0x263)],'rejectUnauthorized':![],'uri':_0x282287[_0x295a3d(0x236)][_0x295a3d(0x19f)](/(https?:\/\/[^\/]+)\//)[0x1]+_0x34ad4e[_0x295a3d(0x236)]},{headers:_0x59bdd2,body:body={},statusCode:_0x306aca}=await formPost(_0x35d127);if(/^\s*[45]/[_0x295a3d(0x238)](_0x306aca)){let _0x358f7d=_0x295a3d(0x202)+_0x35d127[_0x295a3d(0x22e)]+_0x295a3d(0x265)+_0x6d916f;return console['warn'](_0x358f7d,_0x35d127),_0x1670df;}_0x59bdd2['set-cookie']&&(_0x1670df['headers'][_0x295a3d(0x28b)]=_0x59bdd2['set-cookie']['join'](';')[_0x295a3d(0x2df)](/(;\s*path=.*?(?:;|$))/g,';')[_0x295a3d(0x2df)](/;$/,'')),body[_0x295a3d(0x1be)]&&(_0x1670df[_0x295a3d(0x263)][_0x295a3d(0x1ab)]=_0x295a3d(0x322)+body[_0x295a3d(0x1be)]),_0x72c3de=_0x59bdd2[_0x295a3d(0x29d)];}if(followRedirect&&_0x72c3de){const _0x3a7d4c={..._0x1670df};_0x3a7d4c[_0x295a3d(0x22e)]=_0x282287['url']['match'](/(https?:\/\/[^\/]+)\//)[0x1]+_0x72c3de,_0x3a7d4c[_0x295a3d(0x261)]='GET';const _0x1b59bb=await getHTML(_0x3a7d4c);_0x569ede=buildStateSyncRequestBody({'html':_0x1b59bb,'uri':_0x282287,'minerTyped':_0x57d8ea,'apiVersion':_0x6d916f}),_0x1670df[_0x295a3d(0x263)]={..._0x282287['headers'],..._0x1670df[_0x295a3d(0x263)]};}}}/post/i['test'](_0x282287['method'])?(_0x569ede&&(_0x1670df[_0x295a3d(0x2be)]=_0x569ede),_0x2989dc&&(_0x1670df[_0x295a3d(0x197)]=_0x2989dc)):delete _0x1670df[_0x295a3d(0x263)][_0x295a3d(0x196)];if(_0x282287['timeout'])_0x1670df['timeout']=_0x5bdc86;else _0x5bdc86&&(_0x1670df[_0x295a3d(0x2ab)]=_0x5bdc86);return _0x5254e2&&(_0x1670df[_0x295a3d(0x32d)]={'maxSockets':_0x5254e2}),_0x282287['noAuth']&&delete _0x1670df[_0x295a3d(0x2b5)],console[_0x295a3d(0x248)]({'method':_0x295a3d(0x284),'uri':_0x282287,'apiVersion':_0x6d916f},_0x295a3d(0x284),_0x1670df),_0x1670df;}function getUpdateMinerSettingsUrl(_0x3ad227,_0x340d3f){const _0x5141be=_0x1d0a09;return getApiUrl(_0x3ad227,_0x340d3f,_0x5141be(0x1b2));}function getMinerSettingsUrl(_0x50cdd3,_0x2713e8){const _0x50b030=_0x1d0a09;return getApiUrl(_0x50cdd3,_0x2713e8,_0x50b030(0x194));}function getNetworkSettingsUrl(_0x47ad6d,_0x16d920){const _0x163e4b=_0x1d0a09;return getApiUrl(_0x47ad6d,_0x16d920,_0x163e4b(0x2ff));}function getNetworkDiagnosticsUrl(_0x4972bc,_0x483328){const _0x680072=_0x1d0a09;return getApiUrl(_0x4972bc,_0x483328,_0x680072(0x255));}function getMinerStatusUrl(_0x3c24a3,_0x191fc3){const _0x165621=_0x1d0a09;return getApiUrl(_0x3c24a3,_0x191fc3,_0x165621(0x26b));}function getMinerLoginUrl(_0x4b3056,_0x128c28){return getApiUrl(_0x4b3056,_0x128c28,'getMinerLogin');}function getMinerSystemInfoUrl(_0x3d2ab5,_0x23ebef){const _0x1e25e5=_0x1d0a09;return getApiUrl(_0x3d2ab5,_0x23ebef,_0x1e25e5(0x308));}function getMinerRebootUrl(_0x443e78,_0x5c62f6){const _0x3f1d12=_0x1d0a09;return getApiUrl(_0x443e78,_0x5c62f6,_0x3f1d12(0x1ca));}function getMinerResetUrl(_0x2b680e,_0x1cb89b){const _0x259621=_0x1d0a09;return getApiUrl(_0x2b680e,_0x1cb89b,_0x259621(0x25b));}function getPoolRestartUrl(_0x52e1ee,_0x19d7cc){const _0x17051c=_0x1d0a09;return getApiUrl(_0x52e1ee,_0x19d7cc,_0x17051c(0x23a));}function getMinerKillUrl(_0x5706b3,_0xd7d9f6){return getApiUrl(_0x5706b3,_0xd7d9f6,'killMiner');}function getKernelLogsUrl(_0x3c3117,_0xad6ff6){const _0x271cc1=_0x1d0a09;return getApiUrl(_0x3c3117,_0xad6ff6,_0x271cc1(0x2a0));}function getMinerFirmwareUpdateUrl(_0x10fa45,_0x2b7fcb){const _0x193c27=_0x1d0a09;return getApiUrl(_0x10fa45,_0x2b7fcb,_0x193c27(0x2f6));}function getEnableSSHUrl(_0x5cc142,_0x25716a){return getApiUrl(_0x5cc142,_0x25716a,'enableSSH');}function getMinerLandingPageUrl(_0x5dcd52=null,_0x164ae7){const _0x115027=_0x1d0a09;if(_0x5dcd52===null)throw new Error(_0x115027(0x274));var _0x2f15d5={...minerApis[(_0x164ae7||'')[_0x115027(0x217)]()]['routes']['minerLandingPage']}||{'method':_0x115027(0x230),'url':''};return _0x2f15d5[_0x115027(0x236)]=_0x115027(0x295)+_0x5dcd52+_0x2f15d5[_0x115027(0x236)],_0x2f15d5;}async function getMinerSystemInfo({ipAddress:ipAddress=null,minerTyped:_0xd3633e,apiVersion:_0x535b83,maxSockets:_0x4f5e9f,timeout:timeout=0x1f40},_0x3a3335){const _0x187c26=_0x1d0a09;_0x535b83=_0x535b83||(_0x3a3335||{})[_0x187c26(0x262)]||deriveApiVersion({'minerTyped':_0xd3633e});let _0x15c5f5=_0x3a3335||(!isCommandAvailable(_0x535b83,_0x187c26(0x2cd))?null:await getVersionInfo(ipAddress)[_0x187c26(0x2e7)](_0x20c64c=>{const _0x90dd83=_0x187c26;return console[_0x90dd83(0x248)](_0x90dd83(0x283)+ipAddress,_0x20c64c),null;})),_0x6272f=null;_0x15c5f5&&!/unavailable/i['test'](_0x3a3335)&&(_0x6272f=completeMinerVersion(_0x15c5f5),_0x535b83=_0x6272f[_0x187c26(0x262)]);!_0xd3633e&&_0x6272f&&(_0xd3633e=getMinerTypeMap(_0x6272f)||null);const _0x2b61e3=getMinerSystemInfoUrl(ipAddress,_0x535b83);let _0x188770;console[_0x187c26(0x248)]({'ipAddress':ipAddress,'minerTyped':_0xd3633e,'apiVersion':_0x535b83},'cgminer\x20version\x20command\x20response\x20',_0x188770);let _0x2a03a9={},_0x564ea9;if(_0x2b61e3[_0x187c26(0x236)]){_0x564ea9=await createRequestOptions({'uri':_0x2b61e3,'minerTyped':_0xd3633e,'apiVersion':_0x535b83,'maxSockets':_0x4f5e9f,'timeout':timeout}),_0x2a03a9=await getJSON(_0x564ea9);let _0x4177d2=_0x2a03a9[_0x187c26(0x26a)]==0x1f4||/(TIMEDOUT|UNREACH)/i[_0x187c26(0x238)](_0x2a03a9[_0x187c26(0x270)])||_0x2a03a9[_0x187c26(0x26a)]&&_0x6272f;if(!_0x4177d2&&_0x2a03a9[_0x187c26(0x26a)])throw _0x2a03a9;if(!_0x4177d2){if(_0x2a03a9[_0x187c26(0x270)]){let _0x461bcd=null;if(/certificate has expired/i[_0x187c26(0x238)](_0x2a03a9['message'])&&!/whatsminer/i[_0x187c26(0x238)](_0x535b83))_0x461bcd=config[_0x187c26(0x1de)]['Whatsminer\x20M20S'];else{if(/invalid request/i[_0x187c26(0x238)](_0x2a03a9[_0x187c26(0x270)])){if(!/innosilicon/i[_0x187c26(0x238)](_0x535b83))_0x461bcd=config[_0x187c26(0x1de)]['Innosilicon\x20T3S'];else!/whatsminer/i['test'](_0x535b83)&&(_0x461bcd=config[_0x187c26(0x1de)]['Whatsminer\x20M20S']);}}if(_0x461bcd){const _0xfffc10=await getMinerSystemInfo({'ipAddress':ipAddress,'minerTyped':_0x461bcd,'apiVersion':_0x461bcd[_0x187c26(0x262)]||_0x461bcd[_0x187c26(0x22c)],'maxSockets':_0x4f5e9f},_0x3a3335);return _0xfffc10;}}else _0x188770=parseMinerSystemInfo(_0x2a03a9,_0x535b83);}}if(_0x6272f){if(!_0x188770){const _0x536eb9=_0xd3633e&&_0xd3633e[_0x187c26(0x1d6)]?_0xd3633e[_0x187c26(0x22c)]+'\x20'+_0xd3633e['name']:'';_0x188770={'minerType':_0x536eb9,'ipAddress':ipAddress,..._0x6272f};}else Object[_0x187c26(0x1cd)]({..._0x188770,..._0x6272f})[_0x187c26(0x307)](_0x3c0d0d=>{_0x188770[_0x3c0d0d]=_0x188770[_0x3c0d0d]||_0x6272f[_0x3c0d0d];});}if(!_0x188770){!_0x2a03a9[_0x187c26(0x270)]&&(_0x2a03a9[_0x187c26(0x270)]='Empty\x20response\x20from\x20server!');throw new Error(_0x2a03a9);}return console[_0x187c26(0x248)]({'ipAddress':ipAddress,'minerTyped':_0xd3633e,'apiVersion':_0x535b83},_0x187c26(0x309),_0x564ea9,_0x188770),_0x188770;}function isCommandAvailable(_0x2963c8,_0x1ec367){const _0x3f4b52=_0x1d0a09;var {cgminerCommands:_0x665ed4}=minerApis[(_0x2963c8||'')[_0x3f4b52(0x217)]()]||{};return _0x665ed4?_0x665ed4[_0x3f4b52(0x30b)](_0x1ec367)>=0x0:!![];}async function getRemotesPools(_0x3c030f,_0x4641f3,_0x2737ee){const _0x36ad7d=_0x1d0a09,{ipAddress:_0x246c94,macAddress:_0x4c6937}=_0x3c030f;let _0x5da9ba=[];_0x2737ee=_0x2737ee||deriveApiVersion({'minerInfo':_0x3c030f,'minerTyped':_0x4641f3});const _0x17bcfe=isCommandAvailable(_0x2737ee,_0x36ad7d(0x2ed));if(_0x17bcfe){const _0x5ef5fd=await sendCommand(_0x246c94,_0x36ad7d(0x2ed))[_0x36ad7d(0x2e7)](_0x2340ed=>{const _0x416b34=_0x36ad7d;return console['warn'](_0x416b34(0x207)+_0x246c94+'\x20['+_0x4c6937+']',_0x2340ed),[];});_0x5ef5fd['forEach'](_0x1b98bd=>{const {User:_0x4f447e,URL:_0x229109}=_0x1b98bd;_0x5da9ba['push']({'user':_0x4f447e,'url':_0x229109});});if(_0x5da9ba[_0x36ad7d(0x306)])return console[_0x36ad7d(0x248)]('Miner\x20pools\x20by\x20RPC\x20',_0x246c94,_0x5da9ba),{'pools':_0x5da9ba};}const _0x157281=await getMinerSettings(_0x246c94,_0x4641f3,_0x2737ee);return _0x157281?.[_0x36ad7d(0x2ed)]?.[_0x36ad7d(0x306)]&&console[_0x36ad7d(0x248)](_0x36ad7d(0x323),_0x246c94,_0x5da9ba),_0x157281||{'pools':_0x5da9ba};}async function getSummaryAndPools(_0x54d8b0,_0x53c494){const _0x45711e=_0x1d0a09,_0x1ab643=[_0x45711e(0x1df),_0x45711e(0x2ed),_0x45711e(0x204),_0x45711e(0x193)];return await getAllMinerStateByCommands(_0x54d8b0,_0x1ab643,_0x53c494);}async function getAllMinerStateByCommands(_0x4716af,_0x5b254f,_0x53df04){const _0x163ccb=_0x1d0a09,_0x2ed320={};/all/i[_0x163ccb(0x238)](_0x5b254f)&&(_0x5b254f=['summary',_0x163ccb(0x2ed),_0x163ccb(0x204),_0x163ccb(0x193),_0x163ccb(0x2cd),_0x163ccb(0x1b5),_0x163ccb(0x1c7)]);for(const _0x8e8284 of _0x5b254f){_0x2ed320[_0x8e8284]=await sendCommand(_0x4716af,_0x8e8284)[_0x163ccb(0x2e7)](_0x50445f=>{const _0x350120=_0x163ccb,_0x3f3030=_0x8e8284+_0x350120(0x254)+_0x4716af;return console['warn'](_0x3f3030,_0x50445f),{'message':_0x3f3030,'err':inspect(_0x50445f,![],0x5,!![])};});}const {version:_0x29cac7,summary:_0xe0ee7f,pools:_0x6b60c2}=_0x2ed320;return console[_0x163ccb(0x248)]({'ipAddress':_0x4716af},'Every\x20miner\x20summary\x20(devs)\x20by\x20RPC\x20for\x20'+_0x4716af,_0x29cac7,_0xe0ee7f,_0x6b60c2),_0x2ed320;}async function getMinerStatus({ipAddress:ipAddress=null,minerTyped:_0x51ed77,apiVersion:_0x261cbc,maxSockets:_0x530798}){const _0x5733de=_0x1d0a09;if(!_0x51ed77&&!_0x261cbc)throw new Error('Miner\x20type\x20is\x20a\x20required\x20property\x20for\x20getMinerStatus\x20method.');_0x261cbc=_0x261cbc||deriveApiVersion({'minerTyped':_0x51ed77});const _0x26f4af=getMinerStatusUrl(ipAddress,_0x261cbc)||{};let _0x19a0c3=_0x26f4af['url']?{}:await getSummaryAndPools(ipAddress,_0x261cbc)||{},_0x51236b=null;if(_0x26f4af[_0x5733de(0x236)]&&!_0x19a0c3[_0x5733de(0x1df)]){_0x51236b=await createRequestOptions({'uri':_0x26f4af,'minerTyped':_0x51ed77,'apiVersion':_0x261cbc,'maxSockets':_0x530798}),_0x19a0c3=await getJSON(_0x51236b);if(_0x19a0c3[_0x5733de(0x26a)]==0x1f4||/(TIMEDOUT|UNREACH)/i[_0x5733de(0x238)](_0x19a0c3[_0x5733de(0x270)]))_0x19a0c3=null;else{if(_0x19a0c3[_0x5733de(0x26a)]||_0x19a0c3[_0x5733de(0x2db)])throw _0x19a0c3;}let _0x2da566=_0x19a0c3[_0x5733de(0x2ed)]?_0x5733de(0x2ed):_0x5733de(0x29a);if(!_0x19a0c3[_0x2da566]||!_0x19a0c3[_0x2da566][_0x5733de(0x306)]){const _0x28b2c0=await getRemotesPools({'ipAddress':ipAddress},_0x51ed77);!_0x28b2c0?.[_0x5733de(0x306)]&&(_0x19a0c3[_0x2da566]=_0x28b2c0);}}let _0x15e445=null;return _0x19a0c3&&(_0x15e445=await parseMinerStatus({'minerStatus':_0x19a0c3,'minerTyped':_0x51ed77,'apiVersion':_0x261cbc})),console[_0x5733de(0x25d)]('Miner\x20status\x20request\x20ip\x20address:',ipAddress,_0x261cbc,_0x51ed77['brand']),console[_0x5733de(0x248)]({'ipAddress':ipAddress,'minerTyped':_0x51ed77,'apiVersion':_0x261cbc},_0x5733de(0x2ca),_0x51236b,_0x261cbc,_0x51ed77,_0x15e445),_0x15e445;}async function getMinerSettings(_0x5cca50=null,_0x4f1dfa,_0x24faf7,_0x17db4d){const _0x373c65=_0x1d0a09;if(!_0x4f1dfa&&!_0x24faf7)throw new Error('Miner\x20type\x20is\x20a\x20required\x20property\x20for\x20getMinerSettings\x20method\x20'+_0x5cca50+_0x373c65(0x334),_0x4f1dfa);_0x24faf7=_0x24faf7||deriveApiVersion({'minerTyped':_0x4f1dfa});const _0xf7e75d=getMinerSettingsUrl(_0x5cca50,_0x24faf7)||{},_0x2e0589=await createRequestOptions({'uri':_0xf7e75d,'minerTyped':_0x4f1dfa,'apiVersion':_0x24faf7,'maxSockets':_0x17db4d});let _0x516f97=await getJSON(_0x2e0589);if(_0x516f97[_0x373c65(0x26a)]==0x1f4||/(TIMEDOUT|UNREACH)/i[_0x373c65(0x238)](_0x516f97[_0x373c65(0x270)]))_0x516f97=null;else{if(_0x516f97[_0x373c65(0x26a)])throw _0x516f97;}let _0x51f57c=null;return _0x516f97&&(_0x51f57c=await parseMinerSettings(_0x516f97,_0x4f1dfa,_0x24faf7)),console[_0x373c65(0x25d)]('Miner\x20settings\x20request\x20ip\x20address:',_0x5cca50,_0x24faf7,_0x4f1dfa['brand']),console[_0x373c65(0x248)]({'ipAddress':_0x5cca50,'minerTyped':_0x4f1dfa,'apiVersion':_0x24faf7},_0x373c65(0x2ca),_0x2e0589,_0x24faf7,_0x4f1dfa,_0x51f57c),_0x51f57c;}async function getMinerReboot(_0x4a85c2,_0x1bc81e,_0x5ddd87,_0x5bb183,_0x4c1395){const _0x468918=_0x1d0a09;if(!_0x1bc81e&&!_0x5ddd87)throw new Error(_0x468918(0x301));const {ipAddress:_0x5708da,macAddress:macAddress=''}=_0x4a85c2;_0x5ddd87=_0x5ddd87||deriveApiVersion({'minerInfo':_0x4a85c2,'minerTyped':_0x1bc81e});const _0x81d8db=getMinerRebootUrl(_0x5708da,_0x5ddd87)||{};if(!_0x81d8db['url'])return null;const _0xbb04c4=!![],_0xb24637=await createRequestOptions({'uri':_0x81d8db,'minerTyped':_0x1bc81e,'apiVersion':_0x5ddd87,'maxSockets':_0x4c1395,'followRedirect':_0xbb04c4});let _0xb977ed=await getJSON(_0xb24637);if(_0xb977ed[_0x468918(0x26a)]==0x1f4||/(TIMEDOUT|UNREACH)/i[_0x468918(0x238)](_0xb977ed[_0x468918(0x270)]))_0xb977ed=null;else{if(_0xb977ed[_0x468918(0x26a)])throw _0xb977ed;}return console['log'](_0x468918(0x1aa)+_0x4a85c2[_0x468918(0x273)]+'\x20['+_0x5708da+',\x20'+macAddress+_0x468918(0x24e),_0xb977ed),_0xb977ed;}async function getMinerReset(_0x299935,_0xdf150d,_0x138de6,_0x2be09d){const _0x23fa74=_0x1d0a09;if(!_0xdf150d&&!_0x138de6)throw new Error(_0x23fa74(0x316));const {ipAddress:ipAddress=null,macAddress:macAddress=''}=_0x299935;_0x138de6=_0x138de6||deriveApiVersion({'minerInfo':_0x299935,'minerTyped':_0xdf150d});const _0x15a347=getMinerResetUrl(ipAddress,_0x138de6)||{};if(!_0x15a347[_0x23fa74(0x236)])return null;const _0x2f75a1=await createRequestOptions({'uri':_0x15a347,'minerTyped':_0xdf150d,'apiVersion':_0x138de6,'maxSockets':_0x2be09d});let _0x3da517=await getJSON(_0x2f75a1);if(_0x3da517[_0x23fa74(0x26a)]==0x1f4||/(TIMEDOUT|UNREACH)/i[_0x23fa74(0x238)](_0x3da517[_0x23fa74(0x270)]))_0x3da517=null;else{if(_0x3da517[_0x23fa74(0x26a)])throw _0x3da517;}return console['log'](_0x23fa74(0x1b0)+ipAddress),console['debug'](_0x23fa74(0x2f1)+_0x299935[_0x23fa74(0x273)]+'\x20['+ipAddress+',\x20'+macAddress+_0x23fa74(0x2f0)+_0x3da517),_0x3da517;}async function getMinerKill(_0x2236bd,_0x34e427,_0x545dd0,_0x54c787){const _0x382d7d=_0x1d0a09;if(!_0x34e427&&!_0x545dd0)throw new Error(_0x382d7d(0x1b9));const {ipAddress:ipAddress=null,macAddress:macAddress=''}=_0x2236bd;_0x545dd0=_0x545dd0||deriveApiVersion({'minerInfo':_0x2236bd,'minerTyped':_0x34e427});const _0x3f2590=getMinerKillUrl(ipAddress,_0x545dd0)||{};if(!_0x3f2590[_0x382d7d(0x236)])return null;const _0x54b23d={'Content-Type':_0x382d7d(0x303)},_0x2c83f0=await createRequestOptions({'uri':_0x3f2590,'minerTyped':_0x34e427,'apiVersion':_0x545dd0,'maxSockets':_0x54c787,'headers':_0x54b23d}),_0x1d252a=await getHTML(_0x2c83f0)[_0x382d7d(0x2e7)](_0x4c0b1d=>{const _0x5def22=_0x382d7d;if(_0x4c0b1d[_0x5def22(0x26a)]===0x1f4)return!![];else throw _0x4c0b1d;});return console[_0x382d7d(0x248)](_0x382d7d(0x28d)+_0x2236bd[_0x382d7d(0x273)]+'\x20['+ipAddress+',\x20'+macAddress+']\x20responsed\x20with:\x20'+_0x1d252a),_0x1d252a;}async function getKernelLogs({minerInfo:_0x33caa1,minerTyped:minerTyped={},apiVersion:_0x4c3739,maxSockets:_0x16abf3,filepath:_0x2676f0}){const _0x576a27=_0x1d0a09,{ipAddress:ipAddress=null}=_0x33caa1;_0x4c3739=_0x4c3739||deriveApiVersion({'minerInfo':_0x33caa1,'minerTyped':minerTyped});const _0x144da3=getKernelLogsUrl(ipAddress,_0x4c3739)||{};if(!_0x144da3[_0x576a27(0x236)])return null;const _0xf2438c={},_0x1ab7c3=await createRequestOptions({'uri':_0x144da3,'minerTyped':minerTyped,'apiVersion':_0x4c3739,'maxSockets':_0x16abf3,'headers':_0xf2438c}),_0x5333fa=await getHTML(_0x1ab7c3)[_0x576a27(0x2e7)](_0x58b69c=>{const _0x504aa0=_0x576a27;return console[_0x504aa0(0x1db)](_0x504aa0(0x250),_0x58b69c),'';});let _0x376655=null;return _0x5333fa&&(_0x5333fa[_0x576a27(0x270)]?(console[_0x576a27(0x2f4)](_0x33caa1,_0x5333fa),_0x376655=''):(console[_0x576a27(0x248)]('Kernel\x20logs\x20parsing\x20for\x20'+ipAddress+',\x20'+_0x4c3739+_0x576a27(0x24d)+(_0x2676f0||_0x576a27(0x1c3))+'.'),_0x2676f0&&await writeFile(_0x2676f0,_0x5333fa)[_0x576a27(0x2e7)](_0x795cb2=>console[_0x576a27(0x2f4)](_0x795cb2)),_0x376655=parseKernelLogs(_0x5333fa,_0x4c3739,_0x144da3[_0x576a27(0x2e3)]))),console[_0x576a27(0x248)](_0x576a27(0x256),_0x1ab7c3,_0x376655),_0x376655;}async function updateMinerSettings({minerInfo:_0x39a5b8,minerTyped:_0xa3ad68,pools:_0x2d68a0,minerConfigOptions:_0x5a4243,apiVersion:_0x362dbb}){const _0x699b37=_0x1d0a09;let _0xb9e668=[..._0x2d68a0];_0x2d68a0[0x0]['url']&&(_0xb9e668=_[_0x699b37(0x307)](_0x2d68a0,(_0x567e87,_0x466d88)=>{const _0x4dd1dd=_0x699b37;return{'index':_0x466d88+0x1,'stratum':_0x567e87['url'],'username':_0x567e87[_0x4dd1dd(0x216)],'password':'x'};}));const {ipAddress:_0x3d904d}=_0x39a5b8;_0x362dbb=(_0x362dbb||deriveApiVersion({'minerInfo':_0x39a5b8,'minerTyped':_0xa3ad68}))[_0x699b37(0x217)]();const _0xc2fe7b=minerApis[_0x362dbb];let _0x3ceac0=getUpdateMinerSettingsUrl(_0x3d904d,_0x362dbb)||{};const _0x5d7c02=isCommandAvailable(_0x362dbb,_0x699b37(0x2ed));if(!_0x3ceac0[_0x699b37(0x236)]){if(!_0x5d7c02){let _0x86860c=_0x699b37(0x1af)+_0x3d904d+_0x699b37(0x265)+_0x362dbb+_0x699b37(0x1da);return console[_0x699b37(0x2f4)](_0x86860c),null;}const _0x1e102f=await sendCommand(_0x3d904d,_0x699b37(0x2ed)),_0x3df732={'remove':[],'add':[]};for(let _0x189ea3 of _0xb9e668){const _0xd06944=_0x189ea3['stratum']+','+(_0x189ea3[_0x699b37(0x300)]||_0x699b37(0x1ad))+','+(_0x189ea3[_0x699b37(0x26f)]||'x'),_0x4a64e9=await sendCommand(_0x3d904d,_0x699b37(0x21c),_0xd06944);_0x3df732[_0x699b37(0x259)][_0x699b37(0x275)](_0x4a64e9);}const _0x595c13=_0x1e102f[_0x1e102f[_0x699b37(0x306)]-0x1][_0x699b37(0x31f)]+0x1,_0x40310f=await sendCommand(_0x3d904d,_0x699b37(0x335),_0x595c13);for(let _0xf797c4 of _0x1e102f){const _0x7710de=await sendCommand(_0x3d904d,'removepool',_0xf797c4[_0x699b37(0x31f)]);_0x3df732[_0x699b37(0x267)][_0x699b37(0x275)](_0x7710de);}return await sendCommand(_0x3d904d,_0x699b37(0x20b)),_0x3df732;}let _0x405c58={};const _0x3ca4a5=_0xc2fe7b[_0x699b37(0x21e)][_0x699b37(0x2ee)];let _0x102071='';if(_0x3ca4a5&&_0x3ca4a5[_0x699b37(0x236)]){const _0x5a0544=await createRequestOptions({'uri':_0x3ceac0,'minerTyped':_0xa3ad68,'apiVersion':_0x362dbb,'headers':_0x405c58});_0x5a0544[_0x699b37(0x263)]&&(_0x405c58[_0x699b37(0x28b)]=_0x5a0544['headers'][_0x699b37(0x28b)]);_0x5a0544[_0x699b37(0x261)]=_0x699b37(0x230),_0x102071=await getHTML({..._0x5a0544});if(_0x102071['error'])return inspect(_0x102071,![],0x5,!![]);}!_0x102071&&console['info']('Not\x20getting\x20miner\x20settings\x20html',_0x39a5b8,_0xa3ad68,_0x2d68a0,_0x5a4243,_0x362dbb);const _0x47f6f8=buildSetMinerSettingsRequestBody({'pools':_0xb9e668,'minerConfigOptions':_0x5a4243,'html':_0x102071,'apiVersion':_0x362dbb,'minerTyped':_0xa3ad68,'uri':_0x3ceac0}),{headers:_0x28b458={}}=_0xc2fe7b[_0x699b37(0x21e)][_0x699b37(0x1b2)];_0x405c58={..._0x405c58,..._0x28b458},_0x405c58[_0x699b37(0x196)]=_0x405c58[_0x699b37(0x196)]||_0x699b37(0x27d);const _0x5721b8=await createRequestOptions({'uri':_0x3ceac0,'minerTyped':_0xa3ad68,'apiVersion':_0x362dbb,'headers':_0x405c58,'form':_0x47f6f8});let {body:_0x3cd028}=await formPost({..._0x5721b8});console[_0x699b37(0x248)]({'ipAddress':_0x3d904d,'minerTyped':_0xa3ad68,'apiVersion':_0x362dbb},_0x699b37(0x220),_0x5721b8,_0x3cd028);if(/reboot/[_0x699b37(0x238)](_0x3cd028)||_0xc2fe7b['rebootOnUpdate']){const _0x1bf578=await getMinerReboot(_0x39a5b8,_0xa3ad68,_0x362dbb);_0x1bf578?_0x3cd028+=_0x1bf578:await sendCommand(_0x3d904d,_0x699b37(0x20b));}return _0x3cd028;}async function updateMinerNetworkSettings({minerInfo:_0x5bd37d,network:_0xd47c90,minerTyped:_0x20c1a7,apiVersion:_0x1aed2a}){const _0x2c4139=_0x1d0a09;_0x1aed2a=_0x1aed2a||deriveApiVersion({'minerInfo':_0x5bd37d,'minerTyped':_0x20c1a7});const _0x597f38=getNetworkSettingsUrl(_0x5bd37d[_0x2c4139(0x1cf)],_0x1aed2a)||{};if(!_0x597f38['url'])return null;const _0x87abdd=buildSetNetworkSettingsRequestBody({'minerInfo':_0x5bd37d,'network':_0xd47c90,'apiVersion':_0x1aed2a,'minerTyped':_0x20c1a7,'uri':_0x597f38}),_0x1539c3={'Content-Type':_0x2c4139(0x27d)},_0xa6af38=await createRequestOptions({'uri':_0x597f38,'minerTyped':_0x20c1a7,'apiVersion':_0x1aed2a,'headers':_0x1539c3,'form':_0x87abdd}),{body:_0xc96307}=await formPost({..._0xa6af38});return console['debug']('Update\x20miner\x20network\x20settings\x20',_0xa6af38,_0xc96307),_0xc96307;}async function retrieveMinerNetworkDiagnostics({minerInfo:_0x48c2c4,diagnostic:_0x377e6c,minerTyped:_0x2b1a9d,apiVersion:_0x5a15ae}){const _0x29c352=_0x1d0a09;_0x5a15ae=_0x5a15ae||deriveApiVersion({'minerInfo':_0x48c2c4,'minerTyped':_0x2b1a9d});const _0x4f615c=getNetworkDiagnosticsUrl(_0x48c2c4[_0x29c352(0x1cf)],_0x5a15ae)||{};if(!_0x4f615c[_0x29c352(0x236)])return null;const _0x449083=buildNetworkDiagnosticRequestBody({'diagnostic':_0x377e6c,'apiVersion':_0x5a15ae,'minerTyped':_0x2b1a9d,'uri':_0x4f615c}),_0x47a0c5={'Content-Type':'application/x-www-form-urlencoded'},_0x63d448=await createRequestOptions({'uri':_0x4f615c,'minerTyped':_0x2b1a9d,'apiVersion':_0x5a15ae,'headers':_0x47a0c5,'form':_0x449083}),{body:_0x536311}=await formPost({..._0x63d448});console[_0x29c352(0x248)](_0x29c352(0x2d8),_0x63d448,_0x536311);let _0x12f063=parseNetworkDiagnostic(_0x536311);if(!_0x12f063||!_0x12f063[_0x29c352(0x1b1)])throw new Error(_0x12f063);return{..._0x377e6c,..._0x12f063};}async function removeMinerUpgradeCheck({minerInfo:_0x4f9a71,minerTyped:_0x553939,apiVersion:_0x1237bf,filenames:filenames=['upgrade.cgi',_0x1d0a09(0x1e2)]}){const _0xaa6cc5=_0x1d0a09,{ipAddress:_0x1b812e}=_0x4f9a71;_0x1237bf=(_0x1237bf||deriveApiVersion({'minerInfo':_0x4f9a71,'minerTyped':_0x553939}))[_0xaa6cc5(0x217)]();const _0xb619b4=minerApis[_0x1237bf],_0x3c746f=new SSH({'host':_0x1b812e,'user':_0xb619b4[_0xaa6cc5(0x233)],'pass':_0xb619b4[_0xaa6cc5(0x331)]});return new Promise(function(_0x16b3b2,_0x2405d3){const _0xadf3e2=_0xaa6cc5,_0xec9f1d={'out':console['log'][_0xadf3e2(0x2dd)](console),'err':console['error'][_0xadf3e2(0x2dd)](console),'exit':(_0x3e9a55,_0x4b11a8,_0x5c52ba)=>{const _0x37bbb5=_0xadf3e2;_0x3e9a55===0x1&&(console['warn'](_0x37bbb5(0x2a8),_0x3e9a55,_0x4b11a8,_0x5c52ba),_0x2405d3(_0x5c52ba));}};_0x3c746f[_0xadf3e2(0x242)](_0xadf3e2(0x23b)),filenames[_0xadf3e2(0x29b)](_0x46c194=>{const _0x5b9f90=_0xadf3e2;_0x3c746f['exec'](_0x5b9f90(0x1bb)+_0x46c194,_0xec9f1d);}),console['log']('Removing\x20signature\x20check\x20in\x20'+filenames[_0xadf3e2(0x30d)](',')+_0xadf3e2(0x232)+_0x1b812e),_0x3c746f['on'](_0xadf3e2(0x2f4),function(_0x37cefd){const _0x24d38d=_0xadf3e2;var _0x2a5a13=_0x24d38d(0x27b)+filenames[_0x24d38d(0x30d)](',')+_0x24d38d(0x232)+_0x1b812e;console[_0x24d38d(0x1c6)](_0x2a5a13,_0x37cefd),_0x2405d3(_0x2a5a13);}),_0x3c746f['on'](_0xadf3e2(0x20a),function(){const _0xe33a86=_0xadf3e2;_0x16b3b2(_0xe33a86(0x27e)+filenames['join'](',')+_0xe33a86(0x232)+_0x1b812e);}),_0x3c746f[_0xadf3e2(0x1eb)]();});}async function enableFirmwareUpload({minerInfo:_0x329796,minerTyped:_0x3cdc3d,apiVersion:_0x39d67b}){const _0x24c044=_0x1d0a09,_0x2676fc=await updateEnableSSH({'minerInfo':_0x329796,'minerTyped':_0x3cdc3d,'apiVersion':_0x39d67b});if(_0x2676fc!==SSH_PORT_STATE[_0x24c044(0x224)])return _0x2676fc;return removeMinerUpgradeCheck({'minerInfo':_0x329796,'minerTyped':_0x3cdc3d,'apiVersion':_0x39d67b})[_0x24c044(0x205)](()=>{return SSH_PORT_STATE['OPEN'];})[_0x24c044(0x2e7)](_0x1487cc=>{const _0x4b98bd=_0x24c044;return console['warn'](_0x4b98bd(0x24c),_0x1487cc),SSH_PORT_STATE['LOCKED'];});}let firmwareBuffers={};function getFirmwareBuffer(_0x3fd608,_0x2dbca3,_0x1a1bc0){const _0xfdd490=_0x1d0a09;if(!firmwareBuffers[_0x3fd608]){let _0x584fcc=_0xfdd490(0x2c3);_0x1a1bc0&&_0x1a1bc0['firmwareContentType']&&(_0x584fcc=_0x1a1bc0[_0xfdd490(0x226)]);var _0x3a5134=fs[_0xfdd490(0x1a4)](path[_0xfdd490(0x2a1)](global[_0xfdd490(0x1cb)]+'/'+_0x3fd608)),_0x531d87='';_0x531d87+='--'+_0x2dbca3+'\x0d\x0a',_0x531d87+=_0xfdd490(0x304)+_0x3fd608+'\x22\x0d\x0a',_0x531d87+=_0xfdd490(0x310)+_0x584fcc+'\x0d\x0a\x0d\x0a',firmwareBuffers[_0x3fd608]=Buffer[_0xfdd490(0x1ef)]([Buffer[_0xfdd490(0x1e3)](_0x531d87,_0xfdd490(0x2d9)),Buffer[_0xfdd490(0x1e3)](_0x3a5134,_0xfdd490(0x208)),Buffer[_0xfdd490(0x1e3)]('\x0d\x0a--'+_0x2dbca3+'\x0d\x0a','utf8')]);}return firmwareBuffers[_0x3fd608];}let templateLiterals={};function getTemplateLiteral(_0x438495,_0x69edf9){function _0x4012ef(_0x575699){const _0x52afde=_0x57f1;try{templateLiterals[_0x575699]=fs[_0x52afde(0x1a4)](path[_0x52afde(0x2a1)](_0x52afde(0x329)+_0x575699),_0x52afde(0x2d9));}catch(_0x271f61){templateLiterals[_0x575699]='',console[_0x52afde(0x248)](_0x52afde(0x324)+_0x575699+_0x52afde(0x1f2)+(_0x69edf9||_0x52afde(0x2eb))+'.');};}return!templateLiterals[_0x438495]&&!templateLiterals[_0x69edf9]&&(_0x4012ef(_0x438495),_0x69edf9&&_0x4012ef(_0x69edf9)),templateLiterals[_0x438495]||templateLiterals[_0x69edf9];}async function updateMinerFirmware({minerInfo:_0xcedd3b,minerTyped:_0x36bbf7,firmwareFileName:_0x12f6d2,apiVersion:_0x19d6b8,recursed:recursed=![]}){const _0x34f5da=_0x1d0a09;_0x19d6b8=_0x19d6b8||deriveApiVersion({'minerInfo':_0xcedd3b,'minerTyped':_0x36bbf7});const {ipAddress:_0x3c806a,macAddress:_0x3d51d0,workerName:_0x313dd8}=_0xcedd3b;!recursed&&console[_0x34f5da(0x1c6)]('Firmware\x20update\x20requested\x20for\x20'+_0x313dd8+'\x20['+_0x3c806a+',\x20'+_0x3d51d0+_0x34f5da(0x2ac)+_0x12f6d2);var _0x2f45f1='MineOpsBoundary'+Math[_0x34f5da(0x2e5)]()['toString'](0x24)[_0x34f5da(0x280)](0x2);const _0x2fe351=getMinerFirmwareUpdateUrl(_0x3c806a,_0x19d6b8)||{};if(!_0x2fe351[_0x34f5da(0x236)])return SSH_PORT_STATE[_0x34f5da(0x234)];const _0x56cc7b=getFirmwareBuffer(_0x12f6d2,_0x2f45f1,_0x36bbf7),_0x5902fb={'Content-Type':_0x34f5da(0x222)+_0x2f45f1,'Content-Length':_0x56cc7b['length']},_0x19fc2c=await createRequestOptions({'uri':_0x2fe351,'minerTyped':_0x36bbf7,'apiVersion':_0x19d6b8,'headers':_0x5902fb,'body':_0x56cc7b,'timeout':0x493e0});!/^(L3|S9)/i['test'](_0xcedd3b[_0x34f5da(0x29e)])&&!recursed&&await getMinerKill(_0xcedd3b,_0x36bbf7,_0x19d6b8)[_0x34f5da(0x205)](_0x13dbda=>{const _0x13d811=_0x34f5da;console[_0x13d811(0x1c6)](_0x13d811(0x293)+_0x313dd8+'\x20['+_0x3c806a+',\x20'+_0x3d51d0+']\x20',_0x13dbda);})['catch'](_0xcfd93c=>{const _0x5cf8dd=_0x34f5da;console[_0x5cf8dd(0x1c6)](_0x5cf8dd(0x2af)+_0x313dd8+'\x20['+_0x3c806a+',\x20'+_0x3d51d0+']\x20',_0xcfd93c);});let _0x41877b='';const _0x653362=await filePost({..._0x19fc2c})['catch'](_0xde52d3=>{const _0x48d697=_0x34f5da;if(_0xde52d3[_0x48d697(0x26a)]===0x1f4||/TIMEDOUT/i['test'](_0xde52d3[_0x48d697(0x270)]))return _0x41877b=_0xde52d3[_0x48d697(0x26d)]+_0x48d697(0x2ad)+inspect(_0xde52d3),![];else throw _0xde52d3;});if(_0x653362){if(/System Upgrade Succ/i[_0x34f5da(0x238)](_0x653362))return console[_0x34f5da(0x1c6)]('Firmware\x20updated\x20for\x20'+_0x313dd8+'\x20['+_0x3c806a+',\x20'+_0x3d51d0+']\x20to\x20'+_0x12f6d2),setTimeout(function(){getMinerReboot(_0xcedd3b,_0x36bbf7,_0x19d6b8);},0x7d0),SSH_PORT_STATE[_0x34f5da(0x224)];else{if(reKnownFirmwareUpdateErrors['test'](_0x653362)){let _0x2d28eb=_0x653362[_0x34f5da(0x19f)](reKnownFirmwareUpdateErrors);if(_0x2d28eb){_0x41877b=_0x2d28eb[0x1];if(/sign/i[_0x34f5da(0x238)](_0x41877b)){const _0x504fe2=await enableFirmwareUpload({'minerInfo':_0xcedd3b,'minerTyped':_0x36bbf7,'apiVersion':_0x19d6b8});if(_0x504fe2==SSH_PORT_STATE[_0x34f5da(0x224)]&&!recursed)return console[_0x34f5da(0x1c6)](_0x34f5da(0x1f3)+_0x313dd8+'\x20['+_0x3c806a+',\x20'+_0x3d51d0+_0x34f5da(0x2ac)+_0x12f6d2),updateMinerFirmware({'minerInfo':_0xcedd3b,'minerTyped':_0x36bbf7,'firmwareFileName':_0x12f6d2,'apiVersion':_0x19d6b8,'recursed':!![]});else!recursed&&console[_0x34f5da(0x1c6)](_0x34f5da(0x1a8)+_0x313dd8+'\x20['+_0x3c806a+',\x20'+_0x3d51d0+_0x34f5da(0x2ac)+_0x12f6d2);}_0x41877b=_0x2d28eb[0x1];}else _0x41877b=_0x653362;}else _0x41877b=_0x653362;}}return console[_0x34f5da(0x1c6)](_0x34f5da(0x20c)+_0x313dd8+'\x20['+_0x3c806a+',\x20'+_0x3d51d0+_0x34f5da(0x2ac)+_0x12f6d2,_0x41877b),SSH_PORT_STATE[_0x34f5da(0x234)];}async function updateEnableSSH({minerInfo:_0x104b0d,minerTyped:_0x50befb,firmwareFilename:_0xd6787a,apiVersion:_0xefb4aa}){const _0x1000c6=_0x1d0a09,{ipAddress:_0x41685a}=_0x104b0d;let _0x586313=portScanner[_0x1000c6(0x2aa)](0x16,_0x41685a)['then'](_0x1fe2a2=>{const _0x3a700d=_0x1000c6;if(_0x1fe2a2==SSH_PORT_STATE[_0x3a700d(0x224)])return _0x1fe2a2;return/updater/i[_0x3a700d(0x238)](_0xd6787a)?updateEnableSSHupdater({'minerInfo':_0x104b0d,'minerTyped':_0x50befb,'apiVersion':_0xefb4aa}):_0x1fe2a2;})[_0x1000c6(0x2e7)](_0x52e458=>{const _0x1c6988=_0x1000c6;return console[_0x1c6988(0x2f4)](_0x1c6988(0x2e6),_0x52e458),![];});return _0x586313;}async function updateEnableSSHupdater({minerInfo:_0x30e394,minerTyped:_0x21e3a6,apiVersion:_0x22fd32}){const _0x2b1a1e=_0x1d0a09,{ipAddress:_0x2b0af2}=_0x30e394;_0x22fd32=_0x22fd32||deriveApiVersion({'minerInfo':_0x30e394,'minerTyped':_0x21e3a6});const _0x5f2379=getEnableSSHUrl(_0x2b0af2,_0x22fd32)||{};if(!_0x5f2379[_0x2b1a1e(0x236)])return SSH_PORT_STATE[_0x2b1a1e(0x234)];const _0x1ae453=_0x5f2379['data'],_0x1572fc={'Content-Type':_0x2b1a1e(0x27d)},_0x11849b=await createRequestOptions({'uri':_0x5f2379,'minerTyped':_0x21e3a6,'apiVersion':_0x22fd32,'headers':_0x1572fc,'form':_0x1ae453}),{body:_0x8a997}=await formPost({..._0x11849b})[_0x2b1a1e(0x205)](_0x556992=>_0x556992)[_0x2b1a1e(0x2e7)](_0x1a3ed2=>{const _0x367f1f=_0x2b1a1e;return console[_0x367f1f(0x1db)](_0x367f1f(0x2d1),_0x1a3ed2),![];});return console[_0x2b1a1e(0x248)](_0x2b1a1e(0x282),_0x11849b,_0x8a997),/Start\s+ssh/i['test'](_0x8a997)?(console[_0x2b1a1e(0x1c6)](_0x2b1a1e(0x2fb)+_0x2b0af2),SSH_PORT_STATE[_0x2b1a1e(0x224)]):(console[_0x2b1a1e(0x1c6)]('SSH\x20disabled\x20for\x20'+_0x2b0af2,_0x8a997),SSH_PORT_STATE[_0x2b1a1e(0x215)]);}async function updateEnableSSHAntminer({minerInfo:_0xe1103e,minerTyped:_0x184359,apiVersion:_0x17fa69}){const _0x51407a=_0x1d0a09,{ipAddress:_0x27363b}=_0xe1103e;_0x17fa69=_0x17fa69||deriveApiVersion({'minerInfo':_0xe1103e,'minerTyped':_0x184359});const _0x137425=getEnableSSHUrl(_0x27363b,_0x17fa69)||{};if(!_0x137425[_0x51407a(0x236)])return null;const {data:_0x3a75d3}=_0x137425,_0x394dbd=await createRequestOptions({'uri':_0x137425,'minerTyped':_0x184359,'apiVersion':_0x17fa69,'body':_0x3a75d3}),{body:_0x1c76fe}=await formPost({..._0x394dbd})[_0x51407a(0x205)](_0x3d2898=>_0x3d2898)[_0x51407a(0x2e7)](_0x29d19a=>{const _0x4fb931=_0x51407a;return console[_0x4fb931(0x1db)](_0x4fb931(0x2d1),_0x29d19a),![];});return/busybox/i[_0x51407a(0x238)](_0x1c76fe)?(console[_0x51407a(0x1c6)](_0x51407a(0x2fb)+_0x27363b),await getMinerReboot(_0xe1103e,_0x184359,_0x17fa69),SSH_PORT_STATE[_0x51407a(0x224)]):(console[_0x51407a(0x1c6)]('SSH\x20NOT\x20enabled\x20for\x20'+_0x27363b,_0x1c76fe),SSH_PORT_STATE[_0x51407a(0x215)]);}let walletsCache={};async function getWallets(_0xaf2504){const _0x6c8127=_0x1d0a09;if(walletsCache[_0xaf2504])return walletsCache[_0xaf2504];const _0x579710=loopback[_0x6c8127(0x297)](_0x6c8127(0x227));return _0x579710['find']()[_0x6c8127(0x205)](_0x3345e5=>{const _0x4716a6=_0x6c8127;return walletsCache=_['groupBy'](_0x3345e5,_0x4716a6(0x1e6)),walletsCache[_0xaf2504];});}let walletInfoCache={};async function getWalletInfo(_0x20e529){const _0x11bb21=_0x1d0a09;if(Object[_0x11bb21(0x1cd)](walletInfoCache)[_0x11bb21(0x306)])return walletInfoCache[_0x20e529];const _0x50a8da=loopback[_0x11bb21(0x297)](_0x11bb21(0x227));return _0x50a8da['find']()[_0x11bb21(0x205)](_0x2aa308=>{const _0x9eec6e=_0x11bb21;return walletInfoCache=_[_0x9eec6e(0x1d5)](_0x2aa308,_0x9eec6e(0x2cf)),walletInfoCache[_0x20e529];});}let poolTemplates={};async function getPoolTemplates(_0x258a44,_0x3b860c,_0xe39bee){const _0x239e40=_0x1d0a09,_0x3a1dba=_0x3b860c&&_0x3b860c[0x0],_0x596f0e=_0x3a1dba?_0x3b860c[_0x239e40(0x30d)](','):_0x258a44;if(_0xe39bee&&poolTemplates[_0x596f0e])return poolTemplates[_0x596f0e];var _0x29d868;_0x3a1dba?_0x29d868={'where':{'ID':{'inq':_0x3b860c}}}:_0x29d868={'where':{'and':[{'hashAlgorithm':_0x258a44},{'priority':{'lt':0x4}}]},'order':_0x239e40(0x2c0)};const _0x5dabd9=loopback[_0x239e40(0x297)](_0x239e40(0x32d));return _0x5dabd9[_0x239e40(0x199)](_0x29d868)[_0x239e40(0x205)](_0x34142d=>{const _0x347479=_0x239e40;if(_0x34142d['length']===0x0){if(_0x3a1dba)throw new Error('No\x20pool\x20templates\x20found\x20with\x20IDs:'+_0x3b860c);throw new Error(_0x347479(0x209)+_0x258a44);}if(_0x3a1dba){const _0xb376cf=_[_0x347479(0x1d5)](_0x34142d,'id');poolTemplates[_0x596f0e]=[];for(var _0xff3925=0x0;_0xff3925<_0x3b860c[_0x347479(0x306)];_0xff3925++){_0xb376cf[_0x3b860c[_0xff3925]]&&poolTemplates[_0x596f0e]['push'](_0xb376cf[_0x3b860c[_0xff3925]]);}}else poolTemplates[_0x596f0e]=_0x34142d;return poolTemplates[_0x596f0e];});}async function getRemotesPoolConfig({minerInfo:_0xed326f,minerTyped:_0x59c0ce,ignoreCache:_0x1f3b3c,apiVersion:_0x202aa8}){const _0x340645=_0x1d0a09;if(!_0xed326f)return null;const {ipAddress:_0x282203}=_0xed326f;if(_0x282203&&(_0x1f3b3c||!_0xed326f[_0x340645(0x272)]||!_0xed326f[_0x340645(0x272)][_0x340645(0x2ed)])){const _0x163d00=await getMinerStatus({'ipAddress':_0x282203,'minerTyped':_0x59c0ce,'apiVersion':_0x202aa8});if(!_0x163d00)return{'pools':[],'frequency':0x0};else{if(!_0x163d00[_0x340645(0x1b4)])return null;}_0xed326f[_0x340645(0x272)]=_0x163d00;}let {pools:_0x44f354,frequency:_0x49da2a,volts:_0xae3536}=_0xed326f[_0x340645(0x272)];return _0x44f354=_0x44f354[_0x340645(0x307)](_0x2c63c2=>{return{'url':_0x2c63c2['url'],'user':_0x2c63c2['user']};}),{'pools':_0x44f354,'frequency':_0x49da2a,'volts':_0xae3536};}function havePoolConfigsChanged({poolConfig:poolConfig={},expectedPoolConfig:expectedPoolConfig={}}){const _0x7a8b69=_0x1d0a09;if(poolConfig[_0x7a8b69(0x2ba)]&&expectedPoolConfig[_0x7a8b69(0x2ba)]&&poolConfig['frequency']!=expectedPoolConfig['frequency'])return!![];if(poolConfig[_0x7a8b69(0x240)]&&expectedPoolConfig[_0x7a8b69(0x240)]&&poolConfig[_0x7a8b69(0x240)]!=expectedPoolConfig[_0x7a8b69(0x240)])return!![];if(!poolConfig[_0x7a8b69(0x2ed)]||poolConfig['pools'][_0x7a8b69(0x306)]<expectedPoolConfig['pools'][_0x7a8b69(0x306)])return!![];for(var _0x3d5e25=0x0;_0x3d5e25<expectedPoolConfig[_0x7a8b69(0x2ed)]['length'];_0x3d5e25++){let _0x470e70=poolConfig['pools'][_0x3d5e25]||{'url':'','user':''},_0x2a7e12=expectedPoolConfig[_0x7a8b69(0x2ed)][_0x3d5e25]||{'stratum':'','username':''};if(!_0x470e70[_0x7a8b69(0x236)]&&!_0x2a7e12[_0x7a8b69(0x2f7)])continue;if(_0x470e70['url']['toLowerCase']()[_0x7a8b69(0x30b)](_0x2a7e12[_0x7a8b69(0x2f7)][_0x7a8b69(0x217)]()['replace'](/[^\/]*\/\//,''))<0x0||_0x470e70[_0x7a8b69(0x216)]!==_0x2a7e12['username'])return!![];}return![];}async function validateMinerConfig({minerInfo:_0xe7897d,apiVersion:_0x563694,dataCenterSettings:_0x22657d,minerConfigOptions:minerConfigOptions=null,poolIDs:poolIDs=null,isBulk:_0x2c768b}){const _0x5f0fda=_0x1d0a09,{accountName:_0x1bcfcf}=_0xe7897d,_0x2a446d=getMinerTypeMap(_0xe7897d),{hashingAlgorithm:_0x1f15e9}=_0x2a446d||{};let _0x59a604;if(!minerConfigOptions){const {frequency:_0xfe1867,volts:_0x5c00e1}=_0xe7897d[_0x5f0fda(0x272)];minerConfigOptions={'frequency':_0xfe1867,'volts':_0x5c00e1};}const _0x426106=await getPoolTemplates(_0x1f15e9,poolIDs,_0x2c768b),_0x1ec759=await getWallets(_0x1bcfcf);_0x59a604=getPoolConfigs({'rawPools':_0x426106,'dataCenterSettings':_0x22657d,'wallets':_0x1ec759,'minerInfo':_0xe7897d,'minerTyped':_0x2a446d});const {pools:_0xb4e596,workerName:_0xabdb36}=_0x59a604,{frequency:_0x39a720,volts:_0x36d1c8}=minerConfigOptions,_0x340d89={'pools':_0xb4e596,'frequency':_0x39a720,'volts':_0x36d1c8},_0x94fe87=await getRemotesPoolConfig({'minerInfo':_0xe7897d,'minerTyped':_0x2a446d,'ignoreCache':!_0x2c768b,'apiVersion':_0x563694});let _0x583c99=![];return _0xabdb36&&_0xabdb36!==_0xe7897d[_0x5f0fda(0x273)]?_0x583c99=!![]:_0x583c99=!_0x94fe87||havePoolConfigsChanged({'poolConfig':_0x94fe87,'expectedPoolConfig':_0x340d89}),{'poolsAreDifferent':_0x583c99,'remotesPools':_0x94fe87,'poolsConfig':_0x340d89,'workerName':_0xabdb36};}async function extractAccountAndWorkerNumber({poolWorkers:poolWorkers=[]}){const _0x1b90b5=_0x1d0a09;if(!poolWorkers['length']||!poolWorkers[0x0])return null;let _0x18e93b=null,_0x2bee5f=null,_0x4f460c=null;const _0x56dd1d=/^([^\.]+)\.((?:[^\.#]*?)(\d+))(#|$)/,_0x331413=/^([^\.]+)\.((?:[^#]*?))(#|$)/;let _0x50e18d=poolWorkers[0x0][_0x1b90b5(0x19f)](_0x56dd1d);if(_0x50e18d)_0x2bee5f=_0x50e18d[0x1],_0x4f460c=_0x50e18d[0x2],_0x18e93b=_0x50e18d[0x3];else{if(/_\d+$/['test'](poolWorkers[0x0])){const _0x8df03b=poolWorkers[0x0]['split']('_');_0x2bee5f=_0x8df03b[0x0],_0x4f460c=poolWorkers[0x0],_0x18e93b=_0x8df03b[0x1];}else{if(_0x331413['test'](poolWorkers[0x0])){_0x50e18d=poolWorkers[0x0][_0x1b90b5(0x19f)](_0x331413),_0x2bee5f=_0x50e18d[0x1],_0x4f460c=_0x50e18d[0x2];const _0xae5d43=_0x50e18d[0x2]['match'](/\D(\d+)$/);_0x18e93b=_0xae5d43?_0xae5d43[0x1]:0x270f;}else{if(poolWorkers[0x1])_0x50e18d=poolWorkers[0x1][_0x1b90b5(0x19f)](_0x56dd1d),_0x50e18d&&(_0x2bee5f=_0x50e18d[0x1],_0x4f460c=_0x50e18d[0x2],_0x18e93b=_0x50e18d[0x3]);else poolWorkers[0x0][_0x1b90b5(0x306)]&&(_0x2bee5f=poolWorkers[0x0],_0x4f460c='',_0x18e93b=0x0);}}}let _0x3371db=await getWalletInfo(_0x2bee5f);return _0x3371db&&(_0x2bee5f=_0x3371db[_0x1b90b5(0x1e6)]),_0x18e93b?{'accountName':_0x2bee5f,'workerName':_0x4f460c,'workerTypeNumber':_0x18e93b}:null;}function getPoolConfigs({rawPools:_0x25e63c,dataCenterSettings:_0x42a8fb,wallets:_0x9d2a30,minerInfo:_0x14e32b,minerTyped:_0xcca871}){const _0x24a5ba=_0x1d0a09,_0x23ce14=getTokenValueMapper({'dataCenterSettings':_0x42a8fb,'wallets':_0x9d2a30,'minerInfo':_0x14e32b,'minerTyped':_0xcca871});let _0x1fba07='';const _0x5ed4e0=_0x25e63c[_0x24a5ba(0x307)]((_0x3f1abe,_0x1416ca)=>{const _0x191975=_0x24a5ba,_0x1f01c0=replaceTokensWithValues(_0x3f1abe[_0x191975(0x300)],_0x23ce14),_0x245393=replaceTokensWithValues(_0x3f1abe[_0x191975(0x26f)],_0x23ce14),_0x45c404=_0x3f1abe[_0x191975(0x2f7)];if(!_0x1fba07){const _0x1fb429=_0x1f01c0[_0x191975(0x28a)]('.')[0x1]||'';if(_0x1fb429[_0x191975(0x30b)](_0x42a8fb[_0x191975(0x2e0)])>-0x1)_0x1fba07=_0x1fb429;else{const _0x12b487=new RegExp('\x5cW(\x5cw*'+_0x42a8fb['locationID']+_0x191975(0x2f2),'i'),_0x2ed169=_0x245393[_0x191975(0x19f)](_0x12b487);_0x2ed169&&(_0x1fba07=_0x2ed169[0x1]||'');}}return{'index':_0x1416ca+0x1,'stratum':_0x45c404,'username':_0x1f01c0,'password':_0x245393};});return{'pools':_0x5ed4e0,'workerName':_0x1fba07};}async function getPoolIDs(_0x1f37cd){const _0x1d4b35=_0x1d0a09;let _0x14b880=[];const _0x1936fe=loopback[_0x1d4b35(0x297)](_0x1d4b35(0x32d));for(var _0x2866a7=0x0;_0x2866a7<0x3;_0x2866a7++){_0x1f37cd['condition']&&_0x1f37cd[_0x1d4b35(0x272)][_0x1d4b35(0x2ed)]&&_0x1f37cd[_0x1d4b35(0x272)]['pools'][_0x2866a7]?_0x14b880[_0x2866a7]=await _0x1936fe[_0x1d4b35(0x199)]({'where':{'stratum':_0x1f37cd[_0x1d4b35(0x272)][_0x1d4b35(0x2ed)][_0x2866a7]['url'][_0x1d4b35(0x2df)](_0x1d4b35(0x2d5),'')}})[_0x1d4b35(0x205)](_0x212976=>{return _0x212976[0x0]?_0x212976[0x0]['id']:0x0;}):_0x14b880[_0x2866a7]=0x0;}return _0x14b880;}function deriveOverclockApi(_0x9f803a,_0x1092c3){const _0x38aeeb=_0x1d0a09;if(softwareVersions[_0x38aeeb(0x23c)]['includes'](_0x9f803a))return _0x38aeeb(0x1fb);else{if(softwareVersions[_0x38aeeb(0x299)]['includes'](_0x9f803a))return _0x38aeeb(0x332);}if(!_0x1092c3)return'';let _0x11b8a2=null;if(/\(/i[_0x38aeeb(0x238)](_0x1092c3))return _0x11b8a2=_0x1092c3['match'](/(\w+)[^\(]+\(\s*(\w+)/),_0x11b8a2[0x1]+'_'+(/vnish/i[_0x38aeeb(0x238)](_0x11b8a2[0x2])?_0x38aeeb(0x23c):_0x11b8a2[0x2]);else{if(_0x1092c3)return _0x11b8a2=_0x1092c3[_0x38aeeb(0x28a)](/\s/),_0x11b8a2[0x0];}}function deriveApiVersion({minerInfo:minerInfo={},minerTyped:_0x4ab1f4}){const _0x3a7f8b=_0x1d0a09;let {apiVersion:_0x208f33,minerType:_0x39120c,brand:_0x519d4c}=_0x4ab1f4||{};if(_0x208f33)return _0x208f33;const {softwareVersion:_0x398196,firmwareFileName:_0x1d22f7,brand:_0x463af3}=minerInfo;_0x208f33=deriveOverclockApi(_0x398196,_0x39120c);if(_0x208f33)return _0x208f33;const _0x213cca=minerInfo[_0x3a7f8b(0x262)]||_0x463af3||_0x519d4c;if(_0x213cca)return _0x213cca;else{if(/updater/i[_0x3a7f8b(0x238)](_0x1d22f7))return'Antminer_updater';}return'Antminer';}function parseMinerSystemInfo(_0x30600b,_0x90ae5b){const _0x2c396e=_0x1d0a09;var _0x1618e7={'Antminer':function(_0x4464f1,_0x27c85b){const _0x82b76=_0x57f1;if(!_0x4464f1[_0x82b76(0x20f)])return null;const {uptime:_0x4f5ab3,curtime:_0x482e2b,macaddr:_0x3c5c3c,ipaddress:_0x875acb,minertype:_0x49ae89,bmminer_version:_0xa4e649,cgminer_version:_0x4ba6b2,ant_hwv:_0x3fad59,hwv:_0x635c47,swv:_0x569959,system_kernel_version:_0x3c1102,system_filesystem_version:_0x1ba4ff,system_logic_version:_0x276954,miner_model:_0x3d6830,hostname:_0x4fc803}=_0x4464f1,_0x3c3098=((_0xa4e649||_0x4ba6b2||'0.0')[_0x82b76(0x19f)](/((?:\d+\.)+\d+)/)||['',_0x82b76(0x2bf)])[0x1];let _0x33d97f=getMinerType(_0x49ae89);const _0x402824=_0xa4e649||_0x4ba6b2?(_0xa4e649?_0x82b76(0x1c9):_0x82b76(0x1ff))+_0x3c3098:'';return _0x27c85b=_0x27c85b||deriveOverclockApi(_0x402824,_0x33d97f),{'minerType':_0x33d97f,'modelType':_0x49ae89,'apiVersion':_0x27c85b,'upTime':_0x4f5ab3,'minerTime':_0x482e2b,'macAddress':_0x3c5c3c,'ipAddress':_0x875acb,'hardwareVersion':_0x3fad59||_0x635c47,'systemKernelVersion':_0x3c1102,'fileSystemTimestamp':_0x1ba4ff,'systemLogicVersion':_0x276954||_0x569959,'softwareVersion':_0x402824};},'Antminer_antpool':function(_0x10d388,_0x3783f1){const _0x4819a7=_0x57f1;if(!_0x10d388[_0x4819a7(0x20f)])return null;const {uptime:_0x148019,curtime:_0x1764b5,macaddr:_0x10f7af,ipaddress:_0x267d7e,minertype:_0xa90890,bmminer_version:_0x27e974,cgminer_version:_0x5da940,ant_hwv:_0x283a16,system_kernel_version:_0x255ad4,system_filesystem_version:_0x56dfe9,system_logic_version:_0x39d473}=_0x10d388,_0x4d1b63=getMinerType(_0xa90890),_0x36e6d5=_0x27e974||_0x5da940;return{'minerType':_0x4d1b63,'modelType':_0xa90890,'apiVersion':_0x3783f1,'upTime':_0x148019,'minerTime':_0x1764b5,'macAddress':_0x10f7af,'ipAddress':_0x267d7e,'hardwareVersion':_0x283a16,'systemKernelVersion':_0x255ad4,'fileSystemTimestamp':_0x56dfe9,'systemLogicVersion':_0x39d473,'softwareVersion':(_0x27e974?_0x4819a7(0x1c9):_0x4819a7(0x1ff))+_0x36e6d5};},'Antminer_updater':function(_0x40f88b,_0x288e10){const _0x459396=_0x57f1;if(!_0x40f88b[_0x459396(0x20f)])return null;const _0x5d482c=getMinerType(_0x40f88b['minertype']),_0x1c93de=_0x40f88b[_0x459396(0x302)]||_0x40f88b[_0x459396(0x2c7)];return{'minerType':_0x5d482c,'modelType':_0x40f88b[_0x459396(0x20f)],'apiVersion':_0x288e10,'macAddress':_0x40f88b['macaddr'],'ipAddress':_0x40f88b[_0x459396(0x1ec)],'hardwareVersion':_0x40f88b[_0x459396(0x32a)],'systemKernelVersion':_0x40f88b[_0x459396(0x2a6)],'fileSystemTimestamp':_0x40f88b[_0x459396(0x1ce)],'systemLogicVersion':_0x40f88b[_0x459396(0x1e4)],'softwareVersion':(_0x40f88b[_0x459396(0x302)]?'bmminer\x20':'cgminer\x20')+_0x1c93de};},'AvalonMiner':function(_0x16cfa9,_0x4d2c60){const _0x5db69e=_0x57f1;_0x16cfa9=JSON['parse']((_0x16cfa9[_0x5db69e(0x1ac)]||_0x16cfa9)['replace'](/^[^{]*{/,'{')[_0x5db69e(0x2df)](/,?\s*}\);\s*UpdatePageCallback[^}]*}\);\s*$/,'}'));const _0x23d07d=getMinerType(_0x16cfa9[_0x5db69e(0x1a1)]);return{'minerType':_0x23d07d,'modelType':_0x16cfa9['hwtype'],'apiVersion':_0x4d2c60,'macAddress':_0x16cfa9[_0x5db69e(0x1f8)],'ipAddress':_0x16cfa9[_0x5db69e(0x290)],'hardwareVersion':'','systemKernelVersion':_0x16cfa9['version'],'fileSystemTimestamp':'','systemLogicVersion':'','softwareVersion':''};},'Innosilicon':function(_0x2f23c6,_0x39872c){const _0xabceb5=_0x57f1;if(!_0x2f23c6[_0xabceb5(0x251)])return null;if(!_0x39872c){if(_0x2f23c6[_0xabceb5(0x2cd)][_0xabceb5(0x2cb)]===_0xabceb5(0x288))_0x39872c=_0xabceb5(0x2b8);else _0x2f23c6['version']['hwver']===_0xabceb5(0x2b4)&&(_0x39872c='Innosilicon');}let _0x31ebf9=_0x39872c+'\x20'+_0x2f23c6[_0xabceb5(0x251)];return{'brand':_0xabceb5(0x229),'minerType':_0x31ebf9,'modelType':_0x31ebf9,'apiVersion':_0x39872c,'macAddress':_0x2f23c6['version'][_0xabceb5(0x1a5)],'ipAddress':_0x2f23c6['network'][_0xabceb5(0x1ec)],'softwareVersion':_0x2f23c6[_0xabceb5(0x2cd)][_0xabceb5(0x1d9)],'hardwareVersion':_0x2f23c6[_0xabceb5(0x2cd)][_0xabceb5(0x2cb)],'systemKernelVersion':'','fileSystemTimestamp':_0x2f23c6[_0xabceb5(0x2cd)][_0xabceb5(0x231)],'systemLogicVersion':''};}};if(!_0x30600b)return null;_0x1618e7['FsMiner']=_0x1618e7[_0x2c396e(0x1c2)],_0x1618e7[_0x2c396e(0x246)]=_0x1618e7[_0x2c396e(0x2fd)],_0x1618e7[_0x2c396e(0x1fd)]=_0x1618e7[_0x2c396e(0x2fd)],_0x1618e7[_0x2c396e(0x1b6)]=_0x1618e7['Antminer'],_0x1618e7[_0x2c396e(0x22b)]=_0x1618e7[_0x2c396e(0x1c2)],_0x1618e7[_0x2c396e(0x1bd)]=_0x1618e7[_0x2c396e(0x245)];let _0x35d333=_0x1618e7[_0x90ae5b];if(!_0x35d333)return console[_0x2c396e(0x1db)](_0x2c396e(0x30a)+_0x90ae5b,_0x30600b),null;let _0x402c3d=_0x35d333(_0x30600b,_0x90ae5b);if(!_0x402c3d)return _0x402c3d;return _0x402c3d['brand']=(_0x402c3d[_0x2c396e(0x262)]||_0x90ae5b)[_0x2c396e(0x19f)](/^([a-z0-9]+)/i)[0x1],_0x402c3d;}function parseKernelLogs(_0xd5237,_0x23b4de=_0x1d0a09(0x1c2),_0x85d5b6){const _0x333d82=_0x1d0a09;function _0x5f2e02(_0x1a990c,_0x12b576,_0x1993ac){_0x1a990c['forEach'](_0x518a8e=>{const _0x45ce9d=_0x57f1;!_0x518a8e[_0x45ce9d(0x221)]&&(_0x518a8e[_0x45ce9d(0x1c8)]=[],_0x518a8e[_0x45ce9d(0x1dc)]['forEach'](_0x5d16b5=>{const _0x28c599=_0x45ce9d;_0x518a8e['reTests'][_0x28c599(0x275)](new RegExp(_0x5d16b5,'i'));}));let _0x5cd76d=0x0;_0x518a8e[_0x45ce9d(0x1c8)]['forEach'](_0x3a4b13=>{const _0x4094f8=_0x45ce9d;_0x3a4b13[_0x4094f8(0x238)](_0x12b576)&&_0x5cd76d++;}),_0x5cd76d==_0x518a8e[_0x45ce9d(0x1c8)]['length']&&(console[_0x45ce9d(0x248)]('Kernel\x20log\x20error\x20parsed:\x20'+_0x518a8e[_0x45ce9d(0x29e)]),_0x1993ac[_0x45ce9d(0x275)](_0x518a8e[_0x45ce9d(0x270)]));});}if(!_0xd5237)return null;!_0xd5237[_0x333d82(0x19f)]&&(_0xd5237=_0xd5237[_0x333d82(0x2bc)]());let _0x420225=[];if(/html/i[_0x333d82(0x238)](_0x85d5b6)){const _0x4c9af9=/hidden["']\s+id\s*=\s*["']\s*cbid\.table\.(\d+)\.(code|cause|time)['"]\s+value\s*=\s*['"]([^'"]+)['"]/g,_0xf14856=/hidden["']\s+id\s*=\s*["']\s*cbid\.table\.(\d+)\.(code|cause|time)['"]\s+value\s*=\s*['"]([^'"]+)['"]/,_0x1cb973=_0xd5237[_0x333d82(0x19f)](_0x4c9af9);for(var _0x36fb83 in _0x1cb973){const _0x203f9d=_0x1cb973[_0x36fb83][_0x333d82(0x19f)](_0xf14856),_0x5a4753=_0x203f9d[0x1]-0x1;!_0x420225[_0x5a4753]&&(_0x420225[_0x5a4753]={}),_0x420225[_0x5a4753][_0x203f9d[0x2]]=_0x203f9d[0x3];}}else _0x420225=_[_0x333d82(0x1dd)](_0xd5237['match'](/Error.+?[\n\r]/g)),_0x420225[_0x333d82(0x306)]&&console[_0x333d82(0x248)](_0x333d82(0x27f),_0x420225);let _0x216a9e=minerApis[(_0x23b4de||'')[_0x333d82(0x217)]()][_0x333d82(0x2ce)]||[];return _0x5f2e02(_0x216a9e,_0xd5237,_0x420225),{'errors':_0x420225};}function parseNetworkDiagnostic(_0x1c3ac3,_0x1003d8=_0x1d0a09(0x1c2)){const _0x233a52=_0x1d0a09;if(!_0x1c3ac3||!_0x1c3ac3[_0x233a52(0x19f)])return _0x1c3ac3;const _0x186c77=_0x1c3ac3[_0x233a52(0x19f)](/\/(\d+(?:\.\d+)?)\//);if(!_0x186c77)return _0x1c3ac3;let _0x500b38=parseFloat(_0x186c77[0x1]);return{'latency':_0x500b38,'diagnosticResponse':_0x1c3ac3};}function getMinerType(_0x4bcf32){const _0x10d2f4=_0x1d0a09;return _0x4bcf32[_0x10d2f4(0x2df)](/\s+\(.*$/,'')[_0x10d2f4(0x2df)](/(\-[^\-]+)+$/,'')[_0x10d2f4(0x25f)]();}function getMinerTypeMap(_0xa1d797){const _0xcd155c=_0x1d0a09,_0xa1de48=getMinerType(_0xa1d797[_0xcd155c(0x2fe)]||_0xa1d797[_0xcd155c(0x235)]);return config['minerTypeMap'][_0xa1de48];}function getMinerFilterClause(_0x52c941){const _0x39a3cc=_0x1d0a09;if(/admin/i[_0x39a3cc(0x238)](_0x52c941[_0x39a3cc(0x2fc)]))return{};let _0x53d617=[{'accountName':new RegExp(_0x39a3cc(0x31d)+_0x52c941[_0x39a3cc(0x1e6)][_0x39a3cc(0x2df)](/^[\s,]+|[\s,]+$/gm,'')['split'](',')['join']('|')+_0x39a3cc(0x1f6),'i')}];if(_0x52c941['filter'])for(var _0x5274ed=0x0;_0x5274ed<_0x52c941[_0x39a3cc(0x285)][_0x39a3cc(0x306)];_0x5274ed++){let _0x28152b=Object[_0x39a3cc(0x333)](_0x52c941['filter'][_0x5274ed])[0x0];if(/^\/[^\/]+\/\w*$/['test'](_0x28152b)){let _0x4bae89=Object[_0x39a3cc(0x1cd)](_0x52c941[_0x39a3cc(0x285)][_0x5274ed])[0x0];_0x52c941['filter'][_0x5274ed][_0x4bae89]=eval(_0x28152b);}_0x53d617[_0x39a3cc(0x275)](_0x52c941[_0x39a3cc(0x285)][_0x5274ed]);}return{'where':{'and':_0x53d617}};};async function parseMinerSettings(_0xbe57b4,_0x475af2,_0x32ea5f){const _0x5d8297=_0x1d0a09;var _0xb2f1a0={'Antminer':function(_0x568009,_0xe1ae2d){const _0x41ea93=_0x57f1,_0x33e348=_0x568009['pools'],_0x359193=_0x568009[_0x41ea93(0x22d)]||0x0,_0x8d08b3=_0x568009[_0x41ea93(0x2c6)]||0x0;return{'pools':_0x33e348,'frequency':_0x359193,'volts':_0x8d08b3};},'Antminer_X19':function(_0x420a41,_0x2c0113){const _0x3a5e32=_0x420a41['POOLS'],_0x411b9c=0x0,_0x1f3f3d=0x0;return{'pools':_0x3a5e32,'frequency':_0x411b9c,'volts':_0x1f3f3d};},'AvalonMiner':function(_0x4f1b02,_0x41b5a1){_0x4f1b02=JSON['parse']((_0x4f1b02['response']||_0x4f1b02)['replace'](/^.*CGConfCallback\(/,'')['replace'](/\)[^\)]*$/,''));const {pool1:_0x23251a,worker1:_0x4a961b,pool2:_0x300f97,worker2:_0x135136,pool3:_0x1c0c2a,worker3:_0x31c5c6}=_0x4f1b02;return{'pools':[{'url':_0x23251a,'user':_0x4a961b},{'url':_0x300f97,'user':_0x135136},{'url':_0x1c0c2a,'user':_0x31c5c6}]};},'Innosilicon':function(_0xfc6ec,_0x394d08){const _0x13c07a=_0x57f1,_0x4c0aef=_0xfc6ec[_0x13c07a(0x2ed)];return{'pools':_0x4c0aef};},'Whatsminer':async function(_0x379781,_0x4a3d4c){const _0x37b05a=_0x57f1;let _0x2f4144='',_0x3f6950,_0x128b5d;if(_0x379781&&_0x379781['DEVS']){const _0x556c4e=_0x379781[_0x37b05a(0x239)][0x0];_0x2f4144=parseInt(parseFloat(_0x556c4e[_0x37b05a(0x1a2)]||0x0)*0x64);if(_0x379781[_0x37b05a(0x29a)]&&_0x379781[_0x37b05a(0x29a)][0x0]&&_0x379781['POOLS'][0x0]['User']){const _0x3e3ba0=_0x379781[_0x37b05a(0x29a)][0x0];_0x3f6950=_[_0x37b05a(0x307)](_0x379781[_0x37b05a(0x29a)],_0x5eeb78=>{const {User:_0x3352fb,URL:_0x18eb0e,Getworks:_0xd3c641,Accepted:_0x2ce0a0,Rejected:_0x92376,Discarded:_0x233525}=_0x5eeb78;return{'user':_0x3352fb,'url':_0x18eb0e,'getworks':_0xd3c641,'accepted':_0x2ce0a0,'rejected':_0x92376,'discarded':_0x233525};});}}return{'frequency':_0x2f4144,'pools':_0x3f6950,'volts':_0x128b5d};}};_0xb2f1a0[_0x5d8297(0x2c8)]=_0xb2f1a0['Whatsminer'],_0xb2f1a0[_0x5d8297(0x2bb)]=_0xb2f1a0['Whatsminer'],_0xb2f1a0['ZigMiner']=_0xb2f1a0[_0x5d8297(0x2fd)],_0xb2f1a0[_0x5d8297(0x1fd)]=_0xb2f1a0['Whatsminer'],_0xb2f1a0[_0x5d8297(0x1fb)]=_0xb2f1a0[_0x5d8297(0x1c2)],_0xb2f1a0['StuMiner']=_0xb2f1a0[_0x5d8297(0x1c2)],_0xb2f1a0[_0x5d8297(0x1bd)]=_0xb2f1a0['AvalonMiner'];const _0x3ff29d=_0xb2f1a0[_0x32ea5f];if(!_0x3ff29d)return console[_0x5d8297(0x1db)](_0x5d8297(0x2c9)+_0x32ea5f,_0xbe57b4),null;const _0x3db12b=_0x3ff29d(_0xbe57b4,_0x475af2);return _0x3db12b;};const rePoolName=/((?:\d+\.){3}\d+|[^\.\:\/]+)(?:\.\w+)\:\d{2,}/;async function getActivePoolName(_0x33574f){const _0x5d5696=_0x1d0a09,_0x17eebf=_0x33574f[_0x5d5696(0x199)](({status:_0x4aa43c})=>/alive/i['test'](_0x4aa43c));let _0x473ff4='',_0x3af9ad;return _0x17eebf&&(_0x3af9ad=await extractAccountAndWorkerNumber({'poolWorkers':[_0x17eebf[_0x5d5696(0x216)]]}),_0x473ff4=(_0x17eebf[_0x5d5696(0x236)][_0x5d5696(0x19f)](rePoolName)||[_0x5d5696(0x24a)])[0x1]),{'poolName':_0x473ff4,'extracted':_0x3af9ad};}async function parseMinerStatus({minerStatus:_0x15c01d,minerTyped:_0x16e958,apiVersion:_0x9b5fad}){const _0x10a4df=_0x1d0a09;var _0x5cbd0f={'Antminer':async function(_0x390adf,_0x95948b){const _0x381b0c=_0x57f1;let _0x42bdd4=0x0,_0x89f702=0x0,_0x540bfb=_0x381b0c(0x318),_0x11b4cf=[],_0x2b6159=[],_0x4c529a=[],_0x2762b6=0x0,_0x303cf1=0x0,_0x412950=0x0,_0x2679d5=[],_0x54b352=[],_0x1416b5={'accountName':'','workerName':'','workerTypeNumber':''},_0x136dba={},_0x1a74ac=0x0,_0x272abd=0x0,_0x40a0b0=0x0,_0x2f1f75=0x0,_0x132988=0x0,_0x167c9d=[0x0],_0x4158b5=0x0,_0x56b6bf=0x0,_0x10963e=0x0;if(_0x390adf&&_0x390adf[_0x381b0c(0x1df)]){console['debug'](global[_0x381b0c(0x2e4)]['Magenta'],_0x381b0c(0x320),_0x390adf[_0x381b0c(0x1df)]),_0x40a0b0=parseInt(_0x390adf[_0x381b0c(0x1df)][_0x381b0c(0x1b4)]||'0',0xa),_0x42bdd4=parseFloat(_0x390adf[_0x381b0c(0x1df)][_0x381b0c(0x1c5)]||'0'),_0x89f702=parseFloat(_0x390adf[_0x381b0c(0x1df)][_0x381b0c(0x21b)]||'0'),_0x10963e=parseInt(_0x390adf[_0x381b0c(0x1df)][_0x381b0c(0x277)]||'0',0xa),_0x56b6bf=parseInt(_0x390adf[_0x381b0c(0x1df)][_0x381b0c(0x317)]||'0',0xa),_0x2f1f75=parseInt(_0x390adf[_0x381b0c(0x1df)][_0x381b0c(0x2bd)]||'0',0xa),_0x132988=parseInt(_0x390adf[_0x381b0c(0x1df)]['rejected']||'0',0xa),_0x167c9d=[parseInt(_0x390adf['summary']['hw']||'0',0xa)],_0x4158b5=parseFloat(_0x390adf[_0x381b0c(0x1df)]['utility']||'0'),_0x54b352=_0x390adf[_0x381b0c(0x2ed)]||[];const _0x37fc72=_0x54b352[_0x381b0c(0x199)](({status:_0x4cf0f7})=>/alive/i[_0x381b0c(0x238)](_0x4cf0f7));_0x37fc72&&(_0x1416b5=await extractAccountAndWorkerNumber({'poolWorkers':[_0x37fc72[_0x381b0c(0x216)]]}),_0x540bfb=(_0x37fc72[_0x381b0c(0x236)]['match'](rePoolName)||[_0x381b0c(0x24a)])[0x1]);if(_0x390adf[_0x381b0c(0x204)]&&_0x390adf[_0x381b0c(0x204)][0x0]){let _0x32cfe5=_0x390adf['devs'][0x0];if(isNaN(_0x32cfe5[_0x381b0c(0x1e7)])){let _0x229662=/frequency1/i[_0x381b0c(0x238)](_0x32cfe5[_0x381b0c(0x1e7)])?_0x32cfe5['freq']:'freq\x22:\x22'+_0x32cfe5['freq'];_0x229662=_0x229662['replace'](/":"/g,'=')[_0x381b0c(0x2df)](/=/g,_0x381b0c(0x2e9))[_0x381b0c(0x2df)](/,/g,'\x22,\x22')[_0x381b0c(0x2df)](/"{/g,'{\x22')['replace'](/}"/g,'\x22}')[_0x381b0c(0x2df)](/{""}/g,'{}')['replace'](/(:"[^,]+"):"[^,]+",/g,_0x381b0c(0x1ae));try{_0x136dba=JSON[_0x381b0c(0x244)]('{\x22'+_0x229662+'\x22}');}catch(_0x495fd1){console['warn'](_0x381b0c(0x206),_0x32cfe5[_0x381b0c(0x1e7)]);}const _0x33c86a=_0x95948b&&_0x95948b['tempNamesRE']?new RegExp(_0x95948b[_0x381b0c(0x19a)]+'=(\x5cd+),','g'):/temp\d=(\d\d+)\,/g,_0x3fec78=_0x95948b&&_0x95948b['freqNamesRE']?new RegExp(_0x95948b[_0x381b0c(0x276)]+_0x381b0c(0x241),'g'):/freq(?:_avg)\d=(\d\d+)[\,\.]/g,_0x3c0de0=_0x95948b&&_0x95948b[_0x381b0c(0x2ef)]?new RegExp(_0x95948b[_0x381b0c(0x2ef)]+_0x381b0c(0x1b8),'g'):/fan\d=(\d\d+)\,/g;_0x11b4cf=(_0x32cfe5[_0x381b0c(0x1e7)][_0x381b0c(0x19f)](_0x33c86a)||[_0x381b0c(0x260)])['map'](_0x4a47bb=>parseInt(_0x4a47bb['match'](/=(\d+),/)[0x1])),_0x4c529a=(_0x32cfe5['freq'][_0x381b0c(0x19f)](_0x3fec78)||[_0x381b0c(0x260)])[_0x381b0c(0x307)](_0x1265c2=>parseInt(_0x1265c2[_0x381b0c(0x19f)](/=(\d+)[,\.]/)[0x1])),_0x2b6159=(_0x32cfe5['freq'][_0x381b0c(0x19f)](_0x3c0de0)||[_0x381b0c(0x260)])[_0x381b0c(0x307)](_0xe5d7bc=>parseInt(_0xe5d7bc[_0x381b0c(0x19f)](/=(\d+)[,\.]/)[0x1]));}else{_0x11b4cf=_0x390adf[_0x381b0c(0x204)]['map'](_0x33fadb=>{const _0x194b59=_0x381b0c;if(!_0x33fadb[_0x194b59(0x23f)])return _0x33fadb[_0x194b59(0x287)];let _0x12c5e2=_0x33fadb['temp2']+'-'+(_0x33fadb[_0x194b59(0x287)]||0x0),_0x76e87a=_0x12c5e2[_0x194b59(0x2df)](/(^-|-$)/,'')['split'](/\-+/);return Math['max'](..._0x76e87a);}),_0x4c529a=_0x390adf[_0x381b0c(0x204)]['map'](_0x24ba75=>!isNaN(_0x24ba75['freq'])?parseInt(_0x24ba75[_0x381b0c(0x1e7)]):0x0);const _0x1ed475=[_0x32cfe5[_0x381b0c(0x1e1)],_0x32cfe5[_0x381b0c(0x2a2)],_0x32cfe5[_0x381b0c(0x24f)],_0x32cfe5[_0x381b0c(0x2b2)],_0x32cfe5[_0x381b0c(0x1a3)],_0x32cfe5[_0x381b0c(0x314)],_0x32cfe5['fan7'],_0x32cfe5[_0x381b0c(0x1ed)]];_0x2b6159=_0x1ed475[_0x381b0c(0x285)](_0x333df6=>_0x333df6>0x0);_0x2b6159[_0x381b0c(0x306)]%0x2===0x1&&_0x2b6159[_0x381b0c(0x275)](0x0);const _0x28aaae=_0x390adf[_0x381b0c(0x204)][_0x381b0c(0x307)](_0x227d23=>_0x227d23[_0x381b0c(0x19e)]||_0x227d23[_0x381b0c(0x32c)]);_0x1a74ac=_0x28aaae[_0x381b0c(0x243)]((_0xec1022,_0x1a8538)=>Math[_0x381b0c(0x29f)](parseInt(_0xec1022,0xa),parseInt(_0x1a8538,0xa)));_0x1a74ac>=0x64&&(_0x1a74ac=_0x1a74ac/(_0x1a74ac>=0x2710?0x3e8:0x64));const _0x107b8f=_0x390adf[_0x381b0c(0x204)][_0x381b0c(0x307)](_0x4a98a4=>_0x4a98a4[_0x381b0c(0x2a7)]);_0x272abd=_0x107b8f[_0x381b0c(0x243)]((_0x1e31cb,_0x8a8689)=>parseInt(_0x1e31cb,0xa)+parseInt(_0x8a8689,0xa)),_0x167c9d=_0x390adf[_0x381b0c(0x204)]['map'](_0x3ef9e1=>_0x3ef9e1['hw']);}_0x2762b6=_0x4c529a[0x0]||_0x4c529a[0x1]||_0x4c529a[0x2]||parseInt(_0x136dba[_0x381b0c(0x1e7)]),_0x303cf1=_0x2b6159,_0x412950=_0x2b6159[_0x2b6159[_0x381b0c(0x306)]-0x1];if(_0x95948b&&_0x95948b[_0x381b0c(0x25e)]&&_0x32cfe5['freq'])for(var _0xc2ca70=0x0;_0xc2ca70<_0x95948b[_0x381b0c(0x327)]['length'];_0xc2ca70++){let _0x20fd3c=_0x95948b[_0x381b0c(0x327)][_0xc2ca70],_0x27a078=new RegExp(_0x381b0c(0x2f8)+_0x95948b[_0x381b0c(0x327)][_0xc2ca70]+_0x381b0c(0x252)),_0x5be26c=_0x95948b[_0x381b0c(0x25e)]-((_0x32cfe5[_0x381b0c(0x1e7)]['match'](_0x27a078)||['',''])[0x1][_0x381b0c(0x19f)](/o/g)||[])[_0x381b0c(0x306)];_0x5be26c>0x0&&_0x2679d5[_0x381b0c(0x275)]({'chain':_0x20fd3c,'chipFailCount':_0x5be26c});;}}}let _0x49340a=0xbb8;_0x95948b[_0x381b0c(0x2d4)]&&(_0x49340a=parseInt((_0x95948b['powerEfficiency']||0x0)*_0x89f702));(_0x272abd<=0x0||_0x272abd>_0x49340a*1.2)&&(_0x272abd=_0x49340a>0x2710?CONSUMPTION_DEFAULT:_0x49340a);let _0x19d76a={'hashRate':_0x42bdd4,'hashRateAvg':_0x89f702,'poolName':_0x540bfb,'temperatures':_0x11b4cf,'frequency':_0x2762b6,'pools':_0x54b352,'intakeSpeed':_0x303cf1,'exhaustSpeed':_0x412950,'cardFailureChains':_0x2679d5,'cardStatus':_0x136dba,'elapsed':_0x40a0b0,'volts':_0x1a74ac,'consumption':_0x272abd,'accepted':_0x2f1f75,'rejected':_0x132988,'hardwareErrors':_0x167c9d,'sharesPerMinute':_0x4158b5,'foundBlocks':_0x10963e,'workGetCount':_0x56b6bf};return console[_0x381b0c(0x248)](global['colorize'][_0x381b0c(0x1c1)],_0x381b0c(0x1a9),_0x19d76a,_0x1416b5),{..._0x19d76a,..._0x1416b5};},'Antminer_X19':async function(_0x495922,_0x54195a){const _0x6c9163=_0x57f1;let _0x368c10=0x0,_0x10bee1=0x0,_0x2d3ed9='DEAD',_0x53fabe=[],_0x59d22f=[],_0x2f034b=[],_0x3176c3=0x0,_0x381d65=0x0,_0x3fb383=0x0,_0x29730b=[],_0x7874fd={'accountName':'','workerName':'','workerTypeNumber':''},_0x51f854={},_0x21c77a=0x0,_0x29a4ea=0x0;const _0x3950c9=_0x495922[_0x6c9163(0x1df)]||_0x495922[_0x6c9163(0x32f)][0x0];let {Accepted:_0x2104f5=0x0,Rejected:_0x441b1f=0x0,Elapsed:_0x440a9e=0x0,Getwork:_0x290c65=0x0,'Found\x20Blocks':_0x406742=0x0,'Hardware\x20Errors':_0x51bf2d,Utility:_0x2f3e10=0x0}=_0x3950c9||{};_0x51bf2d=[_0x51bf2d||0x0];const _0x1956c3=(_0x495922[_0x6c9163(0x2ed)]||_0x495922[_0x6c9163(0x29a)])['map'](({User:_0xa2497a,URL:_0xa5c903,Status:_0x1cf7f2,Getworks:_0x53d998,Accepted:_0x4f2005,Rejected:_0x359ee3,Discarded:_0x526ed1})=>({'user':_0xa2497a,'url':_0xa5c903,'status':_0x1cf7f2,'getworks':_0x53d998,'accepted':_0x4f2005,'rejected':_0x359ee3,'discarded':_0x526ed1}));if(_0x3950c9){console[_0x6c9163(0x248)](global[_0x6c9163(0x2e4)]['Magenta'],_0x6c9163(0x320),_0x3950c9),_0x368c10=parseFloat(_0x3950c9[_0x6c9163(0x336)]||'0'),_0x10bee1=parseFloat(_0x3950c9['GHS\x20av']||'0');if(_0x54195a&&_0x54195a[_0x6c9163(0x327)]){_0x51f854=_0x3950c9[_0x6c9163(0x1e9)]||_0x495922['stats'][0x1];for(var _0x16ecf1=0x0;_0x16ecf1<_0x54195a[_0x6c9163(0x327)][_0x6c9163(0x306)];_0x16ecf1++){const _0x2c931d=_0x54195a[_0x6c9163(0x327)][_0x16ecf1],_0x1918ad=_0x51f854[_0x6c9163(0x32b)+_0x2c931d]-_0x51f854['chain_acs'+_0x2c931d];if(!_0x1918ad)continue;const _0x43efb5=_0x1918ad[_0x6c9163(0x2df)](/[^o]/ig,'')[_0x6c9163(0x306)];_0x43efb5>0x0&&_0x29730b[_0x6c9163(0x275)]({'cardId':_0x2c931d,'chipFailCount':_0x43efb5});;let _0x42b1f2=_0x51f854['temp_chip'+_0x2c931d]||_0x51f854[_0x6c9163(0x279)+_0x2c931d],_0x5244d6=_0x42b1f2[_0x6c9163(0x28a)]('-')[_0x6c9163(0x307)](_0x5c5d5c=>parseInt(_0x5c5d5c||'0'));_0x53fabe[_0x6c9163(0x275)](Math[_0x6c9163(0x29f)](..._0x5244d6)),_0x2f034b[_0x6c9163(0x275)](_0x51f854[_0x6c9163(0x1e7)+_0x2c931d]);}_0x59d22f=[_0x51f854['fan1'],_0x51f854['fan2'],_0x51f854['fan3'],_0x51f854[_0x6c9163(0x2b2)]],_0x3176c3=average(_0x2f034b),_0x381d65=_0x59d22f,_0x3fb383=_0x59d22f[_0x59d22f['length']-0x1];}}const _0x4c1511=_0x1956c3[_0x6c9163(0x199)](({status:_0x57ac8a})=>/alive/i[_0x6c9163(0x238)](_0x57ac8a));_0x4c1511&&(_0x7874fd=await extractAccountAndWorkerNumber({'poolWorkers':[_0x4c1511['user']]}),_0x2d3ed9=(_0x4c1511[_0x6c9163(0x236)][_0x6c9163(0x19f)](rePoolName)||[_0x6c9163(0x24a)])[0x1]);let _0xa18f1f=0xbb8;_0x54195a[_0x6c9163(0x2d4)]&&(_0xa18f1f=parseInt((_0x54195a[_0x6c9163(0x2d4)]||0x0)*_0x10bee1));(_0x29a4ea<=0x0||_0x29a4ea>_0xa18f1f*1.2)&&(_0x29a4ea=_0xa18f1f>0x2710?CONSUMPTION_DEFAULT:_0xa18f1f);let _0x2d0407={'hashRate':_0x368c10,'hashRateAvg':_0x10bee1,'poolName':_0x2d3ed9,'temperatures':_0x53fabe,'frequency':_0x3176c3,'pools':_0x1956c3,'intakeSpeed':_0x381d65,'exhaustSpeed':_0x3fb383,'cardFailureChains':_0x29730b,'cardStatus':_0x51f854,'elapsed':_0x440a9e,'volts':_0x21c77a,'consumption':_0x29a4ea,'accepted':_0x2104f5,'rejected':_0x441b1f,'hardwareErrors':_0x51bf2d,'sharesPerMinute':_0x2f3e10,'foundBlocks':_0x406742,'workGetCount':_0x290c65};return console['debug'](global[_0x6c9163(0x2e4)]['Green'],_0x6c9163(0x1a9),_0x2d0407,_0x7874fd),{..._0x2d0407,..._0x7874fd};},'AvalonMiner':async function(_0x40c236,_0x412bce){const _0x526af8=_0x57f1,_0xcb750f=JSON[_0x526af8(0x244)]((_0x40c236['response']||_0x40c236)[_0x526af8(0x2df)](/^[^{]*{/,'{')[_0x526af8(0x2df)](/,?\s*}\);\s*UpdatePageCallback[^}]*}\);\s*$/,'}')[_0x526af8(0x2df)](/[^\x1F-\x7F]+/g,'')['replace'](/":([^"][^,"]*)"?([,}])/g,'\x22:\x22$1\x22$2'));let {elapsed:_0xc1830b,av:_0x1e3e58,url:_0x280c7c,worker:_0x5e0c17,accepted:_0x2fd584,reject:_0x357390,temperature:_0x3d21c3,fan:_0x1321ee,hash_5m:_0x5985a9}=_0xcb750f,_0x5b33be,_0x3ca71b;_0x5985a9=_0x5985a9*0x3e8,_0x1e3e58=_0x1e3e58*0x3e8;const _0x8db54e=[(_0x3d21c3[_0x526af8(0x19f)](/\/\s(\d+)/)||[0x0])[0x1]],_0x2c0e55=_0x1321ee*0x46,_0x4524c9=_0x2c0e55,_0x6a7163=[{'url':_0x280c7c,'user':_0x5e0c17}],_0x188fc5=_0xc1830b[_0x526af8(0x19f)](/(?:(\d+)\s+d\s)?(?:(\d+)\s+h\s)?(?:(\d+)\s+m\s)?(?:(\d+)\s+s\s?)?/i);_0x188fc5[_0x526af8(0x306)]&&(_0xc1830b=parseInt(_0x188fc5[0x1]||0x0)*0x15180+parseInt(_0x188fc5[0x2]||0x0)*0xe10+parseInt(_0x188fc5[0x3]||0x0)*0x3c+parseInt(_0x188fc5[0x4]||0x0));if(_0x6a7163[0x0]&&_0x6a7163[0x0]['user']){const _0x404045=_0x6a7163[_0x526af8(0x199)](({status:_0x1bc23f})=>/alive/i['test'](_0x1bc23f))||_0x6a7163[0x0];_0x5b33be=await extractAccountAndWorkerNumber({'poolWorkers':[_0x404045['user']||_0x6a7163[0x0]?.[_0x526af8(0x216)]]}),_0x3ca71b=(_0x404045[_0x526af8(0x236)][_0x526af8(0x19f)](rePoolName)||['Unknown'])[0x1];}const _0x195225=parseInt((_0x412bce[_0x526af8(0x2d4)]||0x0)*_0x1e3e58);let _0x4aa13d={'hashRate':_0x5985a9,'hashRateAvg':_0x1e3e58,'poolName':_0x3ca71b,'temperatures':_0x8db54e,'pools':_0x6a7163,'intakeSpeed':_0x2c0e55,'exhaustSpeed':_0x4524c9,'elapsed':_0xc1830b,'consumption':_0x195225,'accepted':_0x2fd584,'rejected':_0x357390};return console['debug'](global[_0x526af8(0x2e4)][_0x526af8(0x1c1)],_0x526af8(0x1a9),_0x4aa13d,_0x5b33be),{..._0x4aa13d,..._0x5b33be};},'Dragonmint':async function(_0x5297ca,_0x533566){const _0x56f238=_0x57f1;let _0x2f8ebb=0x0,_0xf31999=0x0,_0x2f2939='DEAD',_0x138268=[],_0x438e56=0x0,_0x4a8bc0=0x0,_0x44e91e=0x0,_0x112407=[],_0x484520=[],_0x260a21={'accountName':'','workerName':'','workerTypeNumber':''},_0x46fdbb={},_0x4f7be4=0x0;const _0x301f42=_0x5297ca?.[_0x56f238(0x239)]||_0x5297ca?.[_0x56f238(0x204)]||[],_0x18028a=_0x301f42[0x0];if(_0x18028a){const _0x18fea9=_[_0x56f238(0x307)](_0x301f42,'MHS\x20av')[_0x56f238(0x1ef)]([0x0]),_0x522c87=_[_0x56f238(0x307)](_0x301f42,_0x56f238(0x219))[_0x56f238(0x1ef)]([0x0]);_0x2f8ebb=parseInt(_0x18fea9['reduce']((_0xd08a85,_0x4c666c)=>(_0xd08a85||0x0)+(_0x4c666c||0x0))/0x3e8),_0xf31999=parseInt(_0x522c87[_0x56f238(0x243)]((_0xb162c,_0x3f003c)=>(_0xb162c||0x0)+(_0x3f003c||0x0))/0x3e8),_0x438e56=parseInt(parseFloat(_0x18028a['Utility']||0x0)*0x64),_0x138268=_[_0x56f238(0x307)](_0x301f42,_0x56f238(0x2f5)),_0x46fdbb=_0x5297ca[_0x56f238(0x193)],_0x4f7be4=parseInt(_0x18028a[_0x56f238(0x1e8)]);const _0x16989d=_0x5297ca?.[_0x56f238(0x29a)]||_0x5297ca?.[_0x56f238(0x2ed)]||[];_0x484520=_0x16989d['map'](({User:_0x57497d,URL:_0x31639a,Status:_0xe99339,Getworks:_0x344ed5,Accepted:_0x597786,Rejected:_0x46c42c,Discarded:_0x1c086c})=>({'user':_0x57497d,'url':_0x31639a,'status':_0xe99339,'getworks':_0x344ed5,'accepted':_0x597786,'rejected':_0x46c42c,'discarded':_0x1c086c}));const _0x245381=_0x484520[_0x56f238(0x199)](({status:_0x47422e})=>/alive/i[_0x56f238(0x238)](_0x47422e));_0x245381&&(_0x260a21=await extractAccountAndWorkerNumber({'poolWorkers':[_0x245381[_0x56f238(0x216)]]}),_0x2f2939=(_0x245381[_0x56f238(0x236)][_0x56f238(0x19f)](rePoolName)||[_0x56f238(0x24a)])[0x1]);const _0x19123f=_0x5297ca?.[_0x56f238(0x289)]||_0x5297ca?.[_0x56f238(0x312)];_0x19123f&&(_0x4a8bc0=parseInt(_0x19123f['Fan\x20duty'])/0x64*0x1964,_0x44e91e=parseInt(_0x19123f[_0x56f238(0x2a4)])/0x64*0x1964);const _0x40802c=_0x5297ca?.[_0x56f238(0x32f)]||_0x5297ca?.['stats'];_0x40802c&&(_0x4a8bc0=parseInt((JSON[_0x56f238(0x321)](_0x40802c)[_0x56f238(0x19f)](/fan1\[(\d+)\]/i)||[0x0])[0x1]),_0x44e91e=parseInt((JSON[_0x56f238(0x321)](_0x40802c)[_0x56f238(0x19f)](/fan2\[(\d+)\]/i)||[0x0])[0x1]));}const _0x382bf6=parseInt((_0x533566[_0x56f238(0x2d4)]||0x0)*_0xf31999);return{'hashRate':_0x2f8ebb,'hashRateAvg':_0xf31999,'poolName':_0x2f2939,'temperatures':_0x138268,'frequency':_0x438e56,'pools':_0x484520,'intakeSpeed':_0x4a8bc0,'exhaustSpeed':_0x44e91e,'cardFailureChains':_0x112407,'cardStatus':_0x46fdbb,'elapsed':_0x4f7be4,'consumption':_0x382bf6,..._0x260a21};},'Innosilicon':async function(_0x917bca,_0x93f0e3){const _0xff88d4=_0x57f1;let _0x3d5292=0x0,_0x46c05c=0x0,_0x301744=_0xff88d4(0x318),_0x14d9db=[],_0x3ced2c=0x0,_0x5326d7=0x0,_0x40f1c0=0x0,_0x9c871f=[],_0x5abe73=[],_0x189ac5={'accountName':'','workerName':'','workerTypeNumber':''},_0x646fe8={},_0x136559=0x0;if(_0x917bca&&_0x917bca[_0xff88d4(0x239)]){const _0x10107e=_0x917bca[_0xff88d4(0x239)][0x0],_0x75a994=_[_0xff88d4(0x307)](_0x917bca[_0xff88d4(0x239)],_0xff88d4(0x219))[_0xff88d4(0x1ef)]([0x0]),_0x4a7dcd=_[_0xff88d4(0x307)](_0x917bca['DEVS'],_0xff88d4(0x219))['concat']([0x0]);_0x3d5292=parseInt(_0x75a994[_0xff88d4(0x243)]((_0x4793ae,_0x62c1ae)=>(_0x4793ae||0x0)+(_0x62c1ae||0x0))/0x3e8),_0x46c05c=parseInt(_0x4a7dcd[_0xff88d4(0x243)]((_0x21798f,_0x41ce83)=>(_0x21798f||0x0)+(_0x41ce83||0x0))/0x3e8),_0x3ced2c=parseInt(parseFloat(_0x10107e['Utility']||0x0)*0x64),_0x14d9db=_[_0xff88d4(0x307)](_0x917bca['DEVS'],_0xff88d4(0x2f5)),_0x646fe8=_0x917bca[_0xff88d4(0x32f)],_0x136559=parseInt(_0x10107e[_0xff88d4(0x1e8)]),_0x5abe73=_[_0xff88d4(0x307)](_0x917bca[_0xff88d4(0x29a)]||[],_0x29045a=>{const _0x4a7b85=_0xff88d4;return{'user':_0x29045a[_0x4a7b85(0x315)],'url':_0x29045a[_0x4a7b85(0x2de)],'getworks':_0x29045a[_0x4a7b85(0x2c5)],'accepted':_0x29045a[_0x4a7b85(0x2b7)],'rejected':_0x29045a[_0x4a7b85(0x19c)],'discarded':_0x29045a[_0x4a7b85(0x30e)]};});const _0x2387ad=_0x5abe73[0x0];_0x2387ad&&(_0x189ac5=await extractAccountAndWorkerNumber({'poolWorkers':[_0x2387ad[_0xff88d4(0x216)]]}),_0x301744=(_0x2387ad[_0xff88d4(0x236)]['match'](rePoolName)||[_0xff88d4(0x24a)])[0x1]);if(_0x917bca[_0xff88d4(0x289)]){const _0x5b72b0=_0x917bca[_0xff88d4(0x289)];_0x5326d7=parseInt(_0x5b72b0[_0xff88d4(0x2a4)])/0x64*0x1964,_0x40f1c0=parseInt(_0x5b72b0[_0xff88d4(0x2a4)])/0x64*0x1964;}}const _0x4d5d48=parseInt((_0x93f0e3[_0xff88d4(0x2d4)]||0x0)*_0x46c05c);return{'hashRate':_0x3d5292,'hashRateAvg':_0x46c05c,'poolName':_0x301744,'temperatures':_0x14d9db,'frequency':_0x3ced2c,'pools':_0x5abe73,'intakeSpeed':_0x5326d7,'exhaustSpeed':_0x40f1c0,'cardFailureChains':_0x9c871f,'cardStatus':_0x646fe8,'elapsed':_0x136559,'consumption':_0x4d5d48,..._0x189ac5};},'StuMiner':async function(_0x2c51f7,_0x5acf6d){const _0x41e4c9=_0x57f1,{'ghsav':_0x391472,elapsed:_0x52a719,'foundblocks':_0x198854,'utility':_0xef3870,'fan1':_0x412357,'fan2':_0x52418a,'wu':_0x3c5d50}=_0x2c51f7['summary'],_0x3b1f79=_0x2c51f7['devs'],_0x10d16b=_0x3b1f79[_0x41e4c9(0x307)](_0x407e8e=>parseFloat(_0x407e8e[_0x41e4c9(0x31e)]||0x0)),_0xf2fa7=_0x3b1f79[_0x41e4c9(0x243)]((_0x428cb2,_0x314274)=>_0x428cb2+parseInt(_0x314274['dev_accepted'],0xa),0x0),_0x4abd54=_0x3b1f79[_0x41e4c9(0x243)]((_0x368fa6,_0x5cd32c)=>_0x368fa6+parseInt(_0x5cd32c['dev_rejected'],0xa),0x0),_0x4651b3=_0x3b1f79['reduce']((_0x540a98,_0x251869)=>Math[_0x41e4c9(0x29f)](parseInt(_0x540a98[_0x41e4c9(0x201)],0xa),parseInt(_0x251869[_0x41e4c9(0x201)],0xa)),0x0),_0x4a2229=_0x3b1f79[_0x41e4c9(0x307)](_0x1754ad=>parseFloat(_0x1754ad['dev_ghs15m']||0x0))[_0x41e4c9(0x243)]((_0x10538b,_0x2b0769)=>_0x10538b+_0x2b0769,0x0),_0x53a9fc=parseInt((_0x5acf6d[_0x41e4c9(0x2d4)]||0x0)*parseInt(_0x391472||0x0,0xa));let _0x5d8179={'hashRate':_0x4a2229,'hashRateAvg':_0x391472,'elapsed':_0x52a719,'accepted':_0xf2fa7,'rejected':_0x4abd54,'sharesPerMinute':_0xef3870,'exhaustSpeed':_0x52418a,'intakeSpeed':_0x412357,'temperatures':_0x10d16b,'frequency':_0x4651b3,'consumption':_0x53a9fc,'foundBlocks':_0x198854,'workGetCount':_0x3c5d50},_0xc6892d,_0x296535,_0x4929c;if(_0x2c51f7[_0x41e4c9(0x2ed)]&&_0x2c51f7[_0x41e4c9(0x2ed)][0x0]){const _0x134394=_0x2c51f7[_0x41e4c9(0x2ed)][0x0];_0xc6892d=_0x2c51f7[_0x41e4c9(0x2ed)]['map'](_0x58f967=>{const _0x194555=_0x41e4c9;return{'user':_0x58f967[_0x194555(0x216)],'url':_0x58f967[_0x194555(0x236)]};});const _0x492216=_0xc6892d['map'](_0x291bfd=>_0x291bfd['user']);_0x296535=await extractAccountAndWorkerNumber({'poolWorkers':_0x492216}),_0x4929c=(_0x134394[_0x41e4c9(0x236)][_0x41e4c9(0x19f)](/((?:\d+\.){3}\d+|[^\.\:\/]+)(?:\.\w+)\:\d{2,}/)||[_0x41e4c9(0x24a)])[0x1];}return console[_0x41e4c9(0x248)](global[_0x41e4c9(0x2e4)][_0x41e4c9(0x1ee)],_0x41e4c9(0x20d),_0x5d8179,_0x296535,_0xc6892d,_0x4929c),{..._0x296535,..._0x5d8179,'pools':_0xc6892d,'poolName':_0x4929c};},'Whatsminer':async function(_0x344660,_0x4d4712){const _0x31d286=_0x57f1,{'MHS\x205s':_0x100a71,'MHS\x20av':_0x5167f4,'GHS\x205s':_0x4d28ed,'GHS\x20av':_0x147e11,'Temperature':_0x447a03,'freq_avg':_0x55d173,'Elapsed':_0x5ec76b,'Voltage':_0x11bd91,'Power':_0xb0d5cf,'Accepted':_0x4c0a4b,'Fan\x20Speed\x20In':_0x5a252f,'Fan\x20Speed\x20Out':_0x12cb18,'Rejected':_0x5bc9e5,'Hardware\x20Errors':_0x1b4335,'Utility':_0x1f04ad,'Found\x20Blocks':_0x2a087b,'Getworks':_0x22f7d6}=_0x344660['summary'];let _0x406b10={'hashRate':_0x100a71?_0x100a71/0x3e8:_0x4d28ed,'hashRateAvg':_0x5167f4?_0x5167f4/0x3e8:_0x147e11,'elapsed':_0x5ec76b,'volts':_0x11bd91,'consumption':_0xb0d5cf,'accepted':_0x4c0a4b,'rejected':_0x5bc9e5,'hardwareErrors':_0x1b4335,'sharesPerMinute':_0x1f04ad,'exhaustSpeed':_0x12cb18,'intakeSpeed':_0x5a252f,'frequency':_0x55d173,'foundBlocks':_0x2a087b,'workGetCount':_0x22f7d6};!isNaN(_0x406b10[_0x31d286(0x2d3)])&&parseInt(_0x406b10[_0x31d286(0x2d3)])>0xf4240&&(_0x406b10['hashRate']=_0x406b10[_0x31d286(0x2d3)]/0x3e8);!isNaN(_0x406b10['hashRateAvg'])&&parseInt(_0x406b10['hashRateAvg'])>0xf4240&&(_0x406b10[_0x31d286(0x31a)]=_0x406b10[_0x31d286(0x31a)]/0x3e8);_0x406b10['hardwareErrors']=[_0x1b4335],_0x406b10['temperatures']=[_0x447a03],_0x406b10[_0x31d286(0x240)]=parseInt(_0x406b10[_0x31d286(0x240)]/0xa)/0xa;let _0x28d1d0=_0x344660[_0x31d286(0x2ed)]||_0x344660[_0x31d286(0x29a)],_0x1220a9,_0x1b3918=_0x31d286(0x318);_0x28d1d0&&(_0x28d1d0=_0x28d1d0[_0x31d286(0x307)](({User:_0x41ba90,URL:_0x446806,Status:_0x1c2ca4,Getworks:_0x3861da,Accepted:_0x3cecef,Rejected:_0x2fb9ca,Discarded:_0x423172})=>({'user':_0x41ba90,'url':_0x446806,'status':_0x1c2ca4,'getworks':_0x3861da,'accepted':_0x3cecef,'rejected':_0x2fb9ca,'discarded':_0x423172})));const _0x51cea8=_0x28d1d0?_0x28d1d0[0x0]:null;_0x51cea8&&(_0x1220a9=await extractAccountAndWorkerNumber({'poolWorkers':[_0x51cea8['user']]}),_0x1b3918=(_0x51cea8[_0x31d286(0x236)][_0x31d286(0x19f)](rePoolName)||['Unknown'])[0x1]);const _0x3e5201=[];return console[_0x31d286(0x248)](global[_0x31d286(0x2e4)]['Purple'],'Whatsminer\x20parsing\x20miner\x20status\x20result',_0x406b10,_0x1220a9,_0x28d1d0,_0x1b3918,_0x3e5201),{..._0x1220a9,..._0x406b10,'pools':_0x28d1d0,'poolName':_0x1b3918};},'ZigMiner':async function(_0x3bc00e,_0x3a45b3){const _0x3204ac=_0x57f1,{hashRate:_0x2a9630,accepted:_0x5498db,rejected:_0x3d2d30,temperatures:_0x53bbc3,'upTime':_0x23e3c2,'fanIn':_0x492354,'fanOut':_0xde81fe,'errors':_0x4ece4b}=_0x3bc00e[_0x3204ac(0x1df)];let _0x2c013e={'hashRate':_0x2a9630*0x3e8,'temperatures':_0x53bbc3,'elapsed':_0x23e3c2,'accepted':_0x5498db,'rejected':_0x3d2d30,'hardwareErrors':_0x4ece4b,'exhaustSpeed':_0xde81fe,'intakeSpeed':_0x492354};_0x2c013e[_0x3204ac(0x21d)]=[_0x4ece4b];let _0x1432f5,_0x3f570b,_0x2903b7;if(_0x3bc00e[_0x3204ac(0x2c4)]&&_0x3bc00e[_0x3204ac(0x2c4)][0x0]&&_0x3bc00e[_0x3204ac(0x2c4)][0x0][_0x3204ac(0x300)]){const _0xf0f8b3=_0x3bc00e['pools_details'][0x0];_0x1432f5=_0x3bc00e[_0x3204ac(0x2c4)]['map'](_0x31602d=>{const _0x16c472=_0x3204ac;return{'user':_0x31602d[_0x16c472(0x300)],'url':_0x31602d[_0x16c472(0x236)]};});const _0x761e73=_0x1432f5[_0x3204ac(0x307)](_0x38bd5f=>_0x38bd5f[_0x3204ac(0x216)]);_0x3f570b=await extractAccountAndWorkerNumber({'poolWorkers':_0x761e73}),_0x2903b7=(_0xf0f8b3[_0x3204ac(0x236)][_0x3204ac(0x19f)](/((?:\d+\.){3}\d+|[^\.\:\/]+)(?:\.\w+)\:\d{2,}/)||['Unknown'])[0x1];}return console[_0x3204ac(0x248)](global['colorize'][_0x3204ac(0x1ee)],_0x3204ac(0x1d0),_0x2c013e,_0x3f570b,_0x1432f5,_0x2903b7),{..._0x3f570b,..._0x2c013e,'pools':_0x1432f5,'poolName':_0x2903b7};}};_0x5cbd0f[_0x10a4df(0x2bb)]=_0x5cbd0f[_0x10a4df(0x2fd)],_0x5cbd0f[_0x10a4df(0x1c4)]=_0x5cbd0f[_0x10a4df(0x2fd)],_0x5cbd0f[_0x10a4df(0x1fd)]=_0x5cbd0f[_0x10a4df(0x2fd)],_0x5cbd0f['Antminer_updater']=_0x5cbd0f[_0x10a4df(0x1c2)],_0x5cbd0f[_0x10a4df(0x1bd)]=_0x5cbd0f['AvalonMiner'];const _0x3717fe=_0x5cbd0f[_0x9b5fad];if(!_0x3717fe)return console[_0x10a4df(0x1db)](_0x10a4df(0x32e)+_0x9b5fad,_0x15c01d),null;return _0x3717fe(_0x15c01d,_0x16e958);}function completeMinerVersion(_0x8d8e8f){const _0x59b236=_0x1d0a09;let {systemKernelVersion:systemKernelVersion='',softwareVersion:softwareVersion='',modelType:modelType='',minerType:_0x2c7aef,apiVersion:_0x1a57c6,brand:_0x50db1a,completed:_0x2b50c9}=_0x8d8e8f;if(_0x2b50c9&&modelType[_0x59b236(0x30b)](_0x2c7aef)>=0x0)return _0x8d8e8f;if(_0x2c7aef&&modelType[_0x59b236(0x30b)](_0x2c7aef)<0x0){if(modelType[_0x59b236(0x30b)](_0x50db1a)>=0x0)_0x2c7aef=modelType;else _0x2c7aef[_0x59b236(0x30b)](_0x50db1a)>=0x0&&(modelType=_0x2c7aef);}_0x8d8e8f['minerType']=getMinerType(modelType),softwareVersion=softwareVersion[_0x59b236(0x2df)](/\-git\-.+$/,'');const _0xd7d46e=(systemKernelVersion+'~'+softwareVersion)[_0x59b236(0x25f)](),_0x3ee75e=minerVersionsLookup[_0xd7d46e+_0x2c7aef]||minerVersionsLookup[_0xd7d46e];if(!_0x3ee75e){if(_0x2c7aef){if(minerTypeMap[_0x2c7aef])return _0x8d8e8f[_0x59b236(0x262)]=minerTypeMap[_0x2c7aef][_0x59b236(0x262)]||minerTypeMap[_0x2c7aef][_0x59b236(0x22c)],{..._0x8d8e8f,'softwareVersion':softwareVersion,'completed':!![]};else console[_0x59b236(0x1db)](_0x59b236(0x1a0)+_0x2c7aef,_0x8d8e8f);}else console['warn'](_0x59b236(0x29c)+_0xd7d46e,_0x8d8e8f);return _0x8d8e8f[_0x59b236(0x262)]='Unknown\x20API',_0x8d8e8f['minerType']=_0x59b236(0x212),_0x8d8e8f;}else{if(_0x50db1a&&_0x50db1a!==_0x3ee75e[_0x59b236(0x22c)]||_0x2c7aef&&_0x2c7aef!==_0x3ee75e[_0x59b236(0x235)])return{..._0x8d8e8f,'softwareVersion':softwareVersion,'completed':!![]};}return{..._0x8d8e8f,'softwareVersion':softwareVersion,..._0x3ee75e,'completed':!![]};}async function checkMinerStates({ipAddress:_0xf9188e,brand:_0x3bd79e,commands:_0xad3fe1}){const _0x6980c2=_0x1d0a09;let _0x18b480=_0x3bd79e?{'brand':_0x3bd79e}:null,_0x9355d0=_0x3bd79e;if(_0xad3fe1)return{'commands':await getAllMinerStateByCommands(_0xf9188e,_0xad3fe1,_0x9355d0)};else _0xad3fe1=[_0x6980c2(0x1df),'pools',_0x6980c2(0x204),_0x6980c2(0x193),_0x6980c2(0x2cd)];let _0x6ed2d={};_0x6ed2d[_0x6980c2(0x2ea)]=await getVersionInfo(_0xf9188e)[_0x6980c2(0x205)](_0x287a42=>{const _0x82a559=_0x6980c2;return _0x287a42[_0x82a559(0x262)]&&(_0x9355d0=_0x287a42[_0x82a559(0x262)]),_0x287a42;})[_0x6980c2(0x2e7)](_0x543de8=>{const _0x30a20d=_0x6980c2;return{'error':_0x543de8[_0x30a20d(0x270)],'stack':_0x543de8[_0x30a20d(0x26d)]};}),_0x6ed2d[_0x6980c2(0x2a9)]=await getMinerInfo({'ipAddress':_0xf9188e})['catch'](_0x5206cc=>{const _0x4aa03c=_0x6980c2;return{'error':_0x5206cc[_0x4aa03c(0x270)],'stack':_0x5206cc[_0x4aa03c(0x26d)]};});_0x6ed2d[_0x6980c2(0x2a9)]?_0x6ed2d[_0x6980c2(0x1c6)]=await getKernelLogs(_0x6ed2d)[_0x6980c2(0x2e7)](_0x42c661=>{const _0x1fef36=_0x6980c2;return{'error':_0x42c661[_0x1fef36(0x270)],'stack':_0x42c661['stack']};}):(_0x6ed2d['minerInfo']=_0x6980c2(0x325),_0x6ed2d[_0x6980c2(0x1c6)]=_0x6980c2(0x1f7));_0x6ed2d[_0x6980c2(0x1fe)]=await getMinerSystemInfo({'ipAddress':_0xf9188e,'minerTyped':_0x18b480,'apiVersion':_0x9355d0},_0x6ed2d[_0x6980c2(0x2ea)])[_0x6980c2(0x2e7)](_0x509c34=>{const _0x29fd0b=_0x6980c2;return{'error':_0x509c34[_0x29fd0b(0x270)],'stack':_0x509c34['stack']};});_0x6ed2d[_0x6980c2(0x1fe)][_0x6980c2(0x262)]&&(_0x9355d0=_0x6ed2d[_0x6980c2(0x2ea)]['apiVersion']);if(_0x9355d0){_0x18b480=getMinerTypeMap(_0x6ed2d[_0x6980c2(0x1fe)])||{},_0x6ed2d[_0x6980c2(0x2e1)]=await getMinerStatus({'ipAddress':_0xf9188e,'minerTyped':_0x18b480,'apiVersion':_0x9355d0})[_0x6980c2(0x2e7)](_0x4fc19b=>{const _0x356233=_0x6980c2;return{'error':_0x4fc19b['message'],'stack':_0x4fc19b[_0x356233(0x26d)]};});const _0x90dcd8=await getRemotesPools({'ipAddress':_0xf9188e,'apiVersion':_0x9355d0},_0x18b480)['catch'](_0xcdcf6c=>{const _0xb6ce40=_0x6980c2;return{'info':'getMinerSystemInfo\x20failed!!!','error':_0xcdcf6c['message'],'stack':_0xcdcf6c[_0xb6ce40(0x26d)]};});if(Array['isArray'](_0x90dcd8['pools'])){const _0x2041a4=_0x90dcd8[_0x6980c2(0x2ed)][_0x6980c2(0x307)](_0x3d32e1=>_0x3d32e1[_0x6980c2(0x216)]),{accountName:_0x4534d6,workerName:_0x22e8d7,workerTypeNumber:_0x1d7f17}=await extractAccountAndWorkerNumber({'poolWorkers':_0x2041a4})||{};_0x6ed2d['remotesPools']={'accountName':_0x4534d6,'workerName':_0x22e8d7,'workerTypeNumber':_0x1d7f17,..._0x90dcd8,'poolWorkers':_0x2041a4};}}return!_0x6ed2d[_0x6980c2(0x2e1)]&&(_0x6ed2d[_0x6980c2(0x2e1)]=_0x6980c2(0x1a6)),!_0x6ed2d['remotesPools']&&(_0x6ed2d[_0x6980c2(0x21f)]=_0x6980c2(0x19b)),_0x6ed2d[_0x6980c2(0x30f)]=await getAllMinerStateByCommands(_0xf9188e,_0xad3fe1,_0x9355d0)[_0x6980c2(0x2e7)](_0x49cddd=>{const _0x474ab7=_0x6980c2;return{'error':_0x49cddd[_0x474ab7(0x270)],'stack':_0x49cddd['stack']};}),_0x6ed2d;}async function modifyMinerStates({ipAddress:_0x4433bd,brand:_0x873bb3,username:_0x25a1c2,worker:_0x28be14}){const _0x258e51=_0x1d0a09;let _0x3f39e4=_0x873bb3?{'brand':_0x873bb3}:null,_0x8503ff=_0x873bb3,_0x1f28e1={};_0x1f28e1[_0x258e51(0x2ea)]=await getVersionInfo(_0x4433bd)[_0x258e51(0x205)](_0x502ab1=>{const _0x2dde5a=_0x258e51;return _0x502ab1[_0x2dde5a(0x262)]&&(_0x8503ff=_0x502ab1[_0x2dde5a(0x262)]),_0x502ab1;})['catch'](_0x35f1e4=>{const _0x340bb0=_0x258e51;return{'error':_0x35f1e4[_0x340bb0(0x270)],'stack':_0x35f1e4[_0x340bb0(0x26d)]};});let _0x57e44f=await getMinerInfo({'ipAddress':_0x4433bd})[_0x258e51(0x2e7)](_0x2f4bee=>{const _0x7c04b8=_0x258e51;return{'error':_0x2f4bee[_0x7c04b8(0x270)],'stack':_0x2f4bee['stack']};});if(_0x57e44f){if(_0x25a1c2||_0x28be14){const {condition:condition={},ipAddress:_0x3b1909,apiVersion:_0xa084cc}=_0x57e44f;let {pools:_0x22d75e}=condition;return _0x1f28e1[_0x258e51(0x294)]=_0x22d75e,_0x1f28e1[_0x258e51(0x1f9)]=await getRemotesPools({'ipAddress':_0x3b1909,'apiVersion':_0xa084cc},_0x3f39e4)[_0x258e51(0x2e7)](_0x6f4739=>{const _0x550547=_0x258e51;return{'info':_0x550547(0x19d),'error':_0x6f4739[_0x550547(0x270)],'stack':_0x6f4739[_0x550547(0x26d)]};}),!_0x22d75e&&(_0x22d75e=remotePools[_0x258e51(0x2ed)]),Array[_0x258e51(0x20e)](_0x22d75e)?(_0x25a1c2&&_0x22d75e[_0x258e51(0x29b)](_0xf535ba=>{const _0x1de587=_0x258e51;_0xf535ba[_0x1de587(0x216)]=_0xf535ba['user']['replace'](/^[^\.]+\./,_0x25a1c2+'.');}),_0x28be14&&_0x22d75e[_0x258e51(0x29b)](_0x5e7dff=>{const _0x8fd31=_0x258e51;_0x5e7dff[_0x8fd31(0x216)]=_0x5e7dff[_0x8fd31(0x216)][_0x8fd31(0x2df)](/\..+$/,'.'+_0x28be14);}),_0x1f28e1[_0x258e51(0x330)]=await updateMinerSettings({'minerInfo':_0x1f28e1['minerInfo'],'minerTyped':{},'pools':_0x22d75e,'apiVersion':_0xa084cc})):_0x1f28e1['poolsReset']=_0x258e51(0x319),_0x1f28e1;}}else{if(_0x25a1c2)return _0x1f28e1[_0x258e51(0x330)]=_0x258e51(0x291)+_0x4433bd+_0x258e51(0x253)+_0x4433bd+_0x258e51(0x247),_0x1f28e1;else _0x1f28e1['minerInfo']=_0x258e51(0x249)+_0x4433bd+_0x258e51(0x253)+_0x4433bd+'\x22],\x22netmask\x22:\x22255.255.242.0\x22,\x22scanThrottleCount\x22:20}&mode=discoverhttp',_0x1f28e1[_0x258e51(0x1c6)]=_0x258e51(0x1f7);}return _0x1f28e1;}module[_0x1d0a09(0x292)]={'MAX_POOLS':MAX_POOLS,'buildSetMinerSettingsRequestBody':buildSetMinerSettingsRequestBody,'getRemotesPools':getRemotesPools,'getMinerSystemInfo':getMinerSystemInfo,'getMinerSettingsUrl':getMinerSettingsUrl,'getMinerSettings':getMinerSettings,'getSummaryAndPools':getSummaryAndPools,'getUpdateMinerSettingsUrl':getUpdateMinerSettingsUrl,'getMinerLandingPageUrl':getMinerLandingPageUrl,'updateMinerSettings':updateMinerSettings,'updateMinerNetworkSettings':updateMinerNetworkSettings,'updateMinerFirmware':updateMinerFirmware,'retrieveMinerNetworkDiagnostics':retrieveMinerNetworkDiagnostics,'updateEnableSSH':updateEnableSSH,'getWallets':getWallets,'createMinerInfo':createMinerInfo,'getMinerInfo':getMinerInfo,'getPoolTemplates':getPoolTemplates,'getMinerStatus':getMinerStatus,'havePoolConfigsChanged':havePoolConfigsChanged,'validateMinerConfig':validateMinerConfig,'getRemotesPoolConfig':getRemotesPoolConfig,'extractAccountAndWorkerNumber':extractAccountAndWorkerNumber,'upsertMinerInfo':upsertMinerInfo,'updateMinerInfo':updateMinerInfo,'getPoolConfigs':getPoolConfigs,'getMinerReboot':getMinerReboot,'getMinerReset':getMinerReset,'getMinerType':getMinerType,'getMinerTypeMap':getMinerTypeMap,'getUniqueWorkerName':getUniqueWorkerName,'getMinerFilterClause':getMinerFilterClause,'getMinerLayoutFields':getMinerLayoutFields,'getKernelLogs':getKernelLogs,'getPoolIDs':getPoolIDs,'deriveApiVersion':deriveApiVersion,'enableFirmwareUpload':enableFirmwareUpload,'completeMinerVersion':completeMinerVersion,'checkMinerStates':checkMinerStates,'modifyMinerStates':modifyMinerStates,'trendsAggregate':trendsAggregate};