/* Copyright (C) 9208-9721 Quebec, Inc - All Rights Reserved
* Unauthorized copying of this file, via any medium is strictly prohibited
* Proprietary and confidential
* Written by Jason Rudland <jason.g.rudland@gmail.com>, September 2022
*/'use strict';const _0x3ae100=_0x1812;(function(_0xf574a,_0x31ad12){const _0x28514f=_0x1812,_0x281bbc=_0xf574a();while(!![]){try{const _0x16deac=parseInt(_0x28514f(0x32d))/0x1*(parseInt(_0x28514f(0x342))/0x2)+parseInt(_0x28514f(0x202))/0x3*(-parseInt(_0x28514f(0x1dd))/0x4)+parseInt(_0x28514f(0x1fe))/0x5+parseInt(_0x28514f(0x2e4))/0x6*(-parseInt(_0x28514f(0x260))/0x7)+-parseInt(_0x28514f(0x32c))/0x8*(-parseInt(_0x28514f(0x2fd))/0x9)+parseInt(_0x28514f(0x2dd))/0xa+-parseInt(_0x28514f(0x267))/0xb;if(_0x16deac===_0x31ad12)break;else _0x281bbc['push'](_0x281bbc['shift']());}catch(_0xbc665e){_0x281bbc['push'](_0x281bbc['shift']());}}}(_0x5589,0x66210));function _0x5589(){const _0x389edb=['getMinerStatus','Trend\x20clause','Unable\x20to\x20remove\x20firware\x20upload\x20lock:','error','forEach','powerEfficiency','cgminer\x20','Miner\x20type\x20is\x20a\x20required\x20property\x20for\x20getMinerStatus\x20method.','log','Firmware\x20update\x20unlock\x20failed.\x20Attempting\x20to\x20disable\x20signature\x20check\x20for\x20','reduce','LOCKED','toString','Unknown\x20API','firmwareUpdatePrefix','diagnosticResponse','chain_vol','user','\x0a\x20Message:','timeout','Parsing\x20miner\x20status\x20summary','0.0','OPEN','fan3','response','devdetails','dev_freq','SSH\x20NOT\x20enabled\x20for\x20','remotesPools',',\x20\x20','firmwareContentType','routes','utf8','chain_acs','findOne','\x20for\x20','Removing\x20signature\x20check\x20in\x20','deleteById','then','stats','priority','addpool','fan8','getMinerSystemInfo','4xYVWwx','updateAll','replace','RPC\x20\x22pools\x22\x20command\x20failed\x20for\x20','hardwareErrors','GET','modelType','return\x20`','g19','position','Miner\x20type\x20is\x20a\x20required\x20property\x20for\x20getMinerKill\x20method.','password','values','URL','dev_accepted','ghs5s','hashRateAvg','rejected','checkPortStatus','Updating\x20deployment\x20info\x20for\x20miner\x20\x20','assign','Device\x20Elapsed','substr',']\x20to\x20','minerTypeMap','=(\x5cd+),','deployments','catch','HARDWARE','Whatsminer_CG','uniq','Not\x20getting\x20miner\x20settings\x20html','macAddress','1175385TRgwDt','sshUser','antpool','Unable\x20to\x20update\x20minerInfo','709848zlwTLX','map','DEAD','NOT\x20PROVIDED!','warn','$concat','path','Whatsminer\x20M20S',')\x5cb','$group','setMinerSettings','Kill\x20','walletID','bmminer_version','Missing\x20configuration\x20data\x20for\x20[','Creating\x20miner\x20','docType','No\x20pool\x20templates\x20found\x20with\x20IDs:','dev_temp','soc','stringify','match','(0\x5cd{','devs','cardIDs','add','keys','Utility','activePools','MHS\x20av','tempNamesRE','addrs','./templating','system_filesystem_version','bmminer\x20','length','end','preAuth','://','Miner\x20settings\x20request\x20ip\x20address:','fan1','minutes',']\x20responsed\x20with:\x20','dev_rejected','uri','GHS\x20av','Temperature','aggregate','binary','placement.shelf\x20ASC','daily','format','info','trace','SSH_PORT_STATE','$trends.','cgminer_version','POOL','bitmain-voltage','setNetworkSettings','utility','minerStatus','message','StuMiner','Cannot\x20upsert\x20minerInfo:\x20validation\x20issues,','chain_consumption','rebootOnUpdate','exit\x20on\x20code','join','Unparseable\x20card\x20data','./files/templates/','Cookie','network','hashRate','placement.position\x20ASC','url','logErrors','readFileSync','=0,','max','fan4','\x22\x0d\x0a','ipaddress','Miner\x20type\x20is\x20a\x20required\x20property\x20for\x20getMinerReboot\x20method.','ZigMiner','restartPool','\x5cW(\x5cw+)','temp','API\x20version\x20lookup\x20failed!\x20Model\x20type\x20has\x20no\x20configuration:','restart','Removing\x20signature\x20check\x20failed\x20in\x20','%Y-%m-%dT%H:%M:%S','exec','\x22:\x22','3971674SKESgm','find','Miner\x20status\x20request\x20ip\x20address:','Specify\x20at\x20least\x20one\x20pool.','set-cookie','[createRequestOptions]\x20Login\x20attempt\x20failed\x20\x20for,\x20','version','14384128RkfTBY','remove','http','FAILED','ant_hwv','headers','form','GHS\x205s','placement','FsMiner','summary','].\x20Should\x20be\x203\x20or\x204\x20parts\x20delimited\x20by\x20period.\x20eg\x20\x22DataHall_1.Rack3.4.5.\x20Use\x20codes\x20to\x20help\x20rendering.\x20eg\x20\x22DH1.3.4.5','locationID','errno','freq\x22:\x22','freqNamesRE','sshPassword','[getMinerSystemInfo]\x20ignoring\x20cgminer\x20version\x20command\x20error\x20for:\x20','test','updater','random','\x0d\x0a\x0d\x0a','SSH\x20enabled\x20for\x20','ipv4','history','condition','Unknown\x20model','\x5c$&','pools_details','colorize','minerFirmwareUpdate','Innosilicon','Not\x20possible\x20using\x20pool\x20data\x20in\x20minerInfo\x20nor\x20cgminer\x20pools\x20command!','macaddr','parseMinerStatus.\x20Unknown\x20apiVersion:','poolsReset','insecure','Miner\x20status\x20requests\x20','simple-ssh','bind','reTests','\x20persisting\x20to\x20','MinerInfo\x20lookup','Antminer_X19','Unknown','getMinerLogin','data','http://','octet-stream','CLOSED','stack','%Y-%m-%dT%H:00','accepted','[miner-settings]\x20Unable\x20to\x20update\x20pools\x20for,\x20','create','Firmware\x20unlock\x20re-attempting\x20to\x20disable\x20signature\x20check\x20for\x20','Content-Type:application/','volts','pools','temp_out_chip_','Miner\x20reset:','fan7','../../server/utilities/arpscan','../config','minerType','Antminer_updater','push','Kernel\x20logs\x20unavailable.','Firmware\x20updated\x20for\x20','$1,','Content-Type','Editing\x20info\x20for\x20miner\x20\x20','.txt','name','initial','During\x20edit,\x20cannot\x20extract\x20placement[','StrongU\x20parsing\x20miner\x20status\x20result','slice','method','fan2','latest','STATS','Every\x20miner\x20summary\x20(devs)\x20by\x20RPC\x20for\x20','accountName','../../server/utilities/cgminer-api','API\x20version\x20lookup\x20failed!\x20Key\x20not\x20found:','rm\x20-rf\x20/tmp/mem;','hardware','Whatsminer','Parsing\x20miner\x20status\x20result','$add','zzz_AvalonMiner','%Y-%m-%d','Purple','$first','Signature\x20check\x20removed\x20in\x20','qualifier','_id','Antminer_antpool','cardChipCount','resetMiner','exports','minerLandingPage','$dateToString','hall','platform_v','minerInfo','%Y-%m-%dT%H:%M','date','Antminer','ethaddr','stratum','knowlecules','SSH\x20enabling\x20error','getworks','sed\x20-ir\x20\x27s/!\x5cs-f\x5csrunme.sh.sig/1\x20-eq\x200/g;\x20s/\x5c$res\x5cs-eq\x5cs1/1\x20-eq\x200/g\x27\x20/www/pages/cgi-bin/','Fan\x20duty','User','8029480JXagTg','apiVersion','\x0d\x0a--','concat','parseMinerSystemInfo.\x20Unknown\x20apiVersion:','filter','trim','6YXJIIc','parse','POOLS','hwtype','text/plain','Miner\x20IP\x20address\x20cannot\x20be\x20null.','isArray','keyBy','highestIndex','getModel','AvalonMiner11','portscanner','.\x20apiVersion:','lodash','estimate','fine','fansNamesRE','Dragonming','debug','jwt','chain','Firmware\x20update\x20failed\x20for\x20','upsert','minerInfo\x20is\x20not\x20available!\x20Run\x20discovery\x20routine.','application/x-www-form-urlencoded','6266151AZullP','Whatsminer\x20parsing\x20miner\x20status\x20result','elapsed','dev_ghs15m','split','resolve','DiggerBoundary','Post\x20scanning\x20failed:','wallet','versionInfo','freq','\x22,\x22','getRemotePools\x20requires\x20apiVersion.\x20Version\x20command\x20probably\x20failed.\x20Try\x20&brand=???\x20in\x20the\x20querystring','cgminer\x20version\x20command\x20response\x20','ipAddress','type','statusCode','deployedOn','voltage','{\x22where\x22:\x20{},\x20\x22aggregate\x22:[\x0a\x20\x20\x20\x20{\x20\x22$unwind\x22:\x20\x22$trends.priorHours\x22},\x0a\x20\x20\x20\x20{\x20\x22$group\x22:\x20{\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x22_id\x22:\x20{\x22$concat\x22\x20:\x20[{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22$dateToString\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22format\x22:\x20\x22%Y-%m-%dT%H\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22date\x22:\x20{\x22$add\x22:\x20[\x22\x22,\x20\x22$trends.priorHours.x\x22]}\x20}},\x22_\x22]},\x0a\x20\x20\x20\x20\x20\x20\x22ts\x22:\x20{\x22$first\x22:\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x22$dateToString\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22format\x22:\x20\x22%Y-%m-%dT%H\x22,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22date\x22:\x20{\x22$add\x22:\x20[\x22\x22,\x20\x22$trends.priorHours.x\x22]}}}},\x0a\x20\x20\x20\x20\x20\x20\x22hashRateAll\x22:\x20{\x20\x22$sum\x22:\x20\x22$trends.priorHours.hashRate\x22},\x0a\x20\x20\x20\x20\x20\x20\x22temperatureAvg\x22:\x20{\x20\x22$avg\x22:\x20\x22$trends.priorHours.tempAvg\x22},\x0a\x20\x20\x20\x20\x20\x20\x22consumptionAll\x22:\x20{\x20\x22$sum\x22:\x20\x22$trends.priorHours.power\x22},\x0a\x20\x20\x20\x20\x20\x20\x22accountName\x22\x20:\x20{\x22$first\x22:\x20\x22$accountName\x22},\x0a\x20\x20\x20\x20\x20\x20\x22minerType\x22\x20:\x20{\x22$first\x22:\x20\x22$minerType\x22},\x0a\x20\x20\x20\x20\x20\x20\x22count\x22:\x20{\x20\x22$sum\x22:\x201\x20}\x0a\x20\x20\x20\x20}},\x0a\x20\x20\x20\x20{\x20\x22$sort\x22:\x20{\x20\x22_id\x22:\x201\x20}\x20}\x20','<%=randnum%>','NOT','=(\x5cd+)[,\x5c.]','Not\x20assigned','Kill\x20firmware\x20failed\x20(trying\x20upgrade\x20anyway)\x20','brand','SSH\x20disabled\x20for\x20','commands','\x22],\x22netmask\x22:\x22255.255.242.0\x22,\x22scanThrottleCount\x22:20}&mode=discoverhttp','hourly','digestOptions','upgrade_clear.cgi','getMinerStatus\x20requires\x20apiVersion.\x20Version\x20command\x20probably\x20failed.\x20Try\x20&brand=???\x20in\x20the\x20querystring','slack','Getworks','Not\x20reading\x20logs!\x20minerInfo\x20is\x20not\x20available.','Content-Disposition:\x20form-data;\x20name=\x22datafile\x22;\x20filename=\x22','Rejected','includes','frequency','DEVS','Discarded','Miner\x20pools\x20by\x20RPC\x20','Accepted','username','hwver','Killed\x20firmware\x20to\x20allow\x20upgrade\x20','8TSufKV','29GhqUJL','Green','pool','toLowerCase','parseMinerSettings.\x20Unknown\x20apiVersion:','auth','workerName','temp_chip','temp2','$accountName','Miner\x20system\x20info\x20request\x20','Reboot\x20','Magenta','build_date','model','multipart/form-data;\x20boundary=','where','Template\x20not\x20found:\x20','html','Miner\x20create\x20failed\x20for\x20','getKernelLogs','54876WNdhYe','from','\x22:\x22$1\x22$2','AvalonMiner','Kernel\x20log\x20error\x20parsed:\x20','\x5cw*)(?:\x5cW|$)','mac','minerSystemInfo','indexOf','\x5cb(','minertype'];_0x5589=function(){return _0x389edb;};return _0x5589();}const loopback=require('loopback'),{sendCommand,getVersionInfo}=require(_0x3ae100(0x2bb)),{isGeneratedMacAddress,ipToMacAddress}=require(_0x3ae100(0x2a5)),{getJSON,getHTML,filePost,formPost,postJSON}=require('./fetch'),config=require(_0x3ae100(0x2a6)),_=require(_0x3ae100(0x2f1)),{minerTypeMap,minerApis}=config;function _0x1812(_0x21e3e6,_0x12753b){const _0x55893d=_0x5589();return _0x1812=function(_0x1812b6,_0x4cf30a){_0x1812b6=_0x1812b6-0x1ba;let _0x29a481=_0x55893d[_0x1812b6];return _0x29a481;},_0x1812(_0x21e3e6,_0x12753b);}for(let minerApi in minerApis){minerApis[minerApi[_0x3ae100(0x330)]()]=minerApis[minerApi];}const {getTokenValueMapper,replaceTokensWithValues}=require(_0x3ae100(0x222)),fs=require('fs'),path=require(_0x3ae100(0x208)),SSH=require(_0x3ae100(0x28d)),{inspect,promisify}=require('util'),writeFile=promisify(fs['writeFile']),portScanner=require(_0x3ae100(0x2ef)),{api}=require(_0x3ae100(0x31e)),SSH_PORT_STATE=global[_0x3ae100(0x238)],softwareVersions=global['softwareVersions'],MAX_POOLS=0x3,CONSUMPTION_DEFAULT=0x8ae,CONFIGURE_MODE_PROVISION=0x2;let minerVersionsLookup={},uniqWorker={'names':{},'addrs':{},'highestIndex':0x1};const reKnownFirmwareUpdateErrors=/(Cannot\s+Find\s+Signature|Incorrect\s+firmware|Cannot\s+Downgrade|Installer\s+Not\s+Sign(a?tur)ed?)/i;init();function init(){generateMinerVersionLookup();}const average=_0x40f5bf=>(_0x40f5bf?.[_0x3ae100(0x225)]?_0x40f5bf:[0x0])['reduce']((_0x4c4961=0x0,_0x5b85e0=0x0)=>parseFloat(_0x5b85e0)+parseFloat(_0x4c4961))/(_0x40f5bf?.[_0x3ae100(0x225)]||0x1);function escapeRegex(_0x1d0ff8){const _0x29519e=_0x3ae100;return _0x1d0ff8['replace'](/[.*+?^${}()|[\]\\]/g,_0x29519e(0x282));}function generateMinerVersionLookup(){const _0x491cf2=_0x3ae100;if(Object[_0x491cf2(0x21c)](minerVersionsLookup)['length'])return;Object[_0x491cf2(0x21c)](minerTypeMap)[_0x491cf2(0x351)](_0x4a2627=>{const _0x19f7cb=_0x491cf2,{firmwareLookup:_0x303c6c,brand:_0x2397e7,apiVersion:_0x407976,modelType:_0x39a7f3}=minerTypeMap[_0x4a2627];_0x303c6c&&_0x303c6c[_0x19f7cb(0x21c)]['forEach'](_0x144e71=>{const _0x425b28=_0x19f7cb;let _0x4b7071={..._0x303c6c['versionData']};_0x4b7071['modelType']=_0x39a7f3||_0x4a2627,_0x4b7071[_0x425b28(0x2a7)]=_0x4a2627,_0x4b7071['brand']=_0x2397e7,_0x4b7071['apiVersion']=_0x407976||_0x2397e7,minerVersionsLookup[_0x144e71]=_0x4b7071,minerVersionsLookup[_0x144e71+_0x4a2627]=_0x4b7071;});});}function buildTemplatedRequestBody(_0x288f87=[],_0x4ce5b9=[],_0x1b1780,_0x2ed39e,_0x4e181e=_0x3ae100(0x2d4)){const _0x4d1734=_0x3ae100,_0x4a2a41=_0x1b1780[_0x4d1734(0x24d)][_0x4d1734(0x217)](/([^\/]+)$/)[0x1]+_0x4d1734(0x2af),_0x3608c7=minerApis[(_0x4e181e||'')['toLowerCase']()][_0x4d1734(0x2c7)],_0x17e994=(_0x2ed39e[_0x4d1734(0x1bf)]||'')+(_0x3608c7||'')+_0x4a2a41,_0x41dfd6=getTemplateLiteral(_0x17e994,_0x4a2a41),_0x7ba779=new Function(..._0x288f87,_0x4d1734(0x1e4)+_0x41dfd6+'`'),_0x2cd890=_0x7ba779(..._0x4ce5b9),_0x3570e6=_0x2cd890[_0x4d1734(0x1df)](/\n+/g,'');return _0x3570e6;}function buildSetMinerSettingsRequestBody({pools:pools=null,minerConfigOptions:minerConfigOptions={},html:html='',uri:_0x232ab1,minerTyped:_0x25affd,apiVersion:_0x37779d}={}){const _0x789b4b=_0x3ae100;if(!pools?.[0x0])throw new Error(_0x789b4b(0x263));pools['push']({},{});const _0x55752e=minerConfigOptions;return buildTemplatedRequestBody([_0x789b4b(0x2a1),'config',_0x789b4b(0x33f)],[pools,_0x55752e,html],_0x232ab1,_0x25affd,_0x37779d);}function buildSetNetworkSettingsRequestBody({network:network=null,minerInfo:minerInfo={},uri:_0x83cddc,minerTyped:_0x446bbd,apiVersion:_0x54ffde}={}){const _0xabd8c2=_0x3ae100;return buildTemplatedRequestBody([_0xabd8c2(0x24a),_0xabd8c2(0x2d1)],[network,minerInfo],_0x83cddc,_0x446bbd,_0x54ffde);}function buildNetworkDiagnosticRequestBody({diagnostic:diagnostic={},uri:_0xf1d93f,minerTyped:_0x5401e0,apiVersion:_0x460789}={}){return buildTemplatedRequestBody(['diagnostic'],[diagnostic],_0xf1d93f,_0x5401e0,_0x460789);}function buildStateSyncRequestBody({html:_0x70eda3,uri:_0x292051,minerTyped:_0x34486e,apiVersion:_0x2c227a}={}){const _0x269164=_0x3ae100;return buildTemplatedRequestBody([_0x269164(0x33f)],[_0x70eda3],_0x292051,_0x34486e,_0x2c227a);}function validateMinerUpsert({minerInfo:_0x1fc494}){const _0x2f47eb=_0x3ae100,{workerName:_0x209a7f,macAddress:_0x3df0e5,ipAddress:_0xfaf41e,condition:_0x3e855d}=_0x1fc494,{pools:pools=[]}=_0x3e855d,_0x4746ff=pools[_0x2f47eb(0x203)](_0x2988a3=>_0x2988a3[_0x2f47eb(0x1c2)])[_0x2f47eb(0x246)](','),_0x619ede=new RegExp(_0x209a7f,'i');if(!_0x4746ff||_0x619ede[_0x2f47eb(0x279)](_0x4746ff))return![];return![];}async function trendsAggregate({accountName:_0xd9c7ad,minerType:_0x2279d9,period:period=_0x3ae100(0x2f3),ipAddresses:_0x1e27a2,isStacked:_0x41f902}){const _0x1f6227=_0x3ae100,_0xc4d427=loopback['getModel'](_0x1f6227(0x2d1)),_0x3f36c4=0x28;function _0x295eeb(_0x2d6728,_0x58c1d9,_0x472561){const _0x5defd4=_0x1f6227,_0x2639b5=JSON[_0x5defd4(0x2e5)](_0x1f7fd2[_0x5defd4(0x1df)](/priorHours/ig,_0x2d6728)),_0x3d4d07=_0x2639b5[_0x5defd4(0x231)][0x1][_0x5defd4(0x20b)];return _0x3d4d07['ts'][_0x5defd4(0x2c5)][_0x5defd4(0x2ce)][_0x5defd4(0x235)]=_0x58c1d9,_0x3d4d07['ts'][_0x5defd4(0x2c5)]['$dateToString'][_0x5defd4(0x2d3)]['$add'][0x0]=new Date(0x0),_0x472561?_0x3d4d07[_0x5defd4(0x2c8)][_0x5defd4(0x207)]=[_0x5defd4(0x239)+_0x2d6728+'.syncId','_']:(_0x3d4d07[_0x5defd4(0x2c8)][_0x5defd4(0x207)][0x0][_0x5defd4(0x2ce)]['format']=_0x58c1d9,_0x3d4d07[_0x5defd4(0x2c8)][_0x5defd4(0x207)][0x0][_0x5defd4(0x2ce)][_0x5defd4(0x2d3)][_0x5defd4(0x2c1)][0x0]=new Date(0x0)),_0x2639b5;}let _0x45e10b='';!_0x41f902&&(_0x45e10b=',\x20{\x20\x22$limit\x22:\x20'+_0x3f36c4+'\x20}');let _0x1f7fd2=_0x1f6227(0x310)+_0x45e10b+']}',_0x26840c;if(/^fine/i['test'](period))_0x26840c=_0x295eeb(_0x1f6227(0x2f3),_0x1f6227(0x25d),!![]);else{if(/^minut/i[_0x1f6227(0x279)](period))_0x26840c=_0x295eeb(_0x1f6227(0x22b),_0x1f6227(0x2d2),!![]);else{if(/^hour/i[_0x1f6227(0x279)](period))_0x26840c=_0x295eeb(_0x1f6227(0x31a),_0x1f6227(0x29a));else/^da[iy]/i['test'](period)&&(_0x26840c=_0x295eeb(_0x1f6227(0x234),_0x1f6227(0x2c3)));}}let _0x61d2ef;if(_0x1e27a2&&_0x1e27a2[_0x1f6227(0x225)])_0x61d2ef={'ipAddress':{'inq':_0x1e27a2[_0x1f6227(0x301)](/\s*,\s*/)}};else{if(_0xd9c7ad){_0x61d2ef={'accountName':_0xd9c7ad};if(_0x2279d9)_0x61d2ef[_0x1f6227(0x2a7)]=_0x2279d9;else _0x41f902&&_0x26840c[_0x1f6227(0x231)][0x1][_0x1f6227(0x20b)][_0x1f6227(0x2c8)]['$concat'][_0x1f6227(0x2a9)]('$minerType');}else _0x2279d9&&(_0x61d2ef={'minerType':_0x2279d9},_0x41f902&&_0x26840c[_0x1f6227(0x231)][0x1]['$group'][_0x1f6227(0x2c8)][_0x1f6227(0x207)][_0x1f6227(0x2a9)](_0x1f6227(0x336)));}_0x61d2ef&&(_0x26840c['where']=_0x61d2ef);console[_0x1f6227(0x355)](_0x1f6227(0x34e),inspect(_0x26840c,![],0x5,!![]));const _0x576734=await _0xc4d427['aggregate'](_0x26840c,{'build':![]});return _0x576734;}async function upsertMinerInfo({minerInfo:_0x3556c1,configureMode:configureMode=0x0}){const _0x5ee862=_0x3ae100,_0x96c4a2=loopback[_0x5ee862(0x2ed)](_0x5ee862(0x2d1)),_0x4ffa24={'timestamp':_0x3556c1[_0x5ee862(0x30e)]?new Date(_0x3556c1[_0x5ee862(0x30e)]):new Date(),'accountName':_0x3556c1[_0x5ee862(0x2ba)]},_0x545f76=validateMinerUpsert({'minerInfo':_0x3556c1});if(_0x545f76)return console[_0x5ee862(0x206)](_0x5ee862(0x242),_0x545f76,JSON[_0x5ee862(0x216)](_0x3556c1)[_0x5ee862(0x1f3)](0x0,0x64)),_0x3556c1;if(!_0x3556c1['deployments'])_0x4ffa24[_0x5ee862(0x2f2)]=!![],_0x3556c1[_0x5ee862(0x1f7)]={'initial':_0x4ffa24,'latest':_0x4ffa24,'history':[_0x4ffa24]};else{if(_0x3556c1['deployments'][_0x5ee862(0x2b7)][_0x5ee862(0x2ba)]!==_0x4ffa24[_0x5ee862(0x2ba)])_0x3556c1['deployments'][_0x5ee862(0x2b7)]=_0x4ffa24,_0x3556c1['deployments'][_0x5ee862(0x27f)][_0x5ee862(0x2a9)](_0x4ffa24);else _0x3556c1[_0x5ee862(0x30e)]&&(_0x3556c1[_0x5ee862(0x1f7)][_0x5ee862(0x2b1)]=_0x4ffa24,_0x3556c1['deployments'][_0x5ee862(0x2b7)]=_0x4ffa24,_0x3556c1[_0x5ee862(0x1f7)][_0x5ee862(0x27f)][_0x5ee862(0x2a9)](_0x4ffa24));}delete _0x3556c1['deployedOn'];const {placement:placement={}}=_0x3556c1;return placement[_0x5ee862(0x1e6)]&&configureMode===CONFIGURE_MODE_PROVISION&&await _0x96c4a2[_0x5ee862(0x1de)]({'placement':placement},{'placement':null}),console[_0x5ee862(0x2f6)]({'logType':_0x5ee862(0x2fa)},_0x5ee862(0x1f0)+_0x3556c1[_0x5ee862(0x333)]+_0x5ee862(0x1ce)+_0x3556c1[_0x5ee862(0x30b)]),_0x3556c1=await _0x96c4a2[_0x5ee862(0x2fa)](_0x3556c1)[_0x5ee862(0x1f8)](_0x230790=>{const _0x21d397=_0x5ee862;console[_0x21d397(0x350)](_0x21d397(0x201),_0x3556c1,_0x230790);}),_0x3556c1;}async function getMinerLayoutFields(_0xcc8eab={}){const _0x35e1ff=_0x3ae100,_0x18220a=loopback['getModel'](_0x35e1ff(0x2d1));let _0x499078={'fields':{'accountName':!![],'workerName':!![],'workerTypeNumber':!![],'placement':!![],'model':!![],'modelType':!![],'minerType':!![],'runtimeState':!![],'condition':!![],'conditionPrime':!![],'intakeSpeed':!![],'exhaustSpeed':!![],'logStates':!![],'ipAddress':!![],'macAddress':!![],'serialNumber':!![],'psuSerialNumber':!![],'psuModel':!![],'breakerPanelId':!![],'powerBarId':!![],'powerPhase':!![],'transformerLow':!![],'transformerMed':!![],'networkSwitchRef':!![]},'order':['placement.hall\x20DESC','placement.rack\x20ASC',_0x35e1ff(0x233),_0x35e1ff(0x24c)]};_0x499078={..._0x499078,..._0xcc8eab};let _0x3256bd=await _0x18220a[_0x35e1ff(0x261)](_0x499078),_0x4d215e=_['groupBy'](_0x3256bd,_0x3e93a2=>_0x3e93a2?.[_0x35e1ff(0x26f)]?.[_0x35e1ff(0x2cf)]||_0x35e1ff(0x314));return _0x4d215e;}async function updateMinerInfo({record:_0x3f266e,keyField:_0x4fdfdb,keyFieldName:_0x2db3bf}){const _0x5de671=_0x3ae100,_0xcb4b5=loopback[_0x5de671(0x2ed)](_0x5de671(0x2d1)),_0x233ae3=_0x3f266e[_0x2db3bf],_0x1e2af8={'where':{}};let {placement:placement='',minerType:_0x1020b3,ipAddress:_0xcc852e,macAddress:_0x4799a9,serialNumber:_0x16d27e,psuSerialNumber:_0x22f2bf,psuModel:_0x2fdb67,networkSwitchRef:_0x4b29c7,breakerPanelId:_0x88fd4e,powerBarId:_0xec1e17,powerPhase:_0x5d1f54,transformerLow:_0x410269,transformerMed:_0x1b6238}=_0x3f266e;!placement&&(placement=JSON[_0x5de671(0x216)](_0x3f266e)[_0x5de671(0x217)](/placement":"?([^,'"]*)"?(,|$)/)[0x1]);if(placement[_0x5de671(0x225)]>0x4){const _0x57737f=placement[_0x5de671(0x217)](/^(?:(.+)\.)?([^\.]+)\.(\d+)\.(\d+)(\.true|false)?$/);if(!_0x57737f&&_0x57737f[_0x5de671(0x225)])return console[_0x5de671(0x206)](_0x5de671(0x2b2)+placement+_0x5de671(0x272)),_0x50e028;const _0x144089=parseInt(_0x57737f[0x3],0xa),_0x1c78e6=parseInt(_0x57737f[0x4],0xa),_0x46beed=/^\d+$/[_0x5de671(0x279)](_0x57737f[0x2])?parseInt(_0x57737f[0x2],0xa):_0x57737f[0x2],_0x10b6da=_0x57737f[0x5]||![];placement={'hall':_0x57737f[0x1]||'','rack':_0x46beed,'shelf':_0x144089,'position':_0x1c78e6,'upright':_0x10b6da};}const _0x3d90b9={'placement':placement,'minerType':_0x1020b3,'ipAddress':_0xcc852e,'macAddress':_0x4799a9,'serialNumber':_0x16d27e,'psuSerialNumber':_0x22f2bf,'psuModel':_0x2fdb67,'networkSwitchRef':_0x4b29c7,'breakerPanelId':_0x88fd4e,'powerBarId':_0xec1e17,'powerPhase':_0x5d1f54,'transformerLow':_0x410269,'transformerMed':_0x1b6238};_0x1e2af8[_0x5de671(0x33d)][_0x4fdfdb]=new RegExp(escapeRegex(_0x233ae3),'i');let _0x50e028=await _0xcb4b5[_0x5de671(0x1d3)](_0x1e2af8);!process['env']['UNSAFE_EDITS']&&delete _0x3d90b9[_0x4fdfdb];const _0x4fbe05=validateMinerUpsert({'minerInfo':_0x50e028});if(_0x4fbe05)return console['warn']('Cannot\x20edit\x20minerInfo:\x20validation\x20issues,',_0x4fbe05,JSON['stringify'](_0x50e028)['substr'](0x0,0x64)),_0x50e028;return console[_0x5de671(0x2f6)]({'logType':'edit'},_0x5de671(0x2ae)+_0x50e028[_0x5de671(0x333)]+_0x5de671(0x1ce)+_0x50e028[_0x5de671(0x30b)]),_0x50e028=Object[_0x5de671(0x1f1)](_0x50e028,_0x3d90b9),_0x50e028=await _0xcb4b5[_0x5de671(0x2fa)](_0x50e028)['catch'](_0x3651aa=>{const _0x53c2=_0x5de671;console[_0x53c2(0x350)]('Unable\x20to\x20edit\x20minerInfo\x20fields',_0x50e028,_0x3651aa);}),_0x50e028;}async function createMinerInfo({minerInfo:_0x2cd581,placement:_0x4b0697,minerIndex:_0x3bd3ad,accountName:_0x5dae75,minerTyped:_0x10c307}){const _0x5c32ee=_0x3ae100,_0x19a06c=loopback[_0x5c32ee(0x2ed)](_0x5c32ee(0x2d1)),{name:_0x1261d7,code:_0x105d27}=_0x10c307,{ipAddress:_0x2b02e0,workerName:_0xb9e04c}=_0x2cd581,_0x3fcdf5={'timestamp':new Date(),'accountName':_0x5dae75},_0x21e098={'minerIndex':_0x3bd3ad,'code':_0x105d27,'name':_0x1261d7,..._0x2cd581,'placement':_0x4b0697};return _0x5dae75&&(_0x2cd581[_0x5c32ee(0x2ba)]=_0x5dae75),!_0x21e098[_0x5c32ee(0x1fd)]&&(_0x21e098['macAddress']=ipToMacAddress(_0x2b02e0)),_0x5dae75&&(_0x21e098[_0x5c32ee(0x1f7)]={'initial':_0x3fcdf5,'latest':_0x3fcdf5,'history':[_0x3fcdf5]}),console[_0x5c32ee(0x2f6)]({'logType':_0x5c32ee(0x29d)},_0x5c32ee(0x211)+_0xb9e04c+',\x20\x20'+_0x2b02e0),_0x19a06c[_0x5c32ee(0x29d)]([_0x21e098])[_0x5c32ee(0x1d7)](_0x1001de=>{return _0x1001de?_0x1001de[0x0]:null;})['catch'](_0x52bec2=>{const _0x12a719=_0x5c32ee;console[_0x12a719(0x237)](_0x12a719(0x340)+_0xb9e04c+_0x12a719(0x1ce)+_0x2b02e0);throw _0x52bec2;});}let reWorker=null;const indexPad='00000';function getUniqueWorkerName(_0x2dae9b,_0xa65f93){const _0x3b1444=_0x3ae100;!reWorker&&(reWorker=new RegExp(_0x3b1444(0x258)+_0xa65f93['locationID']+_0x3b1444(0x218)+indexPad[_0x3b1444(0x225)]+'})(?:\x5cW|$)','i'));const {workerName:_0x5842ff,macAddress:_0xf20ae6}=_0x2dae9b;let _0x4003b9=uniqWorker[_0x3b1444(0x221)][_0x5842ff],_0x388d7f=reWorker['test'](_0x5842ff);return(!_0x388d7f||_0x4003b9!==_0xf20ae6)&&(_0x5842ff=(indexPad+ ++uniqWorker[_0x3b1444(0x2ec)])[_0x3b1444(0x2b4)](indexPad[_0x3b1444(0x225)])),uniqWorker[_0x3b1444(0x221)][_0x5842ff]=_0xf20ae6,_0x5842ff;}async function getMinerInfo({macAddress:_0xba0ab5,accountName:_0x36d342,workerName:_0x505973,ipAddress:_0x876ed}){const _0x1eacbe=_0x3ae100;let _0x5a677c;if(_0xba0ab5)_0x876ed&&isGeneratedMacAddress(_0xba0ab5)?_0x5a677c={'or':[{'ipAddress':_0x876ed},{'macAddress':_0xba0ab5}]}:_0x5a677c={'macAddress':_0xba0ab5};else{if(_0x876ed)_0x5a677c={'ipAddress':_0x876ed};else{if(_0x36d342&&_0x505973)_0x5a677c={'accountName':{'like':new RegExp('^'+_0x36d342+'$','i')},'workerName':{'like':new RegExp(_0x505973,'i')}};else return null;}}const _0x25463b=loopback['getModel']('minerInfo');return console[_0x1eacbe(0x2f6)](arguments[0x0],_0x1eacbe(0x291),_0xba0ab5,_0x36d342,_0x505973,_0x5a677c),_0x25463b[_0x1eacbe(0x261)]({'where':_0x5a677c})[_0x1eacbe(0x1d7)](async _0x4fdeb7=>{const _0x657d3a=_0x1eacbe;if(_0x4fdeb7['length']===0x1)return _0x4fdeb7[0x0];if(_0x4fdeb7['length']>0x1)return await mergeMinerInfos(_0x4fdeb7,{'macAddress':_0xba0ab5,'accountName':_0x36d342,'workerName':_0x505973,'ipAddress':_0x876ed});if(_0xba0ab5&&_0x876ed&&_0x36d342&&_0x505973)return _0x5a677c={'ipAddress':_0x876ed,'accountName':{'like':new RegExp('^'+_0x36d342+'$','i')},'workerName':{'like':new RegExp('^'+_0x505973+'$','i')}},_0x25463b['find']({'where':_0x5a677c})[_0x657d3a(0x1d7)](async _0x2b3d5d=>{const _0x4dfccd=_0x657d3a;if(_0x2b3d5d[_0x4dfccd(0x225)]>0x1)return await mergeMinerInfos(_0x2b3d5d,{'accountName':_0x36d342,'workerName':_0x505973,'ipAddress':_0x876ed});return _0x2b3d5d[0x0]||null;});});}async function mergeMinerInfos(_0xa69823,{macAddress:_0x37e413,accountName:_0x363afc,workerName:_0x2fb7fb,ipAddress:_0xbac63d}){const _0x15025b=_0x3ae100,_0xf6fd4=loopback[_0x15025b(0x2ed)](_0x15025b(0x2d1));let _0x1c8bad,_0x241124=[];return _0xa69823['forEach'](_0x4fc522=>{const _0x353872=_0x15025b;!_0x1c8bad&&_0x37e413&&_0x37e413[_0x353872(0x330)]()==_0x4fc522['macAddress'][_0x353872(0x330)]()?_0x1c8bad=_0x4fc522:_0x241124['push'](_0x4fc522);}),!_0x1c8bad&&(_0x1c8bad=_0x241124['shift']()),_0x241124[_0x15025b(0x351)](_0x4f80df=>{const _0x31ed0e=_0x15025b;_0xf6fd4[_0x31ed0e(0x1d6)](_0x4f80df['id']);}),_0x1c8bad;}function getApiUrl(_0xd542c1=null,_0x144713,_0x5bc35d){const _0x5a2601=_0x3ae100;if(_0xd542c1===null)throw new Error(_0x5a2601(0x2e9));if(!_0x144713)throw new Error('Miner\x20apiVersion\x20cannot\x20be\x20null.');const _0x3a5db1=minerApis[(_0x144713||'')['toLowerCase']()];if(!_0x3a5db1)throw new Error(_0x5a2601(0x210)+_0xd542c1+']\x20apiversion\x20\x22'+_0x144713+'\x22.\x20NB.\x20Is\x20case-sensitive!');var {routes:_0x550b16,protocol:protocol=_0x5a2601(0x269)}=_0x3a5db1;if(!_0x550b16[_0x5bc35d])return null;var _0xe720c5={..._0x550b16[_0x5bc35d]};if(!_0xe720c5[_0x5a2601(0x24d)])return _0xe720c5;return _0xe720c5[_0x5a2601(0x24d)]=protocol+_0x5a2601(0x228)+_0xd542c1+_0xe720c5[_0x5a2601(0x24d)],_0xe720c5;}async function createRequestOptions({uri:_0x23202c,minerTyped:_0x1d6fd9,apiVersion:_0x54cc56,maxSockets:_0x38759a,timeout:_0xe13ac4,headers:headers={},body:_0x263cfa,form:_0x18d0ea,followRedirect:followRedirect=![]}){const _0x4d1592=_0x3ae100,_0x61af56=(_0x54cc56||'')[_0x4d1592(0x330)](),_0x4cf1e8=minerApis[_0x61af56],_0x386968=_0x4cf1e8['routes']['getMinerLogin'],{user:_0x26b9eb,password:_0x4ddf5e}=_0x4cf1e8;let _0xcd9ba={'uri':_0x23202c['url'][_0x4d1592(0x1df)](_0x4d1592(0x311),Math[_0x4d1592(0x27b)]()['toString']()[_0x4d1592(0x1f3)](0x8)),'method':_0x23202c[_0x4d1592(0x2b5)],'rejectUnauthorized':![],'headers':Object[_0x4d1592(0x21c)](headers)['length']?headers:{..._0x23202c[_0x4d1592(0x26c)]}||{}};if(_0x23202c[_0x4d1592(0x28b)]||_0x23202c['preAuth'])_0xcd9ba['auth']={'user':_0x26b9eb,'pass':_0x4ddf5e,'sendImmediately':!_0x23202c[_0x4d1592(0x227)],'digestOptions':_0x23202c[_0x4d1592(0x31b)]||{'basic':![]}},headers&&(_0xcd9ba[_0x4d1592(0x26c)]=headers);else{if(_0x386968){let _0x1c437c='';if(!(_0xcd9ba['headers'][_0x4d1592(0x249)]||_0xcd9ba['headers']['Authorization'])){const _0x123108={'form':_0x386968['form'],'method':_0x386968[_0x4d1592(0x2b5)],'headers':_0x386968['headers'],'rejectUnauthorized':![],'uri':_0x23202c[_0x4d1592(0x24d)]['match'](/(https?:\/\/[^\/]+)\//)[0x1]+_0x386968['url']},{headers:_0x25cee8,body:body={},statusCode:_0x3a7556}=await formPost(_0x123108);if(/^\s*[45]/[_0x4d1592(0x279)](_0x3a7556)){let _0xad070c=_0x4d1592(0x265)+_0x123108['uri']+_0x4d1592(0x2f0)+_0x54cc56;return console[_0x4d1592(0x206)](_0xad070c,_0x123108),_0xcd9ba;}_0x25cee8['set-cookie']&&(_0xcd9ba['headers'][_0x4d1592(0x249)]=_0x25cee8[_0x4d1592(0x264)][_0x4d1592(0x246)](';')['replace'](/(;\s*path=.*?(?:;|$))/g,';')['replace'](/;$/,'')),body[_0x4d1592(0x2f7)]&&(_0xcd9ba[_0x4d1592(0x26c)]['Authorization']='Bearer\x20'+body[_0x4d1592(0x2f7)]),_0x1c437c=_0x25cee8['location'];}if(followRedirect&&_0x1c437c){const _0x4ff261={..._0xcd9ba};_0x4ff261[_0x4d1592(0x22e)]=_0x23202c['url']['match'](/(https?:\/\/[^\/]+)\//)[0x1]+_0x1c437c,_0x4ff261[_0x4d1592(0x2b5)]='GET';const _0x2b5b46=await getHTML(_0x4ff261);_0x18d0ea=buildStateSyncRequestBody({'html':_0x2b5b46,'uri':_0x23202c,'minerTyped':_0x1d6fd9,'apiVersion':_0x54cc56}),_0xcd9ba['headers']={..._0x23202c[_0x4d1592(0x26c)],..._0xcd9ba[_0x4d1592(0x26c)]};}}}/post/i[_0x4d1592(0x279)](_0x23202c[_0x4d1592(0x2b5)])?(_0x18d0ea&&(_0xcd9ba[_0x4d1592(0x26d)]=_0x18d0ea),_0x263cfa&&(_0xcd9ba['body']=_0x263cfa)):delete _0xcd9ba[_0x4d1592(0x26c)][_0x4d1592(0x2ad)];if(_0x23202c[_0x4d1592(0x1c4)])_0xcd9ba[_0x4d1592(0x1c4)]=_0xe13ac4;else _0xe13ac4&&(_0xcd9ba[_0x4d1592(0x1c4)]=_0xe13ac4);return _0x38759a&&(_0xcd9ba['pool']={'maxSockets':_0x38759a}),_0x23202c['noAuth']&&delete _0xcd9ba[_0x4d1592(0x332)],console['debug']({'method':'createRequestOptions','uri':_0x23202c,'apiVersion':_0x54cc56},'createRequestOptions',_0xcd9ba),_0xcd9ba;}function getUpdateMinerSettingsUrl(_0x574040,_0x148a66){const _0x3f5c62=_0x3ae100;return getApiUrl(_0x574040,_0x148a66,_0x3f5c62(0x20c));}function getMinerSettingsUrl(_0x112628,_0x157f60){return getApiUrl(_0x112628,_0x157f60,'getMinerSettings');}function getNetworkSettingsUrl(_0x13bc89,_0x1485ac){const _0x332999=_0x3ae100;return getApiUrl(_0x13bc89,_0x1485ac,_0x332999(0x23d));}function getNetworkDiagnosticsUrl(_0x2c1d71,_0x2ed87b){return getApiUrl(_0x2c1d71,_0x2ed87b,'getNetworkDiagnostics');}function getMinerStatusUrl(_0x58fbeb,_0x1fb566){const _0x41e075=_0x3ae100;return getApiUrl(_0x58fbeb,_0x1fb566,_0x41e075(0x34d));}function getMinerLoginUrl(_0x442a91,_0x8bdd8d){const _0x5340f3=_0x3ae100;return getApiUrl(_0x442a91,_0x8bdd8d,_0x5340f3(0x294));}function getMinerSystemInfoUrl(_0x398536,_0x2c7f23){const _0x2490d0=_0x3ae100;return getApiUrl(_0x398536,_0x2c7f23,_0x2490d0(0x1dc));}function getMinerRebootUrl(_0x2fa346,_0x1bd1a8){return getApiUrl(_0x2fa346,_0x1bd1a8,'rebootMiner');}function getMinerResetUrl(_0x3a7efd,_0x288182){const _0x552e4e=_0x3ae100;return getApiUrl(_0x3a7efd,_0x288182,_0x552e4e(0x2cb));}function getPoolRestartUrl(_0x306773,_0x37c81a){const _0x381817=_0x3ae100;return getApiUrl(_0x306773,_0x37c81a,_0x381817(0x257));}function getMinerKillUrl(_0x3ede91,_0x1148d2){return getApiUrl(_0x3ede91,_0x1148d2,'killMiner');}function getKernelLogsUrl(_0x52940d,_0x430a4b){const _0x1ae42d=_0x3ae100;return getApiUrl(_0x52940d,_0x430a4b,_0x1ae42d(0x341));}function getMinerFirmwareUpdateUrl(_0x28f00d,_0x3a601c){const _0x4544b9=_0x3ae100;return getApiUrl(_0x28f00d,_0x3a601c,_0x4544b9(0x285));}function getEnableSSHUrl(_0x56068a,_0x4397fa){return getApiUrl(_0x56068a,_0x4397fa,'enableSSH');}function getMinerLandingPageUrl(_0x30c8eb=null,_0xe6bea7){const _0x32c533=_0x3ae100;if(_0x30c8eb===null)throw new Error(_0x32c533(0x2e9));var _0x1449d7={...minerApis[(_0xe6bea7||'')[_0x32c533(0x330)]()]['routes'][_0x32c533(0x2cd)]}||{'method':_0x32c533(0x1e2),'url':''};return _0x1449d7[_0x32c533(0x24d)]=_0x32c533(0x296)+_0x30c8eb+_0x1449d7[_0x32c533(0x24d)],_0x1449d7;}async function getMinerSystemInfo({ipAddress:ipAddress=null,minerTyped:_0x256e48,apiVersion:_0x20e736,maxSockets:_0x54b219,timeout:timeout=0x1f40},_0x3ac695){const _0x5eb3b7=_0x3ae100;_0x20e736=_0x20e736||(_0x3ac695||{})['apiVersion']||deriveApiVersion({'minerTyped':_0x256e48});let _0x4be4a7=_0x3ac695||(!isCommandAvailable(_0x20e736,_0x5eb3b7(0x266))?null:await getVersionInfo(ipAddress)[_0x5eb3b7(0x1f8)](_0x3d5298=>{const _0x451da6=_0x5eb3b7;return console['debug'](_0x451da6(0x278)+ipAddress,_0x3d5298),null;})),_0x3a6c8d=null;_0x4be4a7&&!/unavailable/i[_0x5eb3b7(0x279)](_0x3ac695)&&(_0x3a6c8d=completeMinerVersion(_0x4be4a7),_0x20e736=_0x3a6c8d[_0x5eb3b7(0x2de)]);!_0x256e48&&_0x3a6c8d&&(_0x256e48=getMinerTypeMap(_0x3a6c8d)||null);const _0x338d7a=getMinerSystemInfoUrl(ipAddress,_0x20e736);let _0x1b2de3;console[_0x5eb3b7(0x2f6)]({'ipAddress':ipAddress,'minerTyped':_0x256e48,'apiVersion':_0x20e736},_0x5eb3b7(0x30a),_0x1b2de3);let _0x3c5eea={},_0x35425e;if(_0x338d7a[_0x5eb3b7(0x24d)]){_0x35425e=await createRequestOptions({'uri':_0x338d7a,'minerTyped':_0x256e48,'apiVersion':_0x20e736,'maxSockets':_0x54b219,'timeout':timeout}),_0x3c5eea=await getJSON(_0x35425e);let _0x445463=_0x3c5eea[_0x5eb3b7(0x30d)]==0x1f4||/(TIMEDOUT|UNREACH)/i[_0x5eb3b7(0x279)](_0x3c5eea['message'])||_0x3c5eea[_0x5eb3b7(0x30d)]&&_0x3a6c8d;if(!_0x445463&&_0x3c5eea['statusCode'])throw _0x3c5eea;if(!_0x445463){if(_0x3c5eea[_0x5eb3b7(0x240)]){let _0x1bc361=null;if(/certificate has expired/i[_0x5eb3b7(0x279)](_0x3c5eea[_0x5eb3b7(0x240)])&&!/whatsminer/i['test'](_0x20e736))_0x1bc361=config[_0x5eb3b7(0x1f5)][_0x5eb3b7(0x209)];else{if(/invalid request/i['test'](_0x3c5eea[_0x5eb3b7(0x240)])){if(!/innosilicon/i[_0x5eb3b7(0x279)](_0x20e736))_0x1bc361=config[_0x5eb3b7(0x1f5)]['Innosilicon\x20T3S'];else!/whatsminer/i['test'](_0x20e736)&&(_0x1bc361=config[_0x5eb3b7(0x1f5)][_0x5eb3b7(0x209)]);}}if(_0x1bc361){const _0x41d15c=await getMinerSystemInfo({'ipAddress':ipAddress,'minerTyped':_0x1bc361,'apiVersion':_0x1bc361['apiVersion']||_0x1bc361[_0x5eb3b7(0x316)],'maxSockets':_0x54b219},_0x3ac695);return _0x41d15c;}}else _0x1b2de3=parseMinerSystemInfo(_0x3c5eea,_0x20e736);}}if(_0x3a6c8d){if(!_0x1b2de3){const _0x1c4825=_0x256e48&&_0x256e48[_0x5eb3b7(0x33b)]?_0x256e48[_0x5eb3b7(0x316)]+'\x20'+_0x256e48[_0x5eb3b7(0x2b0)]:'';_0x1b2de3={'minerType':_0x1c4825,'ipAddress':ipAddress,..._0x3a6c8d};}else Object['keys']({..._0x1b2de3,..._0x3a6c8d})['map'](_0x44b5f9=>{_0x1b2de3[_0x44b5f9]=_0x1b2de3[_0x44b5f9]||_0x3a6c8d[_0x44b5f9];});}if(!_0x1b2de3){!_0x3c5eea['message']&&(_0x3c5eea[_0x5eb3b7(0x240)]='Empty\x20response\x20from\x20server!');throw new Error(_0x3c5eea);}return console['debug']({'ipAddress':ipAddress,'minerTyped':_0x256e48,'apiVersion':_0x20e736},_0x5eb3b7(0x337),_0x35425e,_0x1b2de3),_0x1b2de3;}function isCommandAvailable(_0x3f5425,_0x4c730f){const _0x4f5787=_0x3ae100;var {cgminerCommands:_0x40320c}=minerApis[(_0x3f5425||'')[_0x4f5787(0x330)]()]||{};return _0x40320c?_0x40320c[_0x4f5787(0x34a)](_0x4c730f)>=0x0:!![];}async function getRemotesPools(_0x53938a,_0x34e2d3,_0x37f249){const _0x41b0ed=_0x3ae100,{ipAddress:_0x4cb5fc,macAddress:_0x4cbf17}=_0x53938a;let _0x4f14b7=[];_0x37f249=_0x37f249||deriveApiVersion({'minerInfo':_0x53938a,'minerTyped':_0x34e2d3});const _0x3c2ffc=isCommandAvailable(_0x37f249,_0x41b0ed(0x2a1));if(_0x3c2ffc){const _0x21fdcb=await sendCommand(_0x4cb5fc,_0x41b0ed(0x2a1))[_0x41b0ed(0x1f8)](_0x44ed9e=>{const _0x20a40f=_0x41b0ed;return console['warn'](_0x20a40f(0x1e0)+_0x4cb5fc+'\x20['+_0x4cbf17+']',_0x44ed9e),[];});_0x21fdcb['forEach'](_0x2a2669=>{const {User:_0x548a92,URL:_0x513ca8}=_0x2a2669;_0x4f14b7['push']({'user':_0x548a92,'url':_0x513ca8});});if(_0x4f14b7[_0x41b0ed(0x225)])return console['debug'](_0x41b0ed(0x327),_0x4cb5fc,_0x4f14b7),{'pools':_0x4f14b7};}const _0x58c403=await getMinerSettings(_0x4cb5fc,_0x34e2d3,_0x37f249);return _0x58c403?.['pools']?.[_0x41b0ed(0x225)]&&console['debug']('Miner\x20pools\x20by\x20API\x20',_0x4cb5fc,_0x4f14b7),_0x58c403||{'pools':_0x4f14b7};}async function getSummaryAndPools(_0x55b12a,_0x58bd8){const _0x428623=_0x3ae100,_0x41c4a5=[_0x428623(0x271),_0x428623(0x2a1),_0x428623(0x219),'stats'];return await getAllMinerStateByCommands(_0x55b12a,_0x41c4a5,_0x58bd8);}async function getAllMinerStateByCommands(_0x16fcae,_0x5359b7,_0x2275a9){const _0x4a0d06=_0x3ae100,_0x5947ee={};/all/i[_0x4a0d06(0x279)](_0x5359b7)&&(_0x5359b7=['summary',_0x4a0d06(0x2a1),_0x4a0d06(0x219),_0x4a0d06(0x1d8),'version','config',_0x4a0d06(0x1ca)]);for(const _0x375739 of _0x5359b7){_0x5947ee[_0x375739]=await sendCommand(_0x16fcae,_0x375739)[_0x4a0d06(0x1f8)](_0x372e8f=>{const _0x440585=_0x4a0d06,_0x451584=_0x375739+'\x20command\x20failed\x20for\x20'+_0x16fcae;return console[_0x440585(0x206)](_0x451584,_0x372e8f),{'message':_0x451584,'err':inspect(_0x372e8f,![],0x5,!![])};});}const {version:_0x1bdc30,summary:_0x54c74f,pools:_0x1679ac}=_0x5947ee;return console[_0x4a0d06(0x2f6)]({'ipAddress':_0x16fcae},_0x4a0d06(0x2b9)+_0x16fcae,_0x1bdc30,_0x54c74f,_0x1679ac),_0x5947ee;}async function getMinerStatus({ipAddress:ipAddress=null,minerTyped:_0x12b0c8,apiVersion:_0x5bb13e,maxSockets:_0x3ef575}){const _0x2a63cd=_0x3ae100;if(!_0x12b0c8&&!_0x5bb13e)throw new Error(_0x2a63cd(0x354));_0x5bb13e=_0x5bb13e||deriveApiVersion({'minerTyped':_0x12b0c8});const _0x661cd3=getMinerStatusUrl(ipAddress,_0x5bb13e)||{};let _0x53644c=_0x661cd3[_0x2a63cd(0x24d)]?{}:await getSummaryAndPools(ipAddress,_0x5bb13e)||{},_0x518e9c=null;if(_0x661cd3[_0x2a63cd(0x24d)]&&!_0x53644c[_0x2a63cd(0x271)]){_0x518e9c=await createRequestOptions({'uri':_0x661cd3,'minerTyped':_0x12b0c8,'apiVersion':_0x5bb13e,'maxSockets':_0x3ef575}),_0x53644c=await getJSON(_0x518e9c);if(_0x53644c['statusCode']==0x1f4||/(TIMEDOUT|UNREACH)/i['test'](_0x53644c[_0x2a63cd(0x240)]))_0x53644c=null;else{if(_0x53644c[_0x2a63cd(0x30d)]||_0x53644c[_0x2a63cd(0x274)])throw _0x53644c;}let _0x894089=_0x53644c[_0x2a63cd(0x2a1)]?'pools':_0x2a63cd(0x2e6);if(!_0x53644c[_0x894089]||!_0x53644c[_0x894089]['length']){const _0x45bcb9=await getRemotesPools({'ipAddress':ipAddress},_0x12b0c8);!_0x45bcb9?.[_0x2a63cd(0x225)]&&(_0x53644c[_0x894089]=_0x45bcb9);}}let _0x5243a5=null;return _0x53644c&&(_0x5243a5=await parseMinerStatus({'minerStatus':_0x53644c,'minerTyped':_0x12b0c8,'apiVersion':_0x5bb13e})),console['info'](_0x2a63cd(0x262),ipAddress,_0x5bb13e,_0x12b0c8['brand']),console[_0x2a63cd(0x2f6)]({'ipAddress':ipAddress,'minerTyped':_0x12b0c8,'apiVersion':_0x5bb13e},_0x2a63cd(0x28c),_0x518e9c,_0x5bb13e,_0x12b0c8,_0x5243a5),_0x5243a5;}async function getMinerSettings(_0xd31be5=null,_0x416992,_0x32314a,_0xe56bb8){const _0x440ddf=_0x3ae100;if(!_0x416992&&!_0x32314a)throw new Error('Miner\x20type\x20is\x20a\x20required\x20property\x20for\x20getMinerSettings\x20method\x20'+_0xd31be5+'.\x20MinerTyped:',_0x416992);_0x32314a=_0x32314a||deriveApiVersion({'minerTyped':_0x416992});const _0x9a5615=getMinerSettingsUrl(_0xd31be5,_0x32314a)||{},_0x409962=await createRequestOptions({'uri':_0x9a5615,'minerTyped':_0x416992,'apiVersion':_0x32314a,'maxSockets':_0xe56bb8});let _0x1bfcc3=await getJSON(_0x409962);if(_0x1bfcc3['statusCode']==0x1f4||/(TIMEDOUT|UNREACH)/i[_0x440ddf(0x279)](_0x1bfcc3['message']))_0x1bfcc3=null;else{if(_0x1bfcc3['statusCode'])throw _0x1bfcc3;}let _0x1ad584=null;return _0x1bfcc3&&(_0x1ad584=await parseMinerSettings(_0x1bfcc3,_0x416992,_0x32314a)),console['info'](_0x440ddf(0x229),_0xd31be5,_0x32314a,_0x416992[_0x440ddf(0x316)]),console[_0x440ddf(0x2f6)]({'ipAddress':_0xd31be5,'minerTyped':_0x416992,'apiVersion':_0x32314a},_0x440ddf(0x28c),_0x409962,_0x32314a,_0x416992,_0x1ad584),_0x1ad584;}async function getMinerReboot(_0x2b5271,_0x49b8f5,_0x5c339c,_0x58340a,_0x3a93ae){const _0x5bcdc8=_0x3ae100;if(!_0x49b8f5&&!_0x5c339c)throw new Error(_0x5bcdc8(0x255));const {ipAddress:_0x32a522,macAddress:macAddress=''}=_0x2b5271;_0x5c339c=_0x5c339c||deriveApiVersion({'minerInfo':_0x2b5271,'minerTyped':_0x49b8f5});const _0x413dbb=getMinerRebootUrl(_0x32a522,_0x5c339c)||{};if(!_0x413dbb[_0x5bcdc8(0x24d)])return null;const _0x3b00fa=!![],_0x24a720=await createRequestOptions({'uri':_0x413dbb,'minerTyped':_0x49b8f5,'apiVersion':_0x5c339c,'maxSockets':_0x3a93ae,'followRedirect':_0x3b00fa});let _0x5f4b74=await getJSON(_0x24a720);if(_0x5f4b74[_0x5bcdc8(0x30d)]==0x1f4||/(TIMEDOUT|UNREACH)/i[_0x5bcdc8(0x279)](_0x5f4b74['message']))_0x5f4b74=null;else{if(_0x5f4b74[_0x5bcdc8(0x30d)])throw _0x5f4b74;}return console[_0x5bcdc8(0x355)](_0x5bcdc8(0x338)+_0x2b5271[_0x5bcdc8(0x333)]+'\x20['+_0x32a522+',\x20'+macAddress+']\x20responded\x20with:',_0x5f4b74),_0x5f4b74;}async function getMinerReset(_0x1bc42e,_0x187d8b,_0x1079c3,_0x47987d){const _0x3f8adf=_0x3ae100;if(!_0x187d8b&&!_0x1079c3)throw new Error('Miner\x20type\x20is\x20a\x20required\x20property\x20for\x20getMinerReset\x20method.');const {ipAddress:ipAddress=null,macAddress:macAddress=''}=_0x1bc42e;_0x1079c3=_0x1079c3||deriveApiVersion({'minerInfo':_0x1bc42e,'minerTyped':_0x187d8b});const _0x49fd9a=getMinerResetUrl(ipAddress,_0x1079c3)||{};if(!_0x49fd9a[_0x3f8adf(0x24d)])return null;const _0x471933=await createRequestOptions({'uri':_0x49fd9a,'minerTyped':_0x187d8b,'apiVersion':_0x1079c3,'maxSockets':_0x47987d});let _0x716d9b=await getJSON(_0x471933);if(_0x716d9b['statusCode']==0x1f4||/(TIMEDOUT|UNREACH)/i[_0x3f8adf(0x279)](_0x716d9b[_0x3f8adf(0x240)]))_0x716d9b=null;else{if(_0x716d9b[_0x3f8adf(0x30d)])throw _0x716d9b;}return console['log'](_0x3f8adf(0x2a3)+ipAddress),console['debug']('Reset\x20'+_0x1bc42e[_0x3f8adf(0x333)]+'\x20['+ipAddress+',\x20'+macAddress+_0x3f8adf(0x22c)+_0x716d9b),_0x716d9b;}async function getMinerKill(_0x278e4a,_0x3465ba,_0x4c2860,_0x77520){const _0x2808e8=_0x3ae100;if(!_0x3465ba&&!_0x4c2860)throw new Error(_0x2808e8(0x1e7));const {ipAddress:ipAddress=null,macAddress:macAddress=''}=_0x278e4a;_0x4c2860=_0x4c2860||deriveApiVersion({'minerInfo':_0x278e4a,'minerTyped':_0x3465ba});const _0x3e0b4b=getMinerKillUrl(ipAddress,_0x4c2860)||{};if(!_0x3e0b4b['url'])return null;const _0xf7b1={'Content-Type':_0x2808e8(0x2e8)},_0xa55ee=await createRequestOptions({'uri':_0x3e0b4b,'minerTyped':_0x3465ba,'apiVersion':_0x4c2860,'maxSockets':_0x77520,'headers':_0xf7b1}),_0x5bd9ee=await getHTML(_0xa55ee)[_0x2808e8(0x1f8)](_0x31415b=>{const _0x5aef99=_0x2808e8;if(_0x31415b[_0x5aef99(0x30d)]===0x1f4)return!![];else throw _0x31415b;});return console[_0x2808e8(0x2f6)](_0x2808e8(0x20d)+_0x278e4a[_0x2808e8(0x333)]+'\x20['+ipAddress+',\x20'+macAddress+_0x2808e8(0x22c)+_0x5bd9ee),_0x5bd9ee;}async function getKernelLogs({minerInfo:_0x42bf65,minerTyped:minerTyped={},apiVersion:_0xe5f6f4,maxSockets:_0x8a5134,filepath:_0x429e30}){const _0x2a5e48=_0x3ae100,{ipAddress:ipAddress=null}=_0x42bf65;_0xe5f6f4=_0xe5f6f4||deriveApiVersion({'minerInfo':_0x42bf65,'minerTyped':minerTyped});const _0x1a3a60=getKernelLogsUrl(ipAddress,_0xe5f6f4)||{};if(!_0x1a3a60[_0x2a5e48(0x24d)])return null;const _0xc462d={},_0x375e22=await createRequestOptions({'uri':_0x1a3a60,'minerTyped':minerTyped,'apiVersion':_0xe5f6f4,'maxSockets':_0x8a5134,'headers':_0xc462d}),_0x8af8c9=await getHTML(_0x375e22)[_0x2a5e48(0x1f8)](_0x5444f9=>{const _0x73f7db=_0x2a5e48;return console[_0x73f7db(0x206)](_0x73f7db(0x2aa),_0x5444f9),'';});let _0x36ad5d=null;return _0x8af8c9&&(_0x8af8c9['message']?(console[_0x2a5e48(0x350)](_0x42bf65,_0x8af8c9),_0x36ad5d=''):(console[_0x2a5e48(0x2f6)]('Kernel\x20logs\x20parsing\x20for\x20'+ipAddress+',\x20'+_0xe5f6f4+_0x2a5e48(0x290)+(_0x429e30||_0x2a5e48(0x312))+'.'),_0x429e30&&await writeFile(_0x429e30,_0x8af8c9)[_0x2a5e48(0x1f8)](_0x4119be=>console[_0x2a5e48(0x350)](_0x4119be)),_0x36ad5d=parseKernelLogs(_0x8af8c9,_0xe5f6f4,_0x1a3a60[_0x2a5e48(0x212)]))),console[_0x2a5e48(0x2f6)]('Kernel\x20logs\x20requests\x20',_0x375e22,_0x36ad5d),_0x36ad5d;}async function updateMinerSettings({minerInfo:_0x550e63,minerTyped:_0x3c5173,pools:_0x215e48,minerConfigOptions:_0x513689,apiVersion:_0x12227e}){const _0x4062ce=_0x3ae100;let _0x419bc2=[..._0x215e48];_0x215e48[0x0][_0x4062ce(0x24d)]&&(_0x419bc2=_['map'](_0x215e48,(_0x2dd2f1,_0x413a98)=>{return{'index':_0x413a98+0x1,'stratum':_0x2dd2f1['url'],'username':_0x2dd2f1['user'],'password':'x'};}));const {ipAddress:_0x22090d}=_0x550e63;_0x12227e=(_0x12227e||deriveApiVersion({'minerInfo':_0x550e63,'minerTyped':_0x3c5173}))['toLowerCase']();const _0x33ba4b=minerApis[_0x12227e];let _0x2b1a53=getUpdateMinerSettingsUrl(_0x22090d,_0x12227e)||{};const _0x3ce8b8=isCommandAvailable(_0x12227e,'pools');if(!_0x2b1a53[_0x4062ce(0x24d)]){if(!_0x3ce8b8){let _0x3698e8=_0x4062ce(0x29c)+_0x22090d+_0x4062ce(0x2f0)+_0x12227e+'.\x20cgminer\x20\x22pools\x22\x20command\x20not\x20supported\x20nor\x20URI\x20in\x20config.';return console[_0x4062ce(0x350)](_0x3698e8),null;}const _0x1baf6d=await sendCommand(_0x22090d,_0x4062ce(0x2a1)),_0x2a54ea={'remove':[],'add':[]};for(let _0x2f21f0 of _0x419bc2){const _0x16c73a=_0x2f21f0[_0x4062ce(0x2d6)]+','+(_0x2f21f0[_0x4062ce(0x329)]||_0x4062ce(0x2d7))+','+(_0x2f21f0[_0x4062ce(0x1e8)]||'x'),_0x5d12ec=await sendCommand(_0x22090d,_0x4062ce(0x1da),_0x16c73a);_0x2a54ea[_0x4062ce(0x21b)][_0x4062ce(0x2a9)](_0x5d12ec);}const _0x1d97b2=_0x1baf6d[_0x1baf6d['length']-0x1][_0x4062ce(0x23b)]+0x1,_0xbeb9a6=await sendCommand(_0x22090d,'switchpool',_0x1d97b2);for(let _0xdc8e0b of _0x1baf6d){const _0x18eca0=await sendCommand(_0x22090d,'removepool',_0xdc8e0b[_0x4062ce(0x23b)]);_0x2a54ea[_0x4062ce(0x268)][_0x4062ce(0x2a9)](_0x18eca0);}return await sendCommand(_0x22090d,_0x4062ce(0x25b)),_0x2a54ea;}let _0x1c14db={};const _0x35c3ce=_0x33ba4b[_0x4062ce(0x1d0)][_0x4062ce(0x294)];let _0xa61122='';if(_0x35c3ce&&_0x35c3ce[_0x4062ce(0x24d)]){const _0x48f0b5=await createRequestOptions({'uri':_0x2b1a53,'minerTyped':_0x3c5173,'apiVersion':_0x12227e,'headers':_0x1c14db});_0x48f0b5[_0x4062ce(0x26c)]&&(_0x1c14db[_0x4062ce(0x249)]=_0x48f0b5[_0x4062ce(0x26c)][_0x4062ce(0x249)]);_0x48f0b5[_0x4062ce(0x2b5)]='GET',_0xa61122=await getHTML({..._0x48f0b5});if(_0xa61122[_0x4062ce(0x350)])return inspect(_0xa61122,![],0x5,!![]);}!_0xa61122&&console[_0x4062ce(0x236)](_0x4062ce(0x1fc),_0x550e63,_0x3c5173,_0x215e48,_0x513689,_0x12227e);const _0x3abf54=buildSetMinerSettingsRequestBody({'pools':_0x419bc2,'minerConfigOptions':_0x513689,'html':_0xa61122,'apiVersion':_0x12227e,'minerTyped':_0x3c5173,'uri':_0x2b1a53}),{headers:_0x3fda3c={}}=_0x33ba4b['routes'][_0x4062ce(0x20c)];_0x1c14db={..._0x1c14db,..._0x3fda3c},_0x1c14db[_0x4062ce(0x2ad)]=_0x1c14db[_0x4062ce(0x2ad)]||'application/x-www-form-urlencoded';const _0x12ae03=await createRequestOptions({'uri':_0x2b1a53,'minerTyped':_0x3c5173,'apiVersion':_0x12227e,'headers':_0x1c14db,'form':_0x3abf54});let {body:_0x4a9093}=await formPost({..._0x12ae03});console[_0x4062ce(0x2f6)]({'ipAddress':_0x22090d,'minerTyped':_0x3c5173,'apiVersion':_0x12227e},'Update\x20miner\x20settings\x20',_0x12ae03,_0x4a9093);if(/reboot/['test'](_0x4a9093)||_0x33ba4b[_0x4062ce(0x244)]){const _0x309af3=await getMinerReboot(_0x550e63,_0x3c5173,_0x12227e);_0x309af3?_0x4a9093+=_0x309af3:await sendCommand(_0x22090d,_0x4062ce(0x25b));}return _0x4a9093;}async function updateMinerNetworkSettings({minerInfo:_0x9c2a86,network:_0x2a490d,minerTyped:_0x2c9138,apiVersion:_0x2becfc}){const _0x302f47=_0x3ae100;_0x2becfc=_0x2becfc||deriveApiVersion({'minerInfo':_0x9c2a86,'minerTyped':_0x2c9138});const _0x1785ac=getNetworkSettingsUrl(_0x9c2a86[_0x302f47(0x30b)],_0x2becfc)||{};if(!_0x1785ac[_0x302f47(0x24d)])return null;const _0x516740=buildSetNetworkSettingsRequestBody({'minerInfo':_0x9c2a86,'network':_0x2a490d,'apiVersion':_0x2becfc,'minerTyped':_0x2c9138,'uri':_0x1785ac}),_0x317bae={'Content-Type':_0x302f47(0x2fc)},_0x25c0b8=await createRequestOptions({'uri':_0x1785ac,'minerTyped':_0x2c9138,'apiVersion':_0x2becfc,'headers':_0x317bae,'form':_0x516740}),{body:_0x34b806}=await formPost({..._0x25c0b8});return console[_0x302f47(0x2f6)]('Update\x20miner\x20network\x20settings\x20',_0x25c0b8,_0x34b806),_0x34b806;}async function retrieveMinerNetworkDiagnostics({minerInfo:_0x4f642d,diagnostic:_0x2d52c9,minerTyped:_0x557ec5,apiVersion:_0x7bc37}){const _0x13414f=_0x3ae100;_0x7bc37=_0x7bc37||deriveApiVersion({'minerInfo':_0x4f642d,'minerTyped':_0x557ec5});const _0x47a9ba=getNetworkDiagnosticsUrl(_0x4f642d[_0x13414f(0x30b)],_0x7bc37)||{};if(!_0x47a9ba['url'])return null;const _0x99050e=buildNetworkDiagnosticRequestBody({'diagnostic':_0x2d52c9,'apiVersion':_0x7bc37,'minerTyped':_0x557ec5,'uri':_0x47a9ba}),_0x560dc4={'Content-Type':_0x13414f(0x2fc)},_0x11fc9f=await createRequestOptions({'uri':_0x47a9ba,'minerTyped':_0x557ec5,'apiVersion':_0x7bc37,'headers':_0x560dc4,'form':_0x99050e}),{body:_0x16d2aa}=await formPost({..._0x11fc9f});console[_0x13414f(0x2f6)]('Retrieve\x20miner\x20network\x20diagnostics\x20',_0x11fc9f,_0x16d2aa);let _0x269db3=parseNetworkDiagnostic(_0x16d2aa);if(!_0x269db3||!_0x269db3[_0x13414f(0x1c0)])throw new Error(_0x269db3);return{..._0x2d52c9,..._0x269db3};}async function removeMinerUpgradeCheck({minerInfo:_0x35b0f1,minerTyped:_0x3ae595,apiVersion:_0x4542f4,filenames:filenames=['upgrade.cgi',_0x3ae100(0x31c)]}){const _0x5f471c=_0x3ae100,{ipAddress:_0x165227}=_0x35b0f1;_0x4542f4=(_0x4542f4||deriveApiVersion({'minerInfo':_0x35b0f1,'minerTyped':_0x3ae595}))[_0x5f471c(0x330)]();const _0x4e7362=minerApis[_0x4542f4],_0x33885d=new SSH({'host':_0x165227,'user':_0x4e7362[_0x5f471c(0x1ff)],'pass':_0x4e7362[_0x5f471c(0x277)]});return new Promise(function(_0x26e7e4,_0x50793b){const _0x496af7=_0x5f471c,_0x3f2169={'out':console[_0x496af7(0x355)][_0x496af7(0x28e)](console),'err':console['error'][_0x496af7(0x28e)](console),'exit':(_0x1945e3,_0x18f825,_0x13a089)=>{const _0x18f363=_0x496af7;_0x1945e3===0x1&&(console[_0x18f363(0x206)](_0x18f363(0x245),_0x1945e3,_0x18f825,_0x13a089),_0x50793b(_0x13a089));}};_0x33885d[_0x496af7(0x25e)](_0x496af7(0x2bd)),filenames[_0x496af7(0x351)](_0x3793e0=>{const _0x1a3ef3=_0x496af7;_0x33885d[_0x1a3ef3(0x25e)](_0x1a3ef3(0x2da)+_0x3793e0,_0x3f2169);}),console['log'](_0x496af7(0x1d5)+filenames['join'](',')+_0x496af7(0x1d4)+_0x165227),_0x33885d['on'](_0x496af7(0x350),function(_0x29446d){const _0x188dd6=_0x496af7;var _0x551cf9=_0x188dd6(0x25c)+filenames[_0x188dd6(0x246)](',')+'\x20for\x20'+_0x165227;console[_0x188dd6(0x355)](_0x551cf9,_0x29446d),_0x50793b(_0x551cf9);}),_0x33885d['on'](_0x496af7(0x226),function(){const _0x2c2ca9=_0x496af7;_0x26e7e4(_0x2c2ca9(0x2c6)+filenames['join'](',')+_0x2c2ca9(0x1d4)+_0x165227);}),_0x33885d['start']();});}async function enableFirmwareUpload({minerInfo:_0x2d9d6b,minerTyped:_0x3ca04c,apiVersion:_0x47126d}){const _0xa9dfcf=_0x3ae100,_0xe1f283=await updateEnableSSH({'minerInfo':_0x2d9d6b,'minerTyped':_0x3ca04c,'apiVersion':_0x47126d});if(_0xe1f283!==SSH_PORT_STATE[_0xa9dfcf(0x1c7)])return _0xe1f283;return removeMinerUpgradeCheck({'minerInfo':_0x2d9d6b,'minerTyped':_0x3ca04c,'apiVersion':_0x47126d})['then'](()=>{const _0x11eb45=_0xa9dfcf;return SSH_PORT_STATE[_0x11eb45(0x1c7)];})['catch'](_0x58421d=>{const _0x406675=_0xa9dfcf;return console[_0x406675(0x206)](_0x406675(0x34f),_0x58421d),SSH_PORT_STATE[_0x406675(0x1bc)];});}let firmwareBuffers={};function getFirmwareBuffer(_0x1bc602,_0x22e48f,_0x2e1a8c){const _0x136406=_0x3ae100;if(!firmwareBuffers[_0x1bc602]){let _0x2ae632=_0x136406(0x297);_0x2e1a8c&&_0x2e1a8c['firmwareContentType']&&(_0x2ae632=_0x2e1a8c[_0x136406(0x1cf)]);var _0x14d286=fs[_0x136406(0x24f)](path[_0x136406(0x302)](global['firmwareFolderPath']+'/'+_0x1bc602)),_0x4611a8='';_0x4611a8+='--'+_0x22e48f+'\x0d\x0a',_0x4611a8+=_0x136406(0x321)+_0x1bc602+_0x136406(0x253),_0x4611a8+=_0x136406(0x29f)+_0x2ae632+_0x136406(0x27c),firmwareBuffers[_0x1bc602]=Buffer[_0x136406(0x2e0)]([Buffer[_0x136406(0x343)](_0x4611a8,_0x136406(0x1d1)),Buffer[_0x136406(0x343)](_0x14d286,_0x136406(0x232)),Buffer[_0x136406(0x343)](_0x136406(0x2df)+_0x22e48f+'\x0d\x0a',_0x136406(0x1d1))]);}return firmwareBuffers[_0x1bc602];}let templateLiterals={};function getTemplateLiteral(_0x20928c,_0x4db11a){function _0x479635(_0x580622){const _0x316ae9=_0x1812;try{templateLiterals[_0x580622]=fs[_0x316ae9(0x24f)](path[_0x316ae9(0x302)](_0x316ae9(0x248)+_0x580622),'utf8');}catch(_0x39fa67){templateLiterals[_0x580622]='',console[_0x316ae9(0x2f6)](_0x316ae9(0x33e)+_0x580622+'.\x20Will\x20attempt\x20to\x20find\x20alternate:\x20'+(_0x4db11a||_0x316ae9(0x205))+'.');};}return!templateLiterals[_0x20928c]&&!templateLiterals[_0x4db11a]&&(_0x479635(_0x20928c),_0x4db11a&&_0x479635(_0x4db11a)),templateLiterals[_0x20928c]||templateLiterals[_0x4db11a];}async function updateMinerFirmware({minerInfo:_0x4e87a7,minerTyped:_0x544934,firmwareFileName:_0x58dc65,apiVersion:_0x4c0838,recursed:recursed=![]}){const _0x9e553a=_0x3ae100;_0x4c0838=_0x4c0838||deriveApiVersion({'minerInfo':_0x4e87a7,'minerTyped':_0x544934});const {ipAddress:_0x40aaa6,macAddress:_0x257996,workerName:_0x443a8f}=_0x4e87a7;!recursed&&console[_0x9e553a(0x355)]('Firmware\x20update\x20requested\x20for\x20'+_0x443a8f+'\x20['+_0x40aaa6+',\x20'+_0x257996+']\x20to\x20'+_0x58dc65);var _0x2a594f=_0x9e553a(0x303)+Math['random']()[_0x9e553a(0x1bd)](0x24)['substr'](0x2);const _0x50fde6=getMinerFirmwareUpdateUrl(_0x40aaa6,_0x4c0838)||{};if(!_0x50fde6[_0x9e553a(0x24d)])return SSH_PORT_STATE[_0x9e553a(0x26a)];const _0x4b77f=getFirmwareBuffer(_0x58dc65,_0x2a594f,_0x544934),_0x1bc057={'Content-Type':_0x9e553a(0x33c)+_0x2a594f,'Content-Length':_0x4b77f[_0x9e553a(0x225)]},_0x2f42ea=await createRequestOptions({'uri':_0x50fde6,'minerTyped':_0x544934,'apiVersion':_0x4c0838,'headers':_0x1bc057,'body':_0x4b77f,'timeout':0x493e0});!/^(L3|S9)/i['test'](_0x4e87a7[_0x9e553a(0x2b0)])&&!recursed&&await getMinerKill(_0x4e87a7,_0x544934,_0x4c0838)['then'](_0x51ec1c=>{const _0x5e8edf=_0x9e553a;console[_0x5e8edf(0x355)](_0x5e8edf(0x32b)+_0x443a8f+'\x20['+_0x40aaa6+',\x20'+_0x257996+']\x20',_0x51ec1c);})[_0x9e553a(0x1f8)](_0x629eb3=>{const _0x484ae1=_0x9e553a;console[_0x484ae1(0x355)](_0x484ae1(0x315)+_0x443a8f+'\x20['+_0x40aaa6+',\x20'+_0x257996+']\x20',_0x629eb3);});let _0x3f3620='';const _0x4e4cc3=await filePost({..._0x2f42ea})[_0x9e553a(0x1f8)](_0x1df0c8=>{const _0x23c78f=_0x9e553a;if(_0x1df0c8['statusCode']===0x1f4||/TIMEDOUT/i[_0x23c78f(0x279)](_0x1df0c8['message']))return _0x3f3620=_0x1df0c8[_0x23c78f(0x299)]+_0x23c78f(0x1c3)+inspect(_0x1df0c8),![];else throw _0x1df0c8;});if(_0x4e4cc3){if(/System Upgrade Succ/i['test'](_0x4e4cc3))return console[_0x9e553a(0x355)](_0x9e553a(0x2ab)+_0x443a8f+'\x20['+_0x40aaa6+',\x20'+_0x257996+_0x9e553a(0x1f4)+_0x58dc65),setTimeout(function(){getMinerReboot(_0x4e87a7,_0x544934,_0x4c0838);},0x7d0),SSH_PORT_STATE[_0x9e553a(0x1c7)];else{if(reKnownFirmwareUpdateErrors['test'](_0x4e4cc3)){let _0x4fa1cf=_0x4e4cc3[_0x9e553a(0x217)](reKnownFirmwareUpdateErrors);if(_0x4fa1cf){_0x3f3620=_0x4fa1cf[0x1];if(/sign/i[_0x9e553a(0x279)](_0x3f3620)){const _0x1912db=await enableFirmwareUpload({'minerInfo':_0x4e87a7,'minerTyped':_0x544934,'apiVersion':_0x4c0838});if(_0x1912db==SSH_PORT_STATE[_0x9e553a(0x1c7)]&&!recursed)return console[_0x9e553a(0x355)](_0x9e553a(0x29e)+_0x443a8f+'\x20['+_0x40aaa6+',\x20'+_0x257996+_0x9e553a(0x1f4)+_0x58dc65),updateMinerFirmware({'minerInfo':_0x4e87a7,'minerTyped':_0x544934,'firmwareFileName':_0x58dc65,'apiVersion':_0x4c0838,'recursed':!![]});else!recursed&&console[_0x9e553a(0x355)](_0x9e553a(0x1ba)+_0x443a8f+'\x20['+_0x40aaa6+',\x20'+_0x257996+_0x9e553a(0x1f4)+_0x58dc65);}_0x3f3620=_0x4fa1cf[0x1];}else _0x3f3620=_0x4e4cc3;}else _0x3f3620=_0x4e4cc3;}}return console[_0x9e553a(0x355)](_0x9e553a(0x2f9)+_0x443a8f+'\x20['+_0x40aaa6+',\x20'+_0x257996+_0x9e553a(0x1f4)+_0x58dc65,_0x3f3620),SSH_PORT_STATE[_0x9e553a(0x26a)];}async function updateEnableSSH({minerInfo:_0x250b89,minerTyped:_0x57e72c,firmwareFilename:_0x2f72d2,apiVersion:_0x2d13ca}){const _0x1cf676=_0x3ae100,{ipAddress:_0x5bb141}=_0x250b89;let _0x19dcdb=portScanner[_0x1cf676(0x1ef)](0x16,_0x5bb141)[_0x1cf676(0x1d7)](_0x194ea7=>{const _0x3c53ba=_0x1cf676;if(_0x194ea7==SSH_PORT_STATE[_0x3c53ba(0x1c7)])return _0x194ea7;return/updater/i[_0x3c53ba(0x279)](_0x2f72d2)?updateEnableSSHupdater({'minerInfo':_0x250b89,'minerTyped':_0x57e72c,'apiVersion':_0x2d13ca}):_0x194ea7;})[_0x1cf676(0x1f8)](_0x4e3d57=>{const _0x756a9b=_0x1cf676;return console[_0x756a9b(0x350)](_0x756a9b(0x304),_0x4e3d57),![];});return _0x19dcdb;}async function updateEnableSSHupdater({minerInfo:_0x1fd16a,minerTyped:_0x3fc4b0,apiVersion:_0x885e0e}){const _0x3527eb=_0x3ae100,{ipAddress:_0xc6f53c}=_0x1fd16a;_0x885e0e=_0x885e0e||deriveApiVersion({'minerInfo':_0x1fd16a,'minerTyped':_0x3fc4b0});const _0x58e082=getEnableSSHUrl(_0xc6f53c,_0x885e0e)||{};if(!_0x58e082[_0x3527eb(0x24d)])return SSH_PORT_STATE[_0x3527eb(0x26a)];const _0x2cd38c=_0x58e082[_0x3527eb(0x295)],_0x50b56d={'Content-Type':_0x3527eb(0x2fc)},_0x471569=await createRequestOptions({'uri':_0x58e082,'minerTyped':_0x3fc4b0,'apiVersion':_0x885e0e,'headers':_0x50b56d,'form':_0x2cd38c}),{body:_0x284d41}=await formPost({..._0x471569})['then'](_0x151e98=>_0x151e98)['catch'](_0x30f3cd=>{const _0x8bc39b=_0x3527eb;return console[_0x8bc39b(0x206)](_0x8bc39b(0x2d8),_0x30f3cd),![];});return console['debug']('Update\x20enable\x20SSH\x20for\x20updater\x20',_0x471569,_0x284d41),/Start\s+ssh/i[_0x3527eb(0x279)](_0x284d41)?(console[_0x3527eb(0x355)](_0x3527eb(0x27d)+_0xc6f53c),SSH_PORT_STATE['OPEN']):(console[_0x3527eb(0x355)](_0x3527eb(0x317)+_0xc6f53c,_0x284d41),SSH_PORT_STATE[_0x3527eb(0x298)]);}async function updateEnableSSHAntminer({minerInfo:_0x520c89,minerTyped:_0x1c73b5,apiVersion:_0x5da9c8}){const _0x4595b5=_0x3ae100,{ipAddress:_0x40bf53}=_0x520c89;_0x5da9c8=_0x5da9c8||deriveApiVersion({'minerInfo':_0x520c89,'minerTyped':_0x1c73b5});const _0x13631f=getEnableSSHUrl(_0x40bf53,_0x5da9c8)||{};if(!_0x13631f[_0x4595b5(0x24d)])return null;const {data:_0x30c205}=_0x13631f,_0x1d10a3=await createRequestOptions({'uri':_0x13631f,'minerTyped':_0x1c73b5,'apiVersion':_0x5da9c8,'body':_0x30c205}),{body:_0x47bde2}=await formPost({..._0x1d10a3})['then'](_0xfad6c5=>_0xfad6c5)[_0x4595b5(0x1f8)](_0xe14a15=>{const _0x1ff1f9=_0x4595b5;return console['warn'](_0x1ff1f9(0x2d8),_0xe14a15),![];});return/busybox/i['test'](_0x47bde2)?(console[_0x4595b5(0x355)](_0x4595b5(0x27d)+_0x40bf53),await getMinerReboot(_0x520c89,_0x1c73b5,_0x5da9c8),SSH_PORT_STATE[_0x4595b5(0x1c7)]):(console[_0x4595b5(0x355)](_0x4595b5(0x1cc)+_0x40bf53,_0x47bde2),SSH_PORT_STATE['CLOSED']);}let walletsCache={};async function getWallets(_0x53b75d){const _0x45dd32=_0x3ae100;if(walletsCache[_0x53b75d])return walletsCache[_0x53b75d];const _0x3ba7ce=loopback[_0x45dd32(0x2ed)]('wallet');return _0x3ba7ce[_0x45dd32(0x261)]()[_0x45dd32(0x1d7)](_0x45a84d=>{return walletsCache=_['groupBy'](_0x45a84d,'accountName'),walletsCache[_0x53b75d];});}let walletInfoCache={};async function getWalletInfo(_0x3242d0){const _0x212955=_0x3ae100;if(Object['keys'](walletInfoCache)[_0x212955(0x225)])return walletInfoCache[_0x3242d0];const _0x47caf8=loopback[_0x212955(0x2ed)](_0x212955(0x305));return _0x47caf8[_0x212955(0x261)]()[_0x212955(0x1d7)](_0x2d993e=>{const _0x1b45fc=_0x212955;return walletInfoCache=_[_0x1b45fc(0x2eb)](_0x2d993e,_0x1b45fc(0x20e)),walletInfoCache[_0x3242d0];});}let poolTemplates={};async function getPoolTemplates(_0x3f38f2,_0x36c138,_0x190e8d){const _0x255065=_0x3ae100,_0x16bf6a=_0x36c138&&_0x36c138[0x0],_0x1707ee=_0x16bf6a?_0x36c138[_0x255065(0x246)](','):_0x3f38f2;if(_0x190e8d&&poolTemplates[_0x1707ee])return poolTemplates[_0x1707ee];var _0x1b361e;_0x16bf6a?_0x1b361e={'where':{'ID':{'inq':_0x36c138}}}:_0x1b361e={'where':{'and':[{'hashAlgorithm':_0x3f38f2},{'priority':{'lt':0x4}}]},'order':_0x255065(0x1d9)};const _0x27be6b=loopback[_0x255065(0x2ed)](_0x255065(0x32f));return _0x27be6b[_0x255065(0x261)](_0x1b361e)[_0x255065(0x1d7)](_0x1f3ab1=>{const _0x487975=_0x255065;if(_0x1f3ab1[_0x487975(0x225)]===0x0){if(_0x16bf6a)throw new Error(_0x487975(0x213)+_0x36c138);throw new Error('No\x20pool\x20templates\x20found\x20for\x20algorithm:'+_0x3f38f2);}if(_0x16bf6a){const _0x49f1f1=_[_0x487975(0x2eb)](_0x1f3ab1,'id');poolTemplates[_0x1707ee]=[];for(var _0x31b7e3=0x0;_0x31b7e3<_0x36c138['length'];_0x31b7e3++){_0x49f1f1[_0x36c138[_0x31b7e3]]&&poolTemplates[_0x1707ee]['push'](_0x49f1f1[_0x36c138[_0x31b7e3]]);}}else poolTemplates[_0x1707ee]=_0x1f3ab1;return poolTemplates[_0x1707ee];});}async function getRemotesPoolConfig({minerInfo:_0x1d058f,minerTyped:_0x306050,ignoreCache:_0xe394dd,apiVersion:_0xb72659}){const _0x4fe6a5=_0x3ae100;if(!_0x1d058f)return null;const {ipAddress:_0xea0f6e}=_0x1d058f;if(_0xea0f6e&&(_0xe394dd||!_0x1d058f[_0x4fe6a5(0x280)]||!_0x1d058f[_0x4fe6a5(0x280)]['pools'])){const _0x4475e8=await getMinerStatus({'ipAddress':_0xea0f6e,'minerTyped':_0x306050,'apiVersion':_0xb72659});if(!_0x4475e8)return{'pools':[],'frequency':0x0};else{if(!_0x4475e8[_0x4fe6a5(0x2ff)])return null;}_0x1d058f[_0x4fe6a5(0x280)]=_0x4475e8;}let {pools:_0x24af20,frequency:_0x19a510,volts:_0x2869d3}=_0x1d058f[_0x4fe6a5(0x280)];return _0x24af20=_0x24af20[_0x4fe6a5(0x203)](_0x4abb3c=>{const _0x1a49aa=_0x4fe6a5;return{'url':_0x4abb3c[_0x1a49aa(0x24d)],'user':_0x4abb3c[_0x1a49aa(0x1c2)]};}),{'pools':_0x24af20,'frequency':_0x19a510,'volts':_0x2869d3};}function havePoolConfigsChanged({poolConfig:poolConfig={},expectedPoolConfig:expectedPoolConfig={}}){const _0x2edcdd=_0x3ae100;if(poolConfig[_0x2edcdd(0x324)]&&expectedPoolConfig['frequency']&&poolConfig[_0x2edcdd(0x324)]!=expectedPoolConfig[_0x2edcdd(0x324)])return!![];if(poolConfig[_0x2edcdd(0x2a0)]&&expectedPoolConfig[_0x2edcdd(0x2a0)]&&poolConfig[_0x2edcdd(0x2a0)]!=expectedPoolConfig[_0x2edcdd(0x2a0)])return!![];if(!poolConfig[_0x2edcdd(0x2a1)]||poolConfig['pools'][_0x2edcdd(0x225)]<expectedPoolConfig[_0x2edcdd(0x2a1)][_0x2edcdd(0x225)])return!![];for(var _0x502596=0x0;_0x502596<expectedPoolConfig[_0x2edcdd(0x2a1)]['length'];_0x502596++){let _0x5a2cca=poolConfig[_0x2edcdd(0x2a1)][_0x502596]||{'url':'','user':''},_0x5a6134=expectedPoolConfig['pools'][_0x502596]||{'stratum':'','username':''};if(!_0x5a2cca['url']&&!_0x5a6134['stratum'])continue;if(_0x5a2cca[_0x2edcdd(0x24d)][_0x2edcdd(0x330)]()[_0x2edcdd(0x34a)](_0x5a6134['stratum']['toLowerCase']()[_0x2edcdd(0x1df)](/[^\/]*\/\//,''))<0x0||_0x5a2cca[_0x2edcdd(0x1c2)]!==_0x5a6134[_0x2edcdd(0x329)])return!![];}return![];}async function validateMinerConfig({minerInfo:_0x5970ea,apiVersion:_0x54f5a5,dataCenterSettings:_0x576989,minerConfigOptions:minerConfigOptions=null,poolIDs:poolIDs=null,isBulk:_0x19a4d6}){const _0x425766=_0x3ae100,{accountName:_0x3c3c78}=_0x5970ea,_0x3f7393=getMinerTypeMap(_0x5970ea),{hashingAlgorithm:_0x584587}=_0x3f7393||{};let _0x27a609;if(!minerConfigOptions){const {frequency:_0x5f2d76,volts:_0x527bb}=_0x5970ea[_0x425766(0x280)];minerConfigOptions={'frequency':_0x5f2d76,'volts':_0x527bb};}const _0x442a32=await getPoolTemplates(_0x584587,poolIDs,_0x19a4d6),_0x1fdcf0=await getWallets(_0x3c3c78);_0x27a609=getPoolConfigs({'rawPools':_0x442a32,'dataCenterSettings':_0x576989,'wallets':_0x1fdcf0,'minerInfo':_0x5970ea,'minerTyped':_0x3f7393});const {pools:_0x5dbba8,workerName:_0x509331}=_0x27a609,{frequency:_0x445f9b,volts:_0x5d2d62}=minerConfigOptions,_0x3ac3a2={'pools':_0x5dbba8,'frequency':_0x445f9b,'volts':_0x5d2d62},_0x18bffb=await getRemotesPoolConfig({'minerInfo':_0x5970ea,'minerTyped':_0x3f7393,'ignoreCache':!_0x19a4d6,'apiVersion':_0x54f5a5});let _0x23d8b5=![];return _0x509331&&_0x509331!==_0x5970ea[_0x425766(0x333)]?_0x23d8b5=!![]:_0x23d8b5=!_0x18bffb||havePoolConfigsChanged({'poolConfig':_0x18bffb,'expectedPoolConfig':_0x3ac3a2}),{'poolsAreDifferent':_0x23d8b5,'remotesPools':_0x18bffb,'poolsConfig':_0x3ac3a2,'workerName':_0x509331};}async function extractAccountAndWorkerNumber({poolWorkers:poolWorkers=[]}){const _0x49baeb=_0x3ae100;if(!poolWorkers[_0x49baeb(0x225)]||!poolWorkers[0x0])return null;let _0x3123a4=null,_0x298b2c=null,_0x1188d9=null;const _0x36553e=/^([^\.]+)\.((?:[^\.#]*?)(\d+))(#|$)/,_0x56181e=/^([^\.]+)\.((?:[^#]*?))(#|$)/;let _0x4e10e7=poolWorkers[0x0]['match'](_0x36553e);if(_0x4e10e7)_0x298b2c=_0x4e10e7[0x1],_0x1188d9=_0x4e10e7[0x2],_0x3123a4=_0x4e10e7[0x3];else{if(/_\d+$/[_0x49baeb(0x279)](poolWorkers[0x0])){const _0x13c82e=poolWorkers[0x0][_0x49baeb(0x301)]('_');_0x298b2c=_0x13c82e[0x0],_0x1188d9=poolWorkers[0x0],_0x3123a4=_0x13c82e[0x1];}else{if(_0x56181e['test'](poolWorkers[0x0])){_0x4e10e7=poolWorkers[0x0]['match'](_0x56181e),_0x298b2c=_0x4e10e7[0x1],_0x1188d9=_0x4e10e7[0x2];const _0x4ba1f6=_0x4e10e7[0x2]['match'](/\D(\d+)$/);_0x3123a4=_0x4ba1f6?_0x4ba1f6[0x1]:0x270f;}else{if(poolWorkers[0x1])_0x4e10e7=poolWorkers[0x1]['match'](_0x36553e),_0x4e10e7&&(_0x298b2c=_0x4e10e7[0x1],_0x1188d9=_0x4e10e7[0x2],_0x3123a4=_0x4e10e7[0x3]);else poolWorkers[0x0]['length']&&(_0x298b2c=poolWorkers[0x0],_0x1188d9='',_0x3123a4=0x0);}}}let _0xb83e64=await getWalletInfo(_0x298b2c);return _0xb83e64&&(_0x298b2c=_0xb83e64['accountName']),_0x3123a4?{'accountName':_0x298b2c,'workerName':_0x1188d9,'workerTypeNumber':_0x3123a4}:null;}function getPoolConfigs({rawPools:_0x12a62b,dataCenterSettings:_0x32861e,wallets:_0x41fbe2,minerInfo:_0x5d28c6,minerTyped:_0x402977}){const _0x2a772b=_0x3ae100,_0x32693c=getTokenValueMapper({'dataCenterSettings':_0x32861e,'wallets':_0x41fbe2,'minerInfo':_0x5d28c6,'minerTyped':_0x402977});let _0x1dd314='';const _0x423c03=_0x12a62b[_0x2a772b(0x203)]((_0x4a83fc,_0x53240f)=>{const _0x1a8fe5=_0x2a772b,_0x1a678e=replaceTokensWithValues(_0x4a83fc[_0x1a8fe5(0x329)],_0x32693c),_0x4386c9=replaceTokensWithValues(_0x4a83fc[_0x1a8fe5(0x1e8)],_0x32693c),_0x1bfa69=_0x4a83fc[_0x1a8fe5(0x2d6)];if(!_0x1dd314){const _0x2e22d4=_0x1a678e[_0x1a8fe5(0x301)]('.')[0x1]||'';if(_0x2e22d4[_0x1a8fe5(0x34a)](_0x32861e[_0x1a8fe5(0x273)])>-0x1)_0x1dd314=_0x2e22d4;else{const _0x2ca965=new RegExp('\x5cW(\x5cw*'+_0x32861e[_0x1a8fe5(0x273)]+_0x1a8fe5(0x347),'i'),_0x122a2f=_0x4386c9[_0x1a8fe5(0x217)](_0x2ca965);_0x122a2f&&(_0x1dd314=_0x122a2f[0x1]||'');}}return{'index':_0x53240f+0x1,'stratum':_0x1bfa69,'username':_0x1a678e,'password':_0x4386c9};});return{'pools':_0x423c03,'workerName':_0x1dd314};}async function getPoolIDs(_0x1be437){const _0x19e5dd=_0x3ae100;let _0x430e1d=[];const _0x41f504=loopback['getModel'](_0x19e5dd(0x32f));for(var _0x4dcea0=0x0;_0x4dcea0<0x3;_0x4dcea0++){_0x1be437[_0x19e5dd(0x280)]&&_0x1be437[_0x19e5dd(0x280)]['pools']&&_0x1be437['condition'][_0x19e5dd(0x2a1)][_0x4dcea0]?_0x430e1d[_0x4dcea0]=await _0x41f504[_0x19e5dd(0x261)]({'where':{'stratum':_0x1be437['condition'][_0x19e5dd(0x2a1)][_0x4dcea0][_0x19e5dd(0x24d)][_0x19e5dd(0x1df)]('stratum+tcp://','')}})[_0x19e5dd(0x1d7)](_0x3c3a6a=>{return _0x3c3a6a[0x0]?_0x3c3a6a[0x0]['id']:0x0;}):_0x430e1d[_0x4dcea0]=0x0;}return _0x430e1d;}function deriveOverclockApi(_0x34e9fc,_0x5572d6){const _0x933abb=_0x3ae100;if(softwareVersions['updater'][_0x933abb(0x323)](_0x34e9fc))return'Antminer_updater';else{if(softwareVersions[_0x933abb(0x200)][_0x933abb(0x323)](_0x34e9fc))return _0x933abb(0x2c9);}if(!_0x5572d6)return'';let _0x213343=null;if(/\(/i[_0x933abb(0x279)](_0x5572d6))return _0x213343=_0x5572d6[_0x933abb(0x217)](/(\w+)[^\(]+\(\s*(\w+)/),_0x213343[0x1]+'_'+(/vnish/i['test'](_0x213343[0x2])?_0x933abb(0x27a):_0x213343[0x2]);else{if(_0x5572d6)return _0x213343=_0x5572d6[_0x933abb(0x301)](/\s/),_0x213343[0x0];}}function deriveApiVersion({minerInfo:minerInfo={},minerTyped:_0x34e594}){const _0x39b17e=_0x3ae100;let {apiVersion:_0x30cd87,minerType:_0x333d68,brand:_0x24c402}=_0x34e594||{};if(_0x30cd87)return _0x30cd87;const {softwareVersion:_0x1b3105,firmwareFileName:_0x48493d,brand:_0x2f4ba6}=minerInfo;_0x30cd87=deriveOverclockApi(_0x1b3105,_0x333d68);if(_0x30cd87)return _0x30cd87;const _0x24f728=minerInfo['apiVersion']||_0x2f4ba6||_0x24c402;if(_0x24f728)return _0x24f728;else{if(/updater/i[_0x39b17e(0x279)](_0x48493d))return _0x39b17e(0x2a8);}return _0x39b17e(0x2d4);}function parseMinerSystemInfo(_0x4a6417,_0x42dddc){const _0x16bb7b=_0x3ae100;var _0x5ea965={'Antminer':function(_0x3e823b,_0x3ce309){const _0x1842de=_0x1812;if(!_0x3e823b['minertype'])return null;const {uptime:_0x1f6ef7,curtime:_0x361ce3,macaddr:_0x156306,ipaddress:_0x3dd1ab,minertype:_0x21292a,bmminer_version:_0x5190e6,cgminer_version:_0x583fef,ant_hwv:_0x5e8033,hwv:_0x21368e,swv:_0x518767,system_kernel_version:_0x1a0cd9,system_filesystem_version:_0x2863a1,system_logic_version:_0x268e80,miner_model:_0x310ff4,hostname:_0x5db887}=_0x3e823b,_0x542c98=((_0x5190e6||_0x583fef||_0x1842de(0x1c6))[_0x1842de(0x217)](/((?:\d+\.)+\d+)/)||['','0.0'])[0x1];let _0x3291e3=getMinerType(_0x21292a);const _0x18ff7c=_0x5190e6||_0x583fef?(_0x5190e6?_0x1842de(0x224):_0x1842de(0x353))+_0x542c98:'';return _0x3ce309=_0x3ce309||deriveOverclockApi(_0x18ff7c,_0x3291e3),{'minerType':_0x3291e3,'modelType':_0x21292a,'apiVersion':_0x3ce309,'upTime':_0x1f6ef7,'minerTime':_0x361ce3,'macAddress':_0x156306,'ipAddress':_0x3dd1ab,'hardwareVersion':_0x5e8033||_0x21368e,'systemKernelVersion':_0x1a0cd9,'fileSystemTimestamp':_0x2863a1,'systemLogicVersion':_0x268e80||_0x518767,'softwareVersion':_0x18ff7c};},'Antminer_antpool':function(_0x39536f,_0x1a720f){const _0x3266e4=_0x1812;if(!_0x39536f[_0x3266e4(0x34c)])return null;const {uptime:_0x2d9979,curtime:_0x18f2bb,macaddr:_0x1f35db,ipaddress:_0x1f5a0a,minertype:_0x5f1545,bmminer_version:_0x1d3ffe,cgminer_version:_0x121cb0,ant_hwv:_0x41e6df,system_kernel_version:_0x364179,system_filesystem_version:_0x3b54c8,system_logic_version:_0x5827fe}=_0x39536f,_0x46f34d=getMinerType(_0x5f1545),_0x2e720b=_0x1d3ffe||_0x121cb0;return{'minerType':_0x46f34d,'modelType':_0x5f1545,'apiVersion':_0x1a720f,'upTime':_0x2d9979,'minerTime':_0x18f2bb,'macAddress':_0x1f35db,'ipAddress':_0x1f5a0a,'hardwareVersion':_0x41e6df,'systemKernelVersion':_0x364179,'fileSystemTimestamp':_0x3b54c8,'systemLogicVersion':_0x5827fe,'softwareVersion':(_0x1d3ffe?_0x3266e4(0x224):_0x3266e4(0x353))+_0x2e720b};},'Antminer_updater':function(_0x20e669,_0x51c161){const _0x3e16e7=_0x1812;if(!_0x20e669['minertype'])return null;const _0xa7d523=getMinerType(_0x20e669[_0x3e16e7(0x34c)]),_0x46f1e4=_0x20e669['bmminer_version']||_0x20e669[_0x3e16e7(0x23a)];return{'minerType':_0xa7d523,'modelType':_0x20e669[_0x3e16e7(0x34c)],'apiVersion':_0x51c161,'macAddress':_0x20e669[_0x3e16e7(0x288)],'ipAddress':_0x20e669[_0x3e16e7(0x254)],'hardwareVersion':_0x20e669[_0x3e16e7(0x26b)],'systemKernelVersion':_0x20e669['system_kernel_version'],'fileSystemTimestamp':_0x20e669[_0x3e16e7(0x223)],'systemLogicVersion':_0x20e669['system_logic_version'],'softwareVersion':(_0x20e669[_0x3e16e7(0x20f)]?_0x3e16e7(0x224):_0x3e16e7(0x353))+_0x46f1e4};},'AvalonMiner':function(_0x227c53,_0x334407){const _0x13185f=_0x1812;_0x227c53=JSON['parse']((_0x227c53[_0x13185f(0x1c9)]||_0x227c53)['replace'](/^[^{]*{/,'{')[_0x13185f(0x1df)](/,?\s*}\);\s*UpdatePageCallback[^}]*}\);\s*$/,'}'));const _0x1003d7=getMinerType(_0x227c53[_0x13185f(0x2e7)]);return{'minerType':_0x1003d7,'modelType':_0x227c53[_0x13185f(0x2e7)],'apiVersion':_0x334407,'macAddress':_0x227c53[_0x13185f(0x348)],'ipAddress':_0x227c53[_0x13185f(0x27e)],'hardwareVersion':'','systemKernelVersion':_0x227c53[_0x13185f(0x266)],'fileSystemTimestamp':'','systemLogicVersion':'','softwareVersion':''};},'Innosilicon':function(_0x516ca7,_0x48d19d){const _0x126406=_0x1812;if(!_0x516ca7[_0x126406(0x30c)])return null;if(!_0x48d19d){if(_0x516ca7[_0x126406(0x266)][_0x126406(0x32a)]===_0x126406(0x1e5))_0x48d19d='Dragonmint';else _0x516ca7[_0x126406(0x266)]['hwver']===_0x126406(0x215)&&(_0x48d19d=_0x126406(0x286));}let _0x4f4a16=_0x48d19d+'\x20'+_0x516ca7[_0x126406(0x30c)];return{'brand':'Innosilicon','minerType':_0x4f4a16,'modelType':_0x4f4a16,'apiVersion':_0x48d19d,'macAddress':_0x516ca7[_0x126406(0x266)][_0x126406(0x2d5)],'ipAddress':_0x516ca7[_0x126406(0x24a)]['ipaddress'],'softwareVersion':_0x516ca7[_0x126406(0x266)][_0x126406(0x2d0)],'hardwareVersion':_0x516ca7[_0x126406(0x266)][_0x126406(0x32a)],'systemKernelVersion':'','fileSystemTimestamp':_0x516ca7[_0x126406(0x266)][_0x126406(0x33a)],'systemLogicVersion':''};}};if(!_0x4a6417)return null;_0x5ea965[_0x16bb7b(0x270)]=_0x5ea965[_0x16bb7b(0x2d4)],_0x5ea965[_0x16bb7b(0x256)]=_0x5ea965[_0x16bb7b(0x2bf)],_0x5ea965['Whatsminer_CG']=_0x5ea965[_0x16bb7b(0x2bf)],_0x5ea965[_0x16bb7b(0x241)]=_0x5ea965[_0x16bb7b(0x2d4)],_0x5ea965[_0x16bb7b(0x292)]=_0x5ea965[_0x16bb7b(0x2d4)],_0x5ea965[_0x16bb7b(0x2ee)]=_0x5ea965[_0x16bb7b(0x345)];let _0x13fcd2=_0x5ea965[_0x42dddc];if(!_0x13fcd2)return console['warn'](_0x16bb7b(0x2e1)+_0x42dddc,_0x4a6417),null;let _0x1e97c3=_0x13fcd2(_0x4a6417,_0x42dddc);if(!_0x1e97c3)return _0x1e97c3;return _0x1e97c3['brand']=(_0x1e97c3[_0x16bb7b(0x2de)]||_0x42dddc)[_0x16bb7b(0x217)](/^([a-z0-9]+)/i)[0x1],_0x1e97c3;}function parseKernelLogs(_0x51a130,_0x5114f7=_0x3ae100(0x2d4),_0x3ce776){const _0x3a5d49=_0x3ae100;function _0x52d67b(_0xae6eca,_0x3ffc53,_0x7d2591){const _0x32c7d1=_0x1812;_0xae6eca[_0x32c7d1(0x351)](_0x431f31=>{const _0x3e434c=_0x32c7d1;!_0x431f31['reMatches']&&(_0x431f31['reTests']=[],_0x431f31['matches'][_0x3e434c(0x351)](_0x3787a7=>{const _0x15944a=_0x3e434c;_0x431f31['reTests'][_0x15944a(0x2a9)](new RegExp(_0x3787a7,'i'));}));let _0x30a0e8=0x0;_0x431f31[_0x3e434c(0x28f)]['forEach'](_0x26845e=>{const _0x19cae6=_0x3e434c;_0x26845e[_0x19cae6(0x279)](_0x3ffc53)&&_0x30a0e8++;}),_0x30a0e8==_0x431f31[_0x3e434c(0x28f)][_0x3e434c(0x225)]&&(console[_0x3e434c(0x2f6)](_0x3e434c(0x346)+_0x431f31[_0x3e434c(0x2b0)]),_0x7d2591[_0x3e434c(0x2a9)](_0x431f31[_0x3e434c(0x240)]));});}if(!_0x51a130)return null;!_0x51a130[_0x3a5d49(0x217)]&&(_0x51a130=_0x51a130['toString']());let _0x5e4d8c=[];if(/html/i[_0x3a5d49(0x279)](_0x3ce776)){const _0x57a371=/hidden["']\s+id\s*=\s*["']\s*cbid\.table\.(\d+)\.(code|cause|time)['"]\s+value\s*=\s*['"]([^'"]+)['"]/g,_0x4dcae8=/hidden["']\s+id\s*=\s*["']\s*cbid\.table\.(\d+)\.(code|cause|time)['"]\s+value\s*=\s*['"]([^'"]+)['"]/,_0x1ace5a=_0x51a130[_0x3a5d49(0x217)](_0x57a371);for(var _0x4f1ec6 in _0x1ace5a){const _0x34b05c=_0x1ace5a[_0x4f1ec6][_0x3a5d49(0x217)](_0x4dcae8),_0x34e77e=_0x34b05c[0x1]-0x1;!_0x5e4d8c[_0x34e77e]&&(_0x5e4d8c[_0x34e77e]={}),_0x5e4d8c[_0x34e77e][_0x34b05c[0x2]]=_0x34b05c[0x3];}}else _0x5e4d8c=_[_0x3a5d49(0x1fb)](_0x51a130[_0x3a5d49(0x217)](/Error.+?[\n\r]/g)),_0x5e4d8c[_0x3a5d49(0x225)]&&console[_0x3a5d49(0x2f6)]('Kernel\x20log\x20generic\x20errors',_0x5e4d8c);let _0x43832c=minerApis[(_0x5114f7||'')[_0x3a5d49(0x330)]()][_0x3a5d49(0x24e)]||[];return _0x52d67b(_0x43832c,_0x51a130,_0x5e4d8c),{'errors':_0x5e4d8c};}function parseNetworkDiagnostic(_0x421521,_0x48b300=_0x3ae100(0x2d4)){const _0x210644=_0x3ae100;if(!_0x421521||!_0x421521['match'])return _0x421521;const _0x3f3771=_0x421521[_0x210644(0x217)](/\/(\d+(?:\.\d+)?)\//);if(!_0x3f3771)return _0x421521;let _0x400fac=parseFloat(_0x3f3771[0x1]);return{'latency':_0x400fac,'diagnosticResponse':_0x421521};}function getMinerType(_0x44901b){return _0x44901b['replace'](/\s+\(.*$/,'')['replace'](/(\-[^\-]+)+$/,'')['trim']();}function getMinerTypeMap(_0x4dd92e){const _0x3db9f0=_0x3ae100,_0x363269=getMinerType(_0x4dd92e[_0x3db9f0(0x1e3)]||_0x4dd92e[_0x3db9f0(0x2a7)]);return config[_0x3db9f0(0x1f5)][_0x363269];}function getMinerFilterClause(_0xeb9e2e){const _0x1fa098=_0x3ae100;if(/admin/i['test'](_0xeb9e2e['group']))return{};let _0x2efec4=[{'accountName':new RegExp(_0x1fa098(0x34b)+_0xeb9e2e[_0x1fa098(0x2ba)][_0x1fa098(0x1df)](/^[\s,]+|[\s,]+$/gm,'')[_0x1fa098(0x301)](',')[_0x1fa098(0x246)]('|')+_0x1fa098(0x20a),'i')}];if(_0xeb9e2e[_0x1fa098(0x2e2)])for(var _0x113eb5=0x0;_0x113eb5<_0xeb9e2e['filter']['length'];_0x113eb5++){let _0x2f7192=Object[_0x1fa098(0x1e9)](_0xeb9e2e[_0x1fa098(0x2e2)][_0x113eb5])[0x0];if(/^\/[^\/]+\/\w*$/[_0x1fa098(0x279)](_0x2f7192)){let _0x555aad=Object[_0x1fa098(0x21c)](_0xeb9e2e[_0x1fa098(0x2e2)][_0x113eb5])[0x0];_0xeb9e2e[_0x1fa098(0x2e2)][_0x113eb5][_0x555aad]=eval(_0x2f7192);}_0x2efec4[_0x1fa098(0x2a9)](_0xeb9e2e[_0x1fa098(0x2e2)][_0x113eb5]);}return{'where':{'and':_0x2efec4}};};async function parseMinerSettings(_0x55642d,_0x3c9d96,_0x7c8a4){const _0x26c502=_0x3ae100;var _0x4b93d1={'Antminer':function(_0x505abe,_0x31c3b8){const _0x288d80=_0x1812,_0x8903f3=_0x505abe[_0x288d80(0x2a1)],_0x148fda=_0x505abe['bitmain-freq']||0x0,_0x3a81b4=_0x505abe[_0x288d80(0x23c)]||0x0;return{'pools':_0x8903f3,'frequency':_0x148fda,'volts':_0x3a81b4};},'Antminer_X19':function(_0x2aa926,_0x27f7e1){const _0xa3a777=_0x1812,_0x5d87e3=_0x2aa926[_0xa3a777(0x2e6)],_0x90e125=0x0,_0x3f9f66=0x0;return{'pools':_0x5d87e3,'frequency':_0x90e125,'volts':_0x3f9f66};},'AvalonMiner':function(_0x271158,_0x1cf67e){const _0x98c0dd=_0x1812;_0x271158=JSON[_0x98c0dd(0x2e5)]((_0x271158[_0x98c0dd(0x1c9)]||_0x271158)[_0x98c0dd(0x1df)](/^.*CGConfCallback\(/,'')['replace'](/\)[^\)]*$/,''));const {pool1:_0x5f0e19,worker1:_0x3efeec,pool2:_0x5c381c,worker2:_0xc25ce5,pool3:_0x24deda,worker3:_0x2338e2}=_0x271158;return{'pools':[{'url':_0x5f0e19,'user':_0x3efeec},{'url':_0x5c381c,'user':_0xc25ce5},{'url':_0x24deda,'user':_0x2338e2}]};},'Innosilicon':function(_0x1856b2,_0x365b38){const _0x3000a4=_0x1812,_0x2df573=_0x1856b2[_0x3000a4(0x2a1)];return{'pools':_0x2df573};},'Whatsminer':async function(_0x1a6d41,_0x2a8b91){const _0x555cab=_0x1812;let _0x2184fe='',_0x3fa146,_0x3af977;if(_0x1a6d41&&_0x1a6d41[_0x555cab(0x325)]){const _0x42044d=_0x1a6d41['DEVS'][0x0];_0x2184fe=parseInt(parseFloat(_0x42044d['Utility']||0x0)*0x64);if(_0x1a6d41['POOLS']&&_0x1a6d41[_0x555cab(0x2e6)][0x0]&&_0x1a6d41[_0x555cab(0x2e6)][0x0][_0x555cab(0x2dc)]){const _0x4783e4=_0x1a6d41[_0x555cab(0x2e6)][0x0];_0x3fa146=_[_0x555cab(0x203)](_0x1a6d41['POOLS'],_0x52857a=>{const {User:_0x4c914f,URL:_0x5cb812,Getworks:_0x439476,Accepted:_0x39f451,Rejected:_0x3a0a9a,Discarded:_0x497aa1}=_0x52857a;return{'user':_0x4c914f,'url':_0x5cb812,'getworks':_0x439476,'accepted':_0x39f451,'rejected':_0x3a0a9a,'discarded':_0x497aa1};});}}return{'frequency':_0x2184fe,'pools':_0x3fa146,'volts':_0x3af977};}};_0x4b93d1[_0x26c502(0x2f5)]=_0x4b93d1[_0x26c502(0x2bf)],_0x4b93d1[_0x26c502(0x270)]=_0x4b93d1['Whatsminer'],_0x4b93d1['ZigMiner']=_0x4b93d1[_0x26c502(0x2bf)],_0x4b93d1[_0x26c502(0x1fa)]=_0x4b93d1['Whatsminer'],_0x4b93d1['Antminer_updater']=_0x4b93d1['Antminer'],_0x4b93d1['StuMiner']=_0x4b93d1[_0x26c502(0x2d4)],_0x4b93d1[_0x26c502(0x2ee)]=_0x4b93d1[_0x26c502(0x345)];const _0x25ae3e=_0x4b93d1[_0x7c8a4];if(!_0x25ae3e)return console[_0x26c502(0x206)](_0x26c502(0x331)+_0x7c8a4,_0x55642d),null;const _0x1a5e9e=_0x25ae3e(_0x55642d,_0x3c9d96);return _0x1a5e9e;};const rePoolName=/((?:\d+\.){3}\d+|[^\.\:\/]+)(?:\.\w+)\:\d{2,}/;async function getActivePoolName(_0x1aa44d){const _0x31d042=_0x3ae100,_0x49bb34=_0x1aa44d['find'](({status:_0x5a6347})=>/alive/i[_0x31d042(0x279)](_0x5a6347));let _0x32821f='',_0x30442d;return _0x49bb34&&(_0x30442d=await extractAccountAndWorkerNumber({'poolWorkers':[_0x49bb34[_0x31d042(0x1c2)]]}),_0x32821f=(_0x49bb34[_0x31d042(0x24d)][_0x31d042(0x217)](rePoolName)||[_0x31d042(0x293)])[0x1]),{'poolName':_0x32821f,'extracted':_0x30442d};}async function parseMinerStatus({minerStatus:_0x38abc0,minerTyped:_0x31fc49,apiVersion:_0x576c19}){const _0x5bcea9=_0x3ae100;var _0x1d991b={'Antminer':async function(_0x47e803,_0x575727){const _0x102f28=_0x1812;let _0x418ec7=0x0,_0x5b8043=0x0,_0x1c201f='DEAD',_0x1d1039=[],_0x509276=[],_0x1b8e8f=[],_0x4eeaaa=0x0,_0x49d926=0x0,_0xe7ace6=0x0,_0xc923e9=[],_0x107faf=[],_0x20428d={'accountName':'','workerName':'','workerTypeNumber':''},_0x35a380={},_0x26f376=0x0,_0x2bb99b=0x0,_0x421787=0x0,_0x15b2eb=0x0,_0x504d8b=0x0,_0x24d018=[0x0],_0x39a797=0x0,_0x317178=0x0,_0x1ddca9=0x0;if(_0x47e803&&_0x47e803['summary']){console['debug'](global[_0x102f28(0x284)][_0x102f28(0x339)],_0x102f28(0x1c5),_0x47e803[_0x102f28(0x271)]),_0x421787=parseInt(_0x47e803[_0x102f28(0x271)][_0x102f28(0x2ff)]||'0',0xa),_0x418ec7=parseFloat(_0x47e803[_0x102f28(0x271)][_0x102f28(0x1ec)]||'0'),_0x5b8043=parseFloat(_0x47e803['summary']['ghsav']||'0'),_0x1ddca9=parseInt(_0x47e803['summary']['foundblocks']||'0',0xa),_0x317178=parseInt(_0x47e803[_0x102f28(0x271)][_0x102f28(0x2d9)]||'0',0xa),_0x15b2eb=parseInt(_0x47e803[_0x102f28(0x271)][_0x102f28(0x29b)]||'0',0xa),_0x504d8b=parseInt(_0x47e803[_0x102f28(0x271)][_0x102f28(0x1ee)]||'0',0xa),_0x24d018=[parseInt(_0x47e803['summary']['hw']||'0',0xa)],_0x39a797=parseFloat(_0x47e803['summary'][_0x102f28(0x23e)]||'0'),_0x107faf=_0x47e803[_0x102f28(0x2a1)]||[];const _0x58c358=_0x107faf[_0x102f28(0x261)](({status:_0x5aa2dd})=>/alive/i[_0x102f28(0x279)](_0x5aa2dd));_0x58c358&&(_0x20428d=await extractAccountAndWorkerNumber({'poolWorkers':[_0x58c358[_0x102f28(0x1c2)]]}),_0x1c201f=(_0x58c358['url'][_0x102f28(0x217)](rePoolName)||[_0x102f28(0x293)])[0x1]);if(_0x47e803['devs']&&_0x47e803['devs'][0x0]){let _0x31f45a=_0x47e803[_0x102f28(0x219)][0x0];if(isNaN(_0x31f45a[_0x102f28(0x307)])){let _0x132515=/frequency1/i[_0x102f28(0x279)](_0x31f45a[_0x102f28(0x307)])?_0x31f45a[_0x102f28(0x307)]:_0x102f28(0x275)+_0x31f45a['freq'];_0x132515=_0x132515[_0x102f28(0x1df)](/":"/g,'=')[_0x102f28(0x1df)](/=/g,_0x102f28(0x25f))[_0x102f28(0x1df)](/,/g,'\x22,\x22')[_0x102f28(0x1df)](/"{/g,'{\x22')['replace'](/}"/g,'\x22}')[_0x102f28(0x1df)](/{""}/g,'{}')[_0x102f28(0x1df)](/(:"[^,]+"):"[^,]+",/g,_0x102f28(0x2ac));try{_0x35a380=JSON[_0x102f28(0x2e5)]('{\x22'+_0x132515+'\x22}');}catch(_0x428a4b){console[_0x102f28(0x206)](_0x102f28(0x247),_0x31f45a[_0x102f28(0x307)]);}const _0x3b9e54=_0x575727&&_0x575727[_0x102f28(0x220)]?new RegExp(_0x575727['tempNamesRE']+_0x102f28(0x1f6),'g'):/temp\d=(\d\d+)\,/g,_0x62f663=_0x575727&&_0x575727[_0x102f28(0x276)]?new RegExp(_0x575727[_0x102f28(0x276)]+_0x102f28(0x313),'g'):/freq(?:_avg)\d=(\d\d+)[\,\.]/g,_0x42a2a2=_0x575727&&_0x575727[_0x102f28(0x2f4)]?new RegExp(_0x575727['fansNamesRE']+_0x102f28(0x1f6),'g'):/fan\d=(\d\d+)\,/g;_0x1d1039=(_0x31f45a[_0x102f28(0x307)][_0x102f28(0x217)](_0x3b9e54)||['=0,'])[_0x102f28(0x203)](_0x174a6a=>parseInt(_0x174a6a['match'](/=(\d+),/)[0x1])),_0x1b8e8f=(_0x31f45a[_0x102f28(0x307)][_0x102f28(0x217)](_0x62f663)||[_0x102f28(0x250)])[_0x102f28(0x203)](_0x5b583f=>parseInt(_0x5b583f[_0x102f28(0x217)](/=(\d+)[,\.]/)[0x1])),_0x509276=(_0x31f45a[_0x102f28(0x307)]['match'](_0x42a2a2)||['=0,'])[_0x102f28(0x203)](_0x2bb769=>parseInt(_0x2bb769[_0x102f28(0x217)](/=(\d+)[,\.]/)[0x1]));}else{_0x1d1039=_0x47e803[_0x102f28(0x219)][_0x102f28(0x203)](_0xcd8562=>{const _0x5ad4c6=_0x102f28;if(!_0xcd8562[_0x5ad4c6(0x335)])return _0xcd8562['temp'];let _0xf1ccc9=_0xcd8562[_0x5ad4c6(0x335)]+'-'+(_0xcd8562[_0x5ad4c6(0x259)]||0x0),_0x6c6183=_0xf1ccc9[_0x5ad4c6(0x1df)](/(^-|-$)/,'')[_0x5ad4c6(0x301)](/\-+/);return Math['max'](..._0x6c6183);}),_0x1b8e8f=_0x47e803[_0x102f28(0x219)][_0x102f28(0x203)](_0x401135=>!isNaN(_0x401135[_0x102f28(0x307)])?parseInt(_0x401135[_0x102f28(0x307)]):0x0);const _0xf93c6f=[_0x31f45a[_0x102f28(0x22a)],_0x31f45a['fan2'],_0x31f45a[_0x102f28(0x1c8)],_0x31f45a['fan4'],_0x31f45a['fan5'],_0x31f45a['fan6'],_0x31f45a[_0x102f28(0x2a4)],_0x31f45a[_0x102f28(0x1db)]];_0x509276=_0xf93c6f[_0x102f28(0x2e2)](_0x2eec30=>_0x2eec30>0x0);_0x509276[_0x102f28(0x225)]%0x2===0x1&&_0x509276[_0x102f28(0x2a9)](0x0);const _0x336f18=_0x47e803[_0x102f28(0x219)][_0x102f28(0x203)](_0x949944=>_0x949944[_0x102f28(0x1c1)]||_0x949944[_0x102f28(0x30f)]);_0x26f376=_0x336f18['reduce']((_0xa764f9,_0x1ff576)=>Math[_0x102f28(0x251)](parseInt(_0xa764f9,0xa),parseInt(_0x1ff576,0xa)));_0x26f376>=0x64&&(_0x26f376=_0x26f376/(_0x26f376>=0x2710?0x3e8:0x64));const _0xda5047=_0x47e803[_0x102f28(0x219)][_0x102f28(0x203)](_0x281524=>_0x281524[_0x102f28(0x243)]);_0x2bb99b=_0xda5047[_0x102f28(0x1bb)]((_0x3031b0,_0x58f8bb)=>parseInt(_0x3031b0,0xa)+parseInt(_0x58f8bb,0xa)),_0x24d018=_0x47e803[_0x102f28(0x219)][_0x102f28(0x203)](_0x34db23=>_0x34db23['hw']);}_0x4eeaaa=_0x1b8e8f[0x0]||_0x1b8e8f[0x1]||_0x1b8e8f[0x2]||parseInt(_0x35a380[_0x102f28(0x307)]),_0x49d926=_0x509276,_0xe7ace6=_0x509276[_0x509276['length']-0x1];if(_0x575727&&_0x575727['cardChipCount']&&_0x31f45a['freq'])for(var _0x5c5c83=0x0;_0x5c5c83<_0x575727['cardIDs']['length'];_0x5c5c83++){let _0x3a4cb8=_0x575727[_0x102f28(0x21a)][_0x5c5c83],_0x2b0ad9=new RegExp('chain_acs'+_0x575727[_0x102f28(0x21a)][_0x5c5c83]+'=([^,]+),'),_0x50614a=_0x575727[_0x102f28(0x2ca)]-((_0x31f45a[_0x102f28(0x307)][_0x102f28(0x217)](_0x2b0ad9)||['',''])[0x1][_0x102f28(0x217)](/o/g)||[])[_0x102f28(0x225)];_0x50614a>0x0&&_0xc923e9['push']({'chain':_0x3a4cb8,'chipFailCount':_0x50614a});;}}}let _0x20055e=0xbb8;_0x575727[_0x102f28(0x352)]&&(_0x20055e=parseInt((_0x575727[_0x102f28(0x352)]||0x0)*_0x5b8043));(_0x2bb99b<=0x0||_0x2bb99b>_0x20055e*1.2)&&(_0x2bb99b=_0x20055e>0x2710?CONSUMPTION_DEFAULT:_0x20055e);let _0x4b8ae7={'hashRate':_0x418ec7,'hashRateAvg':_0x5b8043,'poolName':_0x1c201f,'temperatures':_0x1d1039,'frequency':_0x4eeaaa,'pools':_0x107faf,'intakeSpeed':_0x49d926,'exhaustSpeed':_0xe7ace6,'cardFailureChains':_0xc923e9,'cardStatus':_0x35a380,'elapsed':_0x421787,'volts':_0x26f376,'consumption':_0x2bb99b,'accepted':_0x15b2eb,'rejected':_0x504d8b,'hardwareErrors':_0x24d018,'sharesPerMinute':_0x39a797,'foundBlocks':_0x1ddca9,'workGetCount':_0x317178};return console[_0x102f28(0x2f6)](global[_0x102f28(0x284)]['Green'],_0x102f28(0x2c0),_0x4b8ae7,_0x20428d),{..._0x4b8ae7,..._0x20428d};},'Antminer_X19':async function(_0x50a444,_0x574a5b){const _0xc3e53=_0x1812;let _0x35a928=0x0,_0x17ed9c=0x0,_0x1b27f1=_0xc3e53(0x204),_0x5030de=[],_0x4e1c67=[],_0x231752=[],_0x1e770f=0x0,_0x1ff7c2=0x0,_0x581175=0x0,_0x1eb108=[],_0x5755ae={'accountName':'','workerName':'','workerTypeNumber':''},_0xbc54e5={},_0xde9097=0x0,_0x3a6b61=0x0;const _0x571bce=_0x50a444[_0xc3e53(0x271)]||_0x50a444[_0xc3e53(0x2b8)][0x0];let {Accepted:_0x80c1de=0x0,Rejected:_0x339acd=0x0,Elapsed:_0x17e9bf=0x0,Getwork:_0x588e38=0x0,'Found\x20Blocks':_0x3a53d2=0x0,'Hardware\x20Errors':_0x391123,Utility:_0x3280f0=0x0}=_0x571bce||{};_0x391123=[_0x391123||0x0];const _0x2fd4f9=(_0x50a444[_0xc3e53(0x2a1)]||_0x50a444['POOLS'])[_0xc3e53(0x203)](({User:_0x36cad0,URL:_0x23f328,Status:_0x4e3f90,Getworks:_0x38d4e0,Accepted:_0x523d39,Rejected:_0x4c63d7,Discarded:_0x1c2dda})=>({'user':_0x36cad0,'url':_0x23f328,'status':_0x4e3f90,'getworks':_0x38d4e0,'accepted':_0x523d39,'rejected':_0x4c63d7,'discarded':_0x1c2dda}));if(_0x571bce){console[_0xc3e53(0x2f6)](global[_0xc3e53(0x284)][_0xc3e53(0x339)],'Parsing\x20miner\x20status\x20summary',_0x571bce),_0x35a928=parseFloat(_0x571bce[_0xc3e53(0x26e)]||'0'),_0x17ed9c=parseFloat(_0x571bce[_0xc3e53(0x22f)]||'0');if(_0x574a5b&&_0x574a5b[_0xc3e53(0x21a)]){_0xbc54e5=_0x571bce[_0xc3e53(0x2f8)]||_0x50a444['stats'][0x1];for(var _0x275ee5=0x0;_0x275ee5<_0x574a5b[_0xc3e53(0x21a)]['length'];_0x275ee5++){const _0x7c86fe=_0x574a5b[_0xc3e53(0x21a)][_0x275ee5],_0x4d28b3=_0xbc54e5['chain_acn'+_0x7c86fe]-_0xbc54e5[_0xc3e53(0x1d2)+_0x7c86fe];if(!_0x4d28b3)continue;const _0x3725f2=_0x4d28b3[_0xc3e53(0x1df)](/[^o]/ig,'')[_0xc3e53(0x225)];_0x3725f2>0x0&&_0x1eb108[_0xc3e53(0x2a9)]({'cardId':_0x7c86fe,'chipFailCount':_0x3725f2});;let _0x178d84=_0xbc54e5[_0xc3e53(0x334)+_0x7c86fe]||_0xbc54e5[_0xc3e53(0x2a2)+_0x7c86fe],_0x162e3e=_0x178d84['split']('-')['map'](_0x549bf4=>parseInt(_0x549bf4||'0'));_0x5030de['push'](Math[_0xc3e53(0x251)](..._0x162e3e)),_0x231752[_0xc3e53(0x2a9)](_0xbc54e5[_0xc3e53(0x307)+_0x7c86fe]);}_0x4e1c67=[_0xbc54e5[_0xc3e53(0x22a)],_0xbc54e5[_0xc3e53(0x2b6)],_0xbc54e5[_0xc3e53(0x1c8)],_0xbc54e5[_0xc3e53(0x252)]],_0x1e770f=average(_0x231752),_0x1ff7c2=_0x4e1c67,_0x581175=_0x4e1c67[_0x4e1c67[_0xc3e53(0x225)]-0x1];}}const _0x57b066=_0x2fd4f9[_0xc3e53(0x261)](({status:_0x28bbc7})=>/alive/i['test'](_0x28bbc7));_0x57b066&&(_0x5755ae=await extractAccountAndWorkerNumber({'poolWorkers':[_0x57b066['user']]}),_0x1b27f1=(_0x57b066[_0xc3e53(0x24d)][_0xc3e53(0x217)](rePoolName)||[_0xc3e53(0x293)])[0x1]);let _0x276781=0xbb8;_0x574a5b['powerEfficiency']&&(_0x276781=parseInt((_0x574a5b[_0xc3e53(0x352)]||0x0)*_0x17ed9c));(_0x3a6b61<=0x0||_0x3a6b61>_0x276781*1.2)&&(_0x3a6b61=_0x276781>0x2710?CONSUMPTION_DEFAULT:_0x276781);let _0x240015={'hashRate':_0x35a928,'hashRateAvg':_0x17ed9c,'poolName':_0x1b27f1,'temperatures':_0x5030de,'frequency':_0x1e770f,'pools':_0x2fd4f9,'intakeSpeed':_0x1ff7c2,'exhaustSpeed':_0x581175,'cardFailureChains':_0x1eb108,'cardStatus':_0xbc54e5,'elapsed':_0x17e9bf,'volts':_0xde9097,'consumption':_0x3a6b61,'accepted':_0x80c1de,'rejected':_0x339acd,'hardwareErrors':_0x391123,'sharesPerMinute':_0x3280f0,'foundBlocks':_0x3a53d2,'workGetCount':_0x588e38};return console[_0xc3e53(0x2f6)](global['colorize'][_0xc3e53(0x32e)],_0xc3e53(0x2c0),_0x240015,_0x5755ae),{..._0x240015,..._0x5755ae};},'AvalonMiner':async function(_0x53a892,_0x36f7d3){const _0x3b3d7a=_0x1812,_0x13ea11=JSON[_0x3b3d7a(0x2e5)]((_0x53a892[_0x3b3d7a(0x1c9)]||_0x53a892)['replace'](/^[^{]*{/,'{')[_0x3b3d7a(0x1df)](/,?\s*}\);\s*UpdatePageCallback[^}]*}\);\s*$/,'}')[_0x3b3d7a(0x1df)](/[^\x1F-\x7F]+/g,'')[_0x3b3d7a(0x1df)](/":([^"][^,"]*)"?([,}])/g,_0x3b3d7a(0x344)));let {elapsed:_0x3f58a0,av:_0x21e776,url:_0x305cf7,worker:_0x422fbc,accepted:_0x5bed96,reject:_0x5fb517,temperature:_0x40dce3,fan:_0x211829,hash_5m:_0x4cdc47}=_0x13ea11,_0x52cbe7,_0x2a7b9d;_0x4cdc47=_0x4cdc47*0x3e8,_0x21e776=_0x21e776*0x3e8;const _0x1fdc0f=[(_0x40dce3['match'](/\/\s(\d+)/)||[0x0])[0x1]],_0x5ead28=_0x211829*0x46,_0x7b38bd=_0x5ead28,_0x3a3c05=[{'url':_0x305cf7,'user':_0x422fbc}],_0x3db83a=_0x3f58a0['match'](/(?:(\d+)\s+d\s)?(?:(\d+)\s+h\s)?(?:(\d+)\s+m\s)?(?:(\d+)\s+s\s?)?/i);_0x3db83a['length']&&(_0x3f58a0=parseInt(_0x3db83a[0x1]||0x0)*0x15180+parseInt(_0x3db83a[0x2]||0x0)*0xe10+parseInt(_0x3db83a[0x3]||0x0)*0x3c+parseInt(_0x3db83a[0x4]||0x0));if(_0x3a3c05[0x0]&&_0x3a3c05[0x0][_0x3b3d7a(0x1c2)]){const _0x968838=_0x3a3c05[_0x3b3d7a(0x261)](({status:_0x57fe55})=>/alive/i[_0x3b3d7a(0x279)](_0x57fe55))||_0x3a3c05[0x0];_0x52cbe7=await extractAccountAndWorkerNumber({'poolWorkers':[_0x968838['user']||_0x3a3c05[0x0]?.[_0x3b3d7a(0x1c2)]]}),_0x2a7b9d=(_0x968838[_0x3b3d7a(0x24d)]['match'](rePoolName)||[_0x3b3d7a(0x293)])[0x1];}const _0x16696e=parseInt((_0x36f7d3['powerEfficiency']||0x0)*_0x21e776);let _0x2ea6c6={'hashRate':_0x4cdc47,'hashRateAvg':_0x21e776,'poolName':_0x2a7b9d,'temperatures':_0x1fdc0f,'pools':_0x3a3c05,'intakeSpeed':_0x5ead28,'exhaustSpeed':_0x7b38bd,'elapsed':_0x3f58a0,'consumption':_0x16696e,'accepted':_0x5bed96,'rejected':_0x5fb517};return console['debug'](global[_0x3b3d7a(0x284)][_0x3b3d7a(0x32e)],_0x3b3d7a(0x2c0),_0x2ea6c6,_0x52cbe7),{..._0x2ea6c6,..._0x52cbe7};},'Dragonmint':async function(_0x58c3b0,_0x166623){const _0x228c26=_0x1812;let _0x1eb219=0x0,_0x2c899d=0x0,_0x37bb9f=_0x228c26(0x204),_0xb64b73=[],_0x3f1c70=0x0,_0x30ad9d=0x0,_0xaba87f=0x0,_0x35d549=[],_0x9e8750=[],_0x3b7872={'accountName':'','workerName':'','workerTypeNumber':''},_0x5d2145={},_0x5c31dc=0x0;const _0x3182c6=_0x58c3b0?.['DEVS']||_0x58c3b0?.[_0x228c26(0x219)]||[],_0x3856b0=_0x3182c6[0x0];if(_0x3856b0){const _0x4b0de0=_[_0x228c26(0x203)](_0x3182c6,_0x228c26(0x21f))['concat']([0x0]),_0x22840c=_[_0x228c26(0x203)](_0x3182c6,_0x228c26(0x21f))[_0x228c26(0x2e0)]([0x0]);_0x1eb219=parseInt(_0x4b0de0[_0x228c26(0x1bb)]((_0x40eddb,_0x67c900)=>(_0x40eddb||0x0)+(_0x67c900||0x0))/0x3e8),_0x2c899d=parseInt(_0x22840c[_0x228c26(0x1bb)]((_0x2df5e6,_0x362e24)=>(_0x2df5e6||0x0)+(_0x362e24||0x0))/0x3e8),_0x3f1c70=parseInt(parseFloat(_0x3856b0['Utility']||0x0)*0x64),_0xb64b73=_[_0x228c26(0x203)](_0x3182c6,_0x228c26(0x230)),_0x5d2145=_0x58c3b0[_0x228c26(0x1d8)],_0x5c31dc=parseInt(_0x3856b0[_0x228c26(0x1f2)]);const _0x3ac950=_0x58c3b0?.[_0x228c26(0x2e6)]||_0x58c3b0?.[_0x228c26(0x2a1)]||[];_0x9e8750=_0x3ac950[_0x228c26(0x203)](({User:_0x4120c6,URL:_0x1b8391,Status:_0x1b7c13,Getworks:_0x7e4fa8,Accepted:_0x9ae4e7,Rejected:_0x6e6db0,Discarded:_0x1494e2})=>({'user':_0x4120c6,'url':_0x1b8391,'status':_0x1b7c13,'getworks':_0x7e4fa8,'accepted':_0x9ae4e7,'rejected':_0x6e6db0,'discarded':_0x1494e2}));const _0x148cf7=_0x9e8750['find'](({status:_0x42a990})=>/alive/i[_0x228c26(0x279)](_0x42a990));_0x148cf7&&(_0x3b7872=await extractAccountAndWorkerNumber({'poolWorkers':[_0x148cf7[_0x228c26(0x1c2)]]}),_0x37bb9f=(_0x148cf7[_0x228c26(0x24d)][_0x228c26(0x217)](rePoolName)||[_0x228c26(0x293)])[0x1]);const _0x2804bc=_0x58c3b0?.[_0x228c26(0x1f9)]||_0x58c3b0?.[_0x228c26(0x2be)];_0x2804bc&&(_0x30ad9d=parseInt(_0x2804bc['Fan\x20duty'])/0x64*0x1964,_0xaba87f=parseInt(_0x2804bc[_0x228c26(0x2db)])/0x64*0x1964);const _0x58b338=_0x58c3b0?.[_0x228c26(0x2b8)]||_0x58c3b0?.[_0x228c26(0x1d8)];_0x58b338&&(_0x30ad9d=parseInt((JSON['stringify'](_0x58b338)[_0x228c26(0x217)](/fan1\[(\d+)\]/i)||[0x0])[0x1]),_0xaba87f=parseInt((JSON[_0x228c26(0x216)](_0x58b338)[_0x228c26(0x217)](/fan2\[(\d+)\]/i)||[0x0])[0x1]));}const _0x50f0d8=parseInt((_0x166623[_0x228c26(0x352)]||0x0)*_0x2c899d);return{'hashRate':_0x1eb219,'hashRateAvg':_0x2c899d,'poolName':_0x37bb9f,'temperatures':_0xb64b73,'frequency':_0x3f1c70,'pools':_0x9e8750,'intakeSpeed':_0x30ad9d,'exhaustSpeed':_0xaba87f,'cardFailureChains':_0x35d549,'cardStatus':_0x5d2145,'elapsed':_0x5c31dc,'consumption':_0x50f0d8,..._0x3b7872};},'Innosilicon':async function(_0x1ca1a5,_0x50c554){const _0x55858f=_0x1812;let _0x14e16b=0x0,_0x11af8d=0x0,_0xa9504d=_0x55858f(0x204),_0x432d58=[],_0x19b7a2=0x0,_0x3ed94f=0x0,_0x3d186b=0x0,_0x540e5a=[],_0x40e38b=[],_0x4a3c42={'accountName':'','workerName':'','workerTypeNumber':''},_0x1a11f5={},_0x2ff4e1=0x0;if(_0x1ca1a5&&_0x1ca1a5['DEVS']){const _0x3760eb=_0x1ca1a5[_0x55858f(0x325)][0x0],_0x10e5d1=_[_0x55858f(0x203)](_0x1ca1a5[_0x55858f(0x325)],_0x55858f(0x21f))[_0x55858f(0x2e0)]([0x0]),_0x39d12a=_[_0x55858f(0x203)](_0x1ca1a5[_0x55858f(0x325)],_0x55858f(0x21f))[_0x55858f(0x2e0)]([0x0]);_0x14e16b=parseInt(_0x10e5d1[_0x55858f(0x1bb)]((_0x884d8f,_0x594a6a)=>(_0x884d8f||0x0)+(_0x594a6a||0x0))/0x3e8),_0x11af8d=parseInt(_0x39d12a[_0x55858f(0x1bb)]((_0x43c66b,_0x7a69f)=>(_0x43c66b||0x0)+(_0x7a69f||0x0))/0x3e8),_0x19b7a2=parseInt(parseFloat(_0x3760eb[_0x55858f(0x21d)]||0x0)*0x64),_0x432d58=_[_0x55858f(0x203)](_0x1ca1a5[_0x55858f(0x325)],_0x55858f(0x230)),_0x1a11f5=_0x1ca1a5[_0x55858f(0x2b8)],_0x2ff4e1=parseInt(_0x3760eb[_0x55858f(0x1f2)]),_0x40e38b=_['map'](_0x1ca1a5[_0x55858f(0x2e6)]||[],_0x45b566=>{const _0x185375=_0x55858f;return{'user':_0x45b566[_0x185375(0x2dc)],'url':_0x45b566[_0x185375(0x1ea)],'getworks':_0x45b566[_0x185375(0x31f)],'accepted':_0x45b566[_0x185375(0x328)],'rejected':_0x45b566[_0x185375(0x322)],'discarded':_0x45b566[_0x185375(0x326)]};});const _0x28a2b5=_0x40e38b[0x0];_0x28a2b5&&(_0x4a3c42=await extractAccountAndWorkerNumber({'poolWorkers':[_0x28a2b5[_0x55858f(0x1c2)]]}),_0xa9504d=(_0x28a2b5[_0x55858f(0x24d)][_0x55858f(0x217)](rePoolName)||[_0x55858f(0x293)])[0x1]);if(_0x1ca1a5[_0x55858f(0x1f9)]){const _0x17ca63=_0x1ca1a5['HARDWARE'];_0x3ed94f=parseInt(_0x17ca63[_0x55858f(0x2db)])/0x64*0x1964,_0x3d186b=parseInt(_0x17ca63[_0x55858f(0x2db)])/0x64*0x1964;}}const _0x1e7aba=parseInt((_0x50c554['powerEfficiency']||0x0)*_0x11af8d);return{'hashRate':_0x14e16b,'hashRateAvg':_0x11af8d,'poolName':_0xa9504d,'temperatures':_0x432d58,'frequency':_0x19b7a2,'pools':_0x40e38b,'intakeSpeed':_0x3ed94f,'exhaustSpeed':_0x3d186b,'cardFailureChains':_0x540e5a,'cardStatus':_0x1a11f5,'elapsed':_0x2ff4e1,'consumption':_0x1e7aba,..._0x4a3c42};},'StuMiner':async function(_0x2f1896,_0x21c058){const _0x465b17=_0x1812,{'ghsav':_0x3a5526,elapsed:_0xece028,'foundblocks':_0x3eae8b,'utility':_0x177e3e,'fan1':_0x582005,'fan2':_0x47b3c6,'wu':_0x17d228}=_0x2f1896[_0x465b17(0x271)],_0x813d1=_0x2f1896[_0x465b17(0x219)],_0x317967=_0x813d1['map'](_0x267ffd=>parseFloat(_0x267ffd[_0x465b17(0x214)]||0x0)),_0x4dacd9=_0x813d1[_0x465b17(0x1bb)]((_0x595672,_0x3b4040)=>_0x595672+parseInt(_0x3b4040[_0x465b17(0x1eb)],0xa),0x0),_0x1e2819=_0x813d1['reduce']((_0x59dd44,_0x5bcf76)=>_0x59dd44+parseInt(_0x5bcf76[_0x465b17(0x22d)],0xa),0x0),_0x295d58=_0x813d1[_0x465b17(0x1bb)]((_0x1887e5,_0x423ab5)=>Math[_0x465b17(0x251)](parseInt(_0x1887e5[_0x465b17(0x1cb)],0xa),parseInt(_0x423ab5[_0x465b17(0x1cb)],0xa)),0x0),_0x55f590=_0x813d1[_0x465b17(0x203)](_0x2002db=>parseFloat(_0x2002db[_0x465b17(0x300)]||0x0))[_0x465b17(0x1bb)]((_0x4c8800,_0x809046)=>_0x4c8800+_0x809046,0x0),_0x153957=parseInt((_0x21c058[_0x465b17(0x352)]||0x0)*parseInt(_0x3a5526||0x0,0xa));let _0x37fe9b={'hashRate':_0x55f590,'hashRateAvg':_0x3a5526,'elapsed':_0xece028,'accepted':_0x4dacd9,'rejected':_0x1e2819,'sharesPerMinute':_0x177e3e,'exhaustSpeed':_0x47b3c6,'intakeSpeed':_0x582005,'temperatures':_0x317967,'frequency':_0x295d58,'consumption':_0x153957,'foundBlocks':_0x3eae8b,'workGetCount':_0x17d228},_0x1521f2,_0x1049ce,_0x4a2b69;if(_0x2f1896[_0x465b17(0x2a1)]&&_0x2f1896['pools'][0x0]){const _0x1a39ba=_0x2f1896['pools'][0x0];_0x1521f2=_0x2f1896[_0x465b17(0x2a1)]['map'](_0x38d073=>{const _0x23b31d=_0x465b17;return{'user':_0x38d073['user'],'url':_0x38d073[_0x23b31d(0x24d)]};});const _0x575d5b=_0x1521f2[_0x465b17(0x203)](_0x5f2b24=>_0x5f2b24[_0x465b17(0x1c2)]);_0x1049ce=await extractAccountAndWorkerNumber({'poolWorkers':_0x575d5b}),_0x4a2b69=(_0x1a39ba[_0x465b17(0x24d)]['match'](/((?:\d+\.){3}\d+|[^\.\:\/]+)(?:\.\w+)\:\d{2,}/)||['Unknown'])[0x1];}return console['debug'](global['colorize']['Purple'],_0x465b17(0x2b3),_0x37fe9b,_0x1049ce,_0x1521f2,_0x4a2b69),{..._0x1049ce,..._0x37fe9b,'pools':_0x1521f2,'poolName':_0x4a2b69};},'Whatsminer':async function(_0x5af256,_0x4ef286){const _0x3a4dca=_0x1812,{'MHS\x205s':_0x303384,'MHS\x20av':_0x2749d0,'GHS\x205s':_0xc341f2,'GHS\x20av':_0x2f5e4b,'Temperature':_0x5712a5,'freq_avg':_0x34557a,'Elapsed':_0x3d89a0,'Voltage':_0x12bb40,'Power':_0x1ff748,'Accepted':_0x5761dd,'Fan\x20Speed\x20In':_0x4fa461,'Fan\x20Speed\x20Out':_0x5744ff,'Rejected':_0x562f49,'Hardware\x20Errors':_0x1c7acc,'Utility':_0x576d43,'Found\x20Blocks':_0x54ebaa,'Getworks':_0x4294fa}=_0x5af256[_0x3a4dca(0x271)];let _0x45259a={'hashRate':_0x303384?_0x303384/0x3e8:_0xc341f2,'hashRateAvg':_0x2749d0?_0x2749d0/0x3e8:_0x2f5e4b,'elapsed':_0x3d89a0,'volts':_0x12bb40,'consumption':_0x1ff748,'accepted':_0x5761dd,'rejected':_0x562f49,'hardwareErrors':_0x1c7acc,'sharesPerMinute':_0x576d43,'exhaustSpeed':_0x5744ff,'intakeSpeed':_0x4fa461,'frequency':_0x34557a,'foundBlocks':_0x54ebaa,'workGetCount':_0x4294fa};!isNaN(_0x45259a[_0x3a4dca(0x24b)])&&parseInt(_0x45259a[_0x3a4dca(0x24b)])>0xf4240&&(_0x45259a[_0x3a4dca(0x24b)]=_0x45259a[_0x3a4dca(0x24b)]/0x3e8);!isNaN(_0x45259a['hashRateAvg'])&&parseInt(_0x45259a[_0x3a4dca(0x1ed)])>0xf4240&&(_0x45259a[_0x3a4dca(0x1ed)]=_0x45259a[_0x3a4dca(0x1ed)]/0x3e8);_0x45259a[_0x3a4dca(0x1e1)]=[_0x1c7acc],_0x45259a['temperatures']=[_0x5712a5],_0x45259a[_0x3a4dca(0x2a0)]=parseInt(_0x45259a[_0x3a4dca(0x2a0)]/0xa)/0xa;let _0x4763cc=_0x5af256[_0x3a4dca(0x2a1)]||_0x5af256[_0x3a4dca(0x2e6)],_0x584de1,_0x418fef=_0x3a4dca(0x204);_0x4763cc&&(_0x4763cc=_0x4763cc[_0x3a4dca(0x203)](({User:_0x302bf7,URL:_0x1523a4,Status:_0x3d6e61,Getworks:_0x8fc26c,Accepted:_0x58d129,Rejected:_0x5df9e8,Discarded:_0xb64fd4})=>({'user':_0x302bf7,'url':_0x1523a4,'status':_0x3d6e61,'getworks':_0x8fc26c,'accepted':_0x58d129,'rejected':_0x5df9e8,'discarded':_0xb64fd4})));const _0x4e4d3d=_0x4763cc?_0x4763cc[0x0]:null;_0x4e4d3d&&(_0x584de1=await extractAccountAndWorkerNumber({'poolWorkers':[_0x4e4d3d['user']]}),_0x418fef=(_0x4e4d3d[_0x3a4dca(0x24d)][_0x3a4dca(0x217)](rePoolName)||[_0x3a4dca(0x293)])[0x1]);const _0x3a2ca8=[];return console[_0x3a4dca(0x2f6)](global[_0x3a4dca(0x284)][_0x3a4dca(0x2c4)],'Whatsminer\x20parsing\x20miner\x20status\x20result',_0x45259a,_0x584de1,_0x4763cc,_0x418fef,_0x3a2ca8),{..._0x584de1,..._0x45259a,'pools':_0x4763cc,'poolName':_0x418fef};},'ZigMiner':async function(_0x2fce2e,_0x467d04){const _0x4f3e6d=_0x1812,{hashRate:_0x4f4f9a,accepted:_0xd2f641,rejected:_0x54222e,temperatures:_0x582c69,'upTime':_0x1386b2,'fanIn':_0x2deea1,'fanOut':_0x4abc64,'errors':_0x2e50dd}=_0x2fce2e[_0x4f3e6d(0x271)];let _0x4abc0d={'hashRate':_0x4f4f9a*0x3e8,'temperatures':_0x582c69,'elapsed':_0x1386b2,'accepted':_0xd2f641,'rejected':_0x54222e,'hardwareErrors':_0x2e50dd,'exhaustSpeed':_0x4abc64,'intakeSpeed':_0x2deea1};_0x4abc0d['hardwareErrors']=[_0x2e50dd];let _0x4e8c39,_0x399fcc,_0x1c6a74;if(_0x2fce2e[_0x4f3e6d(0x283)]&&_0x2fce2e[_0x4f3e6d(0x283)][0x0]&&_0x2fce2e['pools_details'][0x0][_0x4f3e6d(0x329)]){const _0x1e807f=_0x2fce2e[_0x4f3e6d(0x283)][0x0];_0x4e8c39=_0x2fce2e[_0x4f3e6d(0x283)]['map'](_0x5a027a=>{const _0x5c6be8=_0x4f3e6d;return{'user':_0x5a027a['username'],'url':_0x5a027a[_0x5c6be8(0x24d)]};});const _0x4d87c4=_0x4e8c39[_0x4f3e6d(0x203)](_0x1f0744=>_0x1f0744['user']);_0x399fcc=await extractAccountAndWorkerNumber({'poolWorkers':_0x4d87c4}),_0x1c6a74=(_0x1e807f['url'][_0x4f3e6d(0x217)](/((?:\d+\.){3}\d+|[^\.\:\/]+)(?:\.\w+)\:\d{2,}/)||['Unknown'])[0x1];}return console[_0x4f3e6d(0x2f6)](global[_0x4f3e6d(0x284)]['Purple'],_0x4f3e6d(0x2fe),_0x4abc0d,_0x399fcc,_0x4e8c39,_0x1c6a74),{..._0x399fcc,..._0x4abc0d,'pools':_0x4e8c39,'poolName':_0x1c6a74};}};_0x1d991b[_0x5bcea9(0x270)]=_0x1d991b[_0x5bcea9(0x2bf)],_0x1d991b[_0x5bcea9(0x2c2)]=_0x1d991b[_0x5bcea9(0x2bf)],_0x1d991b['Whatsminer_CG']=_0x1d991b['Whatsminer'],_0x1d991b['Antminer_updater']=_0x1d991b['Antminer'],_0x1d991b[_0x5bcea9(0x2ee)]=_0x1d991b[_0x5bcea9(0x345)];const _0x278dae=_0x1d991b[_0x576c19];if(!_0x278dae)return console['warn'](_0x5bcea9(0x289)+_0x576c19,_0x38abc0),null;return _0x278dae(_0x38abc0,_0x31fc49);}function completeMinerVersion(_0x25eef1){const _0x3d02d9=_0x3ae100;let {systemKernelVersion:systemKernelVersion='',softwareVersion:softwareVersion='',modelType:modelType='',minerType:_0x38d3df,apiVersion:_0x24bfe9,brand:_0x3a5fa9,completed:_0x38027f}=_0x25eef1;if(_0x38027f&&modelType[_0x3d02d9(0x34a)](_0x38d3df)>=0x0)return _0x25eef1;if(_0x38d3df&&modelType[_0x3d02d9(0x34a)](_0x38d3df)<0x0){if(modelType[_0x3d02d9(0x34a)](_0x3a5fa9)>=0x0)_0x38d3df=modelType;else _0x38d3df['indexOf'](_0x3a5fa9)>=0x0&&(modelType=_0x38d3df);}_0x25eef1[_0x3d02d9(0x2a7)]=getMinerType(modelType),softwareVersion=softwareVersion[_0x3d02d9(0x1df)](/\-git\-.+$/,'');const _0x8dfa7f=(systemKernelVersion+'~'+softwareVersion)[_0x3d02d9(0x2e3)](),_0x26ba9d=minerVersionsLookup[_0x8dfa7f+_0x38d3df]||minerVersionsLookup[_0x8dfa7f];if(!_0x26ba9d){if(_0x38d3df){if(minerTypeMap[_0x38d3df])return _0x25eef1['apiVersion']=minerTypeMap[_0x38d3df][_0x3d02d9(0x2de)]||minerTypeMap[_0x38d3df][_0x3d02d9(0x316)],{..._0x25eef1,'softwareVersion':softwareVersion,'completed':!![]};else console['warn'](_0x3d02d9(0x25a)+_0x38d3df,_0x25eef1);}else console['warn'](_0x3d02d9(0x2bc)+_0x8dfa7f,_0x25eef1);return _0x25eef1[_0x3d02d9(0x2de)]=_0x3d02d9(0x1be),_0x25eef1['minerType']=_0x3d02d9(0x281),_0x25eef1;}else{if(_0x3a5fa9&&_0x3a5fa9!==_0x26ba9d[_0x3d02d9(0x316)]||_0x38d3df&&_0x38d3df!==_0x26ba9d[_0x3d02d9(0x2a7)])return{..._0x25eef1,'softwareVersion':softwareVersion,'completed':!![]};}return{..._0x25eef1,'softwareVersion':softwareVersion,..._0x26ba9d,'completed':!![]};}async function checkMinerStates({ipAddress:_0x247499,brand:_0x533ef0,commands:_0xf965e}){const _0x39be8e=_0x3ae100;let _0x263064=_0x533ef0?{'brand':_0x533ef0}:null,_0x4f3d9f=_0x533ef0;if(_0xf965e)return{'commands':await getAllMinerStateByCommands(_0x247499,_0xf965e,_0x4f3d9f)};else _0xf965e=[_0x39be8e(0x271),_0x39be8e(0x2a1),_0x39be8e(0x219),_0x39be8e(0x1d8),_0x39be8e(0x266)];let _0x104aae={};_0x104aae['versionInfo']=await getVersionInfo(_0x247499)[_0x39be8e(0x1d7)](_0x292d92=>{const _0x586fba=_0x39be8e;return _0x292d92[_0x586fba(0x2de)]&&(_0x4f3d9f=_0x292d92[_0x586fba(0x2de)]),_0x292d92;})[_0x39be8e(0x1f8)](_0x39e075=>{const _0x57e015=_0x39be8e;return{'error':_0x39e075['message'],'stack':_0x39e075[_0x57e015(0x299)]};}),_0x104aae[_0x39be8e(0x2d1)]=await getMinerInfo({'ipAddress':_0x247499})[_0x39be8e(0x1f8)](_0x41079e=>{const _0x1ce246=_0x39be8e;return{'error':_0x41079e[_0x1ce246(0x240)],'stack':_0x41079e[_0x1ce246(0x299)]};});_0x104aae[_0x39be8e(0x2d1)]?_0x104aae[_0x39be8e(0x355)]=await getKernelLogs(_0x104aae)[_0x39be8e(0x1f8)](_0x3b9b98=>{const _0x213ddc=_0x39be8e;return{'error':_0x3b9b98['message'],'stack':_0x3b9b98[_0x213ddc(0x299)]};}):(_0x104aae[_0x39be8e(0x2d1)]=_0x39be8e(0x2fb),_0x104aae[_0x39be8e(0x355)]=_0x39be8e(0x320));_0x104aae[_0x39be8e(0x349)]=await getMinerSystemInfo({'ipAddress':_0x247499,'minerTyped':_0x263064,'apiVersion':_0x4f3d9f},_0x104aae['versionInfo'])[_0x39be8e(0x1f8)](_0x542142=>{const _0xfe3097=_0x39be8e;return{'error':_0x542142[_0xfe3097(0x240)],'stack':_0x542142['stack']};});_0x104aae[_0x39be8e(0x349)][_0x39be8e(0x2de)]&&(_0x4f3d9f=_0x104aae[_0x39be8e(0x306)][_0x39be8e(0x2de)]);if(_0x4f3d9f){_0x263064=getMinerTypeMap(_0x104aae[_0x39be8e(0x349)])||{},_0x104aae['minerStatus']=await getMinerStatus({'ipAddress':_0x247499,'minerTyped':_0x263064,'apiVersion':_0x4f3d9f})[_0x39be8e(0x1f8)](_0xa461b2=>{const _0x32da30=_0x39be8e;return{'error':_0xa461b2[_0x32da30(0x240)],'stack':_0xa461b2[_0x32da30(0x299)]};});const _0x2113b3=await getRemotesPools({'ipAddress':_0x247499,'apiVersion':_0x4f3d9f},_0x263064)[_0x39be8e(0x1f8)](_0x3db1eb=>{const _0x5d073f=_0x39be8e;return{'info':'getMinerSystemInfo\x20failed!!!','error':_0x3db1eb[_0x5d073f(0x240)],'stack':_0x3db1eb['stack']};});if(Array[_0x39be8e(0x2ea)](_0x2113b3['pools'])){const _0x55f549=_0x2113b3['pools'][_0x39be8e(0x203)](_0x20e227=>_0x20e227[_0x39be8e(0x1c2)]),{accountName:_0x3f38b5,workerName:_0x3f50f9,workerTypeNumber:_0x202597}=await extractAccountAndWorkerNumber({'poolWorkers':_0x55f549})||{};_0x104aae[_0x39be8e(0x1cd)]={'accountName':_0x3f38b5,'workerName':_0x3f50f9,'workerTypeNumber':_0x202597,..._0x2113b3,'poolWorkers':_0x55f549};}}return!_0x104aae[_0x39be8e(0x23f)]&&(_0x104aae[_0x39be8e(0x23f)]=_0x39be8e(0x31d)),!_0x104aae[_0x39be8e(0x1cd)]&&(_0x104aae[_0x39be8e(0x1cd)]=_0x39be8e(0x309)),_0x104aae[_0x39be8e(0x318)]=await getAllMinerStateByCommands(_0x247499,_0xf965e,_0x4f3d9f)['catch'](_0x39088c=>{const _0x256cb9=_0x39be8e;return{'error':_0x39088c[_0x256cb9(0x240)],'stack':_0x39088c['stack']};}),_0x104aae;}async function modifyMinerStates({ipAddress:_0xbb15e9,brand:_0x330d43,username:_0x3d632e,worker:_0x5823ef}){const _0x98df23=_0x3ae100;let _0x383d13=_0x330d43?{'brand':_0x330d43}:null,_0x5f5c86=_0x330d43,_0x562345={};_0x562345[_0x98df23(0x306)]=await getVersionInfo(_0xbb15e9)[_0x98df23(0x1d7)](_0x100970=>{const _0x2132c8=_0x98df23;return _0x100970['apiVersion']&&(_0x5f5c86=_0x100970[_0x2132c8(0x2de)]),_0x100970;})[_0x98df23(0x1f8)](_0x2221f4=>{const _0x275104=_0x98df23;return{'error':_0x2221f4[_0x275104(0x240)],'stack':_0x2221f4[_0x275104(0x299)]};});let _0x5661a8=await getMinerInfo({'ipAddress':_0xbb15e9})[_0x98df23(0x1f8)](_0x3b442e=>{const _0x4e9e99=_0x98df23;return{'error':_0x3b442e[_0x4e9e99(0x240)],'stack':_0x3b442e['stack']};});if(_0x5661a8){if(_0x3d632e||_0x5823ef){const {condition:condition={},ipAddress:_0x36bcc2,apiVersion:_0x1acfb4}=_0x5661a8;let {pools:_0x9da152}=condition;return _0x562345[_0x98df23(0x21e)]=_0x9da152,_0x562345['remotePools']=await getRemotesPools({'ipAddress':_0x36bcc2,'apiVersion':_0x1acfb4},_0x383d13)[_0x98df23(0x1f8)](_0x49177d=>{const _0x4767ec=_0x98df23;return{'info':'getRemotesPools\x20failed!!!','error':_0x49177d[_0x4767ec(0x240)],'stack':_0x49177d[_0x4767ec(0x299)]};}),!_0x9da152&&(_0x9da152=remotePools['pools']),Array[_0x98df23(0x2ea)](_0x9da152)?(_0x3d632e&&_0x9da152[_0x98df23(0x351)](_0x8e4517=>{const _0x82550b=_0x98df23;_0x8e4517[_0x82550b(0x1c2)]=_0x8e4517[_0x82550b(0x1c2)][_0x82550b(0x1df)](/^[^\.]+\./,_0x3d632e+'.');}),_0x5823ef&&_0x9da152['forEach'](_0x1b941c=>{const _0x281167=_0x98df23;_0x1b941c[_0x281167(0x1c2)]=_0x1b941c[_0x281167(0x1c2)][_0x281167(0x1df)](/\..+$/,'.'+_0x5823ef);}),_0x562345[_0x98df23(0x28a)]=await updateMinerSettings({'minerInfo':_0x562345['minerInfo'],'minerTyped':{},'pools':_0x9da152,'apiVersion':_0x1acfb4})):_0x562345[_0x98df23(0x28a)]=_0x98df23(0x287),_0x562345;}}else{if(_0x3d632e)return _0x562345[_0x98df23(0x28a)]='Unable\x20to\x20set\x20pools.\x20Not\x20possible\x20without\x20minerInfo!\x20Run\x20discover\x20first.\x20\x0a\x20MinerInfo\x20is\x20not\x20available!\x20Run\x20discovery\x20routine.\x20\x0a\x20/scan?settings={\x22range\x22:[\x22'+_0xbb15e9+_0x98df23(0x308)+_0xbb15e9+_0x98df23(0x319),_0x562345;else _0x562345[_0x98df23(0x2d1)]='minerInfo\x20is\x20not\x20available!\x20Run\x20discovery\x20routine.\x20\x0a\x20/scan?settings={\x22range\x22:[\x22'+_0xbb15e9+_0x98df23(0x308)+_0xbb15e9+_0x98df23(0x319),_0x562345[_0x98df23(0x355)]=_0x98df23(0x320);}return _0x562345;}module[_0x3ae100(0x2cc)]={'MAX_POOLS':MAX_POOLS,'buildSetMinerSettingsRequestBody':buildSetMinerSettingsRequestBody,'getRemotesPools':getRemotesPools,'getMinerSystemInfo':getMinerSystemInfo,'getMinerSettingsUrl':getMinerSettingsUrl,'getMinerSettings':getMinerSettings,'getSummaryAndPools':getSummaryAndPools,'getUpdateMinerSettingsUrl':getUpdateMinerSettingsUrl,'getMinerLandingPageUrl':getMinerLandingPageUrl,'updateMinerSettings':updateMinerSettings,'updateMinerNetworkSettings':updateMinerNetworkSettings,'updateMinerFirmware':updateMinerFirmware,'retrieveMinerNetworkDiagnostics':retrieveMinerNetworkDiagnostics,'updateEnableSSH':updateEnableSSH,'getWallets':getWallets,'createMinerInfo':createMinerInfo,'getMinerInfo':getMinerInfo,'getPoolTemplates':getPoolTemplates,'getMinerStatus':getMinerStatus,'havePoolConfigsChanged':havePoolConfigsChanged,'validateMinerConfig':validateMinerConfig,'getRemotesPoolConfig':getRemotesPoolConfig,'extractAccountAndWorkerNumber':extractAccountAndWorkerNumber,'upsertMinerInfo':upsertMinerInfo,'updateMinerInfo':updateMinerInfo,'getPoolConfigs':getPoolConfigs,'getMinerReboot':getMinerReboot,'getMinerReset':getMinerReset,'getMinerType':getMinerType,'getMinerTypeMap':getMinerTypeMap,'getUniqueWorkerName':getUniqueWorkerName,'getMinerFilterClause':getMinerFilterClause,'getMinerLayoutFields':getMinerLayoutFields,'getKernelLogs':getKernelLogs,'getPoolIDs':getPoolIDs,'deriveApiVersion':deriveApiVersion,'enableFirmwareUpload':enableFirmwareUpload,'completeMinerVersion':completeMinerVersion,'checkMinerStates':checkMinerStates,'modifyMinerStates':modifyMinerStates,'trendsAggregate':trendsAggregate};