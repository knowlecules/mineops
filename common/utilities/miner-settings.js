/* Copyright (C) 9208-9721 Quebec, Inc - All Rights Reserved
* Unauthorized copying of this file, via any medium is strictly prohibited
* Proprietary and confidential
* Written by Jason Rudland <jason.g.rudland@gmail.com>, September 2022
*/'use strict';const _0x423be7=_0x1962;(function(_0x591533,_0x4249a3){const _0x3a631c=_0x1962,_0x40dd04=_0x591533();while(!![]){try{const _0x3d86de=-parseInt(_0x3a631c(0x226))/0x1*(-parseInt(_0x3a631c(0x10c))/0x2)+-parseInt(_0x3a631c(0x1db))/0x3+parseInt(_0x3a631c(0xae))/0x4+-parseInt(_0x3a631c(0x1f7))/0x5+parseInt(_0x3a631c(0x11d))/0x6*(-parseInt(_0x3a631c(0x212))/0x7)+parseInt(_0x3a631c(0xed))/0x8*(parseInt(_0x3a631c(0x17b))/0x9)+parseInt(_0x3a631c(0x1cf))/0xa;if(_0x3d86de===_0x4249a3)break;else _0x40dd04['push'](_0x40dd04['shift']());}catch(_0xd851ff){_0x40dd04['push'](_0x40dd04['shift']());}}}(_0xa1ac,0x41ec0));const loopback=require('loopback'),{sendCommand,getVersionInfo}=require(_0x423be7(0xc1)),{isGeneratedMacAddress,ipToMacAddress}=require('../../server/utilities/arpscan'),{getJSON,getHTML,filePost,formPost,postJSON}=require(_0x423be7(0x124)),config=require(_0x423be7(0xf5)),_=require('lodash'),{minerTypeMap,minerApis}=config;for(let minerApi in minerApis){minerApis[minerApi[_0x423be7(0x169)]()]=minerApis[minerApi];}const {getTokenValueMapper,replaceTokensWithValues}=require(_0x423be7(0xff)),fs=require('fs'),path=require(_0x423be7(0x20f)),SSH=require(_0x423be7(0x1c5)),{inspect,promisify}=require(_0x423be7(0x199)),writeFile=promisify(fs[_0x423be7(0x18a)]),portScanner=require(_0x423be7(0x177)),{api}=require('slack'),SSH_PORT_STATE=global[_0x423be7(0x184)],softwareVersions=global[_0x423be7(0xef)],MAX_POOLS=0x3,CONSUMPTION_DEFAULT=0x8ae,CONFIGURE_MODE_PROVISION=0x2;let minerVersionsLookup={},uniqWorker={'names':{},'addrs':{},'highestIndex':0x1};const reKnownFirmwareUpdateErrors=/(Cannot\s+Find\s+Signature|Incorrect\s+firmware|Cannot\s+Downgrade|Installer\s+Not\s+Sign(a?tur)ed?)/i;init();function init(){generateMinerVersionLookup();}const average=_0x4f6c31=>(_0x4f6c31?.[_0x423be7(0xa7)]?_0x4f6c31:[0x0])[_0x423be7(0xe0)]((_0x53dd27=0x0,_0x472576=0x0)=>parseFloat(_0x472576)+parseFloat(_0x53dd27))/(_0x4f6c31?.['length']||0x1);function escapeRegex(_0x541f57){const _0x5a8df2=_0x423be7;return _0x541f57[_0x5a8df2(0x141)](/[.*+?^${}()|[\]\\]/g,_0x5a8df2(0x151));}function generateMinerVersionLookup(){const _0x23e4c5=_0x423be7;if(Object[_0x23e4c5(0xb5)](minerVersionsLookup)[_0x23e4c5(0xa7)])return;Object[_0x23e4c5(0xb5)](minerTypeMap)['forEach'](_0x154394=>{const _0x5186b6=_0x23e4c5,{firmwareLookup:_0x58f8b0,brand:_0x209e52,apiVersion:_0x13b8a7,modelType:_0x2f057d}=minerTypeMap[_0x154394];_0x58f8b0&&_0x58f8b0['keys'][_0x5186b6(0x222)](_0x1b445d=>{const _0x5f80ab=_0x5186b6;let _0x2c32c4={..._0x58f8b0['versionData']};_0x2c32c4[_0x5f80ab(0x1ce)]=_0x2f057d||_0x154394,_0x2c32c4[_0x5f80ab(0x172)]=_0x154394,_0x2c32c4[_0x5f80ab(0xf4)]=_0x209e52,_0x2c32c4[_0x5f80ab(0xe9)]=_0x13b8a7||_0x209e52,minerVersionsLookup[_0x1b445d]=_0x2c32c4,minerVersionsLookup[_0x1b445d+_0x154394]=_0x2c32c4;});});}function buildTemplatedRequestBody(_0x2e4726=[],_0x5e371e=[],_0x495c13,_0x524e6e,_0x128e2b=_0x423be7(0x1f0)){const _0x5f4918=_0x423be7,_0x438a46=_0x495c13[_0x5f4918(0x13d)][_0x5f4918(0x1d1)](/([^\/]+)$/)[0x1]+'.txt',_0x36688f=minerApis[(_0x128e2b||'')[_0x5f4918(0x169)]()][_0x5f4918(0x19b)],_0x46e92d=(_0x524e6e[_0x5f4918(0xf0)]||'')+(_0x36688f||'')+_0x438a46,_0x57fcde=getTemplateLiteral(_0x46e92d,_0x438a46),_0x44eaca=new Function(..._0x2e4726,_0x5f4918(0x168)+_0x57fcde+'`'),_0xa34c52=_0x44eaca(..._0x5e371e),_0x53be51=_0xa34c52['replace'](/\n+/g,'');return _0x53be51;}function buildSetMinerSettingsRequestBody({pools:pools=null,minerConfigOptions:minerConfigOptions={},html:html='',uri:_0x1e304a,minerTyped:_0x3560ca,apiVersion:_0x596808}={}){const _0x5f0738=_0x423be7;if(!pools?.[0x0])throw new Error('Specify\x20at\x20least\x20one\x20pool.');pools[_0x5f0738(0x18c)]({},{});const _0x48204f=minerConfigOptions;return buildTemplatedRequestBody([_0x5f0738(0x18e),_0x5f0738(0x119),_0x5f0738(0xf8)],[pools,_0x48204f,html],_0x1e304a,_0x3560ca,_0x596808);}function _0xa1ac(){const _0x12a13a=['CLOSED','(0\x5cd{','=([^,]+),','minerTypeMap','130kEDzFO','join','SSH\x20enabling\x20error','freq','chain','aggregate','uniq','shift','restart','restartPool','minerLandingPage','\x5cw*)(?:\x5cW|$)','cgminer\x20version\x20command\x20response\x20','config','hwver','ZigMiner','Utility','18UQdVrJ','fan1','Whatsminer\x20parsing\x20miner\x20status\x20result','resolve','getMinerSettings','\x22,\x22','Whatsminer\x20M20S','./fetch','Kernel\x20logs\x20unavailable.','.\x20cgminer\x20\x22pools\x22\x20command\x20not\x20supported\x20nor\x20URI\x20in\x20config.','Accepted','utf8','name',']\x20to\x20','Kernel\x20log\x20error\x20parsed:\x20','SSH\x20enabled\x20for\x20','createRequestOptions','Post\x20scanning\x20failed:','enableSSH','antpool','accountName','latest','placement.hall\x20DESC','URL','uri','Antminer_updater','cgminer_version','password','method','knowlecules','locationID','versionInfo','url','Whatsminer_CG','Firmware\x20update\x20unlock\x20failed.\x20Attempting\x20to\x20disable\x20signature\x20check\x20for\x20','Content-Type','replace','Updating\x20deployment\x20info\x20for\x20miner\x20\x20','includes','docType','poolsReset','stack','cardChipCount','create','freqNamesRE','Cannot\x20upsert\x20minerInfo:\x20validation\x20issues,','POOL','preAuth','getMinerSystemInfo\x20failed!!!','\x20for\x20','./files/templates/','{\x22where\x22:\x20{},\x20\x22aggregate\x22:[\x0a\x20\x20\x20\x20{\x20\x22$unwind\x22:\x20\x22$trends.priorHours\x22},\x0a\x20\x20\x20\x20{\x20\x22$group\x22:\x20{\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x22_id\x22:\x20{\x22$concat\x22\x20:\x20[{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22$dateToString\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22format\x22:\x20\x22%Y-%m-%dT%H\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22date\x22:\x20{\x22$add\x22:\x20[\x22\x22,\x20\x22$trends.priorHours.x\x22]}\x20}},\x22_\x22]},\x0a\x20\x20\x20\x20\x20\x20\x22ts\x22:\x20{\x22$first\x22:\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x22$dateToString\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22format\x22:\x20\x22%Y-%m-%dT%H\x22,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22date\x22:\x20{\x22$add\x22:\x20[\x22\x22,\x20\x22$trends.priorHours.x\x22]}}}},\x0a\x20\x20\x20\x20\x20\x20\x22hashRateAll\x22:\x20{\x20\x22$sum\x22:\x20\x22$trends.priorHours.hashRate\x22},\x0a\x20\x20\x20\x20\x20\x20\x22temperatureAvg\x22:\x20{\x20\x22$avg\x22:\x20\x22$trends.priorHours.tempAvg\x22},\x0a\x20\x20\x20\x20\x20\x20\x22consumptionAll\x22:\x20{\x20\x22$sum\x22:\x20\x22$trends.priorHours.power\x22},\x0a\x20\x20\x20\x20\x20\x20\x22accountName\x22\x20:\x20{\x22$first\x22:\x20\x22$accountName\x22},\x0a\x20\x20\x20\x20\x20\x20\x22minerType\x22\x20:\x20{\x22$first\x22:\x20\x22$minerType\x22},\x0a\x20\x20\x20\x20\x20\x20\x22count\x22:\x20{\x20\x22$sum\x22:\x201\x20}\x0a\x20\x20\x20\x20}},\x0a\x20\x20\x20\x20{\x20\x22$sort\x22:\x20{\x20\x22_id\x22:\x201\x20}\x20}\x20','\x5c$&','date','user','catch','firmwareContentType','.\x20MinerTyped:','MHS\x20av','fan7','Innosilicon','switchpool','Not\x20assigned','getMinerStatus','stratum','Miner\x20type\x20is\x20a\x20required\x20property\x20for\x20getMinerSettings\x20method\x20','colorize','pool','dev_accepted','temp_out_chip_','trim','getKernelLogs','readFileSync','Miner\x20system\x20info\x20request\x20','pools_details','return\x20`','toLowerCase','from','Cookie','=(\x5cd+)[,\x5c.]','MineOpsBoundary','reTests','Magenta','Miner\x20create\x20failed\x20for\x20','Trend\x20clause','minerType','\x5cb(','NOT','platform_v','deployedOn','portscanner','Not\x20reading\x20logs!\x20minerInfo\x20is\x20not\x20available.','matches','set-cookie','1483983EBKQgG','0.0','macAddress','$group','remotesPools','fansNamesRE','$dateToString','$trends.','Kernel\x20logs\x20parsing\x20for\x20','SSH_PORT_STATE','Miner\x20type\x20is\x20a\x20required\x20property\x20for\x20getMinerStatus\x20method.','errno','\x22:\x22','Getworks','DEVS','writeFile','Unable\x20to\x20set\x20pools.\x20Not\x20possible\x20without\x20minerInfo!\x20Run\x20discover\x20first.\x20\x0a\x20MinerInfo\x20is\x20not\x20available!\x20Run\x20discovery\x20routine.\x20\x0a\x20/scan?settings={\x22range\x22:[\x22','push','Miner\x20pools\x20by\x20RPC\x20','pools','statusCode','Firmware\x20update\x20requested\x20for\x20','fine','tempNamesRE','Miner\x20type\x20is\x20a\x20required\x20property\x20for\x20getMinerKill\x20method.','stratum+tcp://','placement','StrongU\x20parsing\x20miner\x20status\x20result','rm\x20-rf\x20/tmp/mem;','$concat','util',')\x5cb','qualifier','\x22],\x22netmask\x22:\x22255.255.242.0\x22,\x22scanThrottleCount\x22:20}&mode=discoverhttp','macaddr',',\x20\x20','version','Unable\x20to\x20remove\x20firware\x20upload\x20lock:','group','max','User','%Y-%m-%dT%H:%M:%S','Content-Disposition:\x20form-data;\x20name=\x22datafile\x22;\x20filename=\x22','log','Parsing\x20miner\x20status\x20summary','message','$first','start','multipart/form-data;\x20boundary=','Signature\x20check\x20removed\x20in\x20','minerStatus','Unable\x20to\x20edit\x20minerInfo\x20fields','Unparseable\x20card\x20data','binary','digestOptions','=0,','Miner\x20reset:','bmminer_version','response','remotePools','Firmware\x20update\x20failed\x20for\x20','frequency','\x20persisting\x20to\x20','[miner-settings]\x20Unable\x20to\x20update\x20pools\x20for,\x20','env','placement.position\x20ASC','Editing\x20info\x20for\x20miner\x20\x20','timeout','.syncId','GET','soc','system_kernel_version','Whatsminer','stats','simple-ssh','ghs5s','Parsing\x20miner\x20status\x20result','placement.shelf\x20ASC','fan6','getRemotePools\x20requires\x20apiVersion.\x20Version\x20command\x20probably\x20failed.\x20Try\x20&brand=???\x20in\x20the\x20querystring','Not\x20possible\x20using\x20pool\x20data\x20in\x20minerInfo\x20nor\x20cgminer\x20pools\x20command!','system_filesystem_version','http','modelType','4977480ErCogR','octet-stream','match','jwt','FsMiner','indexOf','Reboot\x20','GHS\x20av','Dragonming','body','getMinerStatus\x20requires\x20apiVersion.\x20Version\x20command\x20probably\x20failed.\x20Try\x20&brand=???\x20in\x20the\x20querystring','Retrieve\x20miner\x20network\x20diagnostics\x20','759054OSdAcr','fan5','random','find','minertype','Miner\x20type\x20is\x20a\x20required\x20property\x20for\x20getMinerReset\x20method.','assign','groupBy','removepool','STATS','OPEN','AvalonMiner11','Green','hardwareErrors','upgrade_clear.cgi','Every\x20miner\x20summary\x20(devs)\x20by\x20RPC\x20for\x20','Miner\x20status\x20requests\x20','substr','$add','API\x20version\x20lookup\x20failed!\x20Key\x20not\x20found:','parseMinerSettings.\x20Unknown\x20apiVersion:','Antminer','concat','Dragonmint','setNetworkSettings','%Y-%m-%dT%H:00','Unable\x20to\x20update\x20minerInfo','foundblocks','2378550WIZWWE','slice','00000','then','SSH\x20NOT\x20enabled\x20for\x20','type','Miner\x20pools\x20by\x20API\x20','HARDWARE','network','stringify','StuMiner','Update\x20miner\x20network\x20settings\x20','ipv4','model','.\x20Will\x20attempt\x20to\x20find\x20alternate:\x20','hourly','devdetails','hardware','Miner\x20IP\x20address\x20cannot\x20be\x20null.','isArray','checkPortStatus','=(\x5cd+),','Purple','chain_acn','path','minerSystemInfo','temp2','725753fApkLA','utility','$accountName','Removing\x20signature\x20check\x20in\x20','application/x-www-form-urlencoded','upgrade.cgi','info','minerInfo\x20is\x20not\x20available!\x20Run\x20discovery\x20routine.','g19','exit\x20on\x20code','DEAD','ipaddress','test','parseMinerStatus.\x20Unknown\x20apiVersion:','summary','Cannot\x20edit\x20minerInfo:\x20validation\x20issues,','forEach','$1,','chain_acs','Innosilicon\x20T3S','7003IbhmuC','})(?:\x5cW|$)','username','getMinerLogin','commands','warn','Template\x20not\x20found:\x20','cgminer\x20','estimate','logErrors','bitmain-voltage','minerInfo\x20is\x20not\x20available!\x20Run\x20discovery\x20routine.\x20\x0a\x20/scan?settings={\x22range\x22:[\x22','history','%Y-%m-%dT%H:%M','fan2','addrs','hall','Reset\x20','dev_freq','fan3','Fan\x20duty','system_logic_version','toString','headers','RPC\x20\x22pools\x22\x20command\x20failed\x20for\x20','build_date','fan4','\x5cW(\x5cw*','diagnostic','diagnosticResponse','_id','powerEfficiency','condition','length',']\x20responded\x20with:','upsert','bmminer\x20','%Y-%m-%d','[createRequestOptions]\x20Login\x20attempt\x20failed\x20\x20for,\x20','parseMinerSystemInfo.\x20Unknown\x20apiVersion:','767804PRNczu',']\x20apiversion\x20\x22','temperatures','temp','remove','ipAddress','volts','keys','format','AvalonMiner','error','NOT\x20PROVIDED!','minerInfo','workerName','deployments','\x0a\x20Message:','trace','getworks','exec','../../server/utilities/cgminer-api','zzz_AvalonMiner',']\x20responsed\x20with:\x20','updateAll','getModel','insecure','auth','debug','daily','map','elapsed','findOne','\x0d\x0a\x0d\x0a','FAILED','data','dev_rejected','wallet','where','MinerInfo\x20lookup','filter','.\x20apiVersion:','LOCKED','hashRateAvg','Kill\x20firmware\x20failed\x20(trying\x20upgrade\x20anyway)\x20','rejected','Temperature','POOLS','].\x20Should\x20be\x203\x20or\x204\x20parts\x20delimited\x20by\x20period.\x20eg\x20\x22DataHall_1.Rack3.4.5.\x20Use\x20codes\x20to\x20help\x20rendering.\x20eg\x20\x22DH1.3.4.5','chain_vol','\x22:\x22$1\x22$2','Authorization','reduce','Antminer_X19','exports','split','$minerType','GHS\x205s','Removing\x20signature\x20check\x20failed\x20in\x20','minerFirmwareUpdate','priority','apiVersion','Firmware\x20unlock\x20re-attempting\x20to\x20disable\x20signature\x20check\x20for\x20','Miner\x20apiVersion\x20cannot\x20be\x20null.','chain_consumption','8GtqWZT','reMatches','softwareVersions','firmwareUpdatePrefix','routes','sed\x20-ir\x20\x27s/!\x5cs-f\x5csrunme.sh.sig/1\x20-eq\x200/g;\x20s/\x5c$res\x5cs-eq\x5cs1/1\x20-eq\x200/g\x27\x20/www/pages/cgi-bin/','mac','brand','../config','temp_chip','accepted','html','rebootOnUpdate','placement.rack\x20ASC','hashRate','cardIDs','initial','Device\x20Elapsed','./templating','devs','highestIndex','text/plain','No\x20pool\x20templates\x20found\x20for\x20algorithm:','Creating\x20miner\x20','parse','updater','Unknown'];_0xa1ac=function(){return _0x12a13a;};return _0xa1ac();}function buildSetNetworkSettingsRequestBody({network:network=null,minerInfo:minerInfo={},uri:_0x59bef8,minerTyped:_0x226db2,apiVersion:_0x2b6e72}={}){const _0x4ab235=_0x423be7;return buildTemplatedRequestBody([_0x4ab235(0x1ff),_0x4ab235(0xba)],[network,minerInfo],_0x59bef8,_0x226db2,_0x2b6e72);}function buildNetworkDiagnosticRequestBody({diagnostic:diagnostic={},uri:_0x4e6a6e,minerTyped:_0x53d38f,apiVersion:_0x5a6882}={}){const _0x32a4ee=_0x423be7;return buildTemplatedRequestBody([_0x32a4ee(0x242)],[diagnostic],_0x4e6a6e,_0x53d38f,_0x5a6882);}function buildStateSyncRequestBody({html:_0x580525,uri:_0x3e9b02,minerTyped:_0x480555,apiVersion:_0x357e65}={}){return buildTemplatedRequestBody(['html'],[_0x580525],_0x3e9b02,_0x480555,_0x357e65);}function validateMinerUpsert({minerInfo:_0x15ce17}){const _0x3a3252=_0x423be7,{workerName:_0x903cd3,macAddress:_0x1b98f1,ipAddress:_0x4373ed,condition:_0x12bd14}=_0x15ce17,{pools:pools=[]}=_0x12bd14,_0x14f52f=pools[_0x3a3252(0xca)](_0x2f86aa=>_0x2f86aa['user'])[_0x3a3252(0x10d)](','),_0x52a1a6=new RegExp(_0x903cd3,'i');if(!_0x14f52f||_0x52a1a6['test'](_0x14f52f))return![];return![];}async function trendsAggregate({accountName:_0x108e36,minerType:_0x91dddf,period:period='fine',ipAddresses:_0x1e8d9b,isStacked:_0x4bb853}){const _0x4fa203=_0x423be7,_0x342880=loopback[_0x4fa203(0xc5)]('minerInfo'),_0x32fb95=0x28;function _0x12334c(_0x4bc0ca,_0x40238b,_0x424f56){const _0x236146=_0x4fa203,_0x52b02a=JSON[_0x236146(0x105)](_0x55c63d['replace'](/priorHours/ig,_0x4bc0ca)),_0x492168=_0x52b02a[_0x236146(0x111)][0x1][_0x236146(0x17e)];return _0x492168['ts'][_0x236146(0x1a9)]['$dateToString'][_0x236146(0xb6)]=_0x40238b,_0x492168['ts'][_0x236146(0x1a9)][_0x236146(0x181)][_0x236146(0x152)][_0x236146(0x1ed)][0x0]=new Date(0x0),_0x424f56?_0x492168[_0x236146(0x244)][_0x236146(0x198)]=[_0x236146(0x182)+_0x4bc0ca+_0x236146(0x1bf),'_']:(_0x492168[_0x236146(0x244)]['$concat'][0x0][_0x236146(0x181)]['format']=_0x40238b,_0x492168[_0x236146(0x244)][_0x236146(0x198)][0x0][_0x236146(0x181)]['date'][_0x236146(0x1ed)][0x0]=new Date(0x0)),_0x52b02a;}let _0xe8d7ed='';!_0x4bb853&&(_0xe8d7ed=',\x20{\x20\x22$limit\x22:\x20'+_0x32fb95+'\x20}');let _0x55c63d=_0x4fa203(0x150)+_0xe8d7ed+']}',_0x4ca0d8;if(/^fine/i['test'](period))_0x4ca0d8=_0x12334c(_0x4fa203(0x191),_0x4fa203(0x1a4),!![]);else{if(/^minut/i[_0x4fa203(0x21e)](period))_0x4ca0d8=_0x12334c('minutes',_0x4fa203(0x233),!![]);else{if(/^hour/i[_0x4fa203(0x21e)](period))_0x4ca0d8=_0x12334c(_0x4fa203(0x206),_0x4fa203(0x1f4));else/^da[iy]/i[_0x4fa203(0x21e)](period)&&(_0x4ca0d8=_0x12334c(_0x4fa203(0xc9),_0x4fa203(0xab)));}}let _0x6d6bae;if(_0x1e8d9b&&_0x1e8d9b[_0x4fa203(0xa7)])_0x6d6bae={'ipAddress':{'inq':_0x1e8d9b[_0x4fa203(0xe3)](/\s*,\s*/)}};else{if(_0x108e36){_0x6d6bae={'accountName':_0x108e36};if(_0x91dddf)_0x6d6bae['minerType']=_0x91dddf;else _0x4bb853&&_0x4ca0d8[_0x4fa203(0x111)][0x1][_0x4fa203(0x17e)]['_id'][_0x4fa203(0x198)][_0x4fa203(0x18c)](_0x4fa203(0xe4));}else _0x91dddf&&(_0x6d6bae={'minerType':_0x91dddf},_0x4bb853&&_0x4ca0d8['aggregate'][0x1]['$group'][_0x4fa203(0x244)][_0x4fa203(0x198)][_0x4fa203(0x18c)](_0x4fa203(0x214)));}_0x6d6bae&&(_0x4ca0d8['where']=_0x6d6bae);console['log'](_0x4fa203(0x171),inspect(_0x4ca0d8,![],0x5,!![]));const _0xfdebd5=await _0x342880[_0x4fa203(0x111)](_0x4ca0d8,{'build':![]});return _0xfdebd5;}async function upsertMinerInfo({minerInfo:_0x360f76,configureMode:configureMode=0x0}){const _0x1f99b3=_0x423be7,_0x3d1804=loopback[_0x1f99b3(0xc5)]('minerInfo'),_0x296c53={'timestamp':_0x360f76[_0x1f99b3(0x176)]?new Date(_0x360f76[_0x1f99b3(0x176)]):new Date(),'accountName':_0x360f76[_0x1f99b3(0x131)]},_0x3ac347=validateMinerUpsert({'minerInfo':_0x360f76});if(_0x3ac347)return console[_0x1f99b3(0x22b)](_0x1f99b3(0x14a),_0x3ac347,JSON[_0x1f99b3(0x200)](_0x360f76)[_0x1f99b3(0x1ec)](0x0,0x64)),_0x360f76;if(!_0x360f76[_0x1f99b3(0xbc)])_0x296c53[_0x1f99b3(0x22e)]=!![],_0x360f76[_0x1f99b3(0xbc)]={'initial':_0x296c53,'latest':_0x296c53,'history':[_0x296c53]};else{if(_0x360f76[_0x1f99b3(0xbc)][_0x1f99b3(0x132)][_0x1f99b3(0x131)]!==_0x296c53[_0x1f99b3(0x131)])_0x360f76[_0x1f99b3(0xbc)][_0x1f99b3(0x132)]=_0x296c53,_0x360f76['deployments'][_0x1f99b3(0x232)]['push'](_0x296c53);else _0x360f76[_0x1f99b3(0x176)]&&(_0x360f76[_0x1f99b3(0xbc)][_0x1f99b3(0xfd)]=_0x296c53,_0x360f76[_0x1f99b3(0xbc)][_0x1f99b3(0x132)]=_0x296c53,_0x360f76[_0x1f99b3(0xbc)][_0x1f99b3(0x232)][_0x1f99b3(0x18c)](_0x296c53));}delete _0x360f76[_0x1f99b3(0x176)];const {placement:placement={}}=_0x360f76;return placement['position']&&configureMode===CONFIGURE_MODE_PROVISION&&await _0x3d1804[_0x1f99b3(0xc4)]({'placement':placement},{'placement':null}),console[_0x1f99b3(0xc8)]({'logType':_0x1f99b3(0xa9)},_0x1f99b3(0x142)+_0x360f76[_0x1f99b3(0xbb)]+',\x20\x20'+_0x360f76['ipAddress']),_0x360f76=await _0x3d1804['upsert'](_0x360f76)[_0x1f99b3(0x154)](_0x35f980=>{const _0x3bec31=_0x1f99b3;console['error'](_0x3bec31(0x1f5),_0x360f76,_0x35f980);}),_0x360f76;}async function getMinerLayoutFields(_0x48d8c9={}){const _0x274888=_0x423be7,_0x24580e=loopback['getModel'](_0x274888(0xba));let _0x2bdc6a={'fields':{'accountName':!![],'workerName':!![],'workerTypeNumber':!![],'placement':!![],'model':!![],'modelType':!![],'minerType':!![],'runtimeState':!![],'condition':!![],'conditionPrime':!![],'intakeSpeed':!![],'exhaustSpeed':!![],'logStates':!![],'ipAddress':!![],'macAddress':!![],'serialNumber':!![],'psuSerialNumber':!![],'psuModel':!![],'breakerPanelId':!![],'powerBarId':!![],'powerPhase':!![],'transformerLow':!![],'transformerMed':!![],'networkSwitchRef':!![]},'order':[_0x274888(0x133),_0x274888(0xfa),_0x274888(0x1c8),_0x274888(0x1bc)]};_0x2bdc6a={..._0x2bdc6a,..._0x48d8c9};let _0x431eb0=await _0x24580e[_0x274888(0x1de)](_0x2bdc6a),_0x25eee6=_[_0x274888(0x1e2)](_0x431eb0,_0x309fb3=>_0x309fb3?.[_0x274888(0x195)]?.[_0x274888(0x236)]||_0x274888(0x15b));return _0x25eee6;}async function updateMinerInfo({record:_0x33fb98,keyField:_0x879db0,keyFieldName:_0x21787d}){const _0x5ae777=_0x423be7,_0xf45829=loopback[_0x5ae777(0xc5)]('minerInfo'),_0x1d2967=_0x33fb98[_0x21787d],_0x2c8893={'where':{}};let {placement:placement='',minerType:_0x201358,ipAddress:_0xdaae1f,macAddress:_0x5c6b7b,serialNumber:_0x2d2feb,psuSerialNumber:_0x86498d,psuModel:_0x1bc6ea,networkSwitchRef:_0x2d0b69,breakerPanelId:_0xd7756e,powerBarId:_0x1852cc,powerPhase:_0x38ca00,transformerLow:_0x495f61,transformerMed:_0x3d8518}=_0x33fb98;!placement&&(placement=JSON[_0x5ae777(0x200)](_0x33fb98)[_0x5ae777(0x1d1)](/placement":"?([^,'"]*)"?(,|$)/)[0x1]);if(placement['length']>0x4){const _0x90565c=placement['match'](/^(?:(.+)\.)?([^\.]+)\.(\d+)\.(\d+)(\.true|false)?$/);if(!_0x90565c&&_0x90565c[_0x5ae777(0xa7)])return console['warn']('During\x20edit,\x20cannot\x20extract\x20placement['+placement+_0x5ae777(0xdc)),_0xc0e100;const _0xd9f74=parseInt(_0x90565c[0x3],0xa),_0xb003c9=parseInt(_0x90565c[0x4],0xa),_0x4686b2=/^\d+$/['test'](_0x90565c[0x2])?parseInt(_0x90565c[0x2],0xa):_0x90565c[0x2],_0x20b8ab=_0x90565c[0x5]||![];placement={'hall':_0x90565c[0x1]||'','rack':_0x4686b2,'shelf':_0xd9f74,'position':_0xb003c9,'upright':_0x20b8ab};}const _0x446cbd={'placement':placement,'minerType':_0x201358,'ipAddress':_0xdaae1f,'macAddress':_0x5c6b7b,'serialNumber':_0x2d2feb,'psuSerialNumber':_0x86498d,'psuModel':_0x1bc6ea,'networkSwitchRef':_0x2d0b69,'breakerPanelId':_0xd7756e,'powerBarId':_0x1852cc,'powerPhase':_0x38ca00,'transformerLow':_0x495f61,'transformerMed':_0x3d8518};_0x2c8893[_0x5ae777(0xd2)][_0x879db0]=new RegExp(escapeRegex(_0x1d2967),'i');let _0xc0e100=await _0xf45829[_0x5ae777(0xcc)](_0x2c8893);!process[_0x5ae777(0x1bb)]['UNSAFE_EDITS']&&delete _0x446cbd[_0x879db0];const _0x13725c=validateMinerUpsert({'minerInfo':_0xc0e100});if(_0x13725c)return console[_0x5ae777(0x22b)](_0x5ae777(0x221),_0x13725c,JSON[_0x5ae777(0x200)](_0xc0e100)['substr'](0x0,0x64)),_0xc0e100;return console[_0x5ae777(0xc8)]({'logType':'edit'},_0x5ae777(0x1bd)+_0xc0e100[_0x5ae777(0xbb)]+_0x5ae777(0x19e)+_0xc0e100['ipAddress']),_0xc0e100=Object[_0x5ae777(0x1e1)](_0xc0e100,_0x446cbd),_0xc0e100=await _0xf45829['upsert'](_0xc0e100)[_0x5ae777(0x154)](_0x1de508=>{const _0x46521c=_0x5ae777;console[_0x46521c(0xb8)](_0x46521c(0x1ae),_0xc0e100,_0x1de508);}),_0xc0e100;}async function createMinerInfo({minerInfo:_0x20a51d,placement:_0x4f70bb,minerIndex:_0x1fceb9,accountName:_0x2d794e,minerTyped:_0x5d22b6}){const _0x2356a5=_0x423be7,_0x4f4b97=loopback[_0x2356a5(0xc5)]('minerInfo'),{name:_0x2b2864,code:_0x16a2f0}=_0x5d22b6,{ipAddress:_0x43f60c,workerName:_0x35e51a}=_0x20a51d,_0x57c711={'timestamp':new Date(),'accountName':_0x2d794e},_0x872039={'minerIndex':_0x1fceb9,'code':_0x16a2f0,'name':_0x2b2864,..._0x20a51d,'placement':_0x4f70bb};return _0x2d794e&&(_0x20a51d['accountName']=_0x2d794e),!_0x872039[_0x2356a5(0x17d)]&&(_0x872039[_0x2356a5(0x17d)]=ipToMacAddress(_0x43f60c)),_0x2d794e&&(_0x872039[_0x2356a5(0xbc)]={'initial':_0x57c711,'latest':_0x57c711,'history':[_0x57c711]}),console[_0x2356a5(0xc8)]({'logType':_0x2356a5(0x148)},_0x2356a5(0x104)+_0x35e51a+_0x2356a5(0x19e)+_0x43f60c),_0x4f4b97[_0x2356a5(0x148)]([_0x872039])[_0x2356a5(0x1fa)](_0x311de2=>{return _0x311de2?_0x311de2[0x0]:null;})[_0x2356a5(0x154)](_0x4daac0=>{const _0x3fe467=_0x2356a5;console[_0x3fe467(0xbe)](_0x3fe467(0x170)+_0x35e51a+_0x3fe467(0x19e)+_0x43f60c);throw _0x4daac0;});}let reWorker=null;const indexPad=_0x423be7(0x1f9);function getUniqueWorkerName(_0x5b43e2,_0x15a5dc){const _0x5052d6=_0x423be7;!reWorker&&(reWorker=new RegExp('\x5cW(\x5cw+)'+_0x15a5dc['locationID']+_0x5052d6(0x109)+indexPad['length']+_0x5052d6(0x227),'i'));const {workerName:_0x3b0708,macAddress:_0x28b596}=_0x5b43e2;let _0x20487e=uniqWorker[_0x5052d6(0x235)][_0x3b0708],_0x511863=reWorker[_0x5052d6(0x21e)](_0x3b0708);return(!_0x511863||_0x20487e!==_0x28b596)&&(_0x3b0708=(indexPad+ ++uniqWorker[_0x5052d6(0x101)])[_0x5052d6(0x1f8)](indexPad['length'])),uniqWorker[_0x5052d6(0x235)][_0x3b0708]=_0x28b596,_0x3b0708;}async function getMinerInfo({macAddress:_0x47093b,accountName:_0x2e48c7,workerName:_0x17d56d,ipAddress:_0x462a80}){const _0xce77ca=_0x423be7;let _0x2bcdff;if(_0x47093b)_0x462a80&&isGeneratedMacAddress(_0x47093b)?_0x2bcdff={'or':[{'ipAddress':_0x462a80},{'macAddress':_0x47093b}]}:_0x2bcdff={'macAddress':_0x47093b};else{if(_0x462a80)_0x2bcdff={'ipAddress':_0x462a80};else{if(_0x2e48c7&&_0x17d56d)_0x2bcdff={'accountName':{'like':new RegExp('^'+_0x2e48c7+'$','i')},'workerName':{'like':new RegExp(_0x17d56d,'i')}};else return null;}}const _0x24cf28=loopback[_0xce77ca(0xc5)](_0xce77ca(0xba));return console[_0xce77ca(0xc8)](arguments[0x0],_0xce77ca(0xd3),_0x47093b,_0x2e48c7,_0x17d56d,_0x2bcdff),_0x24cf28['find']({'where':_0x2bcdff})[_0xce77ca(0x1fa)](async _0x1fe1be=>{const _0x1fcd68=_0xce77ca;if(_0x1fe1be[_0x1fcd68(0xa7)]===0x1)return _0x1fe1be[0x0];if(_0x1fe1be[_0x1fcd68(0xa7)]>0x1)return await mergeMinerInfos(_0x1fe1be,{'macAddress':_0x47093b,'accountName':_0x2e48c7,'workerName':_0x17d56d,'ipAddress':_0x462a80});if(_0x47093b&&_0x462a80&&_0x2e48c7&&_0x17d56d)return _0x2bcdff={'ipAddress':_0x462a80,'accountName':{'like':new RegExp('^'+_0x2e48c7+'$','i')},'workerName':{'like':new RegExp('^'+_0x17d56d+'$','i')}},_0x24cf28[_0x1fcd68(0x1de)]({'where':_0x2bcdff})[_0x1fcd68(0x1fa)](async _0x4ea504=>{const _0x5ca7d3=_0x1fcd68;if(_0x4ea504[_0x5ca7d3(0xa7)]>0x1)return await mergeMinerInfos(_0x4ea504,{'accountName':_0x2e48c7,'workerName':_0x17d56d,'ipAddress':_0x462a80});return _0x4ea504[0x0]||null;});});}async function mergeMinerInfos(_0x2f647c,{macAddress:_0x5114e7,accountName:_0x1d2191,workerName:_0x26582f,ipAddress:_0x262e9d}){const _0x3b0b3c=_0x423be7,_0x1cfb50=loopback[_0x3b0b3c(0xc5)]('minerInfo');let _0x25a271,_0x218603=[];return _0x2f647c[_0x3b0b3c(0x222)](_0xc74bd8=>{const _0x3159c9=_0x3b0b3c;!_0x25a271&&_0x5114e7&&_0x5114e7[_0x3159c9(0x169)]()==_0xc74bd8[_0x3159c9(0x17d)][_0x3159c9(0x169)]()?_0x25a271=_0xc74bd8:_0x218603['push'](_0xc74bd8);}),!_0x25a271&&(_0x25a271=_0x218603[_0x3b0b3c(0x113)]()),_0x218603['forEach'](_0x4bc34a=>{_0x1cfb50['deleteById'](_0x4bc34a['id']);}),_0x25a271;}function getApiUrl(_0x32b98e=null,_0x4c8098,_0x23518d){const _0x23a024=_0x423be7;if(_0x32b98e===null)throw new Error(_0x23a024(0x209));if(!_0x4c8098)throw new Error(_0x23a024(0xeb));const _0x164edc=minerApis[(_0x4c8098||'')[_0x23a024(0x169)]()];if(!_0x164edc)throw new Error('Missing\x20configuration\x20data\x20for\x20['+_0x32b98e+_0x23a024(0xaf)+_0x4c8098+'\x22.\x20NB.\x20Is\x20case-sensitive!');var {routes:_0x1fa265,protocol:protocol=_0x23a024(0x1cd)}=_0x164edc;if(!_0x1fa265[_0x23518d])return null;var _0x1bcacc={..._0x1fa265[_0x23518d]};if(!_0x1bcacc['url'])return _0x1bcacc;return _0x1bcacc[_0x23a024(0x13d)]=protocol+'://'+_0x32b98e+_0x1bcacc[_0x23a024(0x13d)],_0x1bcacc;}async function createRequestOptions({uri:_0x166fda,minerTyped:_0x24900c,apiVersion:_0x73c453,maxSockets:_0x2b276a,timeout:_0xa6de69,headers:headers={},body:_0x213b37,form:_0x3b7976,followRedirect:followRedirect=![]}){const _0x2fe468=_0x423be7,_0x4a4093=(_0x73c453||'')[_0x2fe468(0x169)](),_0x5937b0=minerApis[_0x4a4093],_0x2f3634=_0x5937b0[_0x2fe468(0xf1)]['getMinerLogin'],{user:_0x23b069,password:_0x1c681c}=_0x5937b0;let _0x52d8cc={'uri':_0x166fda[_0x2fe468(0x13d)]['replace']('<%=randnum%>',Math[_0x2fe468(0x1dd)]()[_0x2fe468(0x23c)]()[_0x2fe468(0x1ec)](0x8)),'method':_0x166fda[_0x2fe468(0x139)],'rejectUnauthorized':![],'headers':Object[_0x2fe468(0xb5)](headers)['length']?headers:{..._0x166fda[_0x2fe468(0x23d)]}||{}};if(_0x166fda[_0x2fe468(0xc6)]||_0x166fda[_0x2fe468(0x14c)])_0x52d8cc[_0x2fe468(0xc7)]={'user':_0x23b069,'pass':_0x1c681c,'sendImmediately':!_0x166fda[_0x2fe468(0x14c)],'digestOptions':_0x166fda[_0x2fe468(0x1b1)]||{'basic':![]}},headers&&(_0x52d8cc[_0x2fe468(0x23d)]=headers);else{if(_0x2f3634){let _0x44b921='';if(!(_0x52d8cc[_0x2fe468(0x23d)][_0x2fe468(0x16b)]||_0x52d8cc['headers']['Authorization'])){const _0x1944a9={'form':_0x2f3634['form'],'method':_0x2f3634['method'],'headers':_0x2f3634['headers'],'rejectUnauthorized':![],'uri':_0x166fda[_0x2fe468(0x13d)]['match'](/(https?:\/\/[^\/]+)\//)[0x1]+_0x2f3634[_0x2fe468(0x13d)]},{headers:_0x4515a1,body:body={},statusCode:_0x5e35fd}=await formPost(_0x1944a9);if(/^\s*[45]/['test'](_0x5e35fd)){let _0x310857=_0x2fe468(0xac)+_0x1944a9[_0x2fe468(0x135)]+_0x2fe468(0xd5)+_0x73c453;return console['warn'](_0x310857,_0x1944a9),_0x52d8cc;}_0x4515a1['set-cookie']&&(_0x52d8cc[_0x2fe468(0x23d)]['Cookie']=_0x4515a1[_0x2fe468(0x17a)][_0x2fe468(0x10d)](';')[_0x2fe468(0x141)](/(;\s*path=.*?(?:;|$))/g,';')[_0x2fe468(0x141)](/;$/,'')),body[_0x2fe468(0x1d2)]&&(_0x52d8cc[_0x2fe468(0x23d)][_0x2fe468(0xdf)]='Bearer\x20'+body[_0x2fe468(0x1d2)]),_0x44b921=_0x4515a1['location'];}if(followRedirect&&_0x44b921){const _0x32c29a={..._0x52d8cc};_0x32c29a[_0x2fe468(0x135)]=_0x166fda[_0x2fe468(0x13d)][_0x2fe468(0x1d1)](/(https?:\/\/[^\/]+)\//)[0x1]+_0x44b921,_0x32c29a[_0x2fe468(0x139)]=_0x2fe468(0x1c0);const _0x4cfd97=await getHTML(_0x32c29a);_0x3b7976=buildStateSyncRequestBody({'html':_0x4cfd97,'uri':_0x166fda,'minerTyped':_0x24900c,'apiVersion':_0x73c453}),_0x52d8cc[_0x2fe468(0x23d)]={..._0x166fda[_0x2fe468(0x23d)],..._0x52d8cc[_0x2fe468(0x23d)]};}}}/post/i['test'](_0x166fda[_0x2fe468(0x139)])?(_0x3b7976&&(_0x52d8cc['form']=_0x3b7976),_0x213b37&&(_0x52d8cc[_0x2fe468(0x1d8)]=_0x213b37)):delete _0x52d8cc['headers'][_0x2fe468(0x140)];if(_0x166fda[_0x2fe468(0x1be)])_0x52d8cc[_0x2fe468(0x1be)]=_0xa6de69;else _0xa6de69&&(_0x52d8cc[_0x2fe468(0x1be)]=_0xa6de69);return _0x2b276a&&(_0x52d8cc[_0x2fe468(0x160)]={'maxSockets':_0x2b276a}),_0x166fda['noAuth']&&delete _0x52d8cc[_0x2fe468(0xc7)],console[_0x2fe468(0xc8)]({'method':_0x2fe468(0x12d),'uri':_0x166fda,'apiVersion':_0x73c453},'createRequestOptions',_0x52d8cc),_0x52d8cc;}function getUpdateMinerSettingsUrl(_0x30068f,_0x57e775){return getApiUrl(_0x30068f,_0x57e775,'setMinerSettings');}function getMinerSettingsUrl(_0x43fe66,_0x4915e0){const _0x3b02a8=_0x423be7;return getApiUrl(_0x43fe66,_0x4915e0,_0x3b02a8(0x121));}function getNetworkSettingsUrl(_0x417512,_0x28f4c5){const _0x5464fb=_0x423be7;return getApiUrl(_0x417512,_0x28f4c5,_0x5464fb(0x1f3));}function getNetworkDiagnosticsUrl(_0x2f41f7,_0x4002d7){return getApiUrl(_0x2f41f7,_0x4002d7,'getNetworkDiagnostics');}function getMinerStatusUrl(_0x47c601,_0x174f3b){const _0x270f8d=_0x423be7;return getApiUrl(_0x47c601,_0x174f3b,_0x270f8d(0x15c));}function getMinerLoginUrl(_0x5a7ed9,_0x14403d){const _0x16a33d=_0x423be7;return getApiUrl(_0x5a7ed9,_0x14403d,_0x16a33d(0x229));}function getMinerSystemInfoUrl(_0x1ce170,_0x443290){return getApiUrl(_0x1ce170,_0x443290,'getMinerSystemInfo');}function getMinerRebootUrl(_0x1bab10,_0x5ee1e2){return getApiUrl(_0x1bab10,_0x5ee1e2,'rebootMiner');}function getMinerResetUrl(_0x17d3f9,_0x2c8ce6){return getApiUrl(_0x17d3f9,_0x2c8ce6,'resetMiner');}function getPoolRestartUrl(_0x3a3898,_0x489d54){const _0x3cb073=_0x423be7;return getApiUrl(_0x3a3898,_0x489d54,_0x3cb073(0x115));}function getMinerKillUrl(_0x48a67d,_0x3b87df){return getApiUrl(_0x48a67d,_0x3b87df,'killMiner');}function getKernelLogsUrl(_0x3a51c7,_0x4e228f){const _0x19140e=_0x423be7;return getApiUrl(_0x3a51c7,_0x4e228f,_0x19140e(0x164));}function getMinerFirmwareUpdateUrl(_0x525955,_0x4bdb63){const _0x267b18=_0x423be7;return getApiUrl(_0x525955,_0x4bdb63,_0x267b18(0xe7));}function getEnableSSHUrl(_0x3cd345,_0x5e63f5){const _0x10c5e6=_0x423be7;return getApiUrl(_0x3cd345,_0x5e63f5,_0x10c5e6(0x12f));}function getMinerLandingPageUrl(_0xe39458=null,_0x251db8){const _0x144343=_0x423be7;if(_0xe39458===null)throw new Error(_0x144343(0x209));var _0x35f8e0={...minerApis[(_0x251db8||'')[_0x144343(0x169)]()][_0x144343(0xf1)][_0x144343(0x116)]}||{'method':_0x144343(0x1c0),'url':''};return _0x35f8e0['url']='http://'+_0xe39458+_0x35f8e0['url'],_0x35f8e0;}async function getMinerSystemInfo({ipAddress:ipAddress=null,minerTyped:_0x469513,apiVersion:_0x336e64,maxSockets:_0x44c3bc,timeout:timeout=0x1f40},_0x29c268){const _0x1eaccc=_0x423be7;_0x336e64=_0x336e64||(_0x29c268||{})[_0x1eaccc(0xe9)]||deriveApiVersion({'minerTyped':_0x469513});let _0x2fa6db=_0x29c268||(!isCommandAvailable(_0x336e64,'version')?null:await getVersionInfo(ipAddress)[_0x1eaccc(0x154)](_0x250640=>{const _0x10ff38=_0x1eaccc;return console[_0x10ff38(0xc8)]('[getMinerSystemInfo]\x20ignoring\x20cgminer\x20version\x20command\x20error\x20for:\x20'+ipAddress,_0x250640),null;})),_0x238f14=null;_0x2fa6db&&!/unavailable/i[_0x1eaccc(0x21e)](_0x29c268)&&(_0x238f14=completeMinerVersion(_0x2fa6db),_0x336e64=_0x238f14[_0x1eaccc(0xe9)]);!_0x469513&&_0x238f14&&(_0x469513=getMinerTypeMap(_0x238f14)||null);const _0x3d1726=getMinerSystemInfoUrl(ipAddress,_0x336e64);let _0x484e42;console[_0x1eaccc(0xc8)]({'ipAddress':ipAddress,'minerTyped':_0x469513,'apiVersion':_0x336e64},_0x1eaccc(0x118),_0x484e42);let _0x321460={},_0x40c77a;if(_0x3d1726[_0x1eaccc(0x13d)]){_0x40c77a=await createRequestOptions({'uri':_0x3d1726,'minerTyped':_0x469513,'apiVersion':_0x336e64,'maxSockets':_0x44c3bc,'timeout':timeout}),_0x321460=await getJSON(_0x40c77a);let _0x431240=_0x321460[_0x1eaccc(0x18f)]==0x1f4||/(TIMEDOUT|UNREACH)/i['test'](_0x321460['message'])||_0x321460[_0x1eaccc(0x18f)]&&_0x238f14;if(!_0x431240&&_0x321460[_0x1eaccc(0x18f)])throw _0x321460;if(!_0x431240){if(_0x321460[_0x1eaccc(0x1a8)]){let _0x123b73=null;if(/certificate has expired/i[_0x1eaccc(0x21e)](_0x321460[_0x1eaccc(0x1a8)])&&!/whatsminer/i[_0x1eaccc(0x21e)](_0x336e64))_0x123b73=config['minerTypeMap'][_0x1eaccc(0x123)];else{if(/invalid request/i[_0x1eaccc(0x21e)](_0x321460[_0x1eaccc(0x1a8)])){if(!/innosilicon/i['test'](_0x336e64))_0x123b73=config[_0x1eaccc(0x10b)][_0x1eaccc(0x225)];else!/whatsminer/i['test'](_0x336e64)&&(_0x123b73=config['minerTypeMap'][_0x1eaccc(0x123)]);}}if(_0x123b73){const _0x21ece9=await getMinerSystemInfo({'ipAddress':ipAddress,'minerTyped':_0x123b73,'apiVersion':_0x123b73[_0x1eaccc(0xe9)]||_0x123b73[_0x1eaccc(0xf4)],'maxSockets':_0x44c3bc},_0x29c268);return _0x21ece9;}}else _0x484e42=parseMinerSystemInfo(_0x321460,_0x336e64);}}if(_0x238f14){if(!_0x484e42){const _0x21bd9a=_0x469513&&_0x469513[_0x1eaccc(0x204)]?_0x469513[_0x1eaccc(0xf4)]+'\x20'+_0x469513[_0x1eaccc(0x129)]:'';_0x484e42={'minerType':_0x21bd9a,'ipAddress':ipAddress,..._0x238f14};}else Object[_0x1eaccc(0xb5)]({..._0x484e42,..._0x238f14})[_0x1eaccc(0xca)](_0x3437e9=>{_0x484e42[_0x3437e9]=_0x484e42[_0x3437e9]||_0x238f14[_0x3437e9];});}if(!_0x484e42){!_0x321460['message']&&(_0x321460[_0x1eaccc(0x1a8)]='Empty\x20response\x20from\x20server!');throw new Error(_0x321460);}return console['debug']({'ipAddress':ipAddress,'minerTyped':_0x469513,'apiVersion':_0x336e64},_0x1eaccc(0x166),_0x40c77a,_0x484e42),_0x484e42;}function isCommandAvailable(_0x408c7d,_0x4d4c1b){const _0x2b3766=_0x423be7;var {cgminerCommands:_0x202709}=minerApis[(_0x408c7d||'')[_0x2b3766(0x169)]()]||{};return _0x202709?_0x202709[_0x2b3766(0x1d4)](_0x4d4c1b)>=0x0:!![];}async function getRemotesPools(_0x2cd997,_0xe5d984,_0x40cac3){const _0x50b764=_0x423be7,{ipAddress:_0x4eefda,macAddress:_0x5a419f}=_0x2cd997;let _0xe65f03=[];_0x40cac3=_0x40cac3||deriveApiVersion({'minerInfo':_0x2cd997,'minerTyped':_0xe5d984});const _0xf37c1f=isCommandAvailable(_0x40cac3,_0x50b764(0x18e));if(_0xf37c1f){const _0x168803=await sendCommand(_0x4eefda,_0x50b764(0x18e))['catch'](_0x2dec4b=>{const _0x345024=_0x50b764;return console['warn'](_0x345024(0x23e)+_0x4eefda+'\x20['+_0x5a419f+']',_0x2dec4b),[];});_0x168803[_0x50b764(0x222)](_0x5a4d26=>{const _0x57e4e3=_0x50b764,{User:_0x4f38bd,URL:_0x1c86ab}=_0x5a4d26;_0xe65f03[_0x57e4e3(0x18c)]({'user':_0x4f38bd,'url':_0x1c86ab});});if(_0xe65f03[_0x50b764(0xa7)])return console[_0x50b764(0xc8)](_0x50b764(0x18d),_0x4eefda,_0xe65f03),{'pools':_0xe65f03};}const _0x30166a=await getMinerSettings(_0x4eefda,_0xe5d984,_0x40cac3);return _0x30166a?.['pools']?.[_0x50b764(0xa7)]&&console[_0x50b764(0xc8)](_0x50b764(0x1fd),_0x4eefda,_0xe65f03),_0x30166a||{'pools':_0xe65f03};}async function getSummaryAndPools(_0x10b63f,_0xe80be1){const _0x413dd8=_0x423be7,_0x145938=[_0x413dd8(0x220),_0x413dd8(0x18e),_0x413dd8(0x100),_0x413dd8(0x1c4)];return await getAllMinerStateByCommands(_0x10b63f,_0x145938,_0xe80be1);}async function getAllMinerStateByCommands(_0x346719,_0x2c6364,_0x4144dd){const _0x1fcb60=_0x423be7,_0xd8c881={};/all/i[_0x1fcb60(0x21e)](_0x2c6364)&&(_0x2c6364=[_0x1fcb60(0x220),_0x1fcb60(0x18e),'devs','stats','version','config',_0x1fcb60(0x207)]);for(const _0x4f79bf of _0x2c6364){_0xd8c881[_0x4f79bf]=await sendCommand(_0x346719,_0x4f79bf)[_0x1fcb60(0x154)](_0x469792=>{const _0x4fbeb3=_0x1fcb60,_0x2f3d04=_0x4f79bf+'\x20command\x20failed\x20for\x20'+_0x346719;return console[_0x4fbeb3(0x22b)](_0x2f3d04,_0x469792),{'message':_0x2f3d04,'err':inspect(_0x469792,![],0x5,!![])};});}const {version:_0x1fc0bf,summary:_0x4683b8,pools:_0x92769c}=_0xd8c881;return console[_0x1fcb60(0xc8)]({'ipAddress':_0x346719},_0x1fcb60(0x1ea)+_0x346719,_0x1fc0bf,_0x4683b8,_0x92769c),_0xd8c881;}async function getMinerStatus({ipAddress:ipAddress=null,minerTyped:_0x3efc1c,apiVersion:_0x58a69a,maxSockets:_0x360efa}){const _0x52197e=_0x423be7;if(!_0x3efc1c&&!_0x58a69a)throw new Error(_0x52197e(0x185));_0x58a69a=_0x58a69a||deriveApiVersion({'minerTyped':_0x3efc1c});const _0x2d9fdc=getMinerStatusUrl(ipAddress,_0x58a69a)||{};let _0x5c8202=_0x2d9fdc[_0x52197e(0x13d)]?{}:await getSummaryAndPools(ipAddress,_0x58a69a)||{},_0x5b83fe=null;if(_0x2d9fdc[_0x52197e(0x13d)]&&!_0x5c8202['summary']){_0x5b83fe=await createRequestOptions({'uri':_0x2d9fdc,'minerTyped':_0x3efc1c,'apiVersion':_0x58a69a,'maxSockets':_0x360efa}),_0x5c8202=await getJSON(_0x5b83fe);if(_0x5c8202[_0x52197e(0x18f)]==0x1f4||/(TIMEDOUT|UNREACH)/i[_0x52197e(0x21e)](_0x5c8202['message']))_0x5c8202=null;else{if(_0x5c8202[_0x52197e(0x18f)]||_0x5c8202[_0x52197e(0x186)])throw _0x5c8202;}let _0x2bde24=_0x5c8202['pools']?_0x52197e(0x18e):'POOLS';if(!_0x5c8202[_0x2bde24]||!_0x5c8202[_0x2bde24][_0x52197e(0xa7)]){const _0x273d9a=await getRemotesPools({'ipAddress':ipAddress},_0x3efc1c);!_0x273d9a?.[_0x52197e(0xa7)]&&(_0x5c8202[_0x2bde24]=_0x273d9a);}}let _0x484a45=null;return _0x5c8202&&(_0x484a45=await parseMinerStatus({'minerStatus':_0x5c8202,'minerTyped':_0x3efc1c,'apiVersion':_0x58a69a})),console['info']('Miner\x20status\x20request\x20ip\x20address:',ipAddress,_0x58a69a,_0x3efc1c[_0x52197e(0xf4)]),console[_0x52197e(0xc8)]({'ipAddress':ipAddress,'minerTyped':_0x3efc1c,'apiVersion':_0x58a69a},_0x52197e(0x1eb),_0x5b83fe,_0x58a69a,_0x3efc1c,_0x484a45),_0x484a45;}async function getMinerSettings(_0x4d2385=null,_0x15ab0d,_0x130ac2,_0x1366ab){const _0x2c2b6d=_0x423be7;if(!_0x15ab0d&&!_0x130ac2)throw new Error(_0x2c2b6d(0x15e)+_0x4d2385+_0x2c2b6d(0x156),_0x15ab0d);_0x130ac2=_0x130ac2||deriveApiVersion({'minerTyped':_0x15ab0d});const _0x57799a=getMinerSettingsUrl(_0x4d2385,_0x130ac2)||{},_0x1d2bc2=await createRequestOptions({'uri':_0x57799a,'minerTyped':_0x15ab0d,'apiVersion':_0x130ac2,'maxSockets':_0x1366ab});let _0x5e69bc=await getJSON(_0x1d2bc2);if(_0x5e69bc[_0x2c2b6d(0x18f)]==0x1f4||/(TIMEDOUT|UNREACH)/i['test'](_0x5e69bc[_0x2c2b6d(0x1a8)]))_0x5e69bc=null;else{if(_0x5e69bc[_0x2c2b6d(0x18f)])throw _0x5e69bc;}let _0x170f5c=null;return _0x5e69bc&&(_0x170f5c=await parseMinerSettings(_0x5e69bc,_0x15ab0d,_0x130ac2)),console[_0x2c2b6d(0x218)]('Miner\x20settings\x20request\x20ip\x20address:',_0x4d2385,_0x130ac2,_0x15ab0d[_0x2c2b6d(0xf4)]),console['debug']({'ipAddress':_0x4d2385,'minerTyped':_0x15ab0d,'apiVersion':_0x130ac2},'Miner\x20status\x20requests\x20',_0x1d2bc2,_0x130ac2,_0x15ab0d,_0x170f5c),_0x170f5c;}async function getMinerReboot(_0x7dd74f,_0x4a994f,_0x3317fb,_0x50622f,_0x5b0345){const _0x192f3b=_0x423be7;if(!_0x4a994f&&!_0x3317fb)throw new Error('Miner\x20type\x20is\x20a\x20required\x20property\x20for\x20getMinerReboot\x20method.');const {ipAddress:_0x1ffee3,macAddress:macAddress=''}=_0x7dd74f;_0x3317fb=_0x3317fb||deriveApiVersion({'minerInfo':_0x7dd74f,'minerTyped':_0x4a994f});const _0x5508d5=getMinerRebootUrl(_0x1ffee3,_0x3317fb)||{};if(!_0x5508d5[_0x192f3b(0x13d)])return null;const _0x369c93=!![],_0x30fb66=await createRequestOptions({'uri':_0x5508d5,'minerTyped':_0x4a994f,'apiVersion':_0x3317fb,'maxSockets':_0x5b0345,'followRedirect':_0x369c93});let _0x1d0fbf=await getJSON(_0x30fb66);if(_0x1d0fbf[_0x192f3b(0x18f)]==0x1f4||/(TIMEDOUT|UNREACH)/i[_0x192f3b(0x21e)](_0x1d0fbf[_0x192f3b(0x1a8)]))_0x1d0fbf=null;else{if(_0x1d0fbf[_0x192f3b(0x18f)])throw _0x1d0fbf;}return console[_0x192f3b(0x1a6)](_0x192f3b(0x1d5)+_0x7dd74f[_0x192f3b(0xbb)]+'\x20['+_0x1ffee3+',\x20'+macAddress+_0x192f3b(0xa8),_0x1d0fbf),_0x1d0fbf;}async function getMinerReset(_0xaa9ff8,_0x47f975,_0x31afc0,_0x38b98e){const _0x2b6016=_0x423be7;if(!_0x47f975&&!_0x31afc0)throw new Error(_0x2b6016(0x1e0));const {ipAddress:ipAddress=null,macAddress:macAddress=''}=_0xaa9ff8;_0x31afc0=_0x31afc0||deriveApiVersion({'minerInfo':_0xaa9ff8,'minerTyped':_0x47f975});const _0x456e38=getMinerResetUrl(ipAddress,_0x31afc0)||{};if(!_0x456e38['url'])return null;const _0x52fb98=await createRequestOptions({'uri':_0x456e38,'minerTyped':_0x47f975,'apiVersion':_0x31afc0,'maxSockets':_0x38b98e});let _0x39e1db=await getJSON(_0x52fb98);if(_0x39e1db[_0x2b6016(0x18f)]==0x1f4||/(TIMEDOUT|UNREACH)/i[_0x2b6016(0x21e)](_0x39e1db[_0x2b6016(0x1a8)]))_0x39e1db=null;else{if(_0x39e1db[_0x2b6016(0x18f)])throw _0x39e1db;}return console['log'](_0x2b6016(0x1b3)+ipAddress),console[_0x2b6016(0xc8)](_0x2b6016(0x237)+_0xaa9ff8[_0x2b6016(0xbb)]+'\x20['+ipAddress+',\x20'+macAddress+']\x20responsed\x20with:\x20'+_0x39e1db),_0x39e1db;}async function getMinerKill(_0x5188eb,_0x56365f,_0xab000a,_0x10572e){const _0x44cabb=_0x423be7;if(!_0x56365f&&!_0xab000a)throw new Error(_0x44cabb(0x193));const {ipAddress:ipAddress=null,macAddress:macAddress=''}=_0x5188eb;_0xab000a=_0xab000a||deriveApiVersion({'minerInfo':_0x5188eb,'minerTyped':_0x56365f});const _0x4da7c8=getMinerKillUrl(ipAddress,_0xab000a)||{};if(!_0x4da7c8[_0x44cabb(0x13d)])return null;const _0x53c844={'Content-Type':_0x44cabb(0x102)},_0x1685ed=await createRequestOptions({'uri':_0x4da7c8,'minerTyped':_0x56365f,'apiVersion':_0xab000a,'maxSockets':_0x10572e,'headers':_0x53c844}),_0x4c5b38=await getHTML(_0x1685ed)['catch'](_0x10c0f4=>{const _0x17855e=_0x44cabb;if(_0x10c0f4[_0x17855e(0x18f)]===0x1f4)return!![];else throw _0x10c0f4;});return console['debug']('Kill\x20'+_0x5188eb[_0x44cabb(0xbb)]+'\x20['+ipAddress+',\x20'+macAddress+_0x44cabb(0xc3)+_0x4c5b38),_0x4c5b38;}async function getKernelLogs({minerInfo:_0x4c163a,minerTyped:minerTyped={},apiVersion:_0x3ecd45,maxSockets:_0x598a76,filepath:_0x29a67b}){const _0x3d34d0=_0x423be7,{ipAddress:ipAddress=null}=_0x4c163a;_0x3ecd45=_0x3ecd45||deriveApiVersion({'minerInfo':_0x4c163a,'minerTyped':minerTyped});const _0x378560=getKernelLogsUrl(ipAddress,_0x3ecd45)||{};if(!_0x378560[_0x3d34d0(0x13d)])return null;const _0x3d0b16={},_0x162657=await createRequestOptions({'uri':_0x378560,'minerTyped':minerTyped,'apiVersion':_0x3ecd45,'maxSockets':_0x598a76,'headers':_0x3d0b16}),_0x2925f5=await getHTML(_0x162657)[_0x3d34d0(0x154)](_0x7be2fc=>{const _0x472510=_0x3d34d0;return console[_0x472510(0x22b)](_0x472510(0x125),_0x7be2fc),'';});let _0x4c7b74=null;return _0x2925f5&&(_0x2925f5[_0x3d34d0(0x1a8)]?(console['error'](_0x4c163a,_0x2925f5),_0x4c7b74=''):(console[_0x3d34d0(0xc8)](_0x3d34d0(0x183)+ipAddress+',\x20'+_0x3ecd45+_0x3d34d0(0x1b9)+(_0x29a67b||_0x3d34d0(0x174))+'.'),_0x29a67b&&await writeFile(_0x29a67b,_0x2925f5)['catch'](_0xb720ad=>console[_0x3d34d0(0xb8)](_0xb720ad)),_0x4c7b74=parseKernelLogs(_0x2925f5,_0x3ecd45,_0x378560[_0x3d34d0(0x144)]))),console[_0x3d34d0(0xc8)]('Kernel\x20logs\x20requests\x20',_0x162657,_0x4c7b74),_0x4c7b74;}async function updateMinerSettings({minerInfo:_0x436ec2,minerTyped:_0x247d36,pools:_0x379235,minerConfigOptions:_0x1c2abf,apiVersion:_0x3c1b92}){const _0x2d0bdc=_0x423be7;let _0x1772e1=[..._0x379235];_0x379235[0x0][_0x2d0bdc(0x13d)]&&(_0x1772e1=_['map'](_0x379235,(_0x49311d,_0x1d6330)=>{const _0xe67568=_0x2d0bdc;return{'index':_0x1d6330+0x1,'stratum':_0x49311d[_0xe67568(0x13d)],'username':_0x49311d['user'],'password':'x'};}));const {ipAddress:_0x35c33e}=_0x436ec2;_0x3c1b92=(_0x3c1b92||deriveApiVersion({'minerInfo':_0x436ec2,'minerTyped':_0x247d36}))[_0x2d0bdc(0x169)]();const _0x2a31e9=minerApis[_0x3c1b92];let _0x515b28=getUpdateMinerSettingsUrl(_0x35c33e,_0x3c1b92)||{};const _0x3278ca=isCommandAvailable(_0x3c1b92,_0x2d0bdc(0x18e));if(!_0x515b28[_0x2d0bdc(0x13d)]){if(!_0x3278ca){let _0x293d55=_0x2d0bdc(0x1ba)+_0x35c33e+_0x2d0bdc(0xd5)+_0x3c1b92+_0x2d0bdc(0x126);return console['error'](_0x293d55),null;}const _0x5759bd=await sendCommand(_0x35c33e,_0x2d0bdc(0x18e)),_0x43bc22={'remove':[],'add':[]};for(let _0x5a706f of _0x1772e1){const _0x2d1b0b=_0x5a706f[_0x2d0bdc(0x15d)]+','+(_0x5a706f['username']||_0x2d0bdc(0x13a))+','+(_0x5a706f[_0x2d0bdc(0x138)]||'x'),_0x55fba9=await sendCommand(_0x35c33e,'addpool',_0x2d1b0b);_0x43bc22['add'][_0x2d0bdc(0x18c)](_0x55fba9);}const _0x114545=_0x5759bd[_0x5759bd[_0x2d0bdc(0xa7)]-0x1][_0x2d0bdc(0x14b)]+0x1,_0x477961=await sendCommand(_0x35c33e,_0x2d0bdc(0x15a),_0x114545);for(let _0x80aac4 of _0x5759bd){const _0x3d7eae=await sendCommand(_0x35c33e,_0x2d0bdc(0x1e3),_0x80aac4[_0x2d0bdc(0x14b)]);_0x43bc22[_0x2d0bdc(0xb2)][_0x2d0bdc(0x18c)](_0x3d7eae);}return await sendCommand(_0x35c33e,_0x2d0bdc(0x114)),_0x43bc22;}let _0xad023d={};const _0x2a11c7=_0x2a31e9['routes'][_0x2d0bdc(0x229)];let _0x12ee8f='';if(_0x2a11c7&&_0x2a11c7[_0x2d0bdc(0x13d)]){const _0x5506c6=await createRequestOptions({'uri':_0x515b28,'minerTyped':_0x247d36,'apiVersion':_0x3c1b92,'headers':_0xad023d});_0x5506c6['headers']&&(_0xad023d[_0x2d0bdc(0x16b)]=_0x5506c6[_0x2d0bdc(0x23d)][_0x2d0bdc(0x16b)]);_0x5506c6[_0x2d0bdc(0x139)]=_0x2d0bdc(0x1c0),_0x12ee8f=await getHTML({..._0x5506c6});if(_0x12ee8f[_0x2d0bdc(0xb8)])return inspect(_0x12ee8f,![],0x5,!![]);}!_0x12ee8f&&console[_0x2d0bdc(0x218)]('Not\x20getting\x20miner\x20settings\x20html',_0x436ec2,_0x247d36,_0x379235,_0x1c2abf,_0x3c1b92);const _0x2e9eab=buildSetMinerSettingsRequestBody({'pools':_0x1772e1,'minerConfigOptions':_0x1c2abf,'html':_0x12ee8f,'apiVersion':_0x3c1b92,'minerTyped':_0x247d36,'uri':_0x515b28}),{headers:_0x1051e3={}}=_0x2a31e9[_0x2d0bdc(0xf1)]['setMinerSettings'];_0xad023d={..._0xad023d,..._0x1051e3},_0xad023d['Content-Type']=_0xad023d[_0x2d0bdc(0x140)]||'application/x-www-form-urlencoded';const _0x7cd9d7=await createRequestOptions({'uri':_0x515b28,'minerTyped':_0x247d36,'apiVersion':_0x3c1b92,'headers':_0xad023d,'form':_0x2e9eab});let {body:_0x1587a1}=await formPost({..._0x7cd9d7});console['debug']({'ipAddress':_0x35c33e,'minerTyped':_0x247d36,'apiVersion':_0x3c1b92},'Update\x20miner\x20settings\x20',_0x7cd9d7,_0x1587a1);if(/reboot/[_0x2d0bdc(0x21e)](_0x1587a1)||_0x2a31e9[_0x2d0bdc(0xf9)]){const _0x40b46c=await getMinerReboot(_0x436ec2,_0x247d36,_0x3c1b92);_0x40b46c?_0x1587a1+=_0x40b46c:await sendCommand(_0x35c33e,_0x2d0bdc(0x114));}return _0x1587a1;}async function updateMinerNetworkSettings({minerInfo:_0x44274e,network:_0x3d1520,minerTyped:_0x175605,apiVersion:_0x1f0158}){const _0x49364b=_0x423be7;_0x1f0158=_0x1f0158||deriveApiVersion({'minerInfo':_0x44274e,'minerTyped':_0x175605});const _0x101823=getNetworkSettingsUrl(_0x44274e[_0x49364b(0xb3)],_0x1f0158)||{};if(!_0x101823[_0x49364b(0x13d)])return null;const _0x432c80=buildSetNetworkSettingsRequestBody({'minerInfo':_0x44274e,'network':_0x3d1520,'apiVersion':_0x1f0158,'minerTyped':_0x175605,'uri':_0x101823}),_0x579a7a={'Content-Type':_0x49364b(0x216)},_0x9f7956=await createRequestOptions({'uri':_0x101823,'minerTyped':_0x175605,'apiVersion':_0x1f0158,'headers':_0x579a7a,'form':_0x432c80}),{body:_0x3c76b3}=await formPost({..._0x9f7956});return console['debug'](_0x49364b(0x202),_0x9f7956,_0x3c76b3),_0x3c76b3;}async function retrieveMinerNetworkDiagnostics({minerInfo:_0x449e7d,diagnostic:_0x10665a,minerTyped:_0x9229b4,apiVersion:_0x234a3c}){const _0x2a24fb=_0x423be7;_0x234a3c=_0x234a3c||deriveApiVersion({'minerInfo':_0x449e7d,'minerTyped':_0x9229b4});const _0x2f71a7=getNetworkDiagnosticsUrl(_0x449e7d[_0x2a24fb(0xb3)],_0x234a3c)||{};if(!_0x2f71a7[_0x2a24fb(0x13d)])return null;const _0x97e5b=buildNetworkDiagnosticRequestBody({'diagnostic':_0x10665a,'apiVersion':_0x234a3c,'minerTyped':_0x9229b4,'uri':_0x2f71a7}),_0x32720f={'Content-Type':'application/x-www-form-urlencoded'},_0x1aafee=await createRequestOptions({'uri':_0x2f71a7,'minerTyped':_0x9229b4,'apiVersion':_0x234a3c,'headers':_0x32720f,'form':_0x97e5b}),{body:_0x5a6362}=await formPost({..._0x1aafee});console[_0x2a24fb(0xc8)](_0x2a24fb(0x1da),_0x1aafee,_0x5a6362);let _0x346931=parseNetworkDiagnostic(_0x5a6362);if(!_0x346931||!_0x346931[_0x2a24fb(0x243)])throw new Error(_0x346931);return{..._0x10665a,..._0x346931};}async function removeMinerUpgradeCheck({minerInfo:_0x355f1a,minerTyped:_0x6a1bb,apiVersion:_0x144daf,filenames:filenames=[_0x423be7(0x217),_0x423be7(0x1e9)]}){const _0x13e23d=_0x423be7,{ipAddress:_0x411da1}=_0x355f1a;_0x144daf=(_0x144daf||deriveApiVersion({'minerInfo':_0x355f1a,'minerTyped':_0x6a1bb}))[_0x13e23d(0x169)]();const _0x315820=minerApis[_0x144daf],_0x3deed2=new SSH({'host':_0x411da1,'user':_0x315820['sshUser'],'pass':_0x315820['sshPassword']});return new Promise(function(_0x56f5c4,_0x20f11a){const _0x488159=_0x13e23d,_0x411805={'out':console[_0x488159(0x1a6)]['bind'](console),'err':console[_0x488159(0xb8)]['bind'](console),'exit':(_0x29de9f,_0x2d4066,_0x38c2b6)=>{const _0x246a04=_0x488159;_0x29de9f===0x1&&(console[_0x246a04(0x22b)](_0x246a04(0x21b),_0x29de9f,_0x2d4066,_0x38c2b6),_0x20f11a(_0x38c2b6));}};_0x3deed2[_0x488159(0xc0)](_0x488159(0x197)),filenames[_0x488159(0x222)](_0x2fb84e=>{const _0x52220d=_0x488159;_0x3deed2[_0x52220d(0xc0)](_0x52220d(0xf2)+_0x2fb84e,_0x411805);}),console['log'](_0x488159(0x215)+filenames[_0x488159(0x10d)](',')+_0x488159(0x14e)+_0x411da1),_0x3deed2['on'](_0x488159(0xb8),function(_0x1bd349){const _0x3d9854=_0x488159;var _0x1231fe=_0x3d9854(0xe6)+filenames[_0x3d9854(0x10d)](',')+_0x3d9854(0x14e)+_0x411da1;console[_0x3d9854(0x1a6)](_0x1231fe,_0x1bd349),_0x20f11a(_0x1231fe);}),_0x3deed2['on']('end',function(){const _0xfdb409=_0x488159;_0x56f5c4(_0xfdb409(0x1ac)+filenames[_0xfdb409(0x10d)](',')+_0xfdb409(0x14e)+_0x411da1);}),_0x3deed2[_0x488159(0x1aa)]();});}async function enableFirmwareUpload({minerInfo:_0x527588,minerTyped:_0xc5ec99,apiVersion:_0x390ba2}){const _0x437079=_0x423be7,_0x39c0fa=await updateEnableSSH({'minerInfo':_0x527588,'minerTyped':_0xc5ec99,'apiVersion':_0x390ba2});if(_0x39c0fa!==SSH_PORT_STATE[_0x437079(0x1e5)])return _0x39c0fa;return removeMinerUpgradeCheck({'minerInfo':_0x527588,'minerTyped':_0xc5ec99,'apiVersion':_0x390ba2})[_0x437079(0x1fa)](()=>{const _0x395bba=_0x437079;return SSH_PORT_STATE[_0x395bba(0x1e5)];})['catch'](_0x1327b2=>{const _0xb83e2f=_0x437079;return console['warn'](_0xb83e2f(0x1a0),_0x1327b2),SSH_PORT_STATE[_0xb83e2f(0xd6)];});}let firmwareBuffers={};function getFirmwareBuffer(_0x12efbe,_0x353fd8,_0x38d1da){const _0x2d50e9=_0x423be7;if(!firmwareBuffers[_0x12efbe]){let _0x2b9cea=_0x2d50e9(0x1d0);_0x38d1da&&_0x38d1da['firmwareContentType']&&(_0x2b9cea=_0x38d1da[_0x2d50e9(0x155)]);var _0x27664e=fs[_0x2d50e9(0x165)](path['resolve'](global['firmwareFolderPath']+'/'+_0x12efbe)),_0x5e0b28='';_0x5e0b28+='--'+_0x353fd8+'\x0d\x0a',_0x5e0b28+=_0x2d50e9(0x1a5)+_0x12efbe+'\x22\x0d\x0a',_0x5e0b28+='Content-Type:application/'+_0x2b9cea+_0x2d50e9(0xcd),firmwareBuffers[_0x12efbe]=Buffer['concat']([Buffer['from'](_0x5e0b28,_0x2d50e9(0x128)),Buffer[_0x2d50e9(0x16a)](_0x27664e,_0x2d50e9(0x1b0)),Buffer[_0x2d50e9(0x16a)]('\x0d\x0a--'+_0x353fd8+'\x0d\x0a',_0x2d50e9(0x128))]);}return firmwareBuffers[_0x12efbe];}let templateLiterals={};function getTemplateLiteral(_0x2ce01e,_0x5efcad){function _0x893026(_0x2bc9e3){const _0x4740d1=_0x1962;try{templateLiterals[_0x2bc9e3]=fs[_0x4740d1(0x165)](path[_0x4740d1(0x120)](_0x4740d1(0x14f)+_0x2bc9e3),_0x4740d1(0x128));}catch(_0x1c3e36){templateLiterals[_0x2bc9e3]='',console['debug'](_0x4740d1(0x22c)+_0x2bc9e3+_0x4740d1(0x205)+(_0x5efcad||_0x4740d1(0xb9))+'.');};}return!templateLiterals[_0x2ce01e]&&!templateLiterals[_0x5efcad]&&(_0x893026(_0x2ce01e),_0x5efcad&&_0x893026(_0x5efcad)),templateLiterals[_0x2ce01e]||templateLiterals[_0x5efcad];}async function updateMinerFirmware({minerInfo:_0x582b7c,minerTyped:_0x305f5e,firmwareFileName:_0x29037f,apiVersion:_0x5c6cac,recursed:recursed=![]}){const _0x225518=_0x423be7;_0x5c6cac=_0x5c6cac||deriveApiVersion({'minerInfo':_0x582b7c,'minerTyped':_0x305f5e});const {ipAddress:_0x120cc0,macAddress:_0x20978f,workerName:_0x3d697f}=_0x582b7c;!recursed&&console[_0x225518(0x1a6)](_0x225518(0x190)+_0x3d697f+'\x20['+_0x120cc0+',\x20'+_0x20978f+_0x225518(0x12a)+_0x29037f);var _0x4df532=_0x225518(0x16d)+Math['random']()['toString'](0x24)['substr'](0x2);const _0x42271e=getMinerFirmwareUpdateUrl(_0x120cc0,_0x5c6cac)||{};if(!_0x42271e[_0x225518(0x13d)])return SSH_PORT_STATE[_0x225518(0xce)];const _0x105123=getFirmwareBuffer(_0x29037f,_0x4df532,_0x305f5e),_0x4c4773={'Content-Type':_0x225518(0x1ab)+_0x4df532,'Content-Length':_0x105123[_0x225518(0xa7)]},_0x541c6b=await createRequestOptions({'uri':_0x42271e,'minerTyped':_0x305f5e,'apiVersion':_0x5c6cac,'headers':_0x4c4773,'body':_0x105123,'timeout':0x493e0});!/^(L3|S9)/i[_0x225518(0x21e)](_0x582b7c[_0x225518(0x129)])&&!recursed&&await getMinerKill(_0x582b7c,_0x305f5e,_0x5c6cac)[_0x225518(0x1fa)](_0x45e95e=>{console['log']('Killed\x20firmware\x20to\x20allow\x20upgrade\x20'+_0x3d697f+'\x20['+_0x120cc0+',\x20'+_0x20978f+']\x20',_0x45e95e);})[_0x225518(0x154)](_0x31060c=>{const _0x386250=_0x225518;console[_0x386250(0x1a6)](_0x386250(0xd8)+_0x3d697f+'\x20['+_0x120cc0+',\x20'+_0x20978f+']\x20',_0x31060c);});let _0x3963a0='';const _0x4c1c3f=await filePost({..._0x541c6b})['catch'](_0x4cc6bc=>{const _0x4ed979=_0x225518;if(_0x4cc6bc[_0x4ed979(0x18f)]===0x1f4||/TIMEDOUT/i[_0x4ed979(0x21e)](_0x4cc6bc[_0x4ed979(0x1a8)]))return _0x3963a0=_0x4cc6bc['stack']+_0x4ed979(0xbd)+inspect(_0x4cc6bc),![];else throw _0x4cc6bc;});if(_0x4c1c3f){if(/System Upgrade Succ/i[_0x225518(0x21e)](_0x4c1c3f))return console[_0x225518(0x1a6)]('Firmware\x20updated\x20for\x20'+_0x3d697f+'\x20['+_0x120cc0+',\x20'+_0x20978f+_0x225518(0x12a)+_0x29037f),setTimeout(function(){getMinerReboot(_0x582b7c,_0x305f5e,_0x5c6cac);},0x7d0),SSH_PORT_STATE['OPEN'];else{if(reKnownFirmwareUpdateErrors[_0x225518(0x21e)](_0x4c1c3f)){let _0x39f2cd=_0x4c1c3f['match'](reKnownFirmwareUpdateErrors);if(_0x39f2cd){_0x3963a0=_0x39f2cd[0x1];if(/sign/i[_0x225518(0x21e)](_0x3963a0)){const _0x490e0d=await enableFirmwareUpload({'minerInfo':_0x582b7c,'minerTyped':_0x305f5e,'apiVersion':_0x5c6cac});if(_0x490e0d==SSH_PORT_STATE[_0x225518(0x1e5)]&&!recursed)return console[_0x225518(0x1a6)](_0x225518(0xea)+_0x3d697f+'\x20['+_0x120cc0+',\x20'+_0x20978f+_0x225518(0x12a)+_0x29037f),updateMinerFirmware({'minerInfo':_0x582b7c,'minerTyped':_0x305f5e,'firmwareFileName':_0x29037f,'apiVersion':_0x5c6cac,'recursed':!![]});else!recursed&&console['log'](_0x225518(0x13f)+_0x3d697f+'\x20['+_0x120cc0+',\x20'+_0x20978f+_0x225518(0x12a)+_0x29037f);}_0x3963a0=_0x39f2cd[0x1];}else _0x3963a0=_0x4c1c3f;}else _0x3963a0=_0x4c1c3f;}}return console[_0x225518(0x1a6)](_0x225518(0x1b7)+_0x3d697f+'\x20['+_0x120cc0+',\x20'+_0x20978f+_0x225518(0x12a)+_0x29037f,_0x3963a0),SSH_PORT_STATE['FAILED'];}async function updateEnableSSH({minerInfo:_0x59b189,minerTyped:_0x4e6af7,firmwareFilename:_0x2a3df6,apiVersion:_0x3c95d2}){const _0x81ffdf=_0x423be7,{ipAddress:_0x33f1fa}=_0x59b189;let _0x53f699=portScanner[_0x81ffdf(0x20b)](0x16,_0x33f1fa)['then'](_0x3edd5c=>{const _0x34286e=_0x81ffdf;if(_0x3edd5c==SSH_PORT_STATE[_0x34286e(0x1e5)])return _0x3edd5c;return/updater/i[_0x34286e(0x21e)](_0x2a3df6)?updateEnableSSHupdater({'minerInfo':_0x59b189,'minerTyped':_0x4e6af7,'apiVersion':_0x3c95d2}):_0x3edd5c;})[_0x81ffdf(0x154)](_0x5b6e8f=>{const _0x33f709=_0x81ffdf;return console['error'](_0x33f709(0x12e),_0x5b6e8f),![];});return _0x53f699;}async function updateEnableSSHupdater({minerInfo:_0x3170d4,minerTyped:_0x4109c0,apiVersion:_0x6f1982}){const _0xd5feff=_0x423be7,{ipAddress:_0x228583}=_0x3170d4;_0x6f1982=_0x6f1982||deriveApiVersion({'minerInfo':_0x3170d4,'minerTyped':_0x4109c0});const _0x2ab402=getEnableSSHUrl(_0x228583,_0x6f1982)||{};if(!_0x2ab402[_0xd5feff(0x13d)])return SSH_PORT_STATE['FAILED'];const _0x291fe3=_0x2ab402[_0xd5feff(0xcf)],_0x43b5be={'Content-Type':_0xd5feff(0x216)},_0x19b746=await createRequestOptions({'uri':_0x2ab402,'minerTyped':_0x4109c0,'apiVersion':_0x6f1982,'headers':_0x43b5be,'form':_0x291fe3}),{body:_0x25610c}=await formPost({..._0x19b746})[_0xd5feff(0x1fa)](_0xf8a08=>_0xf8a08)['catch'](_0x2e9a54=>{const _0x54236a=_0xd5feff;return console[_0x54236a(0x22b)]('SSH\x20enabling\x20error',_0x2e9a54),![];});return console['debug']('Update\x20enable\x20SSH\x20for\x20updater\x20',_0x19b746,_0x25610c),/Start\s+ssh/i['test'](_0x25610c)?(console[_0xd5feff(0x1a6)](_0xd5feff(0x12c)+_0x228583),SSH_PORT_STATE[_0xd5feff(0x1e5)]):(console['log']('SSH\x20disabled\x20for\x20'+_0x228583,_0x25610c),SSH_PORT_STATE['CLOSED']);}async function updateEnableSSHAntminer({minerInfo:_0x5a4fc5,minerTyped:_0x39af4d,apiVersion:_0x1699c8}){const _0x4ab51c=_0x423be7,{ipAddress:_0x2a7b87}=_0x5a4fc5;_0x1699c8=_0x1699c8||deriveApiVersion({'minerInfo':_0x5a4fc5,'minerTyped':_0x39af4d});const _0x27b136=getEnableSSHUrl(_0x2a7b87,_0x1699c8)||{};if(!_0x27b136[_0x4ab51c(0x13d)])return null;const {data:_0x841391}=_0x27b136,_0x5f37a5=await createRequestOptions({'uri':_0x27b136,'minerTyped':_0x39af4d,'apiVersion':_0x1699c8,'body':_0x841391}),{body:_0x691601}=await formPost({..._0x5f37a5})[_0x4ab51c(0x1fa)](_0x2ed52d=>_0x2ed52d)['catch'](_0x61e291=>{const _0x4848c4=_0x4ab51c;return console[_0x4848c4(0x22b)](_0x4848c4(0x10e),_0x61e291),![];});return/busybox/i['test'](_0x691601)?(console['log'](_0x4ab51c(0x12c)+_0x2a7b87),await getMinerReboot(_0x5a4fc5,_0x39af4d,_0x1699c8),SSH_PORT_STATE['OPEN']):(console[_0x4ab51c(0x1a6)](_0x4ab51c(0x1fb)+_0x2a7b87,_0x691601),SSH_PORT_STATE[_0x4ab51c(0x108)]);}let walletsCache={};async function getWallets(_0x2c84a5){const _0x3971a6=_0x423be7;if(walletsCache[_0x2c84a5])return walletsCache[_0x2c84a5];const _0x5d91c2=loopback[_0x3971a6(0xc5)]('wallet');return _0x5d91c2[_0x3971a6(0x1de)]()[_0x3971a6(0x1fa)](_0xfdf866=>{const _0x2147ea=_0x3971a6;return walletsCache=_[_0x2147ea(0x1e2)](_0xfdf866,_0x2147ea(0x131)),walletsCache[_0x2c84a5];});}let walletInfoCache={};async function getWalletInfo(_0x209837){const _0x2fe669=_0x423be7;if(Object[_0x2fe669(0xb5)](walletInfoCache)[_0x2fe669(0xa7)])return walletInfoCache[_0x209837];const _0x4a2388=loopback[_0x2fe669(0xc5)](_0x2fe669(0xd1));return _0x4a2388['find']()[_0x2fe669(0x1fa)](_0x3d3009=>{return walletInfoCache=_['keyBy'](_0x3d3009,'walletID'),walletInfoCache[_0x209837];});}let poolTemplates={};async function getPoolTemplates(_0x17f225,_0x28942c,_0x34f2de){const _0x1caa96=_0x423be7,_0x551c3f=_0x28942c&&_0x28942c[0x0],_0x4dd592=_0x551c3f?_0x28942c[_0x1caa96(0x10d)](','):_0x17f225;if(_0x34f2de&&poolTemplates[_0x4dd592])return poolTemplates[_0x4dd592];var _0x2b9556;_0x551c3f?_0x2b9556={'where':{'ID':{'inq':_0x28942c}}}:_0x2b9556={'where':{'and':[{'hashAlgorithm':_0x17f225},{'priority':{'lt':0x4}}]},'order':_0x1caa96(0xe8)};const _0x44ca47=loopback[_0x1caa96(0xc5)](_0x1caa96(0x160));return _0x44ca47[_0x1caa96(0x1de)](_0x2b9556)[_0x1caa96(0x1fa)](_0x5324b8=>{const _0x8484f2=_0x1caa96;if(_0x5324b8[_0x8484f2(0xa7)]===0x0){if(_0x551c3f)throw new Error('No\x20pool\x20templates\x20found\x20with\x20IDs:'+_0x28942c);throw new Error(_0x8484f2(0x103)+_0x17f225);}if(_0x551c3f){const _0xa10f30=_['keyBy'](_0x5324b8,'id');poolTemplates[_0x4dd592]=[];for(var _0x200f34=0x0;_0x200f34<_0x28942c['length'];_0x200f34++){_0xa10f30[_0x28942c[_0x200f34]]&&poolTemplates[_0x4dd592][_0x8484f2(0x18c)](_0xa10f30[_0x28942c[_0x200f34]]);}}else poolTemplates[_0x4dd592]=_0x5324b8;return poolTemplates[_0x4dd592];});}async function getRemotesPoolConfig({minerInfo:_0xd0aade,minerTyped:_0x56e77c,ignoreCache:_0x3f4a7b,apiVersion:_0x58d222}){const _0x305695=_0x423be7;if(!_0xd0aade)return null;const {ipAddress:_0x216bba}=_0xd0aade;if(_0x216bba&&(_0x3f4a7b||!_0xd0aade[_0x305695(0x246)]||!_0xd0aade['condition'][_0x305695(0x18e)])){const _0x29efb0=await getMinerStatus({'ipAddress':_0x216bba,'minerTyped':_0x56e77c,'apiVersion':_0x58d222});if(!_0x29efb0)return{'pools':[],'frequency':0x0};else{if(!_0x29efb0[_0x305695(0xcb)])return null;}_0xd0aade[_0x305695(0x246)]=_0x29efb0;}let {pools:_0x2eebd9,frequency:_0x4023f3,volts:_0x50bb06}=_0xd0aade[_0x305695(0x246)];return _0x2eebd9=_0x2eebd9['map'](_0x3fdb44=>{return{'url':_0x3fdb44['url'],'user':_0x3fdb44['user']};}),{'pools':_0x2eebd9,'frequency':_0x4023f3,'volts':_0x50bb06};}function havePoolConfigsChanged({poolConfig:poolConfig={},expectedPoolConfig:expectedPoolConfig={}}){const _0x70cff7=_0x423be7;if(poolConfig[_0x70cff7(0x1b8)]&&expectedPoolConfig['frequency']&&poolConfig['frequency']!=expectedPoolConfig['frequency'])return!![];if(poolConfig[_0x70cff7(0xb4)]&&expectedPoolConfig[_0x70cff7(0xb4)]&&poolConfig[_0x70cff7(0xb4)]!=expectedPoolConfig[_0x70cff7(0xb4)])return!![];if(!poolConfig[_0x70cff7(0x18e)]||poolConfig['pools']['length']<expectedPoolConfig[_0x70cff7(0x18e)]['length'])return!![];for(var _0x247c42=0x0;_0x247c42<expectedPoolConfig[_0x70cff7(0x18e)][_0x70cff7(0xa7)];_0x247c42++){let _0x272eaf=poolConfig[_0x70cff7(0x18e)][_0x247c42]||{'url':'','user':''},_0x173d95=expectedPoolConfig[_0x70cff7(0x18e)][_0x247c42]||{'stratum':'','username':''};if(!_0x272eaf[_0x70cff7(0x13d)]&&!_0x173d95[_0x70cff7(0x15d)])continue;if(_0x272eaf['url'][_0x70cff7(0x169)]()[_0x70cff7(0x1d4)](_0x173d95[_0x70cff7(0x15d)][_0x70cff7(0x169)]()[_0x70cff7(0x141)](/[^\/]*\/\//,''))<0x0||_0x272eaf[_0x70cff7(0x153)]!==_0x173d95['username'])return!![];}return![];}async function validateMinerConfig({minerInfo:_0x554d51,apiVersion:_0x39dd53,dataCenterSettings:_0x5b0d7b,minerConfigOptions:minerConfigOptions=null,poolIDs:poolIDs=null,isBulk:_0x150b5d}){const _0x1c503a=_0x423be7,{accountName:_0x1a2cc3}=_0x554d51,_0x36d30e=getMinerTypeMap(_0x554d51),{hashingAlgorithm:_0x11ccab}=_0x36d30e||{};let _0x3aa665;if(!minerConfigOptions){const {frequency:_0xc809c0,volts:_0x3b1c91}=_0x554d51[_0x1c503a(0x246)];minerConfigOptions={'frequency':_0xc809c0,'volts':_0x3b1c91};}const _0x50fd16=await getPoolTemplates(_0x11ccab,poolIDs,_0x150b5d),_0x232434=await getWallets(_0x1a2cc3);_0x3aa665=getPoolConfigs({'rawPools':_0x50fd16,'dataCenterSettings':_0x5b0d7b,'wallets':_0x232434,'minerInfo':_0x554d51,'minerTyped':_0x36d30e});const {pools:_0x477d72,workerName:_0x3376dc}=_0x3aa665,{frequency:_0x18eda7,volts:_0x15e9da}=minerConfigOptions,_0x3da35d={'pools':_0x477d72,'frequency':_0x18eda7,'volts':_0x15e9da},_0x10cd77=await getRemotesPoolConfig({'minerInfo':_0x554d51,'minerTyped':_0x36d30e,'ignoreCache':!_0x150b5d,'apiVersion':_0x39dd53});let _0x461177=![];return _0x3376dc&&_0x3376dc!==_0x554d51[_0x1c503a(0xbb)]?_0x461177=!![]:_0x461177=!_0x10cd77||havePoolConfigsChanged({'poolConfig':_0x10cd77,'expectedPoolConfig':_0x3da35d}),{'poolsAreDifferent':_0x461177,'remotesPools':_0x10cd77,'poolsConfig':_0x3da35d,'workerName':_0x3376dc};}async function extractAccountAndWorkerNumber({poolWorkers:poolWorkers=[]}){const _0x219e61=_0x423be7;if(!poolWorkers['length']||!poolWorkers[0x0])return null;let _0x6b7af1=null,_0x4dc4ad=null,_0x4db8ba=null;const _0x17acf8=/^([^\.]+)\.((?:[^\.#]*?)(\d+))(#|$)/,_0x5bbd88=/^([^\.]+)\.((?:[^#]*?))(#|$)/;let _0x1b9a5b=poolWorkers[0x0][_0x219e61(0x1d1)](_0x17acf8);if(_0x1b9a5b)_0x4dc4ad=_0x1b9a5b[0x1],_0x4db8ba=_0x1b9a5b[0x2],_0x6b7af1=_0x1b9a5b[0x3];else{if(/_\d+$/[_0x219e61(0x21e)](poolWorkers[0x0])){const _0x3616b2=poolWorkers[0x0]['split']('_');_0x4dc4ad=_0x3616b2[0x0],_0x4db8ba=poolWorkers[0x0],_0x6b7af1=_0x3616b2[0x1];}else{if(_0x5bbd88[_0x219e61(0x21e)](poolWorkers[0x0])){_0x1b9a5b=poolWorkers[0x0][_0x219e61(0x1d1)](_0x5bbd88),_0x4dc4ad=_0x1b9a5b[0x1],_0x4db8ba=_0x1b9a5b[0x2];const _0x1ddceb=_0x1b9a5b[0x2][_0x219e61(0x1d1)](/\D(\d+)$/);_0x6b7af1=_0x1ddceb?_0x1ddceb[0x1]:0x270f;}else{if(poolWorkers[0x1])_0x1b9a5b=poolWorkers[0x1][_0x219e61(0x1d1)](_0x17acf8),_0x1b9a5b&&(_0x4dc4ad=_0x1b9a5b[0x1],_0x4db8ba=_0x1b9a5b[0x2],_0x6b7af1=_0x1b9a5b[0x3]);else poolWorkers[0x0][_0x219e61(0xa7)]&&(_0x4dc4ad=poolWorkers[0x0],_0x4db8ba='',_0x6b7af1=0x0);}}}let _0x12dbe2=await getWalletInfo(_0x4dc4ad);return _0x12dbe2&&(_0x4dc4ad=_0x12dbe2['accountName']),_0x6b7af1?{'accountName':_0x4dc4ad,'workerName':_0x4db8ba,'workerTypeNumber':_0x6b7af1}:null;}function getPoolConfigs({rawPools:_0x23d23f,dataCenterSettings:_0x2ac550,wallets:_0x26e6e4,minerInfo:_0x612e5e,minerTyped:_0x2f70df}){const _0x19e85e=getTokenValueMapper({'dataCenterSettings':_0x2ac550,'wallets':_0x26e6e4,'minerInfo':_0x612e5e,'minerTyped':_0x2f70df});let _0x2c348f='';const _0x3b7f5a=_0x23d23f['map']((_0x300395,_0x42d5cd)=>{const _0x5d094b=_0x1962,_0x1c2faa=replaceTokensWithValues(_0x300395[_0x5d094b(0x228)],_0x19e85e),_0x8bd38a=replaceTokensWithValues(_0x300395['password'],_0x19e85e),_0x590753=_0x300395[_0x5d094b(0x15d)];if(!_0x2c348f){const _0x397f7b=_0x1c2faa['split']('.')[0x1]||'';if(_0x397f7b[_0x5d094b(0x1d4)](_0x2ac550[_0x5d094b(0x13b)])>-0x1)_0x2c348f=_0x397f7b;else{const _0x3561d7=new RegExp(_0x5d094b(0x241)+_0x2ac550[_0x5d094b(0x13b)]+_0x5d094b(0x117),'i'),_0x2039de=_0x8bd38a[_0x5d094b(0x1d1)](_0x3561d7);_0x2039de&&(_0x2c348f=_0x2039de[0x1]||'');}}return{'index':_0x42d5cd+0x1,'stratum':_0x590753,'username':_0x1c2faa,'password':_0x8bd38a};});return{'pools':_0x3b7f5a,'workerName':_0x2c348f};}async function getPoolIDs(_0x214889){const _0xcd5e4d=_0x423be7;let _0x4d151b=[];const _0x296a3c=loopback[_0xcd5e4d(0xc5)](_0xcd5e4d(0x160));for(var _0x201703=0x0;_0x201703<0x3;_0x201703++){_0x214889['condition']&&_0x214889[_0xcd5e4d(0x246)][_0xcd5e4d(0x18e)]&&_0x214889[_0xcd5e4d(0x246)]['pools'][_0x201703]?_0x4d151b[_0x201703]=await _0x296a3c['find']({'where':{'stratum':_0x214889[_0xcd5e4d(0x246)][_0xcd5e4d(0x18e)][_0x201703]['url'][_0xcd5e4d(0x141)](_0xcd5e4d(0x194),'')}})[_0xcd5e4d(0x1fa)](_0x154af1=>{return _0x154af1[0x0]?_0x154af1[0x0]['id']:0x0;}):_0x4d151b[_0x201703]=0x0;}return _0x4d151b;}function deriveOverclockApi(_0xe5d914,_0x3b7961){const _0x1b8c0c=_0x423be7;if(softwareVersions['updater'][_0x1b8c0c(0x143)](_0xe5d914))return _0x1b8c0c(0x136);else{if(softwareVersions[_0x1b8c0c(0x130)][_0x1b8c0c(0x143)](_0xe5d914))return'Antminer_antpool';}if(!_0x3b7961)return'';let _0x1f72ab=null;if(/\(/i[_0x1b8c0c(0x21e)](_0x3b7961))return _0x1f72ab=_0x3b7961[_0x1b8c0c(0x1d1)](/(\w+)[^\(]+\(\s*(\w+)/),_0x1f72ab[0x1]+'_'+(/vnish/i['test'](_0x1f72ab[0x2])?_0x1b8c0c(0x106):_0x1f72ab[0x2]);else{if(_0x3b7961)return _0x1f72ab=_0x3b7961[_0x1b8c0c(0xe3)](/\s/),_0x1f72ab[0x0];}}function deriveApiVersion({minerInfo:minerInfo={},minerTyped:_0x39f070}){const _0x4a227f=_0x423be7;let {apiVersion:_0x1e0528,minerType:_0x5e4fba,brand:_0x1b8351}=_0x39f070||{};if(_0x1e0528)return _0x1e0528;const {softwareVersion:_0x4701eb,firmwareFileName:_0x54a675,brand:_0x158fad}=minerInfo;_0x1e0528=deriveOverclockApi(_0x4701eb,_0x5e4fba);if(_0x1e0528)return _0x1e0528;const _0x54a819=minerInfo['apiVersion']||_0x158fad||_0x1b8351;if(_0x54a819)return _0x54a819;else{if(/updater/i[_0x4a227f(0x21e)](_0x54a675))return _0x4a227f(0x136);}return _0x4a227f(0x1f0);}function parseMinerSystemInfo(_0x422ef4,_0x51ebe5){const _0x539ffc=_0x423be7;var _0x59e626={'Antminer':function(_0x444082,_0x4bbd42){const _0x54c87a=_0x1962;if(!_0x444082[_0x54c87a(0x1df)])return null;const {uptime:_0x5c6699,curtime:_0x37beb4,macaddr:_0x11eec3,ipaddress:_0x34afd8,minertype:_0xc5b819,bmminer_version:_0x573dfc,cgminer_version:_0x3bc2c7,ant_hwv:_0x54bb7e,hwv:_0x5b2aca,swv:_0x5d9c3c,system_kernel_version:_0x524611,system_filesystem_version:_0x4e1fac,system_logic_version:_0x507d4c,miner_model:_0x5300bb,hostname:_0x554f6d}=_0x444082,_0x484815=((_0x573dfc||_0x3bc2c7||_0x54c87a(0x17c))['match'](/((?:\d+\.)+\d+)/)||['',_0x54c87a(0x17c)])[0x1];let _0x1e3dc5=getMinerType(_0xc5b819);const _0x4be153=_0x573dfc||_0x3bc2c7?(_0x573dfc?_0x54c87a(0xaa):_0x54c87a(0x22d))+_0x484815:'';return _0x4bbd42=_0x4bbd42||deriveOverclockApi(_0x4be153,_0x1e3dc5),{'minerType':_0x1e3dc5,'modelType':_0xc5b819,'apiVersion':_0x4bbd42,'upTime':_0x5c6699,'minerTime':_0x37beb4,'macAddress':_0x11eec3,'ipAddress':_0x34afd8,'hardwareVersion':_0x54bb7e||_0x5b2aca,'systemKernelVersion':_0x524611,'fileSystemTimestamp':_0x4e1fac,'systemLogicVersion':_0x507d4c||_0x5d9c3c,'softwareVersion':_0x4be153};},'Antminer_antpool':function(_0x12917c,_0x419b45){const _0x4cd2e7=_0x1962;if(!_0x12917c['minertype'])return null;const {uptime:_0x2c0e6f,curtime:_0x12ffcd,macaddr:_0x4bbd33,ipaddress:_0x504dbe,minertype:_0x4815f0,bmminer_version:_0x38a648,cgminer_version:_0xf6308a,ant_hwv:_0x55a8e3,system_kernel_version:_0x3bf2bc,system_filesystem_version:_0x23f0af,system_logic_version:_0x2a9f17}=_0x12917c,_0x9c61fe=getMinerType(_0x4815f0),_0x3e67c6=_0x38a648||_0xf6308a;return{'minerType':_0x9c61fe,'modelType':_0x4815f0,'apiVersion':_0x419b45,'upTime':_0x2c0e6f,'minerTime':_0x12ffcd,'macAddress':_0x4bbd33,'ipAddress':_0x504dbe,'hardwareVersion':_0x55a8e3,'systemKernelVersion':_0x3bf2bc,'fileSystemTimestamp':_0x23f0af,'systemLogicVersion':_0x2a9f17,'softwareVersion':(_0x38a648?'bmminer\x20':_0x4cd2e7(0x22d))+_0x3e67c6};},'Antminer_updater':function(_0x5040bc,_0xb7130c){const _0x1dafd7=_0x1962;if(!_0x5040bc[_0x1dafd7(0x1df)])return null;const _0x135280=getMinerType(_0x5040bc[_0x1dafd7(0x1df)]),_0x391adb=_0x5040bc[_0x1dafd7(0x1b4)]||_0x5040bc[_0x1dafd7(0x137)];return{'minerType':_0x135280,'modelType':_0x5040bc[_0x1dafd7(0x1df)],'apiVersion':_0xb7130c,'macAddress':_0x5040bc[_0x1dafd7(0x19d)],'ipAddress':_0x5040bc[_0x1dafd7(0x21d)],'hardwareVersion':_0x5040bc['ant_hwv'],'systemKernelVersion':_0x5040bc[_0x1dafd7(0x1c2)],'fileSystemTimestamp':_0x5040bc[_0x1dafd7(0x1cc)],'systemLogicVersion':_0x5040bc[_0x1dafd7(0x23b)],'softwareVersion':(_0x5040bc[_0x1dafd7(0x1b4)]?_0x1dafd7(0xaa):_0x1dafd7(0x22d))+_0x391adb};},'AvalonMiner':function(_0x3c8c90,_0x4883d5){const _0x116328=_0x1962;_0x3c8c90=JSON['parse']((_0x3c8c90[_0x116328(0x1b5)]||_0x3c8c90)[_0x116328(0x141)](/^[^{]*{/,'{')[_0x116328(0x141)](/,?\s*}\);\s*UpdatePageCallback[^}]*}\);\s*$/,'}'));const _0x410835=getMinerType(_0x3c8c90['hwtype']);return{'minerType':_0x410835,'modelType':_0x3c8c90['hwtype'],'apiVersion':_0x4883d5,'macAddress':_0x3c8c90[_0x116328(0xf3)],'ipAddress':_0x3c8c90[_0x116328(0x203)],'hardwareVersion':'','systemKernelVersion':_0x3c8c90[_0x116328(0x19f)],'fileSystemTimestamp':'','systemLogicVersion':'','softwareVersion':''};},'Innosilicon':function(_0x98de5a,_0x34b9fc){const _0x5679e5=_0x1962;if(!_0x98de5a['type'])return null;if(!_0x34b9fc){if(_0x98de5a[_0x5679e5(0x19f)][_0x5679e5(0x11a)]===_0x5679e5(0x21a))_0x34b9fc=_0x5679e5(0x1f2);else _0x98de5a['version'][_0x5679e5(0x11a)]===_0x5679e5(0x1c1)&&(_0x34b9fc=_0x5679e5(0x159));}let _0x1a84d2=_0x34b9fc+'\x20'+_0x98de5a[_0x5679e5(0x1fc)];return{'brand':_0x5679e5(0x159),'minerType':_0x1a84d2,'modelType':_0x1a84d2,'apiVersion':_0x34b9fc,'macAddress':_0x98de5a[_0x5679e5(0x19f)]['ethaddr'],'ipAddress':_0x98de5a[_0x5679e5(0x1ff)]['ipaddress'],'softwareVersion':_0x98de5a[_0x5679e5(0x19f)][_0x5679e5(0x175)],'hardwareVersion':_0x98de5a[_0x5679e5(0x19f)][_0x5679e5(0x11a)],'systemKernelVersion':'','fileSystemTimestamp':_0x98de5a['version'][_0x5679e5(0x23f)],'systemLogicVersion':''};}};if(!_0x422ef4)return null;_0x59e626[_0x539ffc(0x1d3)]=_0x59e626[_0x539ffc(0x1f0)],_0x59e626[_0x539ffc(0x11b)]=_0x59e626[_0x539ffc(0x1c3)],_0x59e626['Whatsminer_CG']=_0x59e626[_0x539ffc(0x1c3)],_0x59e626[_0x539ffc(0x201)]=_0x59e626[_0x539ffc(0x1f0)],_0x59e626[_0x539ffc(0xe1)]=_0x59e626[_0x539ffc(0x1f0)],_0x59e626[_0x539ffc(0x1e6)]=_0x59e626[_0x539ffc(0xb7)];let _0x120ae0=_0x59e626[_0x51ebe5];if(!_0x120ae0)return console[_0x539ffc(0x22b)](_0x539ffc(0xad)+_0x51ebe5,_0x422ef4),null;let _0x2aa82f=_0x120ae0(_0x422ef4,_0x51ebe5);if(!_0x2aa82f)return _0x2aa82f;return _0x2aa82f[_0x539ffc(0xf4)]=(_0x2aa82f[_0x539ffc(0xe9)]||_0x51ebe5)[_0x539ffc(0x1d1)](/^([a-z0-9]+)/i)[0x1],_0x2aa82f;}function parseKernelLogs(_0x3e9884,_0x56ad67=_0x423be7(0x1f0),_0x1c8fc2){const _0x4c9d4d=_0x423be7;function _0x22c359(_0x16d2f5,_0x26cc5f,_0x969c16){const _0x48146c=_0x1962;_0x16d2f5[_0x48146c(0x222)](_0x11573d=>{const _0x340f76=_0x48146c;!_0x11573d[_0x340f76(0xee)]&&(_0x11573d[_0x340f76(0x16e)]=[],_0x11573d[_0x340f76(0x179)][_0x340f76(0x222)](_0x252848=>{const _0x52a61e=_0x340f76;_0x11573d[_0x52a61e(0x16e)][_0x52a61e(0x18c)](new RegExp(_0x252848,'i'));}));let _0xedcc6f=0x0;_0x11573d['reTests']['forEach'](_0x12d337=>{const _0x4ad4d4=_0x340f76;_0x12d337[_0x4ad4d4(0x21e)](_0x26cc5f)&&_0xedcc6f++;}),_0xedcc6f==_0x11573d['reTests']['length']&&(console[_0x340f76(0xc8)](_0x340f76(0x12b)+_0x11573d['name']),_0x969c16[_0x340f76(0x18c)](_0x11573d[_0x340f76(0x1a8)]));});}if(!_0x3e9884)return null;!_0x3e9884[_0x4c9d4d(0x1d1)]&&(_0x3e9884=_0x3e9884[_0x4c9d4d(0x23c)]());let _0x1edfba=[];if(/html/i['test'](_0x1c8fc2)){const _0x10a18c=/hidden["']\s+id\s*=\s*["']\s*cbid\.table\.(\d+)\.(code|cause|time)['"]\s+value\s*=\s*['"]([^'"]+)['"]/g,_0x47d8e1=/hidden["']\s+id\s*=\s*["']\s*cbid\.table\.(\d+)\.(code|cause|time)['"]\s+value\s*=\s*['"]([^'"]+)['"]/,_0x1d2732=_0x3e9884[_0x4c9d4d(0x1d1)](_0x10a18c);for(var _0xe4c089 in _0x1d2732){const _0x2b214a=_0x1d2732[_0xe4c089][_0x4c9d4d(0x1d1)](_0x47d8e1),_0xc320ea=_0x2b214a[0x1]-0x1;!_0x1edfba[_0xc320ea]&&(_0x1edfba[_0xc320ea]={}),_0x1edfba[_0xc320ea][_0x2b214a[0x2]]=_0x2b214a[0x3];}}else _0x1edfba=_[_0x4c9d4d(0x112)](_0x3e9884[_0x4c9d4d(0x1d1)](/Error.+?[\n\r]/g)),_0x1edfba[_0x4c9d4d(0xa7)]&&console[_0x4c9d4d(0xc8)]('Kernel\x20log\x20generic\x20errors',_0x1edfba);let _0x308a1c=minerApis[(_0x56ad67||'')[_0x4c9d4d(0x169)]()][_0x4c9d4d(0x22f)]||[];return _0x22c359(_0x308a1c,_0x3e9884,_0x1edfba),{'errors':_0x1edfba};}function parseNetworkDiagnostic(_0x1209ab,_0xaed415=_0x423be7(0x1f0)){const _0x43c14e=_0x423be7;if(!_0x1209ab||!_0x1209ab[_0x43c14e(0x1d1)])return _0x1209ab;const _0x3ec22d=_0x1209ab['match'](/\/(\d+(?:\.\d+)?)\//);if(!_0x3ec22d)return _0x1209ab;let _0x440fa3=parseFloat(_0x3ec22d[0x1]);return{'latency':_0x440fa3,'diagnosticResponse':_0x1209ab};}function getMinerType(_0x3810f8){const _0x1c9091=_0x423be7;return _0x3810f8[_0x1c9091(0x141)](/\s+\(.*$/,'')[_0x1c9091(0x141)](/(\-[^\-]+)+$/,'')['trim']();}function _0x1962(_0x487f15,_0x6c0eaa){const _0xa1ac6b=_0xa1ac();return _0x1962=function(_0x196211,_0x3656f1){_0x196211=_0x196211-0xa7;let _0x2b4a9d=_0xa1ac6b[_0x196211];return _0x2b4a9d;},_0x1962(_0x487f15,_0x6c0eaa);}function getMinerTypeMap(_0x365770){const _0x1161de=_0x423be7,_0x279a91=getMinerType(_0x365770[_0x1161de(0x1ce)]||_0x365770[_0x1161de(0x172)]);return config['minerTypeMap'][_0x279a91];}function getMinerFilterClause(_0x44cacf){const _0x4e7992=_0x423be7;if(/admin/i['test'](_0x44cacf[_0x4e7992(0x1a1)]))return{};let _0x84b16b=[{'accountName':new RegExp(_0x4e7992(0x173)+_0x44cacf[_0x4e7992(0x131)][_0x4e7992(0x141)](/^[\s,]+|[\s,]+$/gm,'')['split'](',')[_0x4e7992(0x10d)]('|')+_0x4e7992(0x19a),'i')}];if(_0x44cacf[_0x4e7992(0xd4)])for(var _0x541903=0x0;_0x541903<_0x44cacf['filter'][_0x4e7992(0xa7)];_0x541903++){let _0x29efa0=Object['values'](_0x44cacf[_0x4e7992(0xd4)][_0x541903])[0x0];if(/^\/[^\/]+\/\w*$/[_0x4e7992(0x21e)](_0x29efa0)){let _0xffb17f=Object[_0x4e7992(0xb5)](_0x44cacf[_0x4e7992(0xd4)][_0x541903])[0x0];_0x44cacf[_0x4e7992(0xd4)][_0x541903][_0xffb17f]=eval(_0x29efa0);}_0x84b16b[_0x4e7992(0x18c)](_0x44cacf[_0x4e7992(0xd4)][_0x541903]);}return{'where':{'and':_0x84b16b}};};async function parseMinerSettings(_0x31ffdd,_0x2f1641,_0x47977b){const _0xe0c262=_0x423be7;var _0x314604={'Antminer':function(_0x5eec77,_0x532d28){const _0x570b86=_0x1962,_0x3ae0a7=_0x5eec77['pools'],_0x5a4493=_0x5eec77['bitmain-freq']||0x0,_0x1b2021=_0x5eec77[_0x570b86(0x230)]||0x0;return{'pools':_0x3ae0a7,'frequency':_0x5a4493,'volts':_0x1b2021};},'Antminer_X19':function(_0x2a1061,_0x1bc732){const _0x3f91fb=_0x1962,_0x5dbcfa=_0x2a1061[_0x3f91fb(0xdb)],_0x3a4892=0x0,_0x512ab7=0x0;return{'pools':_0x5dbcfa,'frequency':_0x3a4892,'volts':_0x512ab7};},'AvalonMiner':function(_0x4100f8,_0x20307a){const _0x24d0a2=_0x1962;_0x4100f8=JSON['parse']((_0x4100f8['response']||_0x4100f8)[_0x24d0a2(0x141)](/^.*CGConfCallback\(/,'')[_0x24d0a2(0x141)](/\)[^\)]*$/,''));const {pool1:_0x4b28de,worker1:_0x269f28,pool2:_0x146873,worker2:_0x4f81d4,pool3:_0x580adc,worker3:_0x4a4dac}=_0x4100f8;return{'pools':[{'url':_0x4b28de,'user':_0x269f28},{'url':_0x146873,'user':_0x4f81d4},{'url':_0x580adc,'user':_0x4a4dac}]};},'Innosilicon':function(_0x2cb0ff,_0xf147b1){const _0x168a6c=_0x1962,_0x3f8e84=_0x2cb0ff[_0x168a6c(0x18e)];return{'pools':_0x3f8e84};},'Whatsminer':async function(_0x2578e3,_0x497ba3){const _0x4d3dec=_0x1962;let _0x324c24='',_0x18876c,_0x5757d3;if(_0x2578e3&&_0x2578e3[_0x4d3dec(0x189)]){const _0x1090c2=_0x2578e3[_0x4d3dec(0x189)][0x0];_0x324c24=parseInt(parseFloat(_0x1090c2[_0x4d3dec(0x11c)]||0x0)*0x64);if(_0x2578e3[_0x4d3dec(0xdb)]&&_0x2578e3[_0x4d3dec(0xdb)][0x0]&&_0x2578e3[_0x4d3dec(0xdb)][0x0]['User']){const _0x4ad223=_0x2578e3[_0x4d3dec(0xdb)][0x0];_0x18876c=_[_0x4d3dec(0xca)](_0x2578e3['POOLS'],_0x554463=>{const {User:_0x16498a,URL:_0x3269eb,Getworks:_0x531170,Accepted:_0xfcb2d,Rejected:_0x435507,Discarded:_0x33dea4}=_0x554463;return{'user':_0x16498a,'url':_0x3269eb,'getworks':_0x531170,'accepted':_0xfcb2d,'rejected':_0x435507,'discarded':_0x33dea4};});}}return{'frequency':_0x324c24,'pools':_0x18876c,'volts':_0x5757d3};}};_0x314604[_0xe0c262(0x1d7)]=_0x314604[_0xe0c262(0x1c3)],_0x314604[_0xe0c262(0x1d3)]=_0x314604[_0xe0c262(0x1c3)],_0x314604[_0xe0c262(0x11b)]=_0x314604[_0xe0c262(0x1c3)],_0x314604[_0xe0c262(0x13e)]=_0x314604['Whatsminer'],_0x314604[_0xe0c262(0x136)]=_0x314604[_0xe0c262(0x1f0)],_0x314604[_0xe0c262(0x201)]=_0x314604[_0xe0c262(0x1f0)],_0x314604['AvalonMiner11']=_0x314604[_0xe0c262(0xb7)];const _0x140ef2=_0x314604[_0x47977b];if(!_0x140ef2)return console[_0xe0c262(0x22b)](_0xe0c262(0x1ef)+_0x47977b,_0x31ffdd),null;const _0x4f650e=_0x140ef2(_0x31ffdd,_0x2f1641);return _0x4f650e;};const rePoolName=/((?:\d+\.){3}\d+|[^\.\:\/]+)(?:\.\w+)\:\d{2,}/;async function getActivePoolName(_0x56d3ca){const _0x205988=_0x423be7,_0x39ffc1=_0x56d3ca[_0x205988(0x1de)](({status:_0x309485})=>/alive/i[_0x205988(0x21e)](_0x309485));let _0x30913d='',_0x222174;return _0x39ffc1&&(_0x222174=await extractAccountAndWorkerNumber({'poolWorkers':[_0x39ffc1['user']]}),_0x30913d=(_0x39ffc1[_0x205988(0x13d)][_0x205988(0x1d1)](rePoolName)||['Unknown'])[0x1]),{'poolName':_0x30913d,'extracted':_0x222174};}async function parseMinerStatus({minerStatus:_0x1c633b,minerTyped:_0x13525d,apiVersion:_0x29fd48}){const _0x1d2b7a=_0x423be7;var _0x2b973c={'Antminer':async function(_0x332e31,_0x2e2802){const _0x27b758=_0x1962;let _0x415f49=0x0,_0x50c3c3=0x0,_0x592d27='DEAD',_0x5d6fd1=[],_0x5459d2=[],_0x1ca0bf=[],_0xcf8f9d=0x0,_0x9752d6=0x0,_0x3e4ce6=0x0,_0x1a1689=[],_0x277c93=[],_0x2bf049={'accountName':'','workerName':'','workerTypeNumber':''},_0x334110={},_0x556fa8=0x0,_0x519e18=0x0,_0x27f42e=0x0,_0x580f23=0x0,_0x37cdb6=0x0,_0x3e3157=[0x0],_0x24f199=0x0,_0x327dc1=0x0,_0x4acd09=0x0;if(_0x332e31&&_0x332e31[_0x27b758(0x220)]){console[_0x27b758(0xc8)](global[_0x27b758(0x15f)]['Magenta'],_0x27b758(0x1a7),_0x332e31[_0x27b758(0x220)]),_0x27f42e=parseInt(_0x332e31[_0x27b758(0x220)]['elapsed']||'0',0xa),_0x415f49=parseFloat(_0x332e31['summary'][_0x27b758(0x1c6)]||'0'),_0x50c3c3=parseFloat(_0x332e31[_0x27b758(0x220)]['ghsav']||'0'),_0x4acd09=parseInt(_0x332e31['summary'][_0x27b758(0x1f6)]||'0',0xa),_0x327dc1=parseInt(_0x332e31[_0x27b758(0x220)][_0x27b758(0xbf)]||'0',0xa),_0x580f23=parseInt(_0x332e31[_0x27b758(0x220)][_0x27b758(0xf7)]||'0',0xa),_0x37cdb6=parseInt(_0x332e31[_0x27b758(0x220)][_0x27b758(0xd9)]||'0',0xa),_0x3e3157=[parseInt(_0x332e31[_0x27b758(0x220)]['hw']||'0',0xa)],_0x24f199=parseFloat(_0x332e31[_0x27b758(0x220)][_0x27b758(0x213)]||'0'),_0x277c93=_0x332e31[_0x27b758(0x18e)]||[];const _0x5b46f3=_0x277c93[_0x27b758(0x1de)](({status:_0x57ca71})=>/alive/i[_0x27b758(0x21e)](_0x57ca71));_0x5b46f3&&(_0x2bf049=await extractAccountAndWorkerNumber({'poolWorkers':[_0x5b46f3['user']]}),_0x592d27=(_0x5b46f3[_0x27b758(0x13d)][_0x27b758(0x1d1)](rePoolName)||['Unknown'])[0x1]);if(_0x332e31[_0x27b758(0x100)]&&_0x332e31[_0x27b758(0x100)][0x0]){let _0x4e8eca=_0x332e31[_0x27b758(0x100)][0x0];if(isNaN(_0x4e8eca[_0x27b758(0x10f)])){let _0xa79792=/frequency1/i[_0x27b758(0x21e)](_0x4e8eca[_0x27b758(0x10f)])?_0x4e8eca[_0x27b758(0x10f)]:'freq\x22:\x22'+_0x4e8eca[_0x27b758(0x10f)];_0xa79792=_0xa79792[_0x27b758(0x141)](/":"/g,'=')[_0x27b758(0x141)](/=/g,_0x27b758(0x187))[_0x27b758(0x141)](/,/g,_0x27b758(0x122))[_0x27b758(0x141)](/"{/g,'{\x22')[_0x27b758(0x141)](/}"/g,'\x22}')[_0x27b758(0x141)](/{""}/g,'{}')['replace'](/(:"[^,]+"):"[^,]+",/g,_0x27b758(0x223));try{_0x334110=JSON[_0x27b758(0x105)]('{\x22'+_0xa79792+'\x22}');}catch(_0x5c1e39){console[_0x27b758(0x22b)](_0x27b758(0x1af),_0x4e8eca['freq']);}const _0x2252c9=_0x2e2802&&_0x2e2802[_0x27b758(0x192)]?new RegExp(_0x2e2802['tempNamesRE']+_0x27b758(0x20c),'g'):/temp\d=(\d\d+)\,/g,_0xb9ddc8=_0x2e2802&&_0x2e2802[_0x27b758(0x149)]?new RegExp(_0x2e2802[_0x27b758(0x149)]+_0x27b758(0x16c),'g'):/freq(?:_avg)\d=(\d\d+)[\,\.]/g,_0x52a230=_0x2e2802&&_0x2e2802[_0x27b758(0x180)]?new RegExp(_0x2e2802[_0x27b758(0x180)]+'=(\x5cd+),','g'):/fan\d=(\d\d+)\,/g;_0x5d6fd1=(_0x4e8eca['freq'][_0x27b758(0x1d1)](_0x2252c9)||[_0x27b758(0x1b2)])[_0x27b758(0xca)](_0x4901db=>parseInt(_0x4901db['match'](/=(\d+),/)[0x1])),_0x1ca0bf=(_0x4e8eca[_0x27b758(0x10f)][_0x27b758(0x1d1)](_0xb9ddc8)||['=0,'])['map'](_0x378649=>parseInt(_0x378649[_0x27b758(0x1d1)](/=(\d+)[,\.]/)[0x1])),_0x5459d2=(_0x4e8eca[_0x27b758(0x10f)][_0x27b758(0x1d1)](_0x52a230)||['=0,'])[_0x27b758(0xca)](_0x249d30=>parseInt(_0x249d30[_0x27b758(0x1d1)](/=(\d+)[,\.]/)[0x1]));}else{_0x5d6fd1=_0x332e31[_0x27b758(0x100)][_0x27b758(0xca)](_0x355d72=>{const _0x55961=_0x27b758;if(!_0x355d72[_0x55961(0x211)])return _0x355d72[_0x55961(0xb1)];let _0x142345=_0x355d72['temp2']+'-'+(_0x355d72[_0x55961(0xb1)]||0x0),_0x4f0d37=_0x142345[_0x55961(0x141)](/(^-|-$)/,'')[_0x55961(0xe3)](/\-+/);return Math[_0x55961(0x1a2)](..._0x4f0d37);}),_0x1ca0bf=_0x332e31[_0x27b758(0x100)][_0x27b758(0xca)](_0x530770=>!isNaN(_0x530770['freq'])?parseInt(_0x530770['freq']):0x0);const _0x5d8cf2=[_0x4e8eca['fan1'],_0x4e8eca['fan2'],_0x4e8eca[_0x27b758(0x239)],_0x4e8eca[_0x27b758(0x240)],_0x4e8eca[_0x27b758(0x1dc)],_0x4e8eca[_0x27b758(0x1c9)],_0x4e8eca[_0x27b758(0x158)],_0x4e8eca['fan8']];_0x5459d2=_0x5d8cf2[_0x27b758(0xd4)](_0x26b987=>_0x26b987>0x0);_0x5459d2[_0x27b758(0xa7)]%0x2===0x1&&_0x5459d2[_0x27b758(0x18c)](0x0);const _0x455988=_0x332e31[_0x27b758(0x100)][_0x27b758(0xca)](_0x53133d=>_0x53133d[_0x27b758(0xdd)]||_0x53133d['voltage']);_0x556fa8=_0x455988[_0x27b758(0xe0)]((_0x36c7cc,_0x302db9)=>Math[_0x27b758(0x1a2)](parseInt(_0x36c7cc,0xa),parseInt(_0x302db9,0xa)));_0x556fa8>=0x64&&(_0x556fa8=_0x556fa8/(_0x556fa8>=0x2710?0x3e8:0x64));const _0xd00d5c=_0x332e31[_0x27b758(0x100)]['map'](_0x5cbbe1=>_0x5cbbe1[_0x27b758(0xec)]);_0x519e18=_0xd00d5c['reduce']((_0x2dd947,_0x195789)=>parseInt(_0x2dd947,0xa)+parseInt(_0x195789,0xa)),_0x3e3157=_0x332e31['devs']['map'](_0x46acee=>_0x46acee['hw']);}_0xcf8f9d=_0x1ca0bf[0x0]||_0x1ca0bf[0x1]||_0x1ca0bf[0x2]||parseInt(_0x334110[_0x27b758(0x10f)]),_0x9752d6=_0x5459d2,_0x3e4ce6=_0x5459d2[_0x5459d2[_0x27b758(0xa7)]-0x1];if(_0x2e2802&&_0x2e2802['cardChipCount']&&_0x4e8eca[_0x27b758(0x10f)])for(var _0x1f65dd=0x0;_0x1f65dd<_0x2e2802[_0x27b758(0xfc)]['length'];_0x1f65dd++){let _0x367de9=_0x2e2802['cardIDs'][_0x1f65dd],_0x254d07=new RegExp(_0x27b758(0x224)+_0x2e2802[_0x27b758(0xfc)][_0x1f65dd]+_0x27b758(0x10a)),_0x438b55=_0x2e2802[_0x27b758(0x147)]-((_0x4e8eca[_0x27b758(0x10f)][_0x27b758(0x1d1)](_0x254d07)||['',''])[0x1]['match'](/o/g)||[])[_0x27b758(0xa7)];_0x438b55>0x0&&_0x1a1689[_0x27b758(0x18c)]({'chain':_0x367de9,'chipFailCount':_0x438b55});;}}}let _0x57484d=0xbb8;_0x2e2802[_0x27b758(0x245)]&&(_0x57484d=parseInt((_0x2e2802['powerEfficiency']||0x0)*_0x50c3c3));(_0x519e18<=0x0||_0x519e18>_0x57484d*1.2)&&(_0x519e18=_0x57484d>0x2710?CONSUMPTION_DEFAULT:_0x57484d);let _0x4eec8a={'hashRate':_0x415f49,'hashRateAvg':_0x50c3c3,'poolName':_0x592d27,'temperatures':_0x5d6fd1,'frequency':_0xcf8f9d,'pools':_0x277c93,'intakeSpeed':_0x9752d6,'exhaustSpeed':_0x3e4ce6,'cardFailureChains':_0x1a1689,'cardStatus':_0x334110,'elapsed':_0x27f42e,'volts':_0x556fa8,'consumption':_0x519e18,'accepted':_0x580f23,'rejected':_0x37cdb6,'hardwareErrors':_0x3e3157,'sharesPerMinute':_0x24f199,'foundBlocks':_0x4acd09,'workGetCount':_0x327dc1};return console['debug'](global[_0x27b758(0x15f)][_0x27b758(0x1e7)],'Parsing\x20miner\x20status\x20result',_0x4eec8a,_0x2bf049),{..._0x4eec8a,..._0x2bf049};},'Antminer_X19':async function(_0x46c4ab,_0xea781b){const _0x37c1c7=_0x1962;let _0x188c41=0x0,_0x3edb69=0x0,_0x237638='DEAD',_0x9f4667=[],_0x20f9e1=[],_0x2e967e=[],_0x2e0658=0x0,_0x48cb02=0x0,_0xe9632f=0x0,_0x48b4b3=[],_0x780088={'accountName':'','workerName':'','workerTypeNumber':''},_0x25678f={},_0x4fc1ac=0x0,_0x7e1d1a=0x0;const _0xb2128=_0x46c4ab[_0x37c1c7(0x220)]||_0x46c4ab[_0x37c1c7(0x1e4)][0x0];let {Accepted:_0x2a4a1b=0x0,Rejected:_0x1d205f=0x0,Elapsed:_0x201fa8=0x0,Getwork:_0x545aa1=0x0,'Found\x20Blocks':_0x463466=0x0,'Hardware\x20Errors':_0x19ee5a,Utility:_0x56d83b=0x0}=_0xb2128||{};_0x19ee5a=[_0x19ee5a||0x0];const _0x33e5d3=(_0x46c4ab[_0x37c1c7(0x18e)]||_0x46c4ab[_0x37c1c7(0xdb)])[_0x37c1c7(0xca)](({User:_0x3dbfd2,URL:_0x36578e,Status:_0x5c0ed9,Getworks:_0x2cfb18,Accepted:_0x3d448f,Rejected:_0x3d8e4a,Discarded:_0x58993f})=>({'user':_0x3dbfd2,'url':_0x36578e,'status':_0x5c0ed9,'getworks':_0x2cfb18,'accepted':_0x3d448f,'rejected':_0x3d8e4a,'discarded':_0x58993f}));if(_0xb2128){console['debug'](global[_0x37c1c7(0x15f)][_0x37c1c7(0x16f)],_0x37c1c7(0x1a7),_0xb2128),_0x188c41=parseFloat(_0xb2128[_0x37c1c7(0xe5)]||'0'),_0x3edb69=parseFloat(_0xb2128[_0x37c1c7(0x1d6)]||'0');if(_0xea781b&&_0xea781b['cardIDs']){_0x25678f=_0xb2128[_0x37c1c7(0x110)]||_0x46c4ab[_0x37c1c7(0x1c4)][0x1];for(var _0x50a452=0x0;_0x50a452<_0xea781b[_0x37c1c7(0xfc)][_0x37c1c7(0xa7)];_0x50a452++){const _0x29a9b4=_0xea781b[_0x37c1c7(0xfc)][_0x50a452],_0x3f7fc5=_0x25678f[_0x37c1c7(0x20e)+_0x29a9b4]-_0x25678f['chain_acs'+_0x29a9b4];if(!_0x3f7fc5)continue;const _0x573e67=_0x3f7fc5[_0x37c1c7(0x141)](/[^o]/ig,'')[_0x37c1c7(0xa7)];_0x573e67>0x0&&_0x48b4b3[_0x37c1c7(0x18c)]({'cardId':_0x29a9b4,'chipFailCount':_0x573e67});;let _0x521225=_0x25678f[_0x37c1c7(0xf6)+_0x29a9b4]||_0x25678f[_0x37c1c7(0x162)+_0x29a9b4],_0x2e89b8=_0x521225[_0x37c1c7(0xe3)]('-')[_0x37c1c7(0xca)](_0x27c38a=>parseInt(_0x27c38a||'0'));_0x9f4667[_0x37c1c7(0x18c)](Math[_0x37c1c7(0x1a2)](..._0x2e89b8)),_0x2e967e['push'](_0x25678f[_0x37c1c7(0x10f)+_0x29a9b4]);}_0x20f9e1=[_0x25678f[_0x37c1c7(0x11e)],_0x25678f[_0x37c1c7(0x234)],_0x25678f[_0x37c1c7(0x239)],_0x25678f['fan4']],_0x2e0658=average(_0x2e967e),_0x48cb02=_0x20f9e1,_0xe9632f=_0x20f9e1[_0x20f9e1['length']-0x1];}}const _0x26e616=_0x33e5d3[_0x37c1c7(0x1de)](({status:_0x3b786d})=>/alive/i[_0x37c1c7(0x21e)](_0x3b786d));_0x26e616&&(_0x780088=await extractAccountAndWorkerNumber({'poolWorkers':[_0x26e616[_0x37c1c7(0x153)]]}),_0x237638=(_0x26e616['url']['match'](rePoolName)||[_0x37c1c7(0x107)])[0x1]);let _0x1703e2=0xbb8;_0xea781b[_0x37c1c7(0x245)]&&(_0x1703e2=parseInt((_0xea781b[_0x37c1c7(0x245)]||0x0)*_0x3edb69));(_0x7e1d1a<=0x0||_0x7e1d1a>_0x1703e2*1.2)&&(_0x7e1d1a=_0x1703e2>0x2710?CONSUMPTION_DEFAULT:_0x1703e2);let _0x233edc={'hashRate':_0x188c41,'hashRateAvg':_0x3edb69,'poolName':_0x237638,'temperatures':_0x9f4667,'frequency':_0x2e0658,'pools':_0x33e5d3,'intakeSpeed':_0x48cb02,'exhaustSpeed':_0xe9632f,'cardFailureChains':_0x48b4b3,'cardStatus':_0x25678f,'elapsed':_0x201fa8,'volts':_0x4fc1ac,'consumption':_0x7e1d1a,'accepted':_0x2a4a1b,'rejected':_0x1d205f,'hardwareErrors':_0x19ee5a,'sharesPerMinute':_0x56d83b,'foundBlocks':_0x463466,'workGetCount':_0x545aa1};return console[_0x37c1c7(0xc8)](global['colorize'][_0x37c1c7(0x1e7)],_0x37c1c7(0x1c7),_0x233edc,_0x780088),{..._0x233edc,..._0x780088};},'AvalonMiner':async function(_0x4b9b1b,_0xb26026){const _0x3f0c0f=_0x1962,_0x24bfd2=JSON[_0x3f0c0f(0x105)]((_0x4b9b1b[_0x3f0c0f(0x1b5)]||_0x4b9b1b)[_0x3f0c0f(0x141)](/^[^{]*{/,'{')['replace'](/,?\s*}\);\s*UpdatePageCallback[^}]*}\);\s*$/,'}')[_0x3f0c0f(0x141)](/[^\x1F-\x7F]+/g,'')[_0x3f0c0f(0x141)](/":([^"][^,"]*)"?([,}])/g,_0x3f0c0f(0xde)));let {elapsed:_0x2d64ad,av:_0x2ca9d4,url:_0x1b26ce,worker:_0x21ddc3,accepted:_0x1125c9,reject:_0x308e85,temperature:_0x4fcc84,fan:_0x137cb3,hash_5m:_0x158e45}=_0x24bfd2,_0x58476e,_0x58ea12;_0x158e45=_0x158e45*0x3e8,_0x2ca9d4=_0x2ca9d4*0x3e8;const _0x571dd8=[(_0x4fcc84[_0x3f0c0f(0x1d1)](/\/\s(\d+)/)||[0x0])[0x1]],_0xe69737=_0x137cb3*0x46,_0x1d25d3=_0xe69737,_0x561f39=[{'url':_0x1b26ce,'user':_0x21ddc3}],_0x3ad9cd=_0x2d64ad[_0x3f0c0f(0x1d1)](/(?:(\d+)\s+d\s)?(?:(\d+)\s+h\s)?(?:(\d+)\s+m\s)?(?:(\d+)\s+s\s?)?/i);_0x3ad9cd[_0x3f0c0f(0xa7)]&&(_0x2d64ad=parseInt(_0x3ad9cd[0x1]||0x0)*0x15180+parseInt(_0x3ad9cd[0x2]||0x0)*0xe10+parseInt(_0x3ad9cd[0x3]||0x0)*0x3c+parseInt(_0x3ad9cd[0x4]||0x0));if(_0x561f39[0x0]&&_0x561f39[0x0][_0x3f0c0f(0x153)]){const _0xdc7141=_0x561f39[_0x3f0c0f(0x1de)](({status:_0x3062cd})=>/alive/i[_0x3f0c0f(0x21e)](_0x3062cd))||_0x561f39[0x0];_0x58476e=await extractAccountAndWorkerNumber({'poolWorkers':[_0xdc7141['user']||_0x561f39[0x0]?.[_0x3f0c0f(0x153)]]}),_0x58ea12=(_0xdc7141[_0x3f0c0f(0x13d)]['match'](rePoolName)||[_0x3f0c0f(0x107)])[0x1];}const _0xa41fde=parseInt((_0xb26026[_0x3f0c0f(0x245)]||0x0)*_0x2ca9d4);let _0x5db651={'hashRate':_0x158e45,'hashRateAvg':_0x2ca9d4,'poolName':_0x58ea12,'temperatures':_0x571dd8,'pools':_0x561f39,'intakeSpeed':_0xe69737,'exhaustSpeed':_0x1d25d3,'elapsed':_0x2d64ad,'consumption':_0xa41fde,'accepted':_0x1125c9,'rejected':_0x308e85};return console[_0x3f0c0f(0xc8)](global[_0x3f0c0f(0x15f)][_0x3f0c0f(0x1e7)],'Parsing\x20miner\x20status\x20result',_0x5db651,_0x58476e),{..._0x5db651,..._0x58476e};},'Dragonmint':async function(_0x34ef98,_0x179be0){const _0x52b805=_0x1962;let _0x1b13be=0x0,_0x2c8e3d=0x0,_0x5999b5='DEAD',_0x3ae728=[],_0x1414a6=0x0,_0xb26f3e=0x0,_0x28803f=0x0,_0x510e55=[],_0x533a36=[],_0x200b36={'accountName':'','workerName':'','workerTypeNumber':''},_0x8b8d4d={},_0x6bd208=0x0;const _0x583587=_0x34ef98?.['DEVS']||_0x34ef98?.[_0x52b805(0x100)]||[],_0x59bc35=_0x583587[0x0];if(_0x59bc35){const _0x467652=_[_0x52b805(0xca)](_0x583587,_0x52b805(0x157))[_0x52b805(0x1f1)]([0x0]),_0x133b57=_[_0x52b805(0xca)](_0x583587,_0x52b805(0x157))[_0x52b805(0x1f1)]([0x0]);_0x1b13be=parseInt(_0x467652[_0x52b805(0xe0)]((_0x31ab61,_0x4051c3)=>(_0x31ab61||0x0)+(_0x4051c3||0x0))/0x3e8),_0x2c8e3d=parseInt(_0x133b57[_0x52b805(0xe0)]((_0x4744d8,_0x1e4676)=>(_0x4744d8||0x0)+(_0x1e4676||0x0))/0x3e8),_0x1414a6=parseInt(parseFloat(_0x59bc35['Utility']||0x0)*0x64),_0x3ae728=_[_0x52b805(0xca)](_0x583587,_0x52b805(0xda)),_0x8b8d4d=_0x34ef98[_0x52b805(0x1c4)],_0x6bd208=parseInt(_0x59bc35[_0x52b805(0xfe)]);const _0x5226a4=_0x34ef98?.[_0x52b805(0xdb)]||_0x34ef98?.[_0x52b805(0x18e)]||[];_0x533a36=_0x5226a4[_0x52b805(0xca)](({User:_0x1649fc,URL:_0x47c370,Status:_0x1f2dbc,Getworks:_0x94b39f,Accepted:_0x2465f2,Rejected:_0x5864a9,Discarded:_0x171822})=>({'user':_0x1649fc,'url':_0x47c370,'status':_0x1f2dbc,'getworks':_0x94b39f,'accepted':_0x2465f2,'rejected':_0x5864a9,'discarded':_0x171822}));const _0x54eeb4=_0x533a36[_0x52b805(0x1de)](({status:_0x7505c7})=>/alive/i[_0x52b805(0x21e)](_0x7505c7));_0x54eeb4&&(_0x200b36=await extractAccountAndWorkerNumber({'poolWorkers':[_0x54eeb4['user']]}),_0x5999b5=(_0x54eeb4[_0x52b805(0x13d)]['match'](rePoolName)||['Unknown'])[0x1]);const _0x595639=_0x34ef98?.['HARDWARE']||_0x34ef98?.[_0x52b805(0x208)];_0x595639&&(_0xb26f3e=parseInt(_0x595639['Fan\x20duty'])/0x64*0x1964,_0x28803f=parseInt(_0x595639[_0x52b805(0x23a)])/0x64*0x1964);const _0x452874=_0x34ef98?.['STATS']||_0x34ef98?.['stats'];_0x452874&&(_0xb26f3e=parseInt((JSON[_0x52b805(0x200)](_0x452874)['match'](/fan1\[(\d+)\]/i)||[0x0])[0x1]),_0x28803f=parseInt((JSON['stringify'](_0x452874)[_0x52b805(0x1d1)](/fan2\[(\d+)\]/i)||[0x0])[0x1]));}const _0x49c09f=parseInt((_0x179be0['powerEfficiency']||0x0)*_0x2c8e3d);return{'hashRate':_0x1b13be,'hashRateAvg':_0x2c8e3d,'poolName':_0x5999b5,'temperatures':_0x3ae728,'frequency':_0x1414a6,'pools':_0x533a36,'intakeSpeed':_0xb26f3e,'exhaustSpeed':_0x28803f,'cardFailureChains':_0x510e55,'cardStatus':_0x8b8d4d,'elapsed':_0x6bd208,'consumption':_0x49c09f,..._0x200b36};},'Innosilicon':async function(_0x46f0a8,_0x4b8c46){const _0x1660b8=_0x1962;let _0x5866d5=0x0,_0x15a22a=0x0,_0x4896c6=_0x1660b8(0x21c),_0x579c66=[],_0xc5ebd4=0x0,_0x2f5dbe=0x0,_0x30c030=0x0,_0x22d9eb=[],_0x1ff700=[],_0x97928f={'accountName':'','workerName':'','workerTypeNumber':''},_0x499815={},_0x53cb9e=0x0;if(_0x46f0a8&&_0x46f0a8[_0x1660b8(0x189)]){const _0x39e72d=_0x46f0a8[_0x1660b8(0x189)][0x0],_0x4f2680=_[_0x1660b8(0xca)](_0x46f0a8['DEVS'],_0x1660b8(0x157))[_0x1660b8(0x1f1)]([0x0]),_0x70f7f5=_[_0x1660b8(0xca)](_0x46f0a8[_0x1660b8(0x189)],_0x1660b8(0x157))[_0x1660b8(0x1f1)]([0x0]);_0x5866d5=parseInt(_0x4f2680[_0x1660b8(0xe0)]((_0x50c63b,_0x2574df)=>(_0x50c63b||0x0)+(_0x2574df||0x0))/0x3e8),_0x15a22a=parseInt(_0x70f7f5['reduce']((_0x242578,_0x7e4278)=>(_0x242578||0x0)+(_0x7e4278||0x0))/0x3e8),_0xc5ebd4=parseInt(parseFloat(_0x39e72d['Utility']||0x0)*0x64),_0x579c66=_[_0x1660b8(0xca)](_0x46f0a8[_0x1660b8(0x189)],_0x1660b8(0xda)),_0x499815=_0x46f0a8['STATS'],_0x53cb9e=parseInt(_0x39e72d[_0x1660b8(0xfe)]),_0x1ff700=_['map'](_0x46f0a8[_0x1660b8(0xdb)]||[],_0x334d13=>{const _0xd31a33=_0x1660b8;return{'user':_0x334d13[_0xd31a33(0x1a3)],'url':_0x334d13[_0xd31a33(0x134)],'getworks':_0x334d13[_0xd31a33(0x188)],'accepted':_0x334d13[_0xd31a33(0x127)],'rejected':_0x334d13['Rejected'],'discarded':_0x334d13['Discarded']};});const _0x12a70e=_0x1ff700[0x0];_0x12a70e&&(_0x97928f=await extractAccountAndWorkerNumber({'poolWorkers':[_0x12a70e[_0x1660b8(0x153)]]}),_0x4896c6=(_0x12a70e[_0x1660b8(0x13d)][_0x1660b8(0x1d1)](rePoolName)||['Unknown'])[0x1]);if(_0x46f0a8[_0x1660b8(0x1fe)]){const _0x3ac2ba=_0x46f0a8[_0x1660b8(0x1fe)];_0x2f5dbe=parseInt(_0x3ac2ba['Fan\x20duty'])/0x64*0x1964,_0x30c030=parseInt(_0x3ac2ba['Fan\x20duty'])/0x64*0x1964;}}const _0x54d278=parseInt((_0x4b8c46[_0x1660b8(0x245)]||0x0)*_0x15a22a);return{'hashRate':_0x5866d5,'hashRateAvg':_0x15a22a,'poolName':_0x4896c6,'temperatures':_0x579c66,'frequency':_0xc5ebd4,'pools':_0x1ff700,'intakeSpeed':_0x2f5dbe,'exhaustSpeed':_0x30c030,'cardFailureChains':_0x22d9eb,'cardStatus':_0x499815,'elapsed':_0x53cb9e,'consumption':_0x54d278,..._0x97928f};},'StuMiner':async function(_0x2d8759,_0x3d8619){const _0x47ac0c=_0x1962,{'ghsav':_0x2a496c,elapsed:_0x3c1865,'foundblocks':_0x22b1ec,'utility':_0x4aed46,'fan1':_0x4eb492,'fan2':_0x14165e,'wu':_0x242a44}=_0x2d8759[_0x47ac0c(0x220)],_0x2e8491=_0x2d8759[_0x47ac0c(0x100)],_0x85272f=_0x2e8491[_0x47ac0c(0xca)](_0x361e73=>parseFloat(_0x361e73['dev_temp']||0x0)),_0x5877ad=_0x2e8491[_0x47ac0c(0xe0)]((_0x484466,_0x4b88a7)=>_0x484466+parseInt(_0x4b88a7[_0x47ac0c(0x161)],0xa),0x0),_0x9387f2=_0x2e8491['reduce']((_0x5b50d1,_0x39a271)=>_0x5b50d1+parseInt(_0x39a271[_0x47ac0c(0xd0)],0xa),0x0),_0x1d32ff=_0x2e8491[_0x47ac0c(0xe0)]((_0x3e3611,_0x48e02b)=>Math['max'](parseInt(_0x3e3611[_0x47ac0c(0x238)],0xa),parseInt(_0x48e02b[_0x47ac0c(0x238)],0xa)),0x0),_0xe7f930=_0x2e8491['map'](_0xa9a277=>parseFloat(_0xa9a277['dev_ghs15m']||0x0))['reduce']((_0xa74f6b,_0x510634)=>_0xa74f6b+_0x510634,0x0),_0x41cd12=parseInt((_0x3d8619['powerEfficiency']||0x0)*parseInt(_0x2a496c||0x0,0xa));let _0x5cca9e={'hashRate':_0xe7f930,'hashRateAvg':_0x2a496c,'elapsed':_0x3c1865,'accepted':_0x5877ad,'rejected':_0x9387f2,'sharesPerMinute':_0x4aed46,'exhaustSpeed':_0x14165e,'intakeSpeed':_0x4eb492,'temperatures':_0x85272f,'frequency':_0x1d32ff,'consumption':_0x41cd12,'foundBlocks':_0x22b1ec,'workGetCount':_0x242a44},_0x1a96e2,_0x4678f1,_0x1dcafe;if(_0x2d8759['pools']&&_0x2d8759[_0x47ac0c(0x18e)][0x0]){const _0x34b75c=_0x2d8759[_0x47ac0c(0x18e)][0x0];_0x1a96e2=_0x2d8759['pools'][_0x47ac0c(0xca)](_0x402690=>{const _0x4ad56f=_0x47ac0c;return{'user':_0x402690[_0x4ad56f(0x153)],'url':_0x402690[_0x4ad56f(0x13d)]};});const _0x58d9a3=_0x1a96e2[_0x47ac0c(0xca)](_0x4581d0=>_0x4581d0['user']);_0x4678f1=await extractAccountAndWorkerNumber({'poolWorkers':_0x58d9a3}),_0x1dcafe=(_0x34b75c[_0x47ac0c(0x13d)]['match'](/((?:\d+\.){3}\d+|[^\.\:\/]+)(?:\.\w+)\:\d{2,}/)||[_0x47ac0c(0x107)])[0x1];}return console[_0x47ac0c(0xc8)](global[_0x47ac0c(0x15f)][_0x47ac0c(0x20d)],_0x47ac0c(0x196),_0x5cca9e,_0x4678f1,_0x1a96e2,_0x1dcafe),{..._0x4678f1,..._0x5cca9e,'pools':_0x1a96e2,'poolName':_0x1dcafe};},'Whatsminer':async function(_0x40ff9f,_0x7fe604){const _0x333700=_0x1962,{'MHS\x205s':_0x4afc9c,'MHS\x20av':_0x995fd9,'GHS\x205s':_0x1d63a7,'GHS\x20av':_0x5651b8,'Temperature':_0x2383f4,'freq_avg':_0x35ad64,'Elapsed':_0x2a33a2,'Voltage':_0x47a7ff,'Power':_0x35dba7,'Accepted':_0x410467,'Fan\x20Speed\x20In':_0xbf76e9,'Fan\x20Speed\x20Out':_0x5219ed,'Rejected':_0xc65c87,'Hardware\x20Errors':_0x7610d,'Utility':_0x341f07,'Found\x20Blocks':_0x72cbe7,'Getworks':_0x4c0da7}=_0x40ff9f[_0x333700(0x220)];let _0x121903={'hashRate':_0x4afc9c?_0x4afc9c/0x3e8:_0x1d63a7,'hashRateAvg':_0x995fd9?_0x995fd9/0x3e8:_0x5651b8,'elapsed':_0x2a33a2,'volts':_0x47a7ff,'consumption':_0x35dba7,'accepted':_0x410467,'rejected':_0xc65c87,'hardwareErrors':_0x7610d,'sharesPerMinute':_0x341f07,'exhaustSpeed':_0x5219ed,'intakeSpeed':_0xbf76e9,'frequency':_0x35ad64,'foundBlocks':_0x72cbe7,'workGetCount':_0x4c0da7};!isNaN(_0x121903[_0x333700(0xfb)])&&parseInt(_0x121903[_0x333700(0xfb)])>0xf4240&&(_0x121903[_0x333700(0xfb)]=_0x121903[_0x333700(0xfb)]/0x3e8);!isNaN(_0x121903[_0x333700(0xd7)])&&parseInt(_0x121903['hashRateAvg'])>0xf4240&&(_0x121903[_0x333700(0xd7)]=_0x121903[_0x333700(0xd7)]/0x3e8);_0x121903[_0x333700(0x1e8)]=[_0x7610d],_0x121903[_0x333700(0xb0)]=[_0x2383f4],_0x121903['volts']=parseInt(_0x121903[_0x333700(0xb4)]/0xa)/0xa;let _0x238105=_0x40ff9f[_0x333700(0x18e)]||_0x40ff9f[_0x333700(0xdb)],_0x2087f9,_0x4db4f7=_0x333700(0x21c);_0x238105&&(_0x238105=_0x238105['map'](({User:_0x3efe7a,URL:_0x24349e,Status:_0x56d5ae,Getworks:_0x4c590c,Accepted:_0x36f4c4,Rejected:_0x38f429,Discarded:_0x376b3a})=>({'user':_0x3efe7a,'url':_0x24349e,'status':_0x56d5ae,'getworks':_0x4c590c,'accepted':_0x36f4c4,'rejected':_0x38f429,'discarded':_0x376b3a})));const _0x8841e5=_0x238105?_0x238105[0x0]:null;_0x8841e5&&(_0x2087f9=await extractAccountAndWorkerNumber({'poolWorkers':[_0x8841e5[_0x333700(0x153)]]}),_0x4db4f7=(_0x8841e5[_0x333700(0x13d)]['match'](rePoolName)||[_0x333700(0x107)])[0x1]);const _0x5d2616=[];return console[_0x333700(0xc8)](global['colorize'][_0x333700(0x20d)],_0x333700(0x11f),_0x121903,_0x2087f9,_0x238105,_0x4db4f7,_0x5d2616),{..._0x2087f9,..._0x121903,'pools':_0x238105,'poolName':_0x4db4f7};},'ZigMiner':async function(_0x20b767,_0xe1dac9){const _0x1ac28a=_0x1962,{hashRate:_0x3e53b3,accepted:_0x10cfaa,rejected:_0x39a6a5,temperatures:_0x157c45,'upTime':_0x3e6d1f,'fanIn':_0x3e1eaf,'fanOut':_0x15d86a,'errors':_0x263d87}=_0x20b767[_0x1ac28a(0x220)];let _0x240b8d={'hashRate':_0x3e53b3*0x3e8,'temperatures':_0x157c45,'elapsed':_0x3e6d1f,'accepted':_0x10cfaa,'rejected':_0x39a6a5,'hardwareErrors':_0x263d87,'exhaustSpeed':_0x15d86a,'intakeSpeed':_0x3e1eaf};_0x240b8d[_0x1ac28a(0x1e8)]=[_0x263d87];let _0x144218,_0x5053de,_0x4ba1dd;if(_0x20b767['pools_details']&&_0x20b767[_0x1ac28a(0x167)][0x0]&&_0x20b767[_0x1ac28a(0x167)][0x0]['username']){const _0x37b539=_0x20b767['pools_details'][0x0];_0x144218=_0x20b767[_0x1ac28a(0x167)]['map'](_0x3f8e72=>{const _0x288aa9=_0x1ac28a;return{'user':_0x3f8e72['username'],'url':_0x3f8e72[_0x288aa9(0x13d)]};});const _0x13a5c5=_0x144218[_0x1ac28a(0xca)](_0x337161=>_0x337161[_0x1ac28a(0x153)]);_0x5053de=await extractAccountAndWorkerNumber({'poolWorkers':_0x13a5c5}),_0x4ba1dd=(_0x37b539['url']['match'](/((?:\d+\.){3}\d+|[^\.\:\/]+)(?:\.\w+)\:\d{2,}/)||[_0x1ac28a(0x107)])[0x1];}return console[_0x1ac28a(0xc8)](global['colorize'][_0x1ac28a(0x20d)],_0x1ac28a(0x11f),_0x240b8d,_0x5053de,_0x144218,_0x4ba1dd),{..._0x5053de,..._0x240b8d,'pools':_0x144218,'poolName':_0x4ba1dd};}};_0x2b973c[_0x1d2b7a(0x1d3)]=_0x2b973c[_0x1d2b7a(0x1c3)],_0x2b973c[_0x1d2b7a(0xc2)]=_0x2b973c[_0x1d2b7a(0x1c3)],_0x2b973c[_0x1d2b7a(0x13e)]=_0x2b973c[_0x1d2b7a(0x1c3)],_0x2b973c['Antminer_updater']=_0x2b973c[_0x1d2b7a(0x1f0)],_0x2b973c[_0x1d2b7a(0x1e6)]=_0x2b973c[_0x1d2b7a(0xb7)];const _0xb439d=_0x2b973c[_0x29fd48];if(!_0xb439d)return console['warn'](_0x1d2b7a(0x21f)+_0x29fd48,_0x1c633b),null;return _0xb439d(_0x1c633b,_0x13525d);}function completeMinerVersion(_0x355ee3){const _0x2e0f24=_0x423be7;let {systemKernelVersion:systemKernelVersion='',softwareVersion:softwareVersion='',modelType:modelType='',minerType:_0x5ceb03,apiVersion:_0x1b6b2e,brand:_0x45f7ee,completed:_0x3d50f7}=_0x355ee3;if(_0x3d50f7&&modelType[_0x2e0f24(0x1d4)](_0x5ceb03)>=0x0)return _0x355ee3;if(_0x5ceb03&&modelType[_0x2e0f24(0x1d4)](_0x5ceb03)<0x0){if(modelType[_0x2e0f24(0x1d4)](_0x45f7ee)>=0x0)_0x5ceb03=modelType;else _0x5ceb03[_0x2e0f24(0x1d4)](_0x45f7ee)>=0x0&&(modelType=_0x5ceb03);}_0x355ee3[_0x2e0f24(0x172)]=getMinerType(modelType),softwareVersion=softwareVersion['replace'](/\-git\-.+$/,'');const _0x21610d=(systemKernelVersion+'~'+softwareVersion)[_0x2e0f24(0x163)](),_0x2f66fa=minerVersionsLookup[_0x21610d+_0x5ceb03]||minerVersionsLookup[_0x21610d];if(!_0x2f66fa){if(_0x5ceb03){if(minerTypeMap[_0x5ceb03])return _0x355ee3['apiVersion']=minerTypeMap[_0x5ceb03]['apiVersion']||minerTypeMap[_0x5ceb03][_0x2e0f24(0xf4)],{..._0x355ee3,'softwareVersion':softwareVersion,'completed':!![]};else console[_0x2e0f24(0x22b)]('API\x20version\x20lookup\x20failed!\x20Model\x20type\x20has\x20no\x20configuration:'+_0x5ceb03,_0x355ee3);}else console[_0x2e0f24(0x22b)](_0x2e0f24(0x1ee)+_0x21610d,_0x355ee3);return _0x355ee3['apiVersion']='Unknown\x20API',_0x355ee3['minerType']='Unknown\x20model',_0x355ee3;}else{if(_0x45f7ee&&_0x45f7ee!==_0x2f66fa[_0x2e0f24(0xf4)]||_0x5ceb03&&_0x5ceb03!==_0x2f66fa[_0x2e0f24(0x172)])return{..._0x355ee3,'softwareVersion':softwareVersion,'completed':!![]};}return{..._0x355ee3,'softwareVersion':softwareVersion,..._0x2f66fa,'completed':!![]};}async function checkMinerStates({ipAddress:_0x36d793,brand:_0x26b9d4,commands:_0x144d76}){const _0x1126a0=_0x423be7;let _0x54123b=_0x26b9d4?{'brand':_0x26b9d4}:null,_0xa17f89=_0x26b9d4;if(_0x144d76)return{'commands':await getAllMinerStateByCommands(_0x36d793,_0x144d76,_0xa17f89)};else _0x144d76=[_0x1126a0(0x220),'pools',_0x1126a0(0x100),_0x1126a0(0x1c4),_0x1126a0(0x19f)];let _0x386822={};_0x386822[_0x1126a0(0x13c)]=await getVersionInfo(_0x36d793)[_0x1126a0(0x1fa)](_0x235d74=>{const _0x50bfea=_0x1126a0;return _0x235d74[_0x50bfea(0xe9)]&&(_0xa17f89=_0x235d74['apiVersion']),_0x235d74;})['catch'](_0x111ca6=>{const _0x13da36=_0x1126a0;return{'error':_0x111ca6[_0x13da36(0x1a8)],'stack':_0x111ca6[_0x13da36(0x146)]};}),_0x386822[_0x1126a0(0xba)]=await getMinerInfo({'ipAddress':_0x36d793})[_0x1126a0(0x154)](_0x260ac8=>{const _0x68517c=_0x1126a0;return{'error':_0x260ac8[_0x68517c(0x1a8)],'stack':_0x260ac8[_0x68517c(0x146)]};});_0x386822[_0x1126a0(0xba)]?_0x386822[_0x1126a0(0x1a6)]=await getKernelLogs(_0x386822)[_0x1126a0(0x154)](_0x416900=>{const _0x2dc223=_0x1126a0;return{'error':_0x416900[_0x2dc223(0x1a8)],'stack':_0x416900['stack']};}):(_0x386822['minerInfo']=_0x1126a0(0x219),_0x386822['log']=_0x1126a0(0x178));_0x386822[_0x1126a0(0x210)]=await getMinerSystemInfo({'ipAddress':_0x36d793,'minerTyped':_0x54123b,'apiVersion':_0xa17f89},_0x386822['versionInfo'])['catch'](_0x2c8bde=>{const _0x3001d4=_0x1126a0;return{'error':_0x2c8bde[_0x3001d4(0x1a8)],'stack':_0x2c8bde[_0x3001d4(0x146)]};});_0x386822['minerSystemInfo'][_0x1126a0(0xe9)]&&(_0xa17f89=_0x386822[_0x1126a0(0x13c)][_0x1126a0(0xe9)]);if(_0xa17f89){_0x54123b=getMinerTypeMap(_0x386822['minerSystemInfo'])||{},_0x386822[_0x1126a0(0x1ad)]=await getMinerStatus({'ipAddress':_0x36d793,'minerTyped':_0x54123b,'apiVersion':_0xa17f89})[_0x1126a0(0x154)](_0x5cf441=>{const _0x5d1f56=_0x1126a0;return{'error':_0x5cf441[_0x5d1f56(0x1a8)],'stack':_0x5cf441[_0x5d1f56(0x146)]};});const _0x3cc1b9=await getRemotesPools({'ipAddress':_0x36d793,'apiVersion':_0xa17f89},_0x54123b)[_0x1126a0(0x154)](_0x202123=>{const _0x57240f=_0x1126a0;return{'info':_0x57240f(0x14d),'error':_0x202123[_0x57240f(0x1a8)],'stack':_0x202123['stack']};});if(Array[_0x1126a0(0x20a)](_0x3cc1b9['pools'])){const _0x42efe8=_0x3cc1b9[_0x1126a0(0x18e)][_0x1126a0(0xca)](_0x2bc8d7=>_0x2bc8d7[_0x1126a0(0x153)]),{accountName:_0x31d1f1,workerName:_0x1fb11e,workerTypeNumber:_0xc40fcc}=await extractAccountAndWorkerNumber({'poolWorkers':_0x42efe8})||{};_0x386822['remotesPools']={'accountName':_0x31d1f1,'workerName':_0x1fb11e,'workerTypeNumber':_0xc40fcc,..._0x3cc1b9,'poolWorkers':_0x42efe8};}}return!_0x386822[_0x1126a0(0x1ad)]&&(_0x386822['minerStatus']=_0x1126a0(0x1d9)),!_0x386822['remotesPools']&&(_0x386822[_0x1126a0(0x17f)]=_0x1126a0(0x1ca)),_0x386822[_0x1126a0(0x22a)]=await getAllMinerStateByCommands(_0x36d793,_0x144d76,_0xa17f89)[_0x1126a0(0x154)](_0x3e1e0d=>{const _0xe284eb=_0x1126a0;return{'error':_0x3e1e0d[_0xe284eb(0x1a8)],'stack':_0x3e1e0d['stack']};}),_0x386822;}async function modifyMinerStates({ipAddress:_0x276df6,brand:_0x2f727f,username:_0x12d1f6,worker:_0x4e91a4}){const _0x574f5d=_0x423be7;let _0x4998f5=_0x2f727f?{'brand':_0x2f727f}:null,_0x1e5fce=_0x2f727f,_0x4146b6={};_0x4146b6['versionInfo']=await getVersionInfo(_0x276df6)[_0x574f5d(0x1fa)](_0x30cfe6=>{const _0x489047=_0x574f5d;return _0x30cfe6[_0x489047(0xe9)]&&(_0x1e5fce=_0x30cfe6[_0x489047(0xe9)]),_0x30cfe6;})[_0x574f5d(0x154)](_0x480c3a=>{return{'error':_0x480c3a['message'],'stack':_0x480c3a['stack']};});let _0x17b87d=await getMinerInfo({'ipAddress':_0x276df6})[_0x574f5d(0x154)](_0x2acf56=>{return{'error':_0x2acf56['message'],'stack':_0x2acf56['stack']};});if(_0x17b87d){if(_0x12d1f6||_0x4e91a4){const {condition:condition={},ipAddress:_0x257eaa,apiVersion:_0x3d464b}=_0x17b87d;let {pools:_0x353899}=condition;return _0x4146b6['activePools']=_0x353899,_0x4146b6[_0x574f5d(0x1b6)]=await getRemotesPools({'ipAddress':_0x257eaa,'apiVersion':_0x3d464b},_0x4998f5)[_0x574f5d(0x154)](_0x4396bb=>{const _0x514a80=_0x574f5d;return{'info':'getRemotesPools\x20failed!!!','error':_0x4396bb[_0x514a80(0x1a8)],'stack':_0x4396bb['stack']};}),!_0x353899&&(_0x353899=remotePools['pools']),Array[_0x574f5d(0x20a)](_0x353899)?(_0x12d1f6&&_0x353899['forEach'](_0xa58b5f=>{const _0x100f06=_0x574f5d;_0xa58b5f['user']=_0xa58b5f[_0x100f06(0x153)][_0x100f06(0x141)](/^[^\.]+\./,_0x12d1f6+'.');}),_0x4e91a4&&_0x353899[_0x574f5d(0x222)](_0x4e2510=>{const _0xa0ce0c=_0x574f5d;_0x4e2510[_0xa0ce0c(0x153)]=_0x4e2510[_0xa0ce0c(0x153)][_0xa0ce0c(0x141)](/\..+$/,'.'+_0x4e91a4);}),_0x4146b6[_0x574f5d(0x145)]=await updateMinerSettings({'minerInfo':_0x4146b6['minerInfo'],'minerTyped':{},'pools':_0x353899,'apiVersion':_0x3d464b})):_0x4146b6['poolsReset']=_0x574f5d(0x1cb),_0x4146b6;}}else{if(_0x12d1f6)return _0x4146b6[_0x574f5d(0x145)]=_0x574f5d(0x18b)+_0x276df6+_0x574f5d(0x122)+_0x276df6+_0x574f5d(0x19c),_0x4146b6;else _0x4146b6[_0x574f5d(0xba)]=_0x574f5d(0x231)+_0x276df6+_0x574f5d(0x122)+_0x276df6+_0x574f5d(0x19c),_0x4146b6[_0x574f5d(0x1a6)]='Not\x20reading\x20logs!\x20minerInfo\x20is\x20not\x20available.';}return _0x4146b6;}module[_0x423be7(0xe2)]={'MAX_POOLS':MAX_POOLS,'buildSetMinerSettingsRequestBody':buildSetMinerSettingsRequestBody,'getRemotesPools':getRemotesPools,'getMinerSystemInfo':getMinerSystemInfo,'getMinerSettingsUrl':getMinerSettingsUrl,'getMinerSettings':getMinerSettings,'getSummaryAndPools':getSummaryAndPools,'getUpdateMinerSettingsUrl':getUpdateMinerSettingsUrl,'getMinerLandingPageUrl':getMinerLandingPageUrl,'updateMinerSettings':updateMinerSettings,'updateMinerNetworkSettings':updateMinerNetworkSettings,'updateMinerFirmware':updateMinerFirmware,'retrieveMinerNetworkDiagnostics':retrieveMinerNetworkDiagnostics,'updateEnableSSH':updateEnableSSH,'getWallets':getWallets,'createMinerInfo':createMinerInfo,'getMinerInfo':getMinerInfo,'getPoolTemplates':getPoolTemplates,'getMinerStatus':getMinerStatus,'havePoolConfigsChanged':havePoolConfigsChanged,'validateMinerConfig':validateMinerConfig,'getRemotesPoolConfig':getRemotesPoolConfig,'extractAccountAndWorkerNumber':extractAccountAndWorkerNumber,'upsertMinerInfo':upsertMinerInfo,'updateMinerInfo':updateMinerInfo,'getPoolConfigs':getPoolConfigs,'getMinerReboot':getMinerReboot,'getMinerReset':getMinerReset,'getMinerType':getMinerType,'getMinerTypeMap':getMinerTypeMap,'getUniqueWorkerName':getUniqueWorkerName,'getMinerFilterClause':getMinerFilterClause,'getMinerLayoutFields':getMinerLayoutFields,'getKernelLogs':getKernelLogs,'getPoolIDs':getPoolIDs,'deriveApiVersion':deriveApiVersion,'enableFirmwareUpload':enableFirmwareUpload,'completeMinerVersion':completeMinerVersion,'checkMinerStates':checkMinerStates,'modifyMinerStates':modifyMinerStates,'trendsAggregate':trendsAggregate};