/* Copyright (C) 9208-9721 Quebec, Inc - All Rights Reserved
* Unauthorized copying of this file, via any medium is strictly prohibited
* Proprietary and confidential
* Written by Jason Rudland <jason.g.rudland@gmail.com>, September 2022
*/'use strict';const _0x3a8159=_0x44e2;(function(_0x21db1f,_0x1fb8ee){const _0x258e89=_0x44e2,_0x4d5afa=_0x21db1f();while(!![]){try{const _0x590250=-parseInt(_0x258e89(0x1f4))/0x1+-parseInt(_0x258e89(0x1e4))/0x2+-parseInt(_0x258e89(0x1ea))/0x3*(parseInt(_0x258e89(0x1e6))/0x4)+parseInt(_0x258e89(0x1d4))/0x5*(parseInt(_0x258e89(0x1cf))/0x6)+-parseInt(_0x258e89(0x1e1))/0x7*(-parseInt(_0x258e89(0x1dd))/0x8)+-parseInt(_0x258e89(0x1e2))/0x9*(parseInt(_0x258e89(0x206))/0xa)+parseInt(_0x258e89(0x1e5))/0xb;if(_0x590250===_0x1fb8ee)break;else _0x4d5afa['push'](_0x4d5afa['shift']());}catch(_0x4ab31a){_0x4d5afa['push'](_0x4d5afa['shift']());}}}(_0x28de,0x4f2dc));const rp=require(_0x3a8159(0x1f8)),fetch=require(_0x3a8159(0x1e7)),{FormData}=require('formdata-node'),pool={'maxSockets':0xc8},Queue=require('bull'),{promisify}=require('util'),messageServices=process[_0x3a8159(0x1cd)][_0x3a8159(0x1fe)],sendQueue=new Queue('web-request'),receiveQueue=new Queue(_0x3a8159(0x1d6)),errorQueue=new Queue(_0x3a8159(0x208)),DigestFetch=require('digest-fetch'),querystring=require(_0x3a8159(0x1cb));let callbacks={},cbIndex=parseInt(Number(process['hrtime'][_0x3a8159(0x1d3)]())/0x3e8);receiveQueue[_0x3a8159(0x1cc)](async _0x3648d4=>{const _0x86ac8f=_0x3a8159,_0x3511a9=_0x3648d4[_0x86ac8f(0x1c9)]['payload'],_0x54ca5b=_0x3511a9['jobid'];console[_0x86ac8f(0x1d2)](_0x86ac8f(0x200),_0x54ca5b),console[_0x86ac8f(0x202)]('Job\x20received\x20job:',_0x3511a9);if(callbacks[_0x54ca5b])return console['trace'](_0x86ac8f(0x1f7),_0x54ca5b),callbacks[_0x54ca5b](_0x3511a9[_0x86ac8f(0x1df)],_0x3511a9['response']),delete callbacks[_0x54ca5b];else console[_0x86ac8f(0x203)](_0x86ac8f(0x1ca),_0x54ca5b,_0x86ac8f(0x1fa));return _0x3511a9;}),errorQueue['process'](async _0x2c083a=>{const _0x551ca3=_0x3a8159;console['error'](_0x551ca3(0x207),_0x2c083a);}),errorQueue['on']('global:failed',(_0x2b0bfa,_0x394b2c)=>{const _0x26fd5f=_0x3a8159;console[_0x26fd5f(0x1df)]('Flushed\x20global\x20error\x20queue\x20failure:'[_0x26fd5f(0x205)],_0x394b2c);}),errorQueue['on'](_0x3a8159(0x1ec),(_0x33540a,_0x537bc8)=>{const _0x497e3f=_0x3a8159;console['error'](_0x497e3f(0x1eb)[_0x497e3f(0x205)],_0x537bc8);});const publish=/^\b(web-requester)\b$/[_0x3a8159(0x1da)](messageServices)?promisify(pub):fetchWrapper;async function fetchWrapper(_0x38bd11){const _0x5c3111=_0x3a8159,{auth:_0x35138c}=_0x38bd11,{user:_0xb19bed,pass:_0x1a1dec,digestOptions:_0x27eba5}=_0x35138c||{},{uri:_0x3e7242,headers:headers={},method:_0x3ec944,form:_0x15e92c}=_0x38bd11,_0x4ca37a=headers[_0x5c3111(0x1d5)],_0x4deea0=/json/i[_0x5c3111(0x1da)](_0x4ca37a),_0x348655=/multipart/i[_0x5c3111(0x1da)](_0x4ca37a),_0x421048={'headers':headers,'method':_0x3ec944};if(_0x15e92c){if(_0x348655){_0x38bd11[_0x5c3111(0x1ed)]=JSON[_0x5c3111(0x1ee)](JSON[_0x5c3111(0x1ef)](querystring[_0x5c3111(0x1ee)](_0x15e92c)));;delete _0x38bd11[_0x5c3111(0x1f2)],delete _0x38bd11[_0x5c3111(0x1e0)];}else{if(/string/i[_0x5c3111(0x1da)](typeof _0x15e92c))_0x421048[_0x5c3111(0x1e9)]=_0x15e92c;else{const _0x19a553=_0x4deea0?JSON:querystring;_0x421048[_0x5c3111(0x1e9)]=_0x19a553[_0x5c3111(0x1ef)](_0x15e92c);}}}let _0x1935a8;if(_0x27eba5&&!_0x348655){const _0x30aef3=new DigestFetch(_0xb19bed,_0x1a1dec,_0x27eba5);_0x1935a8=await _0x30aef3[_0x5c3111(0x1e8)](_0x3e7242,_0x421048);}else/\/luci(\/|$)/i[_0x5c3111(0x1da)](_0x3e7242)?(_0x38bd11[_0x5c3111(0x1ff)]=_0x4deea0,_0x1935a8=await rp(_0x38bd11)[_0x5c3111(0x1e3)](_0x56ed0d=>{return _0x56ed0d;})[_0x5c3111(0x1ce)](_0x147e16=>{const _0x1e1180=_0x5c3111,_0x62c6ce=_0x147e16[_0x1e1180(0x1f6)]||_0x147e16,_0x51b868=_0x62c6ce[_0x1e1180(0x1fc)];return!/^\s*30[27]/[_0x1e1180(0x1da)](_0x51b868)&&console['warn']('Error\x20calling\x20remote\x20server\x20',_0x38bd11,_0x147e16),_0x62c6ce;})):_0x1935a8=await fetch(_0x3e7242,_0x421048);return _0x1935a8;}async function ensureJson(_0x571bd7){const _0x591365=_0x3a8159,{headers:headers={},statusCode:_0x24105e}=_0x571bd7,_0x3580c2=headers[_0x591365(0x1de)]?headers[_0x591365(0x1de)](_0x591365(0x1d5)):headers[_0x591365(0x1d0)],_0x1afb68=/json/[_0x591365(0x1da)](_0x3580c2);let _0x3928a2='';if(_0x1afb68)_0x3928a2=await _0x571bd7[_0x591365(0x1ff)]();else{if(_0x571bd7['text']){_0x3928a2=await _0x571bd7['text']();if(/^\s*{/[_0x591365(0x1da)](_0x3928a2))try{_0x3928a2=JSON[_0x591365(0x1ee)](_0x3928a2);}catch(_0x198613){_0x3928a2={'statusCode':_0x24105e,'response':_0x3928a2};}else _0x3928a2={'statusCode':_0x24105e,'response':_0x3928a2};}}return _0x3928a2;}async function ensureText(_0x510ab5){const _0x5e654b=_0x3a8159;let _0x5be381;return _0x5be381=_0x510ab5[_0x5e654b(0x1fd)]?await _0x510ab5['text']():_0x510ab5[_0x5e654b(0x1fb)]||_0x510ab5,_0x5be381;}async function setAuthHeader(_0x4d4f06){const _0x16e6ec=_0x3a8159,_0x1b7964=_0x4d4f06[_0x16e6ec(0x1f9)],{auth:_0x3b9a6c}=_0x4d4f06,{user:_0x1167a2,pass:_0x2f744f}=_0x3b9a6c;if(/basic/['test'](_0x3b9a6c['type'])){let _0x5ad0ec=_0x16e6ec(0x201)+Buffer[_0x16e6ec(0x1d8)](_0x1167a2+':'+_0x2f744f,'binary')['toString'](_0x16e6ec(0x1d1));!_0x4d4f06['headers']&&(_0x4d4f06[_0x16e6ec(0x1f5)]={}),_0x4d4f06[_0x16e6ec(0x1f5)][_0x16e6ec(0x1f1)]=_0x5ad0ec;}else{let _0xb69a5e=_0x4d4f06['uri'][_0x16e6ec(0x1db)](_0x16e6ec(0x204));_0x4d4f06[_0x16e6ec(0x1f9)]=_0xb69a5e[0x0]+_0x16e6ec(0x204)+_0x1167a2+':'+_0x2f744f+'@'+_0xb69a5e[0x1];}}function _0x44e2(_0x4a0fbd,_0x3bdbd6){const _0x28de5f=_0x28de();return _0x44e2=function(_0x44e255,_0x1816a6){_0x44e255=_0x44e255-0x1c9;let _0x4ac227=_0x28de5f[_0x44e255];return _0x4ac227;},_0x44e2(_0x4a0fbd,_0x3bdbd6);}async function pub(_0x29c738,_0x907923){const _0x2664aa=_0x3a8159,_0x5638=++cbIndex;console['trace'](_0x2664aa(0x1f3),_0x5638),console[_0x2664aa(0x202)]('Published\x20job:',_0x5638,_0x29c738);const _0x381a96=_0x29c738['parser']||'',_0x260f6e={'jobid':_0x5638,'options':_0x29c738,'parser':_0x381a96};callbacks[_0x5638]=_0x907923,sendQueue['add'](_0x260f6e);}async function getHTML(_0x958052={}){const _0xbd0aa0=_0x3a8159,_0x1302a0={'pool':pool,'timeout':0x1f40,..._0x958052},_0x250ccc=await publish(_0x1302a0)[_0xbd0aa0(0x1e3)](async _0x3fe0ca=>{const _0x4ae1ae=await ensureText(_0x3fe0ca);return _0x4ae1ae;})[_0xbd0aa0(0x1ce)](_0x61f833=>{return _0x61f833;});return _0x250ccc;}async function getJSON(_0x29f751={}){const _0x18d0ef=_0x3a8159,_0x26f933={'pool':pool,'timeout':0x1f40,..._0x29f751,'json':!![]},_0x5820dc=await publish(_0x26f933)['then'](async _0x33976e=>{const _0x46c5d6=await ensureJson(_0x33976e);return _0x46c5d6;})[_0x18d0ef(0x1ce)](_0x1d97fc=>{return _0x1d97fc;});return _0x5820dc;}async function postJSON(_0xa64c8f){const _0x1e1839={'method':'POST',..._0xa64c8f,'json':!![]},_0x498b47=await publish(_0x1e1839)['then'](async _0x59a527=>{const _0x49f864=await ensureJson(_0x59a527);return _0x49f864;})['catch'](_0x1b549f=>{return _0x1b549f;});return _0x498b47;}async function formPost(_0x256e93){const _0x3fa168=_0x3a8159,_0x435a6c={'timeout':0x1d4c0,..._0x256e93,'method':_0x3fa168(0x1d7)},_0x2f95da=await publish(_0x435a6c)[_0x3fa168(0x1e3)](async _0x2dd7b1=>{const {headers:_0x34623d,statusCode:_0xfd7c83}=_0x2dd7b1,_0x14652d={'headers':_0x34623d,'body':await ensureJson(_0x2dd7b1),'statusCode':_0xfd7c83};return _0x14652d;})[_0x3fa168(0x1ce)](_0x45decf=>{return _0x45decf;});return _0x2f95da;}async function filePost(_0xbe6fdf){const _0x2c5854=_0x3a8159,_0x91a084={'timeout':0x1d4c0,..._0xbe6fdf,'method':_0x2c5854(0x1d7)},_0xa11c75=await fetch(_0x91a084)[_0x2c5854(0x1ce)](_0xee700a=>_0xee700a);return _0xa11c75;}function _0x28de(){const _0x47efbf=['Published\x20jobid:','249882kLPcbG','headers','response','Called\x20back\x20jobid:','request-promise-native','uri','.\x20The\x20server\x20probably\x20restarted.','message','statusCode','text','MESSAGE_SERVICES','json','Job\x20received\x20jobid:','Basic\x20','debug','warn','://','job','10afAUVe','Flushed\x20queue\x20error\x20to\x20console:','web-error','data','No\x20callback\x20for\x20Jobid:','querystring','process','env','catch','1428774qZjQjr','content-type','base64','trace','bigint','5FDmuZG','Content-Type','web-response','POST','from','url','test','split','exports','68792OiXRsB','get','error','auth','280BuWZga','2393883qoNSpf','then','239880jwKtuq','7059074OpGzUo','1054792SKQGxG','node-fetch','fetch','body','3gnGQHY','Flushed\x20global\x20error\x20queue\x20error:','global:error','formData','parse','stringify','sendImmediately','Authorization','form'];_0x28de=function(){return _0x47efbf;};return _0x28de();}async function requestPost(_0x518bc0){const _0x269265=_0x3a8159,_0x1b88bd=alignPostOptions(_0x518bc0);_0x1b88bd[_0x269265(0x1e9)]=_0x518bc0[_0x269265(0x1e9)];const {body:_0x37f728}=await formPost(_0x1b88bd);return _0x37f728;}function alignPostOptions(_0x10de17){const _0x47bd4f=_0x3a8159,_0x521185=_0x10de17[_0x47bd4f(0x1d9)],_0x2c2612={'Content-Type':_0x10de17[_0x47bd4f(0x1f5)]['Content-Type']};var _0x3020af={'uri':_0x521185,'headers':_0x2c2612};return _0x10de17[_0x47bd4f(0x1e0)]&&(_0x3020af[_0x47bd4f(0x1e0)]=_0x10de17[_0x47bd4f(0x1e0)],_0x3020af[_0x47bd4f(0x1e0)][_0x47bd4f(0x1f0)]=![]),_0x3020af;}module[_0x3a8159(0x1dc)]={'formPost':formPost,'filePost':filePost,'getJSON':getJSON,'postJSON':postJSON,'getHTML':getHTML,'requestPost':requestPost};